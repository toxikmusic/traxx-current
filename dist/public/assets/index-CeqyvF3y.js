var UI=Object.defineProperty;var Sv=e=>{throw TypeError(e)};var $I=(e,t,r)=>t in e?UI(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var $=(e,t,r)=>$I(e,typeof t!="symbol"?t+"":t,r),Mh=(e,t,r)=>t.has(e)||Sv("Cannot "+r);var O=(e,t,r)=>(Mh(e,t,"read from private field"),r?r.call(e):t.get(e)),Ue=(e,t,r)=>t.has(e)?Sv("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),_e=(e,t,r,n)=>(Mh(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),Xe=(e,t,r)=>(Mh(e,t,"access private method"),r);var _u=(e,t,r,n)=>({set _(s){_e(e,t,s,r)},get _(){return O(e,t,n)}});function BI(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in e)){const o=Object.getOwnPropertyDescriptor(n,s);o&&Object.defineProperty(e,s,o.get?o:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=r(s);fetch(s.href,o)}})();var Us=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Xg(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function zI(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var s=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return e[n]}})}),r}var _N={exports:{}},Mf={},CN={exports:{}},it={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tu=Symbol.for("react.element"),VI=Symbol.for("react.portal"),WI=Symbol.for("react.fragment"),qI=Symbol.for("react.strict_mode"),HI=Symbol.for("react.profiler"),KI=Symbol.for("react.provider"),GI=Symbol.for("react.context"),QI=Symbol.for("react.forward_ref"),YI=Symbol.for("react.suspense"),ZI=Symbol.for("react.memo"),XI=Symbol.for("react.lazy"),jv=Symbol.iterator;function JI(e){return e===null||typeof e!="object"?null:(e=jv&&e[jv]||e["@@iterator"],typeof e=="function"?e:null)}var EN={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},kN=Object.assign,TN={};function hl(e,t,r){this.props=e,this.context=t,this.refs=TN,this.updater=r||EN}hl.prototype.isReactComponent={};hl.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};hl.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function PN(){}PN.prototype=hl.prototype;function Jg(e,t,r){this.props=e,this.context=t,this.refs=TN,this.updater=r||EN}var ey=Jg.prototype=new PN;ey.constructor=Jg;kN(ey,hl.prototype);ey.isPureReactComponent=!0;var Nv=Array.isArray,RN=Object.prototype.hasOwnProperty,ty={current:null},AN={key:!0,ref:!0,__self:!0,__source:!0};function IN(e,t,r){var n,s={},o=null,a=null;if(t!=null)for(n in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(o=""+t.key),t)RN.call(t,n)&&!AN.hasOwnProperty(n)&&(s[n]=t[n]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)s[n]===void 0&&(s[n]=l[n]);return{$$typeof:tu,type:e,key:o,ref:a,props:s,_owner:ty.current}}function eD(e,t){return{$$typeof:tu,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function ry(e){return typeof e=="object"&&e!==null&&e.$$typeof===tu}function tD(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var _v=/\/+/g;function Oh(e,t){return typeof e=="object"&&e!==null&&e.key!=null?tD(""+e.key):t.toString(36)}function td(e,t,r,n,s){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case tu:case VI:a=!0}}if(a)return a=e,s=s(a),e=n===""?"."+Oh(a,0):n,Nv(s)?(r="",e!=null&&(r=e.replace(_v,"$&/")+"/"),td(s,t,r,"",function(u){return u})):s!=null&&(ry(s)&&(s=eD(s,r+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(_v,"$&/")+"/")+e)),t.push(s)),1;if(a=0,n=n===""?".":n+":",Nv(e))for(var l=0;l<e.length;l++){o=e[l];var c=n+Oh(o,l);a+=td(o,t,r,c,s)}else if(c=JI(e),typeof c=="function")for(e=c.call(e),l=0;!(o=e.next()).done;)o=o.value,c=n+Oh(o,l++),a+=td(o,t,r,c,s);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function Cu(e,t,r){if(e==null)return e;var n=[],s=0;return td(e,n,"","",function(o){return t.call(r,o,s++)}),n}function rD(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Or={current:null},rd={transition:null},nD={ReactCurrentDispatcher:Or,ReactCurrentBatchConfig:rd,ReactCurrentOwner:ty};function DN(){throw Error("act(...) is not supported in production builds of React.")}it.Children={map:Cu,forEach:function(e,t,r){Cu(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Cu(e,function(){t++}),t},toArray:function(e){return Cu(e,function(t){return t})||[]},only:function(e){if(!ry(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};it.Component=hl;it.Fragment=WI;it.Profiler=HI;it.PureComponent=Jg;it.StrictMode=qI;it.Suspense=YI;it.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nD;it.act=DN;it.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=kN({},e.props),s=e.key,o=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,a=ty.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)RN.call(t,c)&&!AN.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:tu,type:e.type,key:s,ref:o,props:n,_owner:a}};it.createContext=function(e){return e={$$typeof:GI,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:KI,_context:e},e.Consumer=e};it.createElement=IN;it.createFactory=function(e){var t=IN.bind(null,e);return t.type=e,t};it.createRef=function(){return{current:null}};it.forwardRef=function(e){return{$$typeof:QI,render:e}};it.isValidElement=ry;it.lazy=function(e){return{$$typeof:XI,_payload:{_status:-1,_result:e},_init:rD}};it.memo=function(e,t){return{$$typeof:ZI,type:e,compare:t===void 0?null:t}};it.startTransition=function(e){var t=rd.transition;rd.transition={};try{e()}finally{rd.transition=t}};it.unstable_act=DN;it.useCallback=function(e,t){return Or.current.useCallback(e,t)};it.useContext=function(e){return Or.current.useContext(e)};it.useDebugValue=function(){};it.useDeferredValue=function(e){return Or.current.useDeferredValue(e)};it.useEffect=function(e,t){return Or.current.useEffect(e,t)};it.useId=function(){return Or.current.useId()};it.useImperativeHandle=function(e,t,r){return Or.current.useImperativeHandle(e,t,r)};it.useInsertionEffect=function(e,t){return Or.current.useInsertionEffect(e,t)};it.useLayoutEffect=function(e,t){return Or.current.useLayoutEffect(e,t)};it.useMemo=function(e,t){return Or.current.useMemo(e,t)};it.useReducer=function(e,t,r){return Or.current.useReducer(e,t,r)};it.useRef=function(e){return Or.current.useRef(e)};it.useState=function(e){return Or.current.useState(e)};it.useSyncExternalStore=function(e,t,r){return Or.current.useSyncExternalStore(e,t,r)};it.useTransition=function(){return Or.current.useTransition()};it.version="18.3.1";CN.exports=it;var m=CN.exports;const $e=Xg(m),MN=BI({__proto__:null,default:$e},[m]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sD=m,iD=Symbol.for("react.element"),oD=Symbol.for("react.fragment"),aD=Object.prototype.hasOwnProperty,lD=sD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,cD={key:!0,ref:!0,__self:!0,__source:!0};function ON(e,t,r){var n,s={},o=null,a=null;r!==void 0&&(o=""+r),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(a=t.ref);for(n in t)aD.call(t,n)&&!cD.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)s[n]===void 0&&(s[n]=t[n]);return{$$typeof:iD,type:e,key:o,ref:a,props:s,_owner:lD.current}}Mf.Fragment=oD;Mf.jsx=ON;Mf.jsxs=ON;_N.exports=Mf;var i=_N.exports;typeof window<"u"&&(window.global=window);typeof global>"u"&&(window.global=window);const uD=window.WebSocket;class dD extends WebSocket{constructor(t,r){var s;const n=t instanceof URL?t.toString():t;if((window.location.hostname.includes(".repl.")||window.location.hostname.includes(".replit.")||window.location.hostname.includes(".kirk.replit.dev"))&&(n.includes("true:")||n.includes("wss://true:")||n.includes("ws://true:"))){console.log("Fixing invalid WebSocket URL:",n);const o=window.location.hostname,a=((s=n.match(/:(\d+)/))==null?void 0:s[1])||"24678";let l;n.startsWith("wss://")?l=`wss://${o}:${a}${n.split(a)[1]||""}`:n.startsWith("ws://")?l=`ws://${o}:${a}${n.split(a)[1]||""}`:l=`${window.location.protocol==="https:"?"wss:":"ws:"}//${o}:${a}${n.split(a)[1]||""}`,console.log("Fixed WebSocket URL:",l),super(l,r);return}super(n,r)}}window.WebSocket=dD;function fD(){return console.log("Replit WebSocket host fixer installed"),()=>{window.WebSocket=uD,console.log("Replit WebSocket host fixer removed")}}var LN={exports:{}},on={},FN={exports:{}},UN={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(B,z){var ue=B.length;B.push(z);e:for(;0<ue;){var ae=ue-1>>>1,X=B[ae];if(0<s(X,z))B[ae]=z,B[ue]=X,ue=ae;else break e}}function r(B){return B.length===0?null:B[0]}function n(B){if(B.length===0)return null;var z=B[0],ue=B.pop();if(ue!==z){B[0]=ue;e:for(var ae=0,X=B.length,ee=X>>>1;ae<ee;){var je=2*(ae+1)-1,Ce=B[je],D=je+1,R=B[D];if(0>s(Ce,ue))D<X&&0>s(R,Ce)?(B[ae]=R,B[D]=ue,ae=D):(B[ae]=Ce,B[je]=ue,ae=je);else if(D<X&&0>s(R,ue))B[ae]=R,B[D]=ue,ae=D;else break e}}return z}function s(B,z){var ue=B.sortIndex-z.sortIndex;return ue!==0?ue:B.id-z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var c=[],u=[],d=1,f=null,p=3,v=!1,j=!1,y=!1,S=typeof setTimeout=="function"?setTimeout:null,h=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(B){for(var z=r(u);z!==null;){if(z.callback===null)n(u);else if(z.startTime<=B)n(u),z.sortIndex=z.expirationTime,t(c,z);else break;z=r(u)}}function _(B){if(y=!1,w(B),!j)if(r(c)!==null)j=!0,Z(E);else{var z=r(u);z!==null&&fe(_,z.startTime-B)}}function E(B,z){j=!1,y&&(y=!1,h(M),M=-1),v=!0;var ue=p;try{for(w(z),f=r(c);f!==null&&(!(f.expirationTime>z)||B&&!re());){var ae=f.callback;if(typeof ae=="function"){f.callback=null,p=f.priorityLevel;var X=ae(f.expirationTime<=z);z=e.unstable_now(),typeof X=="function"?f.callback=X:f===r(c)&&n(c),w(z)}else n(c);f=r(c)}if(f!==null)var ee=!0;else{var je=r(u);je!==null&&fe(_,je.startTime-z),ee=!1}return ee}finally{f=null,p=ue,v=!1}}var I=!1,P=null,M=-1,F=5,W=-1;function re(){return!(e.unstable_now()-W<F)}function q(){if(P!==null){var B=e.unstable_now();W=B;var z=!0;try{z=P(!0,B)}finally{z?Y():(I=!1,P=null)}}else I=!1}var Y;if(typeof g=="function")Y=function(){g(q)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,ne=G.port2;G.port1.onmessage=q,Y=function(){ne.postMessage(null)}}else Y=function(){S(q,0)};function Z(B){P=B,I||(I=!0,Y())}function fe(B,z){M=S(function(){B(e.unstable_now())},z)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(B){B.callback=null},e.unstable_continueExecution=function(){j||v||(j=!0,Z(E))},e.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<B?Math.floor(1e3/B):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(B){switch(p){case 1:case 2:case 3:var z=3;break;default:z=p}var ue=p;p=z;try{return B()}finally{p=ue}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(B,z){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var ue=p;p=B;try{return z()}finally{p=ue}},e.unstable_scheduleCallback=function(B,z,ue){var ae=e.unstable_now();switch(typeof ue=="object"&&ue!==null?(ue=ue.delay,ue=typeof ue=="number"&&0<ue?ae+ue:ae):ue=ae,B){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=ue+X,B={id:d++,callback:z,priorityLevel:B,startTime:ue,expirationTime:X,sortIndex:-1},ue>ae?(B.sortIndex=ue,t(u,B),r(c)===null&&B===r(u)&&(y?(h(M),M=-1):y=!0,fe(_,ue-ae))):(B.sortIndex=X,t(c,B),j||v||(j=!0,Z(E))),B},e.unstable_shouldYield=re,e.unstable_wrapCallback=function(B){var z=p;return function(){var ue=p;p=z;try{return B.apply(this,arguments)}finally{p=ue}}}})(UN);FN.exports=UN;var hD=FN.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mD=m,nn=hD;function ge(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var $N=new Set,fc={};function Vo(e,t){Za(e,t),Za(e+"Capture",t)}function Za(e,t){for(fc[e]=t,e=0;e<t.length;e++)$N.add(t[e])}var $s=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Gm=Object.prototype.hasOwnProperty,pD=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Cv={},Ev={};function gD(e){return Gm.call(Ev,e)?!0:Gm.call(Cv,e)?!1:pD.test(e)?Ev[e]=!0:(Cv[e]=!0,!1)}function yD(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function xD(e,t,r,n){if(t===null||typeof t>"u"||yD(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Lr(e,t,r,n,s,o,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var hr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){hr[e]=new Lr(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];hr[t]=new Lr(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){hr[e]=new Lr(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){hr[e]=new Lr(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){hr[e]=new Lr(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){hr[e]=new Lr(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){hr[e]=new Lr(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){hr[e]=new Lr(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){hr[e]=new Lr(e,5,!1,e.toLowerCase(),null,!1,!1)});var ny=/[\-:]([a-z])/g;function sy(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(ny,sy);hr[t]=new Lr(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(ny,sy);hr[t]=new Lr(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(ny,sy);hr[t]=new Lr(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){hr[e]=new Lr(e,1,!1,e.toLowerCase(),null,!1,!1)});hr.xlinkHref=new Lr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){hr[e]=new Lr(e,1,!1,e.toLowerCase(),null,!0,!0)});function iy(e,t,r,n){var s=hr.hasOwnProperty(t)?hr[t]:null;(s!==null?s.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(xD(t,r,s,n)&&(r=null),n||s===null?gD(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=r===null?s.type===3?!1:"":r:(t=s.attributeName,n=s.attributeNamespace,r===null?e.removeAttribute(t):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Qs=mD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Eu=Symbol.for("react.element"),da=Symbol.for("react.portal"),fa=Symbol.for("react.fragment"),oy=Symbol.for("react.strict_mode"),Qm=Symbol.for("react.profiler"),BN=Symbol.for("react.provider"),zN=Symbol.for("react.context"),ay=Symbol.for("react.forward_ref"),Ym=Symbol.for("react.suspense"),Zm=Symbol.for("react.suspense_list"),ly=Symbol.for("react.memo"),ai=Symbol.for("react.lazy"),VN=Symbol.for("react.offscreen"),kv=Symbol.iterator;function Cl(e){return e===null||typeof e!="object"?null:(e=kv&&e[kv]||e["@@iterator"],typeof e=="function"?e:null)}var Ft=Object.assign,Lh;function Bl(e){if(Lh===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Lh=t&&t[1]||""}return`
`+Lh+e}var Fh=!1;function Uh(e,t){if(!e||Fh)return"";Fh=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),o=n.stack.split(`
`),a=s.length-1,l=o.length-1;1<=a&&0<=l&&s[a]!==o[l];)l--;for(;1<=a&&0<=l;a--,l--)if(s[a]!==o[l]){if(a!==1||l!==1)do if(a--,l--,0>l||s[a]!==o[l]){var c=`
`+s[a].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=a&&0<=l);break}}}finally{Fh=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Bl(e):""}function vD(e){switch(e.tag){case 5:return Bl(e.type);case 16:return Bl("Lazy");case 13:return Bl("Suspense");case 19:return Bl("SuspenseList");case 0:case 2:case 15:return e=Uh(e.type,!1),e;case 11:return e=Uh(e.type.render,!1),e;case 1:return e=Uh(e.type,!0),e;default:return""}}function Xm(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case fa:return"Fragment";case da:return"Portal";case Qm:return"Profiler";case oy:return"StrictMode";case Ym:return"Suspense";case Zm:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case zN:return(e.displayName||"Context")+".Consumer";case BN:return(e._context.displayName||"Context")+".Provider";case ay:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ly:return t=e.displayName||null,t!==null?t:Xm(e.type)||"Memo";case ai:t=e._payload,e=e._init;try{return Xm(e(t))}catch{}}return null}function wD(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Xm(t);case 8:return t===oy?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Oi(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function WN(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function bD(e){var t=WN(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,o=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(a){n=""+a,o.call(this,a)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ku(e){e._valueTracker||(e._valueTracker=bD(e))}function qN(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=WN(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function Cd(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Jm(e,t){var r=t.checked;return Ft({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Tv(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Oi(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function HN(e,t){t=t.checked,t!=null&&iy(e,"checked",t,!1)}function ep(e,t){HN(e,t);var r=Oi(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?tp(e,t.type,r):t.hasOwnProperty("defaultValue")&&tp(e,t.type,Oi(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Pv(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function tp(e,t,r){(t!=="number"||Cd(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var zl=Array.isArray;function Na(e,t,r,n){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Oi(r),t=null,s=0;s<e.length;s++){if(e[s].value===r){e[s].selected=!0,n&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function rp(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ge(91));return Ft({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Rv(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(ge(92));if(zl(r)){if(1<r.length)throw Error(ge(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Oi(r)}}function KN(e,t){var r=Oi(t.value),n=Oi(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function Av(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function GN(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function np(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?GN(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Tu,QN=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,s){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Tu=Tu||document.createElement("div"),Tu.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Tu.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function hc(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Zl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},SD=["Webkit","ms","Moz","O"];Object.keys(Zl).forEach(function(e){SD.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Zl[t]=Zl[e]})});function YN(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Zl.hasOwnProperty(e)&&Zl[e]?(""+t).trim():t+"px"}function ZN(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=YN(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,s):e[r]=s}}var jD=Ft({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function sp(e,t){if(t){if(jD[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ge(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ge(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ge(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ge(62))}}function ip(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var op=null;function cy(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ap=null,_a=null,Ca=null;function Iv(e){if(e=su(e)){if(typeof ap!="function")throw Error(ge(280));var t=e.stateNode;t&&(t=$f(t),ap(e.stateNode,e.type,t))}}function XN(e){_a?Ca?Ca.push(e):Ca=[e]:_a=e}function JN(){if(_a){var e=_a,t=Ca;if(Ca=_a=null,Iv(e),t)for(e=0;e<t.length;e++)Iv(t[e])}}function e_(e,t){return e(t)}function t_(){}var $h=!1;function r_(e,t,r){if($h)return e(t,r);$h=!0;try{return e_(e,t,r)}finally{$h=!1,(_a!==null||Ca!==null)&&(t_(),JN())}}function mc(e,t){var r=e.stateNode;if(r===null)return null;var n=$f(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(ge(231,t,typeof r));return r}var lp=!1;if($s)try{var El={};Object.defineProperty(El,"passive",{get:function(){lp=!0}}),window.addEventListener("test",El,El),window.removeEventListener("test",El,El)}catch{lp=!1}function ND(e,t,r,n,s,o,a,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(d){this.onError(d)}}var Xl=!1,Ed=null,kd=!1,cp=null,_D={onError:function(e){Xl=!0,Ed=e}};function CD(e,t,r,n,s,o,a,l,c){Xl=!1,Ed=null,ND.apply(_D,arguments)}function ED(e,t,r,n,s,o,a,l,c){if(CD.apply(this,arguments),Xl){if(Xl){var u=Ed;Xl=!1,Ed=null}else throw Error(ge(198));kd||(kd=!0,cp=u)}}function Wo(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function n_(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Dv(e){if(Wo(e)!==e)throw Error(ge(188))}function kD(e){var t=e.alternate;if(!t){if(t=Wo(e),t===null)throw Error(ge(188));return t!==e?null:e}for(var r=e,n=t;;){var s=r.return;if(s===null)break;var o=s.alternate;if(o===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===r)return Dv(s),e;if(o===n)return Dv(s),t;o=o.sibling}throw Error(ge(188))}if(r.return!==n.return)r=s,n=o;else{for(var a=!1,l=s.child;l;){if(l===r){a=!0,r=s,n=o;break}if(l===n){a=!0,n=s,r=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===r){a=!0,r=o,n=s;break}if(l===n){a=!0,n=o,r=s;break}l=l.sibling}if(!a)throw Error(ge(189))}}if(r.alternate!==n)throw Error(ge(190))}if(r.tag!==3)throw Error(ge(188));return r.stateNode.current===r?e:t}function s_(e){return e=kD(e),e!==null?i_(e):null}function i_(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=i_(e);if(t!==null)return t;e=e.sibling}return null}var o_=nn.unstable_scheduleCallback,Mv=nn.unstable_cancelCallback,TD=nn.unstable_shouldYield,PD=nn.unstable_requestPaint,Vt=nn.unstable_now,RD=nn.unstable_getCurrentPriorityLevel,uy=nn.unstable_ImmediatePriority,a_=nn.unstable_UserBlockingPriority,Td=nn.unstable_NormalPriority,AD=nn.unstable_LowPriority,l_=nn.unstable_IdlePriority,Of=null,ls=null;function ID(e){if(ls&&typeof ls.onCommitFiberRoot=="function")try{ls.onCommitFiberRoot(Of,e,void 0,(e.current.flags&128)===128)}catch{}}var zn=Math.clz32?Math.clz32:OD,DD=Math.log,MD=Math.LN2;function OD(e){return e>>>=0,e===0?32:31-(DD(e)/MD|0)|0}var Pu=64,Ru=4194304;function Vl(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Pd(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,s=e.suspendedLanes,o=e.pingedLanes,a=r&268435455;if(a!==0){var l=a&~s;l!==0?n=Vl(l):(o&=a,o!==0&&(n=Vl(o)))}else a=r&~s,a!==0?n=Vl(a):o!==0&&(n=Vl(o));if(n===0)return 0;if(t!==0&&t!==n&&!(t&s)&&(s=n&-n,o=t&-t,s>=o||s===16&&(o&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-zn(t),s=1<<r,n|=e[r],t&=~s;return n}function LD(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function FD(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,o=e.pendingLanes;0<o;){var a=31-zn(o),l=1<<a,c=s[a];c===-1?(!(l&r)||l&n)&&(s[a]=LD(l,t)):c<=t&&(e.expiredLanes|=l),o&=~l}}function up(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function c_(){var e=Pu;return Pu<<=1,!(Pu&4194240)&&(Pu=64),e}function Bh(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function ru(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-zn(t),e[t]=r}function UD(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-zn(r),o=1<<s;t[s]=0,n[s]=-1,e[s]=-1,r&=~o}}function dy(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-zn(r),s=1<<n;s&t|e[n]&t&&(e[n]|=t),r&=~s}}var _t=0;function u_(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var d_,fy,f_,h_,m_,dp=!1,Au=[],Ci=null,Ei=null,ki=null,pc=new Map,gc=new Map,ui=[],$D="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ov(e,t){switch(e){case"focusin":case"focusout":Ci=null;break;case"dragenter":case"dragleave":Ei=null;break;case"mouseover":case"mouseout":ki=null;break;case"pointerover":case"pointerout":pc.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":gc.delete(t.pointerId)}}function kl(e,t,r,n,s,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:o,targetContainers:[s]},t!==null&&(t=su(t),t!==null&&fy(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function BD(e,t,r,n,s){switch(t){case"focusin":return Ci=kl(Ci,e,t,r,n,s),!0;case"dragenter":return Ei=kl(Ei,e,t,r,n,s),!0;case"mouseover":return ki=kl(ki,e,t,r,n,s),!0;case"pointerover":var o=s.pointerId;return pc.set(o,kl(pc.get(o)||null,e,t,r,n,s)),!0;case"gotpointercapture":return o=s.pointerId,gc.set(o,kl(gc.get(o)||null,e,t,r,n,s)),!0}return!1}function p_(e){var t=ao(e.target);if(t!==null){var r=Wo(t);if(r!==null){if(t=r.tag,t===13){if(t=n_(r),t!==null){e.blockedOn=t,m_(e.priority,function(){f_(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function nd(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=fp(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);op=n,r.target.dispatchEvent(n),op=null}else return t=su(r),t!==null&&fy(t),e.blockedOn=r,!1;t.shift()}return!0}function Lv(e,t,r){nd(e)&&r.delete(t)}function zD(){dp=!1,Ci!==null&&nd(Ci)&&(Ci=null),Ei!==null&&nd(Ei)&&(Ei=null),ki!==null&&nd(ki)&&(ki=null),pc.forEach(Lv),gc.forEach(Lv)}function Tl(e,t){e.blockedOn===t&&(e.blockedOn=null,dp||(dp=!0,nn.unstable_scheduleCallback(nn.unstable_NormalPriority,zD)))}function yc(e){function t(s){return Tl(s,e)}if(0<Au.length){Tl(Au[0],e);for(var r=1;r<Au.length;r++){var n=Au[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Ci!==null&&Tl(Ci,e),Ei!==null&&Tl(Ei,e),ki!==null&&Tl(ki,e),pc.forEach(t),gc.forEach(t),r=0;r<ui.length;r++)n=ui[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<ui.length&&(r=ui[0],r.blockedOn===null);)p_(r),r.blockedOn===null&&ui.shift()}var Ea=Qs.ReactCurrentBatchConfig,Rd=!0;function VD(e,t,r,n){var s=_t,o=Ea.transition;Ea.transition=null;try{_t=1,hy(e,t,r,n)}finally{_t=s,Ea.transition=o}}function WD(e,t,r,n){var s=_t,o=Ea.transition;Ea.transition=null;try{_t=4,hy(e,t,r,n)}finally{_t=s,Ea.transition=o}}function hy(e,t,r,n){if(Rd){var s=fp(e,t,r,n);if(s===null)Zh(e,t,n,Ad,r),Ov(e,n);else if(BD(s,e,t,r,n))n.stopPropagation();else if(Ov(e,n),t&4&&-1<$D.indexOf(e)){for(;s!==null;){var o=su(s);if(o!==null&&d_(o),o=fp(e,t,r,n),o===null&&Zh(e,t,n,Ad,r),o===s)break;s=o}s!==null&&n.stopPropagation()}else Zh(e,t,n,null,r)}}var Ad=null;function fp(e,t,r,n){if(Ad=null,e=cy(n),e=ao(e),e!==null)if(t=Wo(e),t===null)e=null;else if(r=t.tag,r===13){if(e=n_(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ad=e,null}function g_(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(RD()){case uy:return 1;case a_:return 4;case Td:case AD:return 16;case l_:return 536870912;default:return 16}default:return 16}}var Si=null,my=null,sd=null;function y_(){if(sd)return sd;var e,t=my,r=t.length,n,s="value"in Si?Si.value:Si.textContent,o=s.length;for(e=0;e<r&&t[e]===s[e];e++);var a=r-e;for(n=1;n<=a&&t[r-n]===s[o-n];n++);return sd=s.slice(e,1<n?1-n:void 0)}function id(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Iu(){return!0}function Fv(){return!1}function an(e){function t(r,n,s,o,a){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Iu:Fv,this.isPropagationStopped=Fv,this}return Ft(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Iu)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Iu)},persist:function(){},isPersistent:Iu}),t}var ml={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},py=an(ml),nu=Ft({},ml,{view:0,detail:0}),qD=an(nu),zh,Vh,Pl,Lf=Ft({},nu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:gy,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Pl&&(Pl&&e.type==="mousemove"?(zh=e.screenX-Pl.screenX,Vh=e.screenY-Pl.screenY):Vh=zh=0,Pl=e),zh)},movementY:function(e){return"movementY"in e?e.movementY:Vh}}),Uv=an(Lf),HD=Ft({},Lf,{dataTransfer:0}),KD=an(HD),GD=Ft({},nu,{relatedTarget:0}),Wh=an(GD),QD=Ft({},ml,{animationName:0,elapsedTime:0,pseudoElement:0}),YD=an(QD),ZD=Ft({},ml,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),XD=an(ZD),JD=Ft({},ml,{data:0}),$v=an(JD),eM={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tM={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},rM={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function nM(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=rM[e])?!!t[e]:!1}function gy(){return nM}var sM=Ft({},nu,{key:function(e){if(e.key){var t=eM[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=id(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?tM[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:gy,charCode:function(e){return e.type==="keypress"?id(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?id(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),iM=an(sM),oM=Ft({},Lf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Bv=an(oM),aM=Ft({},nu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:gy}),lM=an(aM),cM=Ft({},ml,{propertyName:0,elapsedTime:0,pseudoElement:0}),uM=an(cM),dM=Ft({},Lf,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),fM=an(dM),hM=[9,13,27,32],yy=$s&&"CompositionEvent"in window,Jl=null;$s&&"documentMode"in document&&(Jl=document.documentMode);var mM=$s&&"TextEvent"in window&&!Jl,x_=$s&&(!yy||Jl&&8<Jl&&11>=Jl),zv=" ",Vv=!1;function v_(e,t){switch(e){case"keyup":return hM.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function w_(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ha=!1;function pM(e,t){switch(e){case"compositionend":return w_(t);case"keypress":return t.which!==32?null:(Vv=!0,zv);case"textInput":return e=t.data,e===zv&&Vv?null:e;default:return null}}function gM(e,t){if(ha)return e==="compositionend"||!yy&&v_(e,t)?(e=y_(),sd=my=Si=null,ha=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return x_&&t.locale!=="ko"?null:t.data;default:return null}}var yM={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wv(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!yM[e.type]:t==="textarea"}function b_(e,t,r,n){XN(n),t=Id(t,"onChange"),0<t.length&&(r=new py("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var ec=null,xc=null;function xM(e){A_(e,0)}function Ff(e){var t=ga(e);if(qN(t))return e}function vM(e,t){if(e==="change")return t}var S_=!1;if($s){var qh;if($s){var Hh="oninput"in document;if(!Hh){var qv=document.createElement("div");qv.setAttribute("oninput","return;"),Hh=typeof qv.oninput=="function"}qh=Hh}else qh=!1;S_=qh&&(!document.documentMode||9<document.documentMode)}function Hv(){ec&&(ec.detachEvent("onpropertychange",j_),xc=ec=null)}function j_(e){if(e.propertyName==="value"&&Ff(xc)){var t=[];b_(t,xc,e,cy(e)),r_(xM,t)}}function wM(e,t,r){e==="focusin"?(Hv(),ec=t,xc=r,ec.attachEvent("onpropertychange",j_)):e==="focusout"&&Hv()}function bM(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ff(xc)}function SM(e,t){if(e==="click")return Ff(t)}function jM(e,t){if(e==="input"||e==="change")return Ff(t)}function NM(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var qn=typeof Object.is=="function"?Object.is:NM;function vc(e,t){if(qn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!Gm.call(t,s)||!qn(e[s],t[s]))return!1}return!0}function Kv(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Gv(e,t){var r=Kv(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Kv(r)}}function N_(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?N_(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function __(){for(var e=window,t=Cd();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Cd(e.document)}return t}function xy(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function _M(e){var t=__(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&N_(r.ownerDocument.documentElement,r)){if(n!==null&&xy(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=r.textContent.length,o=Math.min(n.start,s);n=n.end===void 0?o:Math.min(n.end,s),!e.extend&&o>n&&(s=n,n=o,o=s),s=Gv(r,o);var a=Gv(r,n);s&&a&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),o>n?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var CM=$s&&"documentMode"in document&&11>=document.documentMode,ma=null,hp=null,tc=null,mp=!1;function Qv(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;mp||ma==null||ma!==Cd(n)||(n=ma,"selectionStart"in n&&xy(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),tc&&vc(tc,n)||(tc=n,n=Id(hp,"onSelect"),0<n.length&&(t=new py("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=ma)))}function Du(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var pa={animationend:Du("Animation","AnimationEnd"),animationiteration:Du("Animation","AnimationIteration"),animationstart:Du("Animation","AnimationStart"),transitionend:Du("Transition","TransitionEnd")},Kh={},C_={};$s&&(C_=document.createElement("div").style,"AnimationEvent"in window||(delete pa.animationend.animation,delete pa.animationiteration.animation,delete pa.animationstart.animation),"TransitionEvent"in window||delete pa.transitionend.transition);function Uf(e){if(Kh[e])return Kh[e];if(!pa[e])return e;var t=pa[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in C_)return Kh[e]=t[r];return e}var E_=Uf("animationend"),k_=Uf("animationiteration"),T_=Uf("animationstart"),P_=Uf("transitionend"),R_=new Map,Yv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ki(e,t){R_.set(e,t),Vo(t,[e])}for(var Gh=0;Gh<Yv.length;Gh++){var Qh=Yv[Gh],EM=Qh.toLowerCase(),kM=Qh[0].toUpperCase()+Qh.slice(1);Ki(EM,"on"+kM)}Ki(E_,"onAnimationEnd");Ki(k_,"onAnimationIteration");Ki(T_,"onAnimationStart");Ki("dblclick","onDoubleClick");Ki("focusin","onFocus");Ki("focusout","onBlur");Ki(P_,"onTransitionEnd");Za("onMouseEnter",["mouseout","mouseover"]);Za("onMouseLeave",["mouseout","mouseover"]);Za("onPointerEnter",["pointerout","pointerover"]);Za("onPointerLeave",["pointerout","pointerover"]);Vo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Vo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Vo("onBeforeInput",["compositionend","keypress","textInput","paste"]);Vo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Vo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Vo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),TM=new Set("cancel close invalid load scroll toggle".split(" ").concat(Wl));function Zv(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,ED(n,t,void 0,e),e.currentTarget=null}function A_(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],s=n.event;n=n.listeners;e:{var o=void 0;if(t)for(var a=n.length-1;0<=a;a--){var l=n[a],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==o&&s.isPropagationStopped())break e;Zv(s,l,u),o=c}else for(a=0;a<n.length;a++){if(l=n[a],c=l.instance,u=l.currentTarget,l=l.listener,c!==o&&s.isPropagationStopped())break e;Zv(s,l,u),o=c}}}if(kd)throw e=cp,kd=!1,cp=null,e}function Rt(e,t){var r=t[vp];r===void 0&&(r=t[vp]=new Set);var n=e+"__bubble";r.has(n)||(I_(t,e,2,!1),r.add(n))}function Yh(e,t,r){var n=0;t&&(n|=4),I_(r,e,n,t)}var Mu="_reactListening"+Math.random().toString(36).slice(2);function wc(e){if(!e[Mu]){e[Mu]=!0,$N.forEach(function(r){r!=="selectionchange"&&(TM.has(r)||Yh(r,!1,e),Yh(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Mu]||(t[Mu]=!0,Yh("selectionchange",!1,t))}}function I_(e,t,r,n){switch(g_(t)){case 1:var s=VD;break;case 4:s=WD;break;default:s=hy}r=s.bind(null,t,r,e),s=void 0,!lp||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),n?s!==void 0?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):s!==void 0?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function Zh(e,t,r,n,s){var o=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var l=n.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(a===4)for(a=n.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;a=a.return}for(;l!==null;){if(a=ao(l),a===null)return;if(c=a.tag,c===5||c===6){n=o=a;continue e}l=l.parentNode}}n=n.return}r_(function(){var u=o,d=cy(r),f=[];e:{var p=R_.get(e);if(p!==void 0){var v=py,j=e;switch(e){case"keypress":if(id(r)===0)break e;case"keydown":case"keyup":v=iM;break;case"focusin":j="focus",v=Wh;break;case"focusout":j="blur",v=Wh;break;case"beforeblur":case"afterblur":v=Wh;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=Uv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=KD;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=lM;break;case E_:case k_:case T_:v=YD;break;case P_:v=uM;break;case"scroll":v=qD;break;case"wheel":v=fM;break;case"copy":case"cut":case"paste":v=XD;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=Bv}var y=(t&4)!==0,S=!y&&e==="scroll",h=y?p!==null?p+"Capture":null:p;y=[];for(var g=u,w;g!==null;){w=g;var _=w.stateNode;if(w.tag===5&&_!==null&&(w=_,h!==null&&(_=mc(g,h),_!=null&&y.push(bc(g,_,w)))),S)break;g=g.return}0<y.length&&(p=new v(p,j,null,r,d),f.push({event:p,listeners:y}))}}if(!(t&7)){e:{if(p=e==="mouseover"||e==="pointerover",v=e==="mouseout"||e==="pointerout",p&&r!==op&&(j=r.relatedTarget||r.fromElement)&&(ao(j)||j[Bs]))break e;if((v||p)&&(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,v?(j=r.relatedTarget||r.toElement,v=u,j=j?ao(j):null,j!==null&&(S=Wo(j),j!==S||j.tag!==5&&j.tag!==6)&&(j=null)):(v=null,j=u),v!==j)){if(y=Uv,_="onMouseLeave",h="onMouseEnter",g="mouse",(e==="pointerout"||e==="pointerover")&&(y=Bv,_="onPointerLeave",h="onPointerEnter",g="pointer"),S=v==null?p:ga(v),w=j==null?p:ga(j),p=new y(_,g+"leave",v,r,d),p.target=S,p.relatedTarget=w,_=null,ao(d)===u&&(y=new y(h,g+"enter",j,r,d),y.target=w,y.relatedTarget=S,_=y),S=_,v&&j)t:{for(y=v,h=j,g=0,w=y;w;w=ra(w))g++;for(w=0,_=h;_;_=ra(_))w++;for(;0<g-w;)y=ra(y),g--;for(;0<w-g;)h=ra(h),w--;for(;g--;){if(y===h||h!==null&&y===h.alternate)break t;y=ra(y),h=ra(h)}y=null}else y=null;v!==null&&Xv(f,p,v,y,!1),j!==null&&S!==null&&Xv(f,S,j,y,!0)}}e:{if(p=u?ga(u):window,v=p.nodeName&&p.nodeName.toLowerCase(),v==="select"||v==="input"&&p.type==="file")var E=vM;else if(Wv(p))if(S_)E=jM;else{E=bM;var I=wM}else(v=p.nodeName)&&v.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(E=SM);if(E&&(E=E(e,u))){b_(f,E,r,d);break e}I&&I(e,p,u),e==="focusout"&&(I=p._wrapperState)&&I.controlled&&p.type==="number"&&tp(p,"number",p.value)}switch(I=u?ga(u):window,e){case"focusin":(Wv(I)||I.contentEditable==="true")&&(ma=I,hp=u,tc=null);break;case"focusout":tc=hp=ma=null;break;case"mousedown":mp=!0;break;case"contextmenu":case"mouseup":case"dragend":mp=!1,Qv(f,r,d);break;case"selectionchange":if(CM)break;case"keydown":case"keyup":Qv(f,r,d)}var P;if(yy)e:{switch(e){case"compositionstart":var M="onCompositionStart";break e;case"compositionend":M="onCompositionEnd";break e;case"compositionupdate":M="onCompositionUpdate";break e}M=void 0}else ha?v_(e,r)&&(M="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(M="onCompositionStart");M&&(x_&&r.locale!=="ko"&&(ha||M!=="onCompositionStart"?M==="onCompositionEnd"&&ha&&(P=y_()):(Si=d,my="value"in Si?Si.value:Si.textContent,ha=!0)),I=Id(u,M),0<I.length&&(M=new $v(M,e,null,r,d),f.push({event:M,listeners:I}),P?M.data=P:(P=w_(r),P!==null&&(M.data=P)))),(P=mM?pM(e,r):gM(e,r))&&(u=Id(u,"onBeforeInput"),0<u.length&&(d=new $v("onBeforeInput","beforeinput",null,r,d),f.push({event:d,listeners:u}),d.data=P))}A_(f,t)})}function bc(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Id(e,t){for(var r=t+"Capture",n=[];e!==null;){var s=e,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=mc(e,r),o!=null&&n.unshift(bc(e,o,s)),o=mc(e,t),o!=null&&n.push(bc(e,o,s))),e=e.return}return n}function ra(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Xv(e,t,r,n,s){for(var o=t._reactName,a=[];r!==null&&r!==n;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,s?(c=mc(r,o),c!=null&&a.unshift(bc(r,c,l))):s||(c=mc(r,o),c!=null&&a.push(bc(r,c,l)))),r=r.return}a.length!==0&&e.push({event:t,listeners:a})}var PM=/\r\n?/g,RM=/\u0000|\uFFFD/g;function Jv(e){return(typeof e=="string"?e:""+e).replace(PM,`
`).replace(RM,"")}function Ou(e,t,r){if(t=Jv(t),Jv(e)!==t&&r)throw Error(ge(425))}function Dd(){}var pp=null,gp=null;function yp(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var xp=typeof setTimeout=="function"?setTimeout:void 0,AM=typeof clearTimeout=="function"?clearTimeout:void 0,e0=typeof Promise=="function"?Promise:void 0,IM=typeof queueMicrotask=="function"?queueMicrotask:typeof e0<"u"?function(e){return e0.resolve(null).then(e).catch(DM)}:xp;function DM(e){setTimeout(function(){throw e})}function Xh(e,t){var r=t,n=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){e.removeChild(s),yc(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);yc(t)}function Ti(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function t0(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var pl=Math.random().toString(36).slice(2),ss="__reactFiber$"+pl,Sc="__reactProps$"+pl,Bs="__reactContainer$"+pl,vp="__reactEvents$"+pl,MM="__reactListeners$"+pl,OM="__reactHandles$"+pl;function ao(e){var t=e[ss];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Bs]||r[ss]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=t0(e);e!==null;){if(r=e[ss])return r;e=t0(e)}return t}e=r,r=e.parentNode}return null}function su(e){return e=e[ss]||e[Bs],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function ga(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ge(33))}function $f(e){return e[Sc]||null}var wp=[],ya=-1;function Gi(e){return{current:e}}function At(e){0>ya||(e.current=wp[ya],wp[ya]=null,ya--)}function Tt(e,t){ya++,wp[ya]=e.current,e.current=t}var Li={},_r=Gi(Li),Hr=Gi(!1),ko=Li;function Xa(e,t){var r=e.type.contextTypes;if(!r)return Li;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in r)s[o]=t[o];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Kr(e){return e=e.childContextTypes,e!=null}function Md(){At(Hr),At(_r)}function r0(e,t,r){if(_r.current!==Li)throw Error(ge(168));Tt(_r,t),Tt(Hr,r)}function D_(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in t))throw Error(ge(108,wD(e)||"Unknown",s));return Ft({},r,n)}function Od(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Li,ko=_r.current,Tt(_r,e),Tt(Hr,Hr.current),!0}function n0(e,t,r){var n=e.stateNode;if(!n)throw Error(ge(169));r?(e=D_(e,t,ko),n.__reactInternalMemoizedMergedChildContext=e,At(Hr),At(_r),Tt(_r,e)):At(Hr),Tt(Hr,r)}var Ts=null,Bf=!1,Jh=!1;function M_(e){Ts===null?Ts=[e]:Ts.push(e)}function LM(e){Bf=!0,M_(e)}function Qi(){if(!Jh&&Ts!==null){Jh=!0;var e=0,t=_t;try{var r=Ts;for(_t=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}Ts=null,Bf=!1}catch(s){throw Ts!==null&&(Ts=Ts.slice(e+1)),o_(uy,Qi),s}finally{_t=t,Jh=!1}}return null}var xa=[],va=0,Ld=null,Fd=0,pn=[],gn=0,To=null,Ds=1,Ms="";function to(e,t){xa[va++]=Fd,xa[va++]=Ld,Ld=e,Fd=t}function O_(e,t,r){pn[gn++]=Ds,pn[gn++]=Ms,pn[gn++]=To,To=e;var n=Ds;e=Ms;var s=32-zn(n)-1;n&=~(1<<s),r+=1;var o=32-zn(t)+s;if(30<o){var a=s-s%5;o=(n&(1<<a)-1).toString(32),n>>=a,s-=a,Ds=1<<32-zn(t)+s|r<<s|n,Ms=o+e}else Ds=1<<o|r<<s|n,Ms=e}function vy(e){e.return!==null&&(to(e,1),O_(e,1,0))}function wy(e){for(;e===Ld;)Ld=xa[--va],xa[va]=null,Fd=xa[--va],xa[va]=null;for(;e===To;)To=pn[--gn],pn[gn]=null,Ms=pn[--gn],pn[gn]=null,Ds=pn[--gn],pn[gn]=null}var en=null,Jr=null,It=!1,Mn=null;function L_(e,t){var r=xn(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function s0(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,en=e,Jr=Ti(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,en=e,Jr=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=To!==null?{id:Ds,overflow:Ms}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=xn(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,en=e,Jr=null,!0):!1;default:return!1}}function bp(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Sp(e){if(It){var t=Jr;if(t){var r=t;if(!s0(e,t)){if(bp(e))throw Error(ge(418));t=Ti(r.nextSibling);var n=en;t&&s0(e,t)?L_(n,r):(e.flags=e.flags&-4097|2,It=!1,en=e)}}else{if(bp(e))throw Error(ge(418));e.flags=e.flags&-4097|2,It=!1,en=e}}}function i0(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;en=e}function Lu(e){if(e!==en)return!1;if(!It)return i0(e),It=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!yp(e.type,e.memoizedProps)),t&&(t=Jr)){if(bp(e))throw F_(),Error(ge(418));for(;t;)L_(e,t),t=Ti(t.nextSibling)}if(i0(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ge(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Jr=Ti(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Jr=null}}else Jr=en?Ti(e.stateNode.nextSibling):null;return!0}function F_(){for(var e=Jr;e;)e=Ti(e.nextSibling)}function Ja(){Jr=en=null,It=!1}function by(e){Mn===null?Mn=[e]:Mn.push(e)}var FM=Qs.ReactCurrentBatchConfig;function Rl(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(ge(309));var n=r.stateNode}if(!n)throw Error(ge(147,e));var s=n,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(a){var l=s.refs;a===null?delete l[o]:l[o]=a},t._stringRef=o,t)}if(typeof e!="string")throw Error(ge(284));if(!r._owner)throw Error(ge(290,e))}return e}function Fu(e,t){throw e=Object.prototype.toString.call(t),Error(ge(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function o0(e){var t=e._init;return t(e._payload)}function U_(e){function t(h,g){if(e){var w=h.deletions;w===null?(h.deletions=[g],h.flags|=16):w.push(g)}}function r(h,g){if(!e)return null;for(;g!==null;)t(h,g),g=g.sibling;return null}function n(h,g){for(h=new Map;g!==null;)g.key!==null?h.set(g.key,g):h.set(g.index,g),g=g.sibling;return h}function s(h,g){return h=Ii(h,g),h.index=0,h.sibling=null,h}function o(h,g,w){return h.index=w,e?(w=h.alternate,w!==null?(w=w.index,w<g?(h.flags|=2,g):w):(h.flags|=2,g)):(h.flags|=1048576,g)}function a(h){return e&&h.alternate===null&&(h.flags|=2),h}function l(h,g,w,_){return g===null||g.tag!==6?(g=om(w,h.mode,_),g.return=h,g):(g=s(g,w),g.return=h,g)}function c(h,g,w,_){var E=w.type;return E===fa?d(h,g,w.props.children,_,w.key):g!==null&&(g.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===ai&&o0(E)===g.type)?(_=s(g,w.props),_.ref=Rl(h,g,w),_.return=h,_):(_=fd(w.type,w.key,w.props,null,h.mode,_),_.ref=Rl(h,g,w),_.return=h,_)}function u(h,g,w,_){return g===null||g.tag!==4||g.stateNode.containerInfo!==w.containerInfo||g.stateNode.implementation!==w.implementation?(g=am(w,h.mode,_),g.return=h,g):(g=s(g,w.children||[]),g.return=h,g)}function d(h,g,w,_,E){return g===null||g.tag!==7?(g=No(w,h.mode,_,E),g.return=h,g):(g=s(g,w),g.return=h,g)}function f(h,g,w){if(typeof g=="string"&&g!==""||typeof g=="number")return g=om(""+g,h.mode,w),g.return=h,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Eu:return w=fd(g.type,g.key,g.props,null,h.mode,w),w.ref=Rl(h,null,g),w.return=h,w;case da:return g=am(g,h.mode,w),g.return=h,g;case ai:var _=g._init;return f(h,_(g._payload),w)}if(zl(g)||Cl(g))return g=No(g,h.mode,w,null),g.return=h,g;Fu(h,g)}return null}function p(h,g,w,_){var E=g!==null?g.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return E!==null?null:l(h,g,""+w,_);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Eu:return w.key===E?c(h,g,w,_):null;case da:return w.key===E?u(h,g,w,_):null;case ai:return E=w._init,p(h,g,E(w._payload),_)}if(zl(w)||Cl(w))return E!==null?null:d(h,g,w,_,null);Fu(h,w)}return null}function v(h,g,w,_,E){if(typeof _=="string"&&_!==""||typeof _=="number")return h=h.get(w)||null,l(g,h,""+_,E);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Eu:return h=h.get(_.key===null?w:_.key)||null,c(g,h,_,E);case da:return h=h.get(_.key===null?w:_.key)||null,u(g,h,_,E);case ai:var I=_._init;return v(h,g,w,I(_._payload),E)}if(zl(_)||Cl(_))return h=h.get(w)||null,d(g,h,_,E,null);Fu(g,_)}return null}function j(h,g,w,_){for(var E=null,I=null,P=g,M=g=0,F=null;P!==null&&M<w.length;M++){P.index>M?(F=P,P=null):F=P.sibling;var W=p(h,P,w[M],_);if(W===null){P===null&&(P=F);break}e&&P&&W.alternate===null&&t(h,P),g=o(W,g,M),I===null?E=W:I.sibling=W,I=W,P=F}if(M===w.length)return r(h,P),It&&to(h,M),E;if(P===null){for(;M<w.length;M++)P=f(h,w[M],_),P!==null&&(g=o(P,g,M),I===null?E=P:I.sibling=P,I=P);return It&&to(h,M),E}for(P=n(h,P);M<w.length;M++)F=v(P,h,M,w[M],_),F!==null&&(e&&F.alternate!==null&&P.delete(F.key===null?M:F.key),g=o(F,g,M),I===null?E=F:I.sibling=F,I=F);return e&&P.forEach(function(re){return t(h,re)}),It&&to(h,M),E}function y(h,g,w,_){var E=Cl(w);if(typeof E!="function")throw Error(ge(150));if(w=E.call(w),w==null)throw Error(ge(151));for(var I=E=null,P=g,M=g=0,F=null,W=w.next();P!==null&&!W.done;M++,W=w.next()){P.index>M?(F=P,P=null):F=P.sibling;var re=p(h,P,W.value,_);if(re===null){P===null&&(P=F);break}e&&P&&re.alternate===null&&t(h,P),g=o(re,g,M),I===null?E=re:I.sibling=re,I=re,P=F}if(W.done)return r(h,P),It&&to(h,M),E;if(P===null){for(;!W.done;M++,W=w.next())W=f(h,W.value,_),W!==null&&(g=o(W,g,M),I===null?E=W:I.sibling=W,I=W);return It&&to(h,M),E}for(P=n(h,P);!W.done;M++,W=w.next())W=v(P,h,M,W.value,_),W!==null&&(e&&W.alternate!==null&&P.delete(W.key===null?M:W.key),g=o(W,g,M),I===null?E=W:I.sibling=W,I=W);return e&&P.forEach(function(q){return t(h,q)}),It&&to(h,M),E}function S(h,g,w,_){if(typeof w=="object"&&w!==null&&w.type===fa&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Eu:e:{for(var E=w.key,I=g;I!==null;){if(I.key===E){if(E=w.type,E===fa){if(I.tag===7){r(h,I.sibling),g=s(I,w.props.children),g.return=h,h=g;break e}}else if(I.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===ai&&o0(E)===I.type){r(h,I.sibling),g=s(I,w.props),g.ref=Rl(h,I,w),g.return=h,h=g;break e}r(h,I);break}else t(h,I);I=I.sibling}w.type===fa?(g=No(w.props.children,h.mode,_,w.key),g.return=h,h=g):(_=fd(w.type,w.key,w.props,null,h.mode,_),_.ref=Rl(h,g,w),_.return=h,h=_)}return a(h);case da:e:{for(I=w.key;g!==null;){if(g.key===I)if(g.tag===4&&g.stateNode.containerInfo===w.containerInfo&&g.stateNode.implementation===w.implementation){r(h,g.sibling),g=s(g,w.children||[]),g.return=h,h=g;break e}else{r(h,g);break}else t(h,g);g=g.sibling}g=am(w,h.mode,_),g.return=h,h=g}return a(h);case ai:return I=w._init,S(h,g,I(w._payload),_)}if(zl(w))return j(h,g,w,_);if(Cl(w))return y(h,g,w,_);Fu(h,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,g!==null&&g.tag===6?(r(h,g.sibling),g=s(g,w),g.return=h,h=g):(r(h,g),g=om(w,h.mode,_),g.return=h,h=g),a(h)):r(h,g)}return S}var el=U_(!0),$_=U_(!1),Ud=Gi(null),$d=null,wa=null,Sy=null;function jy(){Sy=wa=$d=null}function Ny(e){var t=Ud.current;At(Ud),e._currentValue=t}function jp(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function ka(e,t){$d=e,Sy=wa=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(qr=!0),e.firstContext=null)}function Sn(e){var t=e._currentValue;if(Sy!==e)if(e={context:e,memoizedValue:t,next:null},wa===null){if($d===null)throw Error(ge(308));wa=e,$d.dependencies={lanes:0,firstContext:e}}else wa=wa.next=e;return t}var lo=null;function _y(e){lo===null?lo=[e]:lo.push(e)}function B_(e,t,r,n){var s=t.interleaved;return s===null?(r.next=r,_y(t)):(r.next=s.next,s.next=r),t.interleaved=r,zs(e,n)}function zs(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var li=!1;function Cy(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function z_(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Os(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Pi(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,ft&2){var s=n.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),n.pending=t,zs(e,r)}return s=n.interleaved,s===null?(t.next=t,_y(n)):(t.next=s.next,s.next=t),n.interleaved=t,zs(e,r)}function od(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,dy(e,r)}}function a0(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,o=null;if(r=r.firstBaseUpdate,r!==null){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};o===null?s=o=a:o=o.next=a,r=r.next}while(r!==null);o===null?s=o=t:o=o.next=t}else s=o=t;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Bd(e,t,r,n){var s=e.updateQueue;li=!1;var o=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,a===null?o=u:a.next=u,a=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==a&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(o!==null){var f=s.baseState;a=0,d=u=c=null,l=o;do{var p=l.lane,v=l.eventTime;if((n&p)===p){d!==null&&(d=d.next={eventTime:v,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var j=e,y=l;switch(p=t,v=r,y.tag){case 1:if(j=y.payload,typeof j=="function"){f=j.call(v,f,p);break e}f=j;break e;case 3:j.flags=j.flags&-65537|128;case 0:if(j=y.payload,p=typeof j=="function"?j.call(v,f,p):j,p==null)break e;f=Ft({},f,p);break e;case 2:li=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,p=s.effects,p===null?s.effects=[l]:p.push(l))}else v={eventTime:v,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=v,c=f):d=d.next=v,a|=p;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;p=l,l=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(d===null&&(c=f),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,t=s.shared.interleaved,t!==null){s=t;do a|=s.lane,s=s.next;while(s!==t)}else o===null&&(s.shared.lanes=0);Ro|=a,e.lanes=a,e.memoizedState=f}}function l0(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(ge(191,s));s.call(n)}}}var iu={},cs=Gi(iu),jc=Gi(iu),Nc=Gi(iu);function co(e){if(e===iu)throw Error(ge(174));return e}function Ey(e,t){switch(Tt(Nc,t),Tt(jc,e),Tt(cs,iu),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:np(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=np(t,e)}At(cs),Tt(cs,t)}function tl(){At(cs),At(jc),At(Nc)}function V_(e){co(Nc.current);var t=co(cs.current),r=np(t,e.type);t!==r&&(Tt(jc,e),Tt(cs,r))}function ky(e){jc.current===e&&(At(cs),At(jc))}var Ot=Gi(0);function zd(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var em=[];function Ty(){for(var e=0;e<em.length;e++)em[e]._workInProgressVersionPrimary=null;em.length=0}var ad=Qs.ReactCurrentDispatcher,tm=Qs.ReactCurrentBatchConfig,Po=0,Lt=null,Yt=null,rr=null,Vd=!1,rc=!1,_c=0,UM=0;function gr(){throw Error(ge(321))}function Py(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!qn(e[r],t[r]))return!1;return!0}function Ry(e,t,r,n,s,o){if(Po=o,Lt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ad.current=e===null||e.memoizedState===null?VM:WM,e=r(n,s),rc){o=0;do{if(rc=!1,_c=0,25<=o)throw Error(ge(301));o+=1,rr=Yt=null,t.updateQueue=null,ad.current=qM,e=r(n,s)}while(rc)}if(ad.current=Wd,t=Yt!==null&&Yt.next!==null,Po=0,rr=Yt=Lt=null,Vd=!1,t)throw Error(ge(300));return e}function Ay(){var e=_c!==0;return _c=0,e}function Jn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rr===null?Lt.memoizedState=rr=e:rr=rr.next=e,rr}function jn(){if(Yt===null){var e=Lt.alternate;e=e!==null?e.memoizedState:null}else e=Yt.next;var t=rr===null?Lt.memoizedState:rr.next;if(t!==null)rr=t,Yt=e;else{if(e===null)throw Error(ge(310));Yt=e,e={memoizedState:Yt.memoizedState,baseState:Yt.baseState,baseQueue:Yt.baseQueue,queue:Yt.queue,next:null},rr===null?Lt.memoizedState=rr=e:rr=rr.next=e}return rr}function Cc(e,t){return typeof t=="function"?t(e):t}function rm(e){var t=jn(),r=t.queue;if(r===null)throw Error(ge(311));r.lastRenderedReducer=e;var n=Yt,s=n.baseQueue,o=r.pending;if(o!==null){if(s!==null){var a=s.next;s.next=o.next,o.next=a}n.baseQueue=s=o,r.pending=null}if(s!==null){o=s.next,n=n.baseState;var l=a=null,c=null,u=o;do{var d=u.lane;if((Po&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=f,a=n):c=c.next=f,Lt.lanes|=d,Ro|=d}u=u.next}while(u!==null&&u!==o);c===null?a=n:c.next=l,qn(n,t.memoizedState)||(qr=!0),t.memoizedState=n,t.baseState=a,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){s=e;do o=s.lane,Lt.lanes|=o,Ro|=o,s=s.next;while(s!==e)}else s===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function nm(e){var t=jn(),r=t.queue;if(r===null)throw Error(ge(311));r.lastRenderedReducer=e;var n=r.dispatch,s=r.pending,o=t.memoizedState;if(s!==null){r.pending=null;var a=s=s.next;do o=e(o,a.action),a=a.next;while(a!==s);qn(o,t.memoizedState)||(qr=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),r.lastRenderedState=o}return[o,n]}function W_(){}function q_(e,t){var r=Lt,n=jn(),s=t(),o=!qn(n.memoizedState,s);if(o&&(n.memoizedState=s,qr=!0),n=n.queue,Iy(G_.bind(null,r,n,e),[e]),n.getSnapshot!==t||o||rr!==null&&rr.memoizedState.tag&1){if(r.flags|=2048,Ec(9,K_.bind(null,r,n,s,t),void 0,null),sr===null)throw Error(ge(349));Po&30||H_(r,t,s)}return s}function H_(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Lt.updateQueue,t===null?(t={lastEffect:null,stores:null},Lt.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function K_(e,t,r,n){t.value=r,t.getSnapshot=n,Q_(t)&&Y_(e)}function G_(e,t,r){return r(function(){Q_(t)&&Y_(e)})}function Q_(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!qn(e,r)}catch{return!0}}function Y_(e){var t=zs(e,1);t!==null&&Vn(t,e,1,-1)}function c0(e){var t=Jn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Cc,lastRenderedState:e},t.queue=e,e=e.dispatch=zM.bind(null,Lt,e),[t.memoizedState,e]}function Ec(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=Lt.updateQueue,t===null?(t={lastEffect:null,stores:null},Lt.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function Z_(){return jn().memoizedState}function ld(e,t,r,n){var s=Jn();Lt.flags|=e,s.memoizedState=Ec(1|t,r,void 0,n===void 0?null:n)}function zf(e,t,r,n){var s=jn();n=n===void 0?null:n;var o=void 0;if(Yt!==null){var a=Yt.memoizedState;if(o=a.destroy,n!==null&&Py(n,a.deps)){s.memoizedState=Ec(t,r,o,n);return}}Lt.flags|=e,s.memoizedState=Ec(1|t,r,o,n)}function u0(e,t){return ld(8390656,8,e,t)}function Iy(e,t){return zf(2048,8,e,t)}function X_(e,t){return zf(4,2,e,t)}function J_(e,t){return zf(4,4,e,t)}function eC(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function tC(e,t,r){return r=r!=null?r.concat([e]):null,zf(4,4,eC.bind(null,t,e),r)}function Dy(){}function rC(e,t){var r=jn();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Py(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function nC(e,t){var r=jn();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Py(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function sC(e,t,r){return Po&21?(qn(r,t)||(r=c_(),Lt.lanes|=r,Ro|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,qr=!0),e.memoizedState=r)}function $M(e,t){var r=_t;_t=r!==0&&4>r?r:4,e(!0);var n=tm.transition;tm.transition={};try{e(!1),t()}finally{_t=r,tm.transition=n}}function iC(){return jn().memoizedState}function BM(e,t,r){var n=Ai(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},oC(e))aC(t,r);else if(r=B_(e,t,r,n),r!==null){var s=Dr();Vn(r,e,n,s),lC(r,t,n)}}function zM(e,t,r){var n=Ai(e),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(oC(e))aC(t,s);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var a=t.lastRenderedState,l=o(a,r);if(s.hasEagerState=!0,s.eagerState=l,qn(l,a)){var c=t.interleaved;c===null?(s.next=s,_y(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}r=B_(e,t,s,n),r!==null&&(s=Dr(),Vn(r,e,n,s),lC(r,t,n))}}function oC(e){var t=e.alternate;return e===Lt||t!==null&&t===Lt}function aC(e,t){rc=Vd=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function lC(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,dy(e,r)}}var Wd={readContext:Sn,useCallback:gr,useContext:gr,useEffect:gr,useImperativeHandle:gr,useInsertionEffect:gr,useLayoutEffect:gr,useMemo:gr,useReducer:gr,useRef:gr,useState:gr,useDebugValue:gr,useDeferredValue:gr,useTransition:gr,useMutableSource:gr,useSyncExternalStore:gr,useId:gr,unstable_isNewReconciler:!1},VM={readContext:Sn,useCallback:function(e,t){return Jn().memoizedState=[e,t===void 0?null:t],e},useContext:Sn,useEffect:u0,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,ld(4194308,4,eC.bind(null,t,e),r)},useLayoutEffect:function(e,t){return ld(4194308,4,e,t)},useInsertionEffect:function(e,t){return ld(4,2,e,t)},useMemo:function(e,t){var r=Jn();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Jn();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=BM.bind(null,Lt,e),[n.memoizedState,e]},useRef:function(e){var t=Jn();return e={current:e},t.memoizedState=e},useState:c0,useDebugValue:Dy,useDeferredValue:function(e){return Jn().memoizedState=e},useTransition:function(){var e=c0(!1),t=e[0];return e=$M.bind(null,e[1]),Jn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=Lt,s=Jn();if(It){if(r===void 0)throw Error(ge(407));r=r()}else{if(r=t(),sr===null)throw Error(ge(349));Po&30||H_(n,t,r)}s.memoizedState=r;var o={value:r,getSnapshot:t};return s.queue=o,u0(G_.bind(null,n,o,e),[e]),n.flags|=2048,Ec(9,K_.bind(null,n,o,r,t),void 0,null),r},useId:function(){var e=Jn(),t=sr.identifierPrefix;if(It){var r=Ms,n=Ds;r=(n&~(1<<32-zn(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=_c++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=UM++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},WM={readContext:Sn,useCallback:rC,useContext:Sn,useEffect:Iy,useImperativeHandle:tC,useInsertionEffect:X_,useLayoutEffect:J_,useMemo:nC,useReducer:rm,useRef:Z_,useState:function(){return rm(Cc)},useDebugValue:Dy,useDeferredValue:function(e){var t=jn();return sC(t,Yt.memoizedState,e)},useTransition:function(){var e=rm(Cc)[0],t=jn().memoizedState;return[e,t]},useMutableSource:W_,useSyncExternalStore:q_,useId:iC,unstable_isNewReconciler:!1},qM={readContext:Sn,useCallback:rC,useContext:Sn,useEffect:Iy,useImperativeHandle:tC,useInsertionEffect:X_,useLayoutEffect:J_,useMemo:nC,useReducer:nm,useRef:Z_,useState:function(){return nm(Cc)},useDebugValue:Dy,useDeferredValue:function(e){var t=jn();return Yt===null?t.memoizedState=e:sC(t,Yt.memoizedState,e)},useTransition:function(){var e=nm(Cc)[0],t=jn().memoizedState;return[e,t]},useMutableSource:W_,useSyncExternalStore:q_,useId:iC,unstable_isNewReconciler:!1};function Pn(e,t){if(e&&e.defaultProps){t=Ft({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Np(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:Ft({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Vf={isMounted:function(e){return(e=e._reactInternals)?Wo(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Dr(),s=Ai(e),o=Os(n,s);o.payload=t,r!=null&&(o.callback=r),t=Pi(e,o,s),t!==null&&(Vn(t,e,s,n),od(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Dr(),s=Ai(e),o=Os(n,s);o.tag=1,o.payload=t,r!=null&&(o.callback=r),t=Pi(e,o,s),t!==null&&(Vn(t,e,s,n),od(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Dr(),n=Ai(e),s=Os(r,n);s.tag=2,t!=null&&(s.callback=t),t=Pi(e,s,n),t!==null&&(Vn(t,e,n,r),od(t,e,n))}};function d0(e,t,r,n,s,o,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,o,a):t.prototype&&t.prototype.isPureReactComponent?!vc(r,n)||!vc(s,o):!0}function cC(e,t,r){var n=!1,s=Li,o=t.contextType;return typeof o=="object"&&o!==null?o=Sn(o):(s=Kr(t)?ko:_r.current,n=t.contextTypes,o=(n=n!=null)?Xa(e,s):Li),t=new t(r,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Vf,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=o),t}function f0(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Vf.enqueueReplaceState(t,t.state,null)}function _p(e,t,r,n){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},Cy(e);var o=t.contextType;typeof o=="object"&&o!==null?s.context=Sn(o):(o=Kr(t)?ko:_r.current,s.context=Xa(e,o)),s.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(Np(e,t,o,r),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Vf.enqueueReplaceState(s,s.state,null),Bd(e,r,s,n),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function rl(e,t){try{var r="",n=t;do r+=vD(n),n=n.return;while(n);var s=r}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:s,digest:null}}function sm(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Cp(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var HM=typeof WeakMap=="function"?WeakMap:Map;function uC(e,t,r){r=Os(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Hd||(Hd=!0,Op=n),Cp(e,t)},r}function dC(e,t,r){r=Os(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var s=t.value;r.payload=function(){return n(s)},r.callback=function(){Cp(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(r.callback=function(){Cp(e,t),typeof n!="function"&&(Ri===null?Ri=new Set([this]):Ri.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),r}function h0(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new HM;var s=new Set;n.set(t,s)}else s=n.get(t),s===void 0&&(s=new Set,n.set(t,s));s.has(r)||(s.add(r),e=oO.bind(null,e,t,r),t.then(e,e))}function m0(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function p0(e,t,r,n,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Os(-1,1),t.tag=2,Pi(r,t,1))),r.lanes|=1),e)}var KM=Qs.ReactCurrentOwner,qr=!1;function Pr(e,t,r,n){t.child=e===null?$_(t,null,r,n):el(t,e.child,r,n)}function g0(e,t,r,n,s){r=r.render;var o=t.ref;return ka(t,s),n=Ry(e,t,r,n,o,s),r=Ay(),e!==null&&!qr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Vs(e,t,s)):(It&&r&&vy(t),t.flags|=1,Pr(e,t,n,s),t.child)}function y0(e,t,r,n,s){if(e===null){var o=r.type;return typeof o=="function"&&!zy(o)&&o.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=o,fC(e,t,o,n,s)):(e=fd(r.type,null,n,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&s)){var a=o.memoizedProps;if(r=r.compare,r=r!==null?r:vc,r(a,n)&&e.ref===t.ref)return Vs(e,t,s)}return t.flags|=1,e=Ii(o,n),e.ref=t.ref,e.return=t,t.child=e}function fC(e,t,r,n,s){if(e!==null){var o=e.memoizedProps;if(vc(o,n)&&e.ref===t.ref)if(qr=!1,t.pendingProps=n=o,(e.lanes&s)!==0)e.flags&131072&&(qr=!0);else return t.lanes=e.lanes,Vs(e,t,s)}return Ep(e,t,r,n,s)}function hC(e,t,r){var n=t.pendingProps,s=n.children,o=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Tt(Sa,Yr),Yr|=r;else{if(!(r&1073741824))return e=o!==null?o.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Tt(Sa,Yr),Yr|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=o!==null?o.baseLanes:r,Tt(Sa,Yr),Yr|=n}else o!==null?(n=o.baseLanes|r,t.memoizedState=null):n=r,Tt(Sa,Yr),Yr|=n;return Pr(e,t,s,r),t.child}function mC(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Ep(e,t,r,n,s){var o=Kr(r)?ko:_r.current;return o=Xa(t,o),ka(t,s),r=Ry(e,t,r,n,o,s),n=Ay(),e!==null&&!qr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Vs(e,t,s)):(It&&n&&vy(t),t.flags|=1,Pr(e,t,r,s),t.child)}function x0(e,t,r,n,s){if(Kr(r)){var o=!0;Od(t)}else o=!1;if(ka(t,s),t.stateNode===null)cd(e,t),cC(t,r,n),_p(t,r,n,s),n=!0;else if(e===null){var a=t.stateNode,l=t.memoizedProps;a.props=l;var c=a.context,u=r.contextType;typeof u=="object"&&u!==null?u=Sn(u):(u=Kr(r)?ko:_r.current,u=Xa(t,u));var d=r.getDerivedStateFromProps,f=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";f||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==n||c!==u)&&f0(t,a,n,u),li=!1;var p=t.memoizedState;a.state=p,Bd(t,n,a,s),c=t.memoizedState,l!==n||p!==c||Hr.current||li?(typeof d=="function"&&(Np(t,r,d,n),c=t.memoizedState),(l=li||d0(t,r,l,n,p,c,u))?(f||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),a.props=n,a.state=c,a.context=u,n=l):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{a=t.stateNode,z_(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:Pn(t.type,l),a.props=u,f=t.pendingProps,p=a.context,c=r.contextType,typeof c=="object"&&c!==null?c=Sn(c):(c=Kr(r)?ko:_r.current,c=Xa(t,c));var v=r.getDerivedStateFromProps;(d=typeof v=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==f||p!==c)&&f0(t,a,n,c),li=!1,p=t.memoizedState,a.state=p,Bd(t,n,a,s);var j=t.memoizedState;l!==f||p!==j||Hr.current||li?(typeof v=="function"&&(Np(t,r,v,n),j=t.memoizedState),(u=li||d0(t,r,u,n,p,j,c)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,j,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,j,c)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=j),a.props=n,a.state=j,a.context=c,n=u):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),n=!1)}return kp(e,t,r,n,o,s)}function kp(e,t,r,n,s,o){mC(e,t);var a=(t.flags&128)!==0;if(!n&&!a)return s&&n0(t,r,!1),Vs(e,t,o);n=t.stateNode,KM.current=t;var l=a&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&a?(t.child=el(t,e.child,null,o),t.child=el(t,null,l,o)):Pr(e,t,l,o),t.memoizedState=n.state,s&&n0(t,r,!0),t.child}function pC(e){var t=e.stateNode;t.pendingContext?r0(e,t.pendingContext,t.pendingContext!==t.context):t.context&&r0(e,t.context,!1),Ey(e,t.containerInfo)}function v0(e,t,r,n,s){return Ja(),by(s),t.flags|=256,Pr(e,t,r,n),t.child}var Tp={dehydrated:null,treeContext:null,retryLane:0};function Pp(e){return{baseLanes:e,cachePool:null,transitions:null}}function gC(e,t,r){var n=t.pendingProps,s=Ot.current,o=!1,a=(t.flags&128)!==0,l;if((l=a)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),Tt(Ot,s&1),e===null)return Sp(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=n.children,e=n.fallback,o?(n=t.mode,o=t.child,a={mode:"hidden",children:a},!(n&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=Hf(a,n,0,null),e=No(e,n,r,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Pp(r),t.memoizedState=Tp,e):My(t,a));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return GM(e,t,a,n,l,s,r);if(o){o=n.fallback,a=t.mode,s=e.child,l=s.sibling;var c={mode:"hidden",children:n.children};return!(a&1)&&t.child!==s?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=Ii(s,c),n.subtreeFlags=s.subtreeFlags&14680064),l!==null?o=Ii(l,o):(o=No(o,a,r,null),o.flags|=2),o.return=t,n.return=t,n.sibling=o,t.child=n,n=o,o=t.child,a=e.child.memoizedState,a=a===null?Pp(r):{baseLanes:a.baseLanes|r,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=e.childLanes&~r,t.memoizedState=Tp,n}return o=e.child,e=o.sibling,n=Ii(o,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function My(e,t){return t=Hf({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Uu(e,t,r,n){return n!==null&&by(n),el(t,e.child,null,r),e=My(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function GM(e,t,r,n,s,o,a){if(r)return t.flags&256?(t.flags&=-257,n=sm(Error(ge(422))),Uu(e,t,a,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=n.fallback,s=t.mode,n=Hf({mode:"visible",children:n.children},s,0,null),o=No(o,s,a,null),o.flags|=2,n.return=t,o.return=t,n.sibling=o,t.child=n,t.mode&1&&el(t,e.child,null,a),t.child.memoizedState=Pp(a),t.memoizedState=Tp,o);if(!(t.mode&1))return Uu(e,t,a,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var l=n.dgst;return n=l,o=Error(ge(419)),n=sm(o,n,void 0),Uu(e,t,a,n)}if(l=(a&e.childLanes)!==0,qr||l){if(n=sr,n!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|a)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,zs(e,s),Vn(n,e,s,-1))}return By(),n=sm(Error(ge(421))),Uu(e,t,a,n)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=aO.bind(null,e),s._reactRetry=t,null):(e=o.treeContext,Jr=Ti(s.nextSibling),en=t,It=!0,Mn=null,e!==null&&(pn[gn++]=Ds,pn[gn++]=Ms,pn[gn++]=To,Ds=e.id,Ms=e.overflow,To=t),t=My(t,n.children),t.flags|=4096,t)}function w0(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),jp(e.return,t,r)}function im(e,t,r,n,s){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=n,o.tail=r,o.tailMode=s)}function yC(e,t,r){var n=t.pendingProps,s=n.revealOrder,o=n.tail;if(Pr(e,t,n.children,r),n=Ot.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&w0(e,r,t);else if(e.tag===19)w0(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Tt(Ot,n),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(r=t.child,s=null;r!==null;)e=r.alternate,e!==null&&zd(e)===null&&(s=r),r=r.sibling;r=s,r===null?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),im(t,!1,s,r,o);break;case"backwards":for(r=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&zd(e)===null){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}im(t,!0,r,null,o);break;case"together":im(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function cd(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Vs(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Ro|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(ge(153));if(t.child!==null){for(e=t.child,r=Ii(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Ii(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function QM(e,t,r){switch(t.tag){case 3:pC(t),Ja();break;case 5:V_(t);break;case 1:Kr(t.type)&&Od(t);break;case 4:Ey(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,s=t.memoizedProps.value;Tt(Ud,n._currentValue),n._currentValue=s;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(Tt(Ot,Ot.current&1),t.flags|=128,null):r&t.child.childLanes?gC(e,t,r):(Tt(Ot,Ot.current&1),e=Vs(e,t,r),e!==null?e.sibling:null);Tt(Ot,Ot.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return yC(e,t,r);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Tt(Ot,Ot.current),n)break;return null;case 22:case 23:return t.lanes=0,hC(e,t,r)}return Vs(e,t,r)}var xC,Rp,vC,wC;xC=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Rp=function(){};vC=function(e,t,r,n){var s=e.memoizedProps;if(s!==n){e=t.stateNode,co(cs.current);var o=null;switch(r){case"input":s=Jm(e,s),n=Jm(e,n),o=[];break;case"select":s=Ft({},s,{value:void 0}),n=Ft({},n,{value:void 0}),o=[];break;case"textarea":s=rp(e,s),n=rp(e,n),o=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Dd)}sp(r,n);var a;r=null;for(u in s)if(!n.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(a in l)l.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(fc.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in n){var c=n[u];if(l=s!=null?s[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(r||(r={}),r[a]=c[a])}else r||(o||(o=[]),o.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(o=o||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(o=o||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(fc.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Rt("scroll",e),o||l===c||(o=[])):(o=o||[]).push(u,c))}r&&(o=o||[]).push("style",r);var u=o;(t.updateQueue=u)&&(t.flags|=4)}};wC=function(e,t,r,n){r!==n&&(t.flags|=4)};function Al(e,t){if(!It)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function yr(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function YM(e,t,r){var n=t.pendingProps;switch(wy(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return yr(t),null;case 1:return Kr(t.type)&&Md(),yr(t),null;case 3:return n=t.stateNode,tl(),At(Hr),At(_r),Ty(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Lu(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Mn!==null&&(Up(Mn),Mn=null))),Rp(e,t),yr(t),null;case 5:ky(t);var s=co(Nc.current);if(r=t.type,e!==null&&t.stateNode!=null)vC(e,t,r,n,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(ge(166));return yr(t),null}if(e=co(cs.current),Lu(t)){n=t.stateNode,r=t.type;var o=t.memoizedProps;switch(n[ss]=t,n[Sc]=o,e=(t.mode&1)!==0,r){case"dialog":Rt("cancel",n),Rt("close",n);break;case"iframe":case"object":case"embed":Rt("load",n);break;case"video":case"audio":for(s=0;s<Wl.length;s++)Rt(Wl[s],n);break;case"source":Rt("error",n);break;case"img":case"image":case"link":Rt("error",n),Rt("load",n);break;case"details":Rt("toggle",n);break;case"input":Tv(n,o),Rt("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!o.multiple},Rt("invalid",n);break;case"textarea":Rv(n,o),Rt("invalid",n)}sp(r,o),s=null;for(var a in o)if(o.hasOwnProperty(a)){var l=o[a];a==="children"?typeof l=="string"?n.textContent!==l&&(o.suppressHydrationWarning!==!0&&Ou(n.textContent,l,e),s=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(o.suppressHydrationWarning!==!0&&Ou(n.textContent,l,e),s=["children",""+l]):fc.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&Rt("scroll",n)}switch(r){case"input":ku(n),Pv(n,o,!0);break;case"textarea":ku(n),Av(n);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(n.onclick=Dd)}n=s,t.updateQueue=n,n!==null&&(t.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=GN(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=a.createElement(r,{is:n.is}):(e=a.createElement(r),r==="select"&&(a=e,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):e=a.createElementNS(e,r),e[ss]=t,e[Sc]=n,xC(e,t,!1,!1),t.stateNode=e;e:{switch(a=ip(r,n),r){case"dialog":Rt("cancel",e),Rt("close",e),s=n;break;case"iframe":case"object":case"embed":Rt("load",e),s=n;break;case"video":case"audio":for(s=0;s<Wl.length;s++)Rt(Wl[s],e);s=n;break;case"source":Rt("error",e),s=n;break;case"img":case"image":case"link":Rt("error",e),Rt("load",e),s=n;break;case"details":Rt("toggle",e),s=n;break;case"input":Tv(e,n),s=Jm(e,n),Rt("invalid",e);break;case"option":s=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},s=Ft({},n,{value:void 0}),Rt("invalid",e);break;case"textarea":Rv(e,n),s=rp(e,n),Rt("invalid",e);break;default:s=n}sp(r,s),l=s;for(o in l)if(l.hasOwnProperty(o)){var c=l[o];o==="style"?ZN(e,c):o==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&QN(e,c)):o==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&hc(e,c):typeof c=="number"&&hc(e,""+c):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(fc.hasOwnProperty(o)?c!=null&&o==="onScroll"&&Rt("scroll",e):c!=null&&iy(e,o,c,a))}switch(r){case"input":ku(e),Pv(e,n,!1);break;case"textarea":ku(e),Av(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Oi(n.value));break;case"select":e.multiple=!!n.multiple,o=n.value,o!=null?Na(e,!!n.multiple,o,!1):n.defaultValue!=null&&Na(e,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Dd)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return yr(t),null;case 6:if(e&&t.stateNode!=null)wC(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(ge(166));if(r=co(Nc.current),co(cs.current),Lu(t)){if(n=t.stateNode,r=t.memoizedProps,n[ss]=t,(o=n.nodeValue!==r)&&(e=en,e!==null))switch(e.tag){case 3:Ou(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ou(n.nodeValue,r,(e.mode&1)!==0)}o&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[ss]=t,t.stateNode=n}return yr(t),null;case 13:if(At(Ot),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(It&&Jr!==null&&t.mode&1&&!(t.flags&128))F_(),Ja(),t.flags|=98560,o=!1;else if(o=Lu(t),n!==null&&n.dehydrated!==null){if(e===null){if(!o)throw Error(ge(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(ge(317));o[ss]=t}else Ja(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;yr(t),o=!1}else Mn!==null&&(Up(Mn),Mn=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||Ot.current&1?Xt===0&&(Xt=3):By())),t.updateQueue!==null&&(t.flags|=4),yr(t),null);case 4:return tl(),Rp(e,t),e===null&&wc(t.stateNode.containerInfo),yr(t),null;case 10:return Ny(t.type._context),yr(t),null;case 17:return Kr(t.type)&&Md(),yr(t),null;case 19:if(At(Ot),o=t.memoizedState,o===null)return yr(t),null;if(n=(t.flags&128)!==0,a=o.rendering,a===null)if(n)Al(o,!1);else{if(Xt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=zd(e),a!==null){for(t.flags|=128,Al(o,!1),n=a.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)o=r,e=n,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,e=a.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Tt(Ot,Ot.current&1|2),t.child}e=e.sibling}o.tail!==null&&Vt()>nl&&(t.flags|=128,n=!0,Al(o,!1),t.lanes=4194304)}else{if(!n)if(e=zd(a),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Al(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!It)return yr(t),null}else 2*Vt()-o.renderingStartTime>nl&&r!==1073741824&&(t.flags|=128,n=!0,Al(o,!1),t.lanes=4194304);o.isBackwards?(a.sibling=t.child,t.child=a):(r=o.last,r!==null?r.sibling=a:t.child=a,o.last=a)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Vt(),t.sibling=null,r=Ot.current,Tt(Ot,n?r&1|2:r&1),t):(yr(t),null);case 22:case 23:return $y(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Yr&1073741824&&(yr(t),t.subtreeFlags&6&&(t.flags|=8192)):yr(t),null;case 24:return null;case 25:return null}throw Error(ge(156,t.tag))}function ZM(e,t){switch(wy(t),t.tag){case 1:return Kr(t.type)&&Md(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return tl(),At(Hr),At(_r),Ty(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return ky(t),null;case 13:if(At(Ot),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ge(340));Ja()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return At(Ot),null;case 4:return tl(),null;case 10:return Ny(t.type._context),null;case 22:case 23:return $y(),null;case 24:return null;default:return null}}var $u=!1,vr=!1,XM=typeof WeakSet=="function"?WeakSet:Set,Te=null;function ba(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){$t(e,t,n)}else r.current=null}function Ap(e,t,r){try{r()}catch(n){$t(e,t,n)}}var b0=!1;function JM(e,t){if(pp=Rd,e=__(),xy(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,o=n.focusNode;n=n.focusOffset;try{r.nodeType,o.nodeType}catch{r=null;break e}var a=0,l=-1,c=-1,u=0,d=0,f=e,p=null;t:for(;;){for(var v;f!==r||s!==0&&f.nodeType!==3||(l=a+s),f!==o||n!==0&&f.nodeType!==3||(c=a+n),f.nodeType===3&&(a+=f.nodeValue.length),(v=f.firstChild)!==null;)p=f,f=v;for(;;){if(f===e)break t;if(p===r&&++u===s&&(l=a),p===o&&++d===n&&(c=a),(v=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=v}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(gp={focusedElem:e,selectionRange:r},Rd=!1,Te=t;Te!==null;)if(t=Te,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Te=e;else for(;Te!==null;){t=Te;try{var j=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(j!==null){var y=j.memoizedProps,S=j.memoizedState,h=t.stateNode,g=h.getSnapshotBeforeUpdate(t.elementType===t.type?y:Pn(t.type,y),S);h.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var w=t.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ge(163))}}catch(_){$t(t,t.return,_)}if(e=t.sibling,e!==null){e.return=t.return,Te=e;break}Te=t.return}return j=b0,b0=!1,j}function nc(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var o=s.destroy;s.destroy=void 0,o!==void 0&&Ap(t,r,o)}s=s.next}while(s!==n)}}function Wf(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function Ip(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function bC(e){var t=e.alternate;t!==null&&(e.alternate=null,bC(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[ss],delete t[Sc],delete t[vp],delete t[MM],delete t[OM])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function SC(e){return e.tag===5||e.tag===3||e.tag===4}function S0(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||SC(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Dp(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Dd));else if(n!==4&&(e=e.child,e!==null))for(Dp(e,t,r),e=e.sibling;e!==null;)Dp(e,t,r),e=e.sibling}function Mp(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(Mp(e,t,r),e=e.sibling;e!==null;)Mp(e,t,r),e=e.sibling}var cr=null,In=!1;function ti(e,t,r){for(r=r.child;r!==null;)jC(e,t,r),r=r.sibling}function jC(e,t,r){if(ls&&typeof ls.onCommitFiberUnmount=="function")try{ls.onCommitFiberUnmount(Of,r)}catch{}switch(r.tag){case 5:vr||ba(r,t);case 6:var n=cr,s=In;cr=null,ti(e,t,r),cr=n,In=s,cr!==null&&(In?(e=cr,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):cr.removeChild(r.stateNode));break;case 18:cr!==null&&(In?(e=cr,r=r.stateNode,e.nodeType===8?Xh(e.parentNode,r):e.nodeType===1&&Xh(e,r),yc(e)):Xh(cr,r.stateNode));break;case 4:n=cr,s=In,cr=r.stateNode.containerInfo,In=!0,ti(e,t,r),cr=n,In=s;break;case 0:case 11:case 14:case 15:if(!vr&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var o=s,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&Ap(r,t,a),s=s.next}while(s!==n)}ti(e,t,r);break;case 1:if(!vr&&(ba(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){$t(r,t,l)}ti(e,t,r);break;case 21:ti(e,t,r);break;case 22:r.mode&1?(vr=(n=vr)||r.memoizedState!==null,ti(e,t,r),vr=n):ti(e,t,r);break;default:ti(e,t,r)}}function j0(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new XM),t.forEach(function(n){var s=lO.bind(null,e,n);r.has(n)||(r.add(n),n.then(s,s))})}}function kn(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var o=e,a=t,l=a;e:for(;l!==null;){switch(l.tag){case 5:cr=l.stateNode,In=!1;break e;case 3:cr=l.stateNode.containerInfo,In=!0;break e;case 4:cr=l.stateNode.containerInfo,In=!0;break e}l=l.return}if(cr===null)throw Error(ge(160));jC(o,a,s),cr=null,In=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){$t(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)NC(t,e),t=t.sibling}function NC(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(kn(t,e),Xn(e),n&4){try{nc(3,e,e.return),Wf(3,e)}catch(y){$t(e,e.return,y)}try{nc(5,e,e.return)}catch(y){$t(e,e.return,y)}}break;case 1:kn(t,e),Xn(e),n&512&&r!==null&&ba(r,r.return);break;case 5:if(kn(t,e),Xn(e),n&512&&r!==null&&ba(r,r.return),e.flags&32){var s=e.stateNode;try{hc(s,"")}catch(y){$t(e,e.return,y)}}if(n&4&&(s=e.stateNode,s!=null)){var o=e.memoizedProps,a=r!==null?r.memoizedProps:o,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&o.type==="radio"&&o.name!=null&&HN(s,o),ip(l,a);var u=ip(l,o);for(a=0;a<c.length;a+=2){var d=c[a],f=c[a+1];d==="style"?ZN(s,f):d==="dangerouslySetInnerHTML"?QN(s,f):d==="children"?hc(s,f):iy(s,d,f,u)}switch(l){case"input":ep(s,o);break;case"textarea":KN(s,o);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var v=o.value;v!=null?Na(s,!!o.multiple,v,!1):p!==!!o.multiple&&(o.defaultValue!=null?Na(s,!!o.multiple,o.defaultValue,!0):Na(s,!!o.multiple,o.multiple?[]:"",!1))}s[Sc]=o}catch(y){$t(e,e.return,y)}}break;case 6:if(kn(t,e),Xn(e),n&4){if(e.stateNode===null)throw Error(ge(162));s=e.stateNode,o=e.memoizedProps;try{s.nodeValue=o}catch(y){$t(e,e.return,y)}}break;case 3:if(kn(t,e),Xn(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{yc(t.containerInfo)}catch(y){$t(e,e.return,y)}break;case 4:kn(t,e),Xn(e);break;case 13:kn(t,e),Xn(e),s=e.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(Fy=Vt())),n&4&&j0(e);break;case 22:if(d=r!==null&&r.memoizedState!==null,e.mode&1?(vr=(u=vr)||d,kn(t,e),vr=u):kn(t,e),Xn(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(Te=e,d=e.child;d!==null;){for(f=Te=d;Te!==null;){switch(p=Te,v=p.child,p.tag){case 0:case 11:case 14:case 15:nc(4,p,p.return);break;case 1:ba(p,p.return);var j=p.stateNode;if(typeof j.componentWillUnmount=="function"){n=p,r=p.return;try{t=n,j.props=t.memoizedProps,j.state=t.memoizedState,j.componentWillUnmount()}catch(y){$t(n,r,y)}}break;case 5:ba(p,p.return);break;case 22:if(p.memoizedState!==null){_0(f);continue}}v!==null?(v.return=p,Te=v):_0(f)}d=d.sibling}e:for(d=null,f=e;;){if(f.tag===5){if(d===null){d=f;try{s=f.stateNode,u?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(l=f.stateNode,c=f.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=YN("display",a))}catch(y){$t(e,e.return,y)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(y){$t(e,e.return,y)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:kn(t,e),Xn(e),n&4&&j0(e);break;case 21:break;default:kn(t,e),Xn(e)}}function Xn(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(SC(r)){var n=r;break e}r=r.return}throw Error(ge(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(hc(s,""),n.flags&=-33);var o=S0(e);Mp(e,o,s);break;case 3:case 4:var a=n.stateNode.containerInfo,l=S0(e);Dp(e,l,a);break;default:throw Error(ge(161))}}catch(c){$t(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function eO(e,t,r){Te=e,_C(e)}function _C(e,t,r){for(var n=(e.mode&1)!==0;Te!==null;){var s=Te,o=s.child;if(s.tag===22&&n){var a=s.memoizedState!==null||$u;if(!a){var l=s.alternate,c=l!==null&&l.memoizedState!==null||vr;l=$u;var u=vr;if($u=a,(vr=c)&&!u)for(Te=s;Te!==null;)a=Te,c=a.child,a.tag===22&&a.memoizedState!==null?C0(s):c!==null?(c.return=a,Te=c):C0(s);for(;o!==null;)Te=o,_C(o),o=o.sibling;Te=s,$u=l,vr=u}N0(e)}else s.subtreeFlags&8772&&o!==null?(o.return=s,Te=o):N0(e)}}function N0(e){for(;Te!==null;){var t=Te;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:vr||Wf(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!vr)if(r===null)n.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:Pn(t.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&l0(t,o,n);break;case 3:var a=t.updateQueue;if(a!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}l0(t,a,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&yc(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ge(163))}vr||t.flags&512&&Ip(t)}catch(p){$t(t,t.return,p)}}if(t===e){Te=null;break}if(r=t.sibling,r!==null){r.return=t.return,Te=r;break}Te=t.return}}function _0(e){for(;Te!==null;){var t=Te;if(t===e){Te=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Te=r;break}Te=t.return}}function C0(e){for(;Te!==null;){var t=Te;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Wf(4,t)}catch(c){$t(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var s=t.return;try{n.componentDidMount()}catch(c){$t(t,s,c)}}var o=t.return;try{Ip(t)}catch(c){$t(t,o,c)}break;case 5:var a=t.return;try{Ip(t)}catch(c){$t(t,a,c)}}}catch(c){$t(t,t.return,c)}if(t===e){Te=null;break}var l=t.sibling;if(l!==null){l.return=t.return,Te=l;break}Te=t.return}}var tO=Math.ceil,qd=Qs.ReactCurrentDispatcher,Oy=Qs.ReactCurrentOwner,vn=Qs.ReactCurrentBatchConfig,ft=0,sr=null,Ht=null,dr=0,Yr=0,Sa=Gi(0),Xt=0,kc=null,Ro=0,qf=0,Ly=0,sc=null,Wr=null,Fy=0,nl=1/0,ks=null,Hd=!1,Op=null,Ri=null,Bu=!1,ji=null,Kd=0,ic=0,Lp=null,ud=-1,dd=0;function Dr(){return ft&6?Vt():ud!==-1?ud:ud=Vt()}function Ai(e){return e.mode&1?ft&2&&dr!==0?dr&-dr:FM.transition!==null?(dd===0&&(dd=c_()),dd):(e=_t,e!==0||(e=window.event,e=e===void 0?16:g_(e.type)),e):1}function Vn(e,t,r,n){if(50<ic)throw ic=0,Lp=null,Error(ge(185));ru(e,r,n),(!(ft&2)||e!==sr)&&(e===sr&&(!(ft&2)&&(qf|=r),Xt===4&&di(e,dr)),Gr(e,n),r===1&&ft===0&&!(t.mode&1)&&(nl=Vt()+500,Bf&&Qi()))}function Gr(e,t){var r=e.callbackNode;FD(e,t);var n=Pd(e,e===sr?dr:0);if(n===0)r!==null&&Mv(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&Mv(r),t===1)e.tag===0?LM(E0.bind(null,e)):M_(E0.bind(null,e)),IM(function(){!(ft&6)&&Qi()}),r=null;else{switch(u_(n)){case 1:r=uy;break;case 4:r=a_;break;case 16:r=Td;break;case 536870912:r=l_;break;default:r=Td}r=IC(r,CC.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function CC(e,t){if(ud=-1,dd=0,ft&6)throw Error(ge(327));var r=e.callbackNode;if(Ta()&&e.callbackNode!==r)return null;var n=Pd(e,e===sr?dr:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Gd(e,n);else{t=n;var s=ft;ft|=2;var o=kC();(sr!==e||dr!==t)&&(ks=null,nl=Vt()+500,jo(e,t));do try{sO();break}catch(l){EC(e,l)}while(!0);jy(),qd.current=o,ft=s,Ht!==null?t=0:(sr=null,dr=0,t=Xt)}if(t!==0){if(t===2&&(s=up(e),s!==0&&(n=s,t=Fp(e,s))),t===1)throw r=kc,jo(e,0),di(e,n),Gr(e,Vt()),r;if(t===6)di(e,n);else{if(s=e.current.alternate,!(n&30)&&!rO(s)&&(t=Gd(e,n),t===2&&(o=up(e),o!==0&&(n=o,t=Fp(e,o))),t===1))throw r=kc,jo(e,0),di(e,n),Gr(e,Vt()),r;switch(e.finishedWork=s,e.finishedLanes=n,t){case 0:case 1:throw Error(ge(345));case 2:ro(e,Wr,ks);break;case 3:if(di(e,n),(n&130023424)===n&&(t=Fy+500-Vt(),10<t)){if(Pd(e,0)!==0)break;if(s=e.suspendedLanes,(s&n)!==n){Dr(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=xp(ro.bind(null,e,Wr,ks),t);break}ro(e,Wr,ks);break;case 4:if(di(e,n),(n&4194240)===n)break;for(t=e.eventTimes,s=-1;0<n;){var a=31-zn(n);o=1<<a,a=t[a],a>s&&(s=a),n&=~o}if(n=s,n=Vt()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*tO(n/1960))-n,10<n){e.timeoutHandle=xp(ro.bind(null,e,Wr,ks),n);break}ro(e,Wr,ks);break;case 5:ro(e,Wr,ks);break;default:throw Error(ge(329))}}}return Gr(e,Vt()),e.callbackNode===r?CC.bind(null,e):null}function Fp(e,t){var r=sc;return e.current.memoizedState.isDehydrated&&(jo(e,t).flags|=256),e=Gd(e,t),e!==2&&(t=Wr,Wr=r,t!==null&&Up(t)),e}function Up(e){Wr===null?Wr=e:Wr.push.apply(Wr,e)}function rO(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],o=s.getSnapshot;s=s.value;try{if(!qn(o(),s))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function di(e,t){for(t&=~Ly,t&=~qf,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-zn(t),n=1<<r;e[r]=-1,t&=~n}}function E0(e){if(ft&6)throw Error(ge(327));Ta();var t=Pd(e,0);if(!(t&1))return Gr(e,Vt()),null;var r=Gd(e,t);if(e.tag!==0&&r===2){var n=up(e);n!==0&&(t=n,r=Fp(e,n))}if(r===1)throw r=kc,jo(e,0),di(e,t),Gr(e,Vt()),r;if(r===6)throw Error(ge(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ro(e,Wr,ks),Gr(e,Vt()),null}function Uy(e,t){var r=ft;ft|=1;try{return e(t)}finally{ft=r,ft===0&&(nl=Vt()+500,Bf&&Qi())}}function Ao(e){ji!==null&&ji.tag===0&&!(ft&6)&&Ta();var t=ft;ft|=1;var r=vn.transition,n=_t;try{if(vn.transition=null,_t=1,e)return e()}finally{_t=n,vn.transition=r,ft=t,!(ft&6)&&Qi()}}function $y(){Yr=Sa.current,At(Sa)}function jo(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,AM(r)),Ht!==null)for(r=Ht.return;r!==null;){var n=r;switch(wy(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Md();break;case 3:tl(),At(Hr),At(_r),Ty();break;case 5:ky(n);break;case 4:tl();break;case 13:At(Ot);break;case 19:At(Ot);break;case 10:Ny(n.type._context);break;case 22:case 23:$y()}r=r.return}if(sr=e,Ht=e=Ii(e.current,null),dr=Yr=t,Xt=0,kc=null,Ly=qf=Ro=0,Wr=sc=null,lo!==null){for(t=0;t<lo.length;t++)if(r=lo[t],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,o=r.pending;if(o!==null){var a=o.next;o.next=s,n.next=a}r.pending=n}lo=null}return e}function EC(e,t){do{var r=Ht;try{if(jy(),ad.current=Wd,Vd){for(var n=Lt.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Vd=!1}if(Po=0,rr=Yt=Lt=null,rc=!1,_c=0,Oy.current=null,r===null||r.return===null){Xt=1,kc=t,Ht=null;break}e:{var o=e,a=r.return,l=r,c=t;if(t=dr,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var v=m0(a);if(v!==null){v.flags&=-257,p0(v,a,l,o,t),v.mode&1&&h0(o,u,t),t=v,c=u;var j=t.updateQueue;if(j===null){var y=new Set;y.add(c),t.updateQueue=y}else j.add(c);break e}else{if(!(t&1)){h0(o,u,t),By();break e}c=Error(ge(426))}}else if(It&&l.mode&1){var S=m0(a);if(S!==null){!(S.flags&65536)&&(S.flags|=256),p0(S,a,l,o,t),by(rl(c,l));break e}}o=c=rl(c,l),Xt!==4&&(Xt=2),sc===null?sc=[o]:sc.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var h=uC(o,c,t);a0(o,h);break e;case 1:l=c;var g=o.type,w=o.stateNode;if(!(o.flags&128)&&(typeof g.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Ri===null||!Ri.has(w)))){o.flags|=65536,t&=-t,o.lanes|=t;var _=dC(o,l,t);a0(o,_);break e}}o=o.return}while(o!==null)}PC(r)}catch(E){t=E,Ht===r&&r!==null&&(Ht=r=r.return);continue}break}while(!0)}function kC(){var e=qd.current;return qd.current=Wd,e===null?Wd:e}function By(){(Xt===0||Xt===3||Xt===2)&&(Xt=4),sr===null||!(Ro&268435455)&&!(qf&268435455)||di(sr,dr)}function Gd(e,t){var r=ft;ft|=2;var n=kC();(sr!==e||dr!==t)&&(ks=null,jo(e,t));do try{nO();break}catch(s){EC(e,s)}while(!0);if(jy(),ft=r,qd.current=n,Ht!==null)throw Error(ge(261));return sr=null,dr=0,Xt}function nO(){for(;Ht!==null;)TC(Ht)}function sO(){for(;Ht!==null&&!TD();)TC(Ht)}function TC(e){var t=AC(e.alternate,e,Yr);e.memoizedProps=e.pendingProps,t===null?PC(e):Ht=t,Oy.current=null}function PC(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=ZM(r,t),r!==null){r.flags&=32767,Ht=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Xt=6,Ht=null;return}}else if(r=YM(r,t,Yr),r!==null){Ht=r;return}if(t=t.sibling,t!==null){Ht=t;return}Ht=t=e}while(t!==null);Xt===0&&(Xt=5)}function ro(e,t,r){var n=_t,s=vn.transition;try{vn.transition=null,_t=1,iO(e,t,r,n)}finally{vn.transition=s,_t=n}return null}function iO(e,t,r,n){do Ta();while(ji!==null);if(ft&6)throw Error(ge(327));r=e.finishedWork;var s=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(ge(177));e.callbackNode=null,e.callbackPriority=0;var o=r.lanes|r.childLanes;if(UD(e,o),e===sr&&(Ht=sr=null,dr=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Bu||(Bu=!0,IC(Td,function(){return Ta(),null})),o=(r.flags&15990)!==0,r.subtreeFlags&15990||o){o=vn.transition,vn.transition=null;var a=_t;_t=1;var l=ft;ft|=4,Oy.current=null,JM(e,r),NC(r,e),_M(gp),Rd=!!pp,gp=pp=null,e.current=r,eO(r),PD(),ft=l,_t=a,vn.transition=o}else e.current=r;if(Bu&&(Bu=!1,ji=e,Kd=s),o=e.pendingLanes,o===0&&(Ri=null),ID(r.stateNode),Gr(e,Vt()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(Hd)throw Hd=!1,e=Op,Op=null,e;return Kd&1&&e.tag!==0&&Ta(),o=e.pendingLanes,o&1?e===Lp?ic++:(ic=0,Lp=e):ic=0,Qi(),null}function Ta(){if(ji!==null){var e=u_(Kd),t=vn.transition,r=_t;try{if(vn.transition=null,_t=16>e?16:e,ji===null)var n=!1;else{if(e=ji,ji=null,Kd=0,ft&6)throw Error(ge(331));var s=ft;for(ft|=4,Te=e.current;Te!==null;){var o=Te,a=o.child;if(Te.flags&16){var l=o.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(Te=u;Te!==null;){var d=Te;switch(d.tag){case 0:case 11:case 15:nc(8,d,o)}var f=d.child;if(f!==null)f.return=d,Te=f;else for(;Te!==null;){d=Te;var p=d.sibling,v=d.return;if(bC(d),d===u){Te=null;break}if(p!==null){p.return=v,Te=p;break}Te=v}}}var j=o.alternate;if(j!==null){var y=j.child;if(y!==null){j.child=null;do{var S=y.sibling;y.sibling=null,y=S}while(y!==null)}}Te=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,Te=a;else e:for(;Te!==null;){if(o=Te,o.flags&2048)switch(o.tag){case 0:case 11:case 15:nc(9,o,o.return)}var h=o.sibling;if(h!==null){h.return=o.return,Te=h;break e}Te=o.return}}var g=e.current;for(Te=g;Te!==null;){a=Te;var w=a.child;if(a.subtreeFlags&2064&&w!==null)w.return=a,Te=w;else e:for(a=g;Te!==null;){if(l=Te,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Wf(9,l)}}catch(E){$t(l,l.return,E)}if(l===a){Te=null;break e}var _=l.sibling;if(_!==null){_.return=l.return,Te=_;break e}Te=l.return}}if(ft=s,Qi(),ls&&typeof ls.onPostCommitFiberRoot=="function")try{ls.onPostCommitFiberRoot(Of,e)}catch{}n=!0}return n}finally{_t=r,vn.transition=t}}return!1}function k0(e,t,r){t=rl(r,t),t=uC(e,t,1),e=Pi(e,t,1),t=Dr(),e!==null&&(ru(e,1,t),Gr(e,t))}function $t(e,t,r){if(e.tag===3)k0(e,e,r);else for(;t!==null;){if(t.tag===3){k0(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Ri===null||!Ri.has(n))){e=rl(r,e),e=dC(t,e,1),t=Pi(t,e,1),e=Dr(),t!==null&&(ru(t,1,e),Gr(t,e));break}}t=t.return}}function oO(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=Dr(),e.pingedLanes|=e.suspendedLanes&r,sr===e&&(dr&r)===r&&(Xt===4||Xt===3&&(dr&130023424)===dr&&500>Vt()-Fy?jo(e,0):Ly|=r),Gr(e,t)}function RC(e,t){t===0&&(e.mode&1?(t=Ru,Ru<<=1,!(Ru&130023424)&&(Ru=4194304)):t=1);var r=Dr();e=zs(e,t),e!==null&&(ru(e,t,r),Gr(e,r))}function aO(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),RC(e,r)}function lO(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,s=e.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(ge(314))}n!==null&&n.delete(t),RC(e,r)}var AC;AC=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Hr.current)qr=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return qr=!1,QM(e,t,r);qr=!!(e.flags&131072)}else qr=!1,It&&t.flags&1048576&&O_(t,Fd,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;cd(e,t),e=t.pendingProps;var s=Xa(t,_r.current);ka(t,r),s=Ry(null,t,n,e,s,r);var o=Ay();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Kr(n)?(o=!0,Od(t)):o=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Cy(t),s.updater=Vf,t.stateNode=s,s._reactInternals=t,_p(t,n,e,r),t=kp(null,t,n,!0,o,r)):(t.tag=0,It&&o&&vy(t),Pr(null,t,s,r),t=t.child),t;case 16:n=t.elementType;e:{switch(cd(e,t),e=t.pendingProps,s=n._init,n=s(n._payload),t.type=n,s=t.tag=uO(n),e=Pn(n,e),s){case 0:t=Ep(null,t,n,e,r);break e;case 1:t=x0(null,t,n,e,r);break e;case 11:t=g0(null,t,n,e,r);break e;case 14:t=y0(null,t,n,Pn(n.type,e),r);break e}throw Error(ge(306,n,""))}return t;case 0:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Pn(n,s),Ep(e,t,n,s,r);case 1:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Pn(n,s),x0(e,t,n,s,r);case 3:e:{if(pC(t),e===null)throw Error(ge(387));n=t.pendingProps,o=t.memoizedState,s=o.element,z_(e,t),Bd(t,n,null,r);var a=t.memoizedState;if(n=a.element,o.isDehydrated)if(o={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){s=rl(Error(ge(423)),t),t=v0(e,t,n,r,s);break e}else if(n!==s){s=rl(Error(ge(424)),t),t=v0(e,t,n,r,s);break e}else for(Jr=Ti(t.stateNode.containerInfo.firstChild),en=t,It=!0,Mn=null,r=$_(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Ja(),n===s){t=Vs(e,t,r);break e}Pr(e,t,n,r)}t=t.child}return t;case 5:return V_(t),e===null&&Sp(t),n=t.type,s=t.pendingProps,o=e!==null?e.memoizedProps:null,a=s.children,yp(n,s)?a=null:o!==null&&yp(n,o)&&(t.flags|=32),mC(e,t),Pr(e,t,a,r),t.child;case 6:return e===null&&Sp(t),null;case 13:return gC(e,t,r);case 4:return Ey(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=el(t,null,n,r):Pr(e,t,n,r),t.child;case 11:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Pn(n,s),g0(e,t,n,s,r);case 7:return Pr(e,t,t.pendingProps,r),t.child;case 8:return Pr(e,t,t.pendingProps.children,r),t.child;case 12:return Pr(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,s=t.pendingProps,o=t.memoizedProps,a=s.value,Tt(Ud,n._currentValue),n._currentValue=a,o!==null)if(qn(o.value,a)){if(o.children===s.children&&!Hr.current){t=Vs(e,t,r);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var l=o.dependencies;if(l!==null){a=o.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(o.tag===1){c=Os(-1,r&-r),c.tag=2;var u=o.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}o.lanes|=r,c=o.alternate,c!==null&&(c.lanes|=r),jp(o.return,r,t),l.lanes|=r;break}c=c.next}}else if(o.tag===10)a=o.type===t.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(ge(341));a.lanes|=r,l=a.alternate,l!==null&&(l.lanes|=r),jp(a,r,t),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===t){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}Pr(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,n=t.pendingProps.children,ka(t,r),s=Sn(s),n=n(s),t.flags|=1,Pr(e,t,n,r),t.child;case 14:return n=t.type,s=Pn(n,t.pendingProps),s=Pn(n.type,s),y0(e,t,n,s,r);case 15:return fC(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Pn(n,s),cd(e,t),t.tag=1,Kr(n)?(e=!0,Od(t)):e=!1,ka(t,r),cC(t,n,s),_p(t,n,s,r),kp(null,t,n,!0,e,r);case 19:return yC(e,t,r);case 22:return hC(e,t,r)}throw Error(ge(156,t.tag))};function IC(e,t){return o_(e,t)}function cO(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xn(e,t,r,n){return new cO(e,t,r,n)}function zy(e){return e=e.prototype,!(!e||!e.isReactComponent)}function uO(e){if(typeof e=="function")return zy(e)?1:0;if(e!=null){if(e=e.$$typeof,e===ay)return 11;if(e===ly)return 14}return 2}function Ii(e,t){var r=e.alternate;return r===null?(r=xn(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function fd(e,t,r,n,s,o){var a=2;if(n=e,typeof e=="function")zy(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case fa:return No(r.children,s,o,t);case oy:a=8,s|=8;break;case Qm:return e=xn(12,r,t,s|2),e.elementType=Qm,e.lanes=o,e;case Ym:return e=xn(13,r,t,s),e.elementType=Ym,e.lanes=o,e;case Zm:return e=xn(19,r,t,s),e.elementType=Zm,e.lanes=o,e;case VN:return Hf(r,s,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case BN:a=10;break e;case zN:a=9;break e;case ay:a=11;break e;case ly:a=14;break e;case ai:a=16,n=null;break e}throw Error(ge(130,e==null?e:typeof e,""))}return t=xn(a,r,t,s),t.elementType=e,t.type=n,t.lanes=o,t}function No(e,t,r,n){return e=xn(7,e,n,t),e.lanes=r,e}function Hf(e,t,r,n){return e=xn(22,e,n,t),e.elementType=VN,e.lanes=r,e.stateNode={isHidden:!1},e}function om(e,t,r){return e=xn(6,e,null,t),e.lanes=r,e}function am(e,t,r){return t=xn(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function dO(e,t,r,n,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Bh(0),this.expirationTimes=Bh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bh(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Vy(e,t,r,n,s,o,a,l,c){return e=new dO(e,t,r,l,c),t===1?(t=1,o===!0&&(t|=8)):t=0,o=xn(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Cy(o),e}function fO(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:da,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function DC(e){if(!e)return Li;e=e._reactInternals;e:{if(Wo(e)!==e||e.tag!==1)throw Error(ge(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Kr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ge(171))}if(e.tag===1){var r=e.type;if(Kr(r))return D_(e,r,t)}return t}function MC(e,t,r,n,s,o,a,l,c){return e=Vy(r,n,!0,e,s,o,a,l,c),e.context=DC(null),r=e.current,n=Dr(),s=Ai(r),o=Os(n,s),o.callback=t??null,Pi(r,o,s),e.current.lanes=s,ru(e,s,n),Gr(e,n),e}function Kf(e,t,r,n){var s=t.current,o=Dr(),a=Ai(s);return r=DC(r),t.context===null?t.context=r:t.pendingContext=r,t=Os(o,a),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Pi(s,t,a),e!==null&&(Vn(e,s,a,o),od(e,s,a)),a}function Qd(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function T0(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Wy(e,t){T0(e,t),(e=e.alternate)&&T0(e,t)}function hO(){return null}var OC=typeof reportError=="function"?reportError:function(e){console.error(e)};function qy(e){this._internalRoot=e}Gf.prototype.render=qy.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ge(409));Kf(e,t,null,null)};Gf.prototype.unmount=qy.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Ao(function(){Kf(null,e,null,null)}),t[Bs]=null}};function Gf(e){this._internalRoot=e}Gf.prototype.unstable_scheduleHydration=function(e){if(e){var t=h_();e={blockedOn:null,target:e,priority:t};for(var r=0;r<ui.length&&t!==0&&t<ui[r].priority;r++);ui.splice(r,0,e),r===0&&p_(e)}};function Hy(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Qf(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function P0(){}function mO(e,t,r,n,s){if(s){if(typeof n=="function"){var o=n;n=function(){var u=Qd(a);o.call(u)}}var a=MC(t,n,e,0,null,!1,!1,"",P0);return e._reactRootContainer=a,e[Bs]=a.current,wc(e.nodeType===8?e.parentNode:e),Ao(),a}for(;s=e.lastChild;)e.removeChild(s);if(typeof n=="function"){var l=n;n=function(){var u=Qd(c);l.call(u)}}var c=Vy(e,0,!1,null,null,!1,!1,"",P0);return e._reactRootContainer=c,e[Bs]=c.current,wc(e.nodeType===8?e.parentNode:e),Ao(function(){Kf(t,c,r,n)}),c}function Yf(e,t,r,n,s){var o=r._reactRootContainer;if(o){var a=o;if(typeof s=="function"){var l=s;s=function(){var c=Qd(a);l.call(c)}}Kf(t,a,e,s)}else a=mO(r,t,e,s,n);return Qd(a)}d_=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Vl(t.pendingLanes);r!==0&&(dy(t,r|1),Gr(t,Vt()),!(ft&6)&&(nl=Vt()+500,Qi()))}break;case 13:Ao(function(){var n=zs(e,1);if(n!==null){var s=Dr();Vn(n,e,1,s)}}),Wy(e,1)}};fy=function(e){if(e.tag===13){var t=zs(e,134217728);if(t!==null){var r=Dr();Vn(t,e,134217728,r)}Wy(e,134217728)}};f_=function(e){if(e.tag===13){var t=Ai(e),r=zs(e,t);if(r!==null){var n=Dr();Vn(r,e,t,n)}Wy(e,t)}};h_=function(){return _t};m_=function(e,t){var r=_t;try{return _t=e,t()}finally{_t=r}};ap=function(e,t,r){switch(t){case"input":if(ep(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var s=$f(n);if(!s)throw Error(ge(90));qN(n),ep(n,s)}}}break;case"textarea":KN(e,r);break;case"select":t=r.value,t!=null&&Na(e,!!r.multiple,t,!1)}};e_=Uy;t_=Ao;var pO={usingClientEntryPoint:!1,Events:[su,ga,$f,XN,JN,Uy]},Il={findFiberByHostInstance:ao,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},gO={bundleType:Il.bundleType,version:Il.version,rendererPackageName:Il.rendererPackageName,rendererConfig:Il.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Qs.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=s_(e),e===null?null:e.stateNode},findFiberByHostInstance:Il.findFiberByHostInstance||hO,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zu.isDisabled&&zu.supportsFiber)try{Of=zu.inject(gO),ls=zu}catch{}}on.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pO;on.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Hy(t))throw Error(ge(200));return fO(e,t,null,r)};on.createRoot=function(e,t){if(!Hy(e))throw Error(ge(299));var r=!1,n="",s=OC;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Vy(e,1,!1,null,null,r,!1,n,s),e[Bs]=t.current,wc(e.nodeType===8?e.parentNode:e),new qy(t)};on.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ge(188)):(e=Object.keys(e).join(","),Error(ge(268,e)));return e=s_(t),e=e===null?null:e.stateNode,e};on.flushSync=function(e){return Ao(e)};on.hydrate=function(e,t,r){if(!Qf(t))throw Error(ge(200));return Yf(null,e,t,!0,r)};on.hydrateRoot=function(e,t,r){if(!Hy(e))throw Error(ge(405));var n=r!=null&&r.hydratedSources||null,s=!1,o="",a=OC;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(o=r.identifierPrefix),r.onRecoverableError!==void 0&&(a=r.onRecoverableError)),t=MC(t,null,e,1,r??null,s,!1,o,a),e[Bs]=t.current,wc(e),n)for(e=0;e<n.length;e++)r=n[e],s=r._getVersion,s=s(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new Gf(t)};on.render=function(e,t,r){if(!Qf(t))throw Error(ge(200));return Yf(null,e,t,!1,r)};on.unmountComponentAtNode=function(e){if(!Qf(e))throw Error(ge(40));return e._reactRootContainer?(Ao(function(){Yf(null,null,e,!1,function(){e._reactRootContainer=null,e[Bs]=null})}),!0):!1};on.unstable_batchedUpdates=Uy;on.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Qf(r))throw Error(ge(200));if(e==null||e._reactInternals===void 0)throw Error(ge(38));return Yf(e,t,r,!1,n)};on.version="18.3.1-next-f1338f8080-20240426";function LC(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(LC)}catch(e){console.error(e)}}LC(),LN.exports=on;var qo=LN.exports;const yO=Xg(qo);var FC,R0=qo;FC=R0.createRoot,R0.hydrateRoot;function xO(e,t){if(e instanceof RegExp)return{keys:!1,pattern:e};var r,n,s,o,a=[],l="",c=e.split("/");for(c[0]||c.shift();s=c.shift();)r=s[0],r==="*"?(a.push(r),l+=s[1]==="?"?"(?:/(.*))?":"/(.*)"):r===":"?(n=s.indexOf("?",1),o=s.indexOf(".",1),a.push(s.substring(1,~n?n:~o?o:s.length)),l+=~n&&!~o?"(?:/([^/]+?))?":"/([^/]+?)",~o&&(l+=(~n?"?":"")+"\\"+s.substring(o))):l+="/"+s;return{keys:a,pattern:new RegExp("^"+l+(t?"(?=$|/)":"/?$"),"i")}}var UC={exports:{}},$C={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sl=m;function vO(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var wO=typeof Object.is=="function"?Object.is:vO,bO=sl.useState,SO=sl.useEffect,jO=sl.useLayoutEffect,NO=sl.useDebugValue;function _O(e,t){var r=t(),n=bO({inst:{value:r,getSnapshot:t}}),s=n[0].inst,o=n[1];return jO(function(){s.value=r,s.getSnapshot=t,lm(s)&&o({inst:s})},[e,r,t]),SO(function(){return lm(s)&&o({inst:s}),e(function(){lm(s)&&o({inst:s})})},[e]),NO(r),r}function lm(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!wO(e,r)}catch{return!0}}function CO(e,t){return t()}var EO=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?CO:_O;$C.useSyncExternalStore=sl.useSyncExternalStore!==void 0?sl.useSyncExternalStore:EO;UC.exports=$C;var kO=UC.exports;const TO=MN.useInsertionEffect,PO=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",BC=PO?m.useLayoutEffect:m.useEffect,RO=TO||BC,Ky=e=>{const t=m.useRef([e,(...r)=>t[0](...r)]).current;return RO(()=>{t[0]=e}),t[1]},AO="popstate",Gy="pushState",Qy="replaceState",IO="hashchange",A0=[AO,Gy,Qy,IO],DO=e=>{for(const t of A0)addEventListener(t,e);return()=>{for(const t of A0)removeEventListener(t,e)}},zC=(e,t)=>kO.useSyncExternalStore(DO,e,t),MO=()=>location.search,OO=({ssrSearch:e=""}={})=>zC(MO,()=>e),I0=()=>location.pathname,LO=({ssrPath:e}={})=>zC(I0,e?()=>e:I0),FO=(e,{replace:t=!1,state:r=null}={})=>history[t?Qy:Gy](r,"",e),UO=(e={})=>[LO(e),FO],D0=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[D0]>"u"){for(const e of[Gy,Qy]){const t=history[e];history[e]=function(){const r=t.apply(this,arguments),n=new Event(e);return n.arguments=arguments,dispatchEvent(n),r}}Object.defineProperty(window,D0,{value:!0})}const $O=(e,t)=>t.toLowerCase().indexOf(e.toLowerCase())?"~"+t:t.slice(e.length)||"/",VC=(e="")=>e==="/"?"":e,BO=(e,t)=>e[0]==="~"?e.slice(1):VC(t)+e,zO=(e="",t)=>$O(M0(VC(e)),M0(t)),M0=e=>{try{return decodeURI(e)}catch{return e}},WC={hook:UO,searchHook:OO,parser:xO,base:"",ssrPath:void 0,ssrSearch:void 0,ssrContext:void 0,hrefs:e=>e},qC=m.createContext(WC),Ho=()=>m.useContext(qC),HC={},KC=m.createContext(HC),VO=()=>m.useContext(KC),ou=e=>{const[t,r]=e.hook(e);return[zO(e.base,t),Ky((n,s)=>r(BO(n,e.base),s))]},Nn=()=>ou(Ho()),Yy=(e,t,r,n)=>{const{pattern:s,keys:o}=t instanceof RegExp?{keys:!1,pattern:t}:e(t||"*",n),a=s.exec(r)||[],[l,...c]=a;return l!==void 0?[!0,(()=>{const u=o!==!1?Object.fromEntries(o.map((f,p)=>[f,c[p]])):a.groups;let d={...c};return u&&Object.assign(d,u),d})(),...n?[l]:[]]:[!1,null]},GC=e=>Yy(Ho().parser,e,Nn()[0]),WO=({children:e,...t})=>{var d,f;const r=Ho(),n=t.hook?WC:r;let s=n;const[o,a]=((d=t.ssrPath)==null?void 0:d.split("?"))??[];a&&(t.ssrSearch=a,t.ssrPath=o),t.hrefs=t.hrefs??((f=t.hook)==null?void 0:f.hrefs);let l=m.useRef({}),c=l.current,u=c;for(let p in n){const v=p==="base"?n[p]+(t[p]||""):t[p]||n[p];c===u&&v!==u[p]&&(l.current=u={...u}),u[p]=v,v!==n[p]&&(s=u)}return m.createElement(qC.Provider,{value:s,children:e})},O0=({children:e,component:t},r)=>t?m.createElement(t,{params:r}):typeof e=="function"?e(r):e,qO=e=>{let t=m.useRef(HC);const r=t.current;return t.current=Object.keys(e).length!==Object.keys(r).length||Object.entries(e).some(([n,s])=>s!==r[n])?e:r},Ps=({path:e,nest:t,match:r,...n})=>{const s=Ho(),[o]=ou(s),[a,l,c]=r??Yy(s.parser,e,o,t),u=qO({...VO(),...l});if(!a)return null;const d=c?m.createElement(WO,{base:c},O0(n,u)):O0(n,u);return m.createElement(KC.Provider,{value:u,children:d})},Oe=m.forwardRef((e,t)=>{const r=Ho(),[n,s]=ou(r),{to:o="",href:a=o,onClick:l,asChild:c,children:u,className:d,replace:f,state:p,...v}=e,j=Ky(S=>{S.ctrlKey||S.metaKey||S.altKey||S.shiftKey||S.button!==0||(l==null||l(S),S.defaultPrevented||(S.preventDefault(),s(a,e)))}),y=r.hrefs(a[0]==="~"?a.slice(1):r.base+a,r);return c&&m.isValidElement(u)?m.cloneElement(u,{onClick:j,href:y}):m.createElement("a",{...v,onClick:j,href:y,className:d!=null&&d.call?d(n===a):d,children:u,ref:t})}),QC=e=>Array.isArray(e)?e.flatMap(t=>QC(t&&t.type===m.Fragment?t.props.children:t)):[e],HO=({children:e,location:t})=>{const r=Ho(),[n]=ou(r);for(const s of QC(e)){let o=0;if(m.isValidElement(s)&&(o=Yy(r.parser,s.props.path,t||n,s.props.nest))[0])return m.cloneElement(s,{match:o})}return null},YC=e=>{const{to:t,href:r=t}=e,n=Ho(),[,s]=ou(n),o=Ky(()=>s(t||r,e)),{ssrContext:a}=n;return BC(()=>{o()},[]),a&&(a.redirectTo=t),null};var gl=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Io=typeof window>"u"||"Deno"in globalThis;function hn(){}function KO(e,t){return typeof e=="function"?e(t):e}function $p(e){return typeof e=="number"&&e>=0&&e!==1/0}function ZC(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Pa(e,t){return typeof e=="function"?e(t):e}function On(e,t){return typeof e=="function"?e(t):e}function L0(e,t){const{type:r="all",exact:n,fetchStatus:s,predicate:o,queryKey:a,stale:l}=e;if(a){if(n){if(t.queryHash!==Zy(a,t.options))return!1}else if(!Tc(t.queryKey,a))return!1}if(r!=="all"){const c=t.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||s&&s!==t.state.fetchStatus||o&&!o(t))}function F0(e,t){const{exact:r,status:n,predicate:s,mutationKey:o}=e;if(o){if(!t.options.mutationKey)return!1;if(r){if(Do(t.options.mutationKey)!==Do(o))return!1}else if(!Tc(t.options.mutationKey,o))return!1}return!(n&&t.state.status!==n||s&&!s(t))}function Zy(e,t){return((t==null?void 0:t.queryKeyHashFn)||Do)(e)}function Do(e){return JSON.stringify(e,(t,r)=>Bp(r)?Object.keys(r).sort().reduce((n,s)=>(n[s]=r[s],n),{}):r)}function Tc(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>Tc(e[r],t[r])):!1}function XC(e,t){if(e===t)return e;const r=U0(e)&&U0(t);if(r||Bp(e)&&Bp(t)){const n=r?e:Object.keys(e),s=n.length,o=r?t:Object.keys(t),a=o.length,l=r?[]:{};let c=0;for(let u=0;u<a;u++){const d=r?u:o[u];(!r&&n.includes(d)||r)&&e[d]===void 0&&t[d]===void 0?(l[d]=void 0,c++):(l[d]=XC(e[d],t[d]),l[d]===e[d]&&e[d]!==void 0&&c++)}return s===a&&c===s?e:l}return t}function Yd(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}function U0(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Bp(e){if(!$0(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!$0(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function $0(e){return Object.prototype.toString.call(e)==="[object Object]"}function GO(e){return new Promise(t=>{setTimeout(t,e)})}function zp(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?XC(e,t):t}function QO(e,t,r=0){const n=[...e,t];return r&&n.length>r?n.slice(1):n}function YO(e,t,r=0){const n=[t,...e];return r&&n.length>r?n.slice(0,-1):n}var Xy=Symbol();function JC(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===Xy?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var po,hi,Fa,Ib,ZO=(Ib=class extends gl{constructor(){super();Ue(this,po);Ue(this,hi);Ue(this,Fa);_e(this,Fa,t=>{if(!Io&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){O(this,hi)||this.setEventListener(O(this,Fa))}onUnsubscribe(){var t;this.hasListeners()||((t=O(this,hi))==null||t.call(this),_e(this,hi,void 0))}setEventListener(t){var r;_e(this,Fa,t),(r=O(this,hi))==null||r.call(this),_e(this,hi,t(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(t){O(this,po)!==t&&(_e(this,po,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){var t;return typeof O(this,po)=="boolean"?O(this,po):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},po=new WeakMap,hi=new WeakMap,Fa=new WeakMap,Ib),Jy=new ZO,Ua,mi,$a,Db,XO=(Db=class extends gl{constructor(){super();Ue(this,Ua,!0);Ue(this,mi);Ue(this,$a);_e(this,$a,t=>{if(!Io&&window.addEventListener){const r=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){O(this,mi)||this.setEventListener(O(this,$a))}onUnsubscribe(){var t;this.hasListeners()||((t=O(this,mi))==null||t.call(this),_e(this,mi,void 0))}setEventListener(t){var r;_e(this,$a,t),(r=O(this,mi))==null||r.call(this),_e(this,mi,t(this.setOnline.bind(this)))}setOnline(t){O(this,Ua)!==t&&(_e(this,Ua,t),this.listeners.forEach(n=>{n(t)}))}isOnline(){return O(this,Ua)}},Ua=new WeakMap,mi=new WeakMap,$a=new WeakMap,Db),Zd=new XO;function Vp(){let e,t;const r=new Promise((s,o)=>{e=s,t=o});r.status="pending",r.catch(()=>{});function n(s){Object.assign(r,s),delete r.resolve,delete r.reject}return r.resolve=s=>{n({status:"fulfilled",value:s}),e(s)},r.reject=s=>{n({status:"rejected",reason:s}),t(s)},r}function JO(e){return Math.min(1e3*2**e,3e4)}function e2(e){return(e??"online")==="online"?Zd.isOnline():!0}var t2=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function cm(e){return e instanceof t2}function r2(e){let t=!1,r=0,n=!1,s;const o=Vp(),a=y=>{var S;n||(p(new t2(y)),(S=e.abort)==null||S.call(e))},l=()=>{t=!0},c=()=>{t=!1},u=()=>Jy.isFocused()&&(e.networkMode==="always"||Zd.isOnline())&&e.canRun(),d=()=>e2(e.networkMode)&&e.canRun(),f=y=>{var S;n||(n=!0,(S=e.onSuccess)==null||S.call(e,y),s==null||s(),o.resolve(y))},p=y=>{var S;n||(n=!0,(S=e.onError)==null||S.call(e,y),s==null||s(),o.reject(y))},v=()=>new Promise(y=>{var S;s=h=>{(n||u())&&y(h)},(S=e.onPause)==null||S.call(e)}).then(()=>{var y;s=void 0,n||(y=e.onContinue)==null||y.call(e)}),j=()=>{if(n)return;let y;const S=r===0?e.initialPromise:void 0;try{y=S??e.fn()}catch(h){y=Promise.reject(h)}Promise.resolve(y).then(f).catch(h=>{var I;if(n)return;const g=e.retry??(Io?0:3),w=e.retryDelay??JO,_=typeof w=="function"?w(r,h):w,E=g===!0||typeof g=="number"&&r<g||typeof g=="function"&&g(r,h);if(t||!E){p(h);return}r++,(I=e.onFail)==null||I.call(e,r,h),GO(_).then(()=>u()?void 0:v()).then(()=>{t?p(h):j()})})};return{promise:o,cancel:a,continue:()=>(s==null||s(),o),cancelRetry:l,continueRetry:c,canStart:d,start:()=>(d()?j():v().then(j),o)}}var e3=e=>setTimeout(e,0);function t3(){let e=[],t=0,r=l=>{l()},n=l=>{l()},s=e3;const o=l=>{t?e.push(l):s(()=>{r(l)})},a=()=>{const l=e;e=[],l.length&&s(()=>{n(()=>{l.forEach(c=>{r(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||a()}return c},batchCalls:l=>(...c)=>{o(()=>{l(...c)})},schedule:o,setNotifyFunction:l=>{r=l},setBatchNotifyFunction:l=>{n=l},setScheduler:l=>{s=l}}}var Zt=t3(),go,Mb,n2=(Mb=class{constructor(){Ue(this,go)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),$p(this.gcTime)&&_e(this,go,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Io?1/0:5*60*1e3))}clearGcTimeout(){O(this,go)&&(clearTimeout(O(this,go)),_e(this,go,void 0))}},go=new WeakMap,Mb),Ba,za,fn,yo,xr,Zc,xo,Rn,Cs,Ob,r3=(Ob=class extends n2{constructor(t){super();Ue(this,Rn);Ue(this,Ba);Ue(this,za);Ue(this,fn);Ue(this,yo);Ue(this,xr);Ue(this,Zc);Ue(this,xo);_e(this,xo,!1),_e(this,Zc,t.defaultOptions),this.setOptions(t.options),this.observers=[],_e(this,yo,t.client),_e(this,fn,O(this,yo).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,_e(this,Ba,n3(this.options)),this.state=t.state??O(this,Ba),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=O(this,xr))==null?void 0:t.promise}setOptions(t){this.options={...O(this,Zc),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&O(this,fn).remove(this)}setData(t,r){const n=zp(this.state.data,t,this.options);return Xe(this,Rn,Cs).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(t,r){Xe(this,Rn,Cs).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var n,s;const r=(n=O(this,xr))==null?void 0:n.promise;return(s=O(this,xr))==null||s.cancel(t),r?r.then(hn).catch(hn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(O(this,Ba))}isActive(){return this.observers.some(t=>On(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Xy||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(t=0){return this.state.isInvalidated||this.state.data===void 0||!ZC(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(n=>n.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=O(this,xr))==null||r.continue()}onOnline(){var r;const t=this.observers.find(n=>n.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=O(this,xr))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),O(this,fn).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(O(this,xr)&&(O(this,xo)?O(this,xr).cancel({revert:!0}):O(this,xr).cancelRetry()),this.scheduleGc()),O(this,fn).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Xe(this,Rn,Cs).call(this,{type:"invalidate"})}fetch(t,r){var c,u,d;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(O(this,xr))return O(this,xr).continueRetry(),O(this,xr).promise}if(t&&this.setOptions(t),!this.options.queryFn){const f=this.observers.find(p=>p.options.queryFn);f&&this.setOptions(f.options)}const n=new AbortController,s=f=>{Object.defineProperty(f,"signal",{enumerable:!0,get:()=>(_e(this,xo,!0),n.signal)})},o=()=>{const f=JC(this.options,r),p={client:O(this,yo),queryKey:this.queryKey,meta:this.meta};return s(p),_e(this,xo,!1),this.options.persister?this.options.persister(f,p,this):f(p)},a={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:O(this,yo),state:this.state,fetchFn:o};s(a),(c=this.options.behavior)==null||c.onFetch(a,this),_e(this,za,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=a.fetchOptions)==null?void 0:u.meta))&&Xe(this,Rn,Cs).call(this,{type:"fetch",meta:(d=a.fetchOptions)==null?void 0:d.meta});const l=f=>{var p,v,j,y;cm(f)&&f.silent||Xe(this,Rn,Cs).call(this,{type:"error",error:f}),cm(f)||((v=(p=O(this,fn).config).onError)==null||v.call(p,f,this),(y=(j=O(this,fn).config).onSettled)==null||y.call(j,this.state.data,f,this)),this.scheduleGc()};return _e(this,xr,r2({initialPromise:r==null?void 0:r.initialPromise,fn:a.fetchFn,abort:n.abort.bind(n),onSuccess:f=>{var p,v,j,y;if(f===void 0){l(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(f)}catch(S){l(S);return}(v=(p=O(this,fn).config).onSuccess)==null||v.call(p,f,this),(y=(j=O(this,fn).config).onSettled)==null||y.call(j,f,this.state.error,this),this.scheduleGc()},onError:l,onFail:(f,p)=>{Xe(this,Rn,Cs).call(this,{type:"failed",failureCount:f,error:p})},onPause:()=>{Xe(this,Rn,Cs).call(this,{type:"pause"})},onContinue:()=>{Xe(this,Rn,Cs).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0})),O(this,xr).start()}},Ba=new WeakMap,za=new WeakMap,fn=new WeakMap,yo=new WeakMap,xr=new WeakMap,Zc=new WeakMap,xo=new WeakMap,Rn=new WeakSet,Cs=function(t){const r=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...s2(n.data,this.options),fetchMeta:t.meta??null};case"success":return{...n,data:t.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=t.error;return cm(s)&&s.revert&&O(this,za)?{...O(this,za),fetchStatus:"idle"}:{...n,error:s,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=r(this.state),Zt.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),O(this,fn).notify({query:this,type:"updated",action:t})})},Ob);function s2(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:e2(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function n3(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,n=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var es,Lb,s3=(Lb=class extends gl{constructor(t={}){super();Ue(this,es);this.config=t,_e(this,es,new Map)}build(t,r,n){const s=r.queryKey,o=r.queryHash??Zy(s,r);let a=this.get(o);return a||(a=new r3({client:t,queryKey:s,queryHash:o,options:t.defaultQueryOptions(r),state:n,defaultOptions:t.getQueryDefaults(s)}),this.add(a)),a}add(t){O(this,es).has(t.queryHash)||(O(this,es).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=O(this,es).get(t.queryHash);r&&(t.destroy(),r===t&&O(this,es).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Zt.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return O(this,es).get(t)}getAll(){return[...O(this,es).values()]}find(t){const r={exact:!0,...t};return this.getAll().find(n=>L0(r,n))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(n=>L0(t,n)):r}notify(t){Zt.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){Zt.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Zt.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},es=new WeakMap,Lb),ts,Er,vo,rs,ii,Fb,i3=(Fb=class extends n2{constructor(t){super();Ue(this,rs);Ue(this,ts);Ue(this,Er);Ue(this,vo);this.mutationId=t.mutationId,_e(this,Er,t.mutationCache),_e(this,ts,[]),this.state=t.state||i2(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){O(this,ts).includes(t)||(O(this,ts).push(t),this.clearGcTimeout(),O(this,Er).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){_e(this,ts,O(this,ts).filter(r=>r!==t)),this.scheduleGc(),O(this,Er).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){O(this,ts).length||(this.state.status==="pending"?this.scheduleGc():O(this,Er).remove(this))}continue(){var t;return((t=O(this,vo))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var s,o,a,l,c,u,d,f,p,v,j,y,S,h,g,w,_,E,I,P;_e(this,vo,r2({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(M,F)=>{Xe(this,rs,ii).call(this,{type:"failed",failureCount:M,error:F})},onPause:()=>{Xe(this,rs,ii).call(this,{type:"pause"})},onContinue:()=>{Xe(this,rs,ii).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>O(this,Er).canRun(this)}));const r=this.state.status==="pending",n=!O(this,vo).canStart();try{if(!r){Xe(this,rs,ii).call(this,{type:"pending",variables:t,isPaused:n}),await((o=(s=O(this,Er).config).onMutate)==null?void 0:o.call(s,t,this));const F=await((l=(a=this.options).onMutate)==null?void 0:l.call(a,t));F!==this.state.context&&Xe(this,rs,ii).call(this,{type:"pending",context:F,variables:t,isPaused:n})}const M=await O(this,vo).start();return await((u=(c=O(this,Er).config).onSuccess)==null?void 0:u.call(c,M,t,this.state.context,this)),await((f=(d=this.options).onSuccess)==null?void 0:f.call(d,M,t,this.state.context)),await((v=(p=O(this,Er).config).onSettled)==null?void 0:v.call(p,M,null,this.state.variables,this.state.context,this)),await((y=(j=this.options).onSettled)==null?void 0:y.call(j,M,null,t,this.state.context)),Xe(this,rs,ii).call(this,{type:"success",data:M}),M}catch(M){try{throw await((h=(S=O(this,Er).config).onError)==null?void 0:h.call(S,M,t,this.state.context,this)),await((w=(g=this.options).onError)==null?void 0:w.call(g,M,t,this.state.context)),await((E=(_=O(this,Er).config).onSettled)==null?void 0:E.call(_,void 0,M,this.state.variables,this.state.context,this)),await((P=(I=this.options).onSettled)==null?void 0:P.call(I,void 0,M,t,this.state.context)),M}finally{Xe(this,rs,ii).call(this,{type:"error",error:M})}}finally{O(this,Er).runNext(this)}}},ts=new WeakMap,Er=new WeakMap,vo=new WeakMap,rs=new WeakSet,ii=function(t){const r=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),Zt.batch(()=>{O(this,ts).forEach(n=>{n.onMutationUpdate(t)}),O(this,Er).notify({mutation:this,type:"updated",action:t})})},Fb);function i2(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var As,An,Xc,Ub,o3=(Ub=class extends gl{constructor(t={}){super();Ue(this,As);Ue(this,An);Ue(this,Xc);this.config=t,_e(this,As,new Set),_e(this,An,new Map),_e(this,Xc,0)}build(t,r,n){const s=new i3({mutationCache:this,mutationId:++_u(this,Xc)._,options:t.defaultMutationOptions(r),state:n});return this.add(s),s}add(t){O(this,As).add(t);const r=Vu(t);if(typeof r=="string"){const n=O(this,An).get(r);n?n.push(t):O(this,An).set(r,[t])}this.notify({type:"added",mutation:t})}remove(t){if(O(this,As).delete(t)){const r=Vu(t);if(typeof r=="string"){const n=O(this,An).get(r);if(n)if(n.length>1){const s=n.indexOf(t);s!==-1&&n.splice(s,1)}else n[0]===t&&O(this,An).delete(r)}}this.notify({type:"removed",mutation:t})}canRun(t){const r=Vu(t);if(typeof r=="string"){const n=O(this,An).get(r),s=n==null?void 0:n.find(o=>o.state.status==="pending");return!s||s===t}else return!0}runNext(t){var n;const r=Vu(t);if(typeof r=="string"){const s=(n=O(this,An).get(r))==null?void 0:n.find(o=>o!==t&&o.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Zt.batch(()=>{O(this,As).forEach(t=>{this.notify({type:"removed",mutation:t})}),O(this,As).clear(),O(this,An).clear()})}getAll(){return Array.from(O(this,As))}find(t){const r={exact:!0,...t};return this.getAll().find(n=>F0(r,n))}findAll(t={}){return this.getAll().filter(r=>F0(t,r))}notify(t){Zt.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return Zt.batch(()=>Promise.all(t.map(r=>r.continue().catch(hn))))}},As=new WeakMap,An=new WeakMap,Xc=new WeakMap,Ub);function Vu(e){var t;return(t=e.options.scope)==null?void 0:t.id}function B0(e){return{onFetch:(t,r)=>{var d,f,p,v,j;const n=t.options,s=(p=(f=(d=t.fetchOptions)==null?void 0:d.meta)==null?void 0:f.fetchMore)==null?void 0:p.direction,o=((v=t.state.data)==null?void 0:v.pages)||[],a=((j=t.state.data)==null?void 0:j.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const u=async()=>{let y=!1;const S=w=>{Object.defineProperty(w,"signal",{enumerable:!0,get:()=>(t.signal.aborted?y=!0:t.signal.addEventListener("abort",()=>{y=!0}),t.signal)})},h=JC(t.options,t.fetchOptions),g=async(w,_,E)=>{if(y)return Promise.reject();if(_==null&&w.pages.length)return Promise.resolve(w);const I={client:t.client,queryKey:t.queryKey,pageParam:_,direction:E?"backward":"forward",meta:t.options.meta};S(I);const P=await h(I),{maxPages:M}=t.options,F=E?YO:QO;return{pages:F(w.pages,P,M),pageParams:F(w.pageParams,_,M)}};if(s&&o.length){const w=s==="backward",_=w?a3:z0,E={pages:o,pageParams:a},I=_(n,E);l=await g(E,I,w)}else{const w=e??o.length;do{const _=c===0?a[0]??n.initialPageParam:z0(n,l);if(c>0&&_==null)break;l=await g(l,_),c++}while(c<w)}return l};t.options.persister?t.fetchFn=()=>{var y,S;return(S=(y=t.options).persister)==null?void 0:S.call(y,u,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=u}}}function z0(e,{pages:t,pageParams:r}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,r[n],r):void 0}function a3(e,{pages:t,pageParams:r}){var n;return t.length>0?(n=e.getPreviousPageParam)==null?void 0:n.call(e,t[0],t,r[0],r):void 0}var Ut,pi,gi,Va,Wa,yi,qa,Ha,$b,l3=($b=class{constructor(e={}){Ue(this,Ut);Ue(this,pi);Ue(this,gi);Ue(this,Va);Ue(this,Wa);Ue(this,yi);Ue(this,qa);Ue(this,Ha);_e(this,Ut,e.queryCache||new s3),_e(this,pi,e.mutationCache||new o3),_e(this,gi,e.defaultOptions||{}),_e(this,Va,new Map),_e(this,Wa,new Map),_e(this,yi,0)}mount(){_u(this,yi)._++,O(this,yi)===1&&(_e(this,qa,Jy.subscribe(async e=>{e&&(await this.resumePausedMutations(),O(this,Ut).onFocus())})),_e(this,Ha,Zd.subscribe(async e=>{e&&(await this.resumePausedMutations(),O(this,Ut).onOnline())})))}unmount(){var e,t;_u(this,yi)._--,O(this,yi)===0&&((e=O(this,qa))==null||e.call(this),_e(this,qa,void 0),(t=O(this,Ha))==null||t.call(this),_e(this,Ha,void 0))}isFetching(e){return O(this,Ut).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return O(this,pi).findAll({...e,status:"pending"}).length}getQueryData(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=O(this,Ut).get(t.queryHash))==null?void 0:r.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=O(this,Ut).build(this,t),n=r.state.data;return n===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(Pa(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(n))}getQueriesData(e){return O(this,Ut).findAll(e).map(({queryKey:t,state:r})=>{const n=r.data;return[t,n]})}setQueryData(e,t,r){const n=this.defaultQueryOptions({queryKey:e}),s=O(this,Ut).get(n.queryHash),o=s==null?void 0:s.state.data,a=KO(t,o);if(a!==void 0)return O(this,Ut).build(this,n).setData(a,{...r,manual:!0})}setQueriesData(e,t,r){return Zt.batch(()=>O(this,Ut).findAll(e).map(({queryKey:n})=>[n,this.setQueryData(n,t,r)]))}getQueryState(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=O(this,Ut).get(t.queryHash))==null?void 0:r.state}removeQueries(e){const t=O(this,Ut);Zt.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=O(this,Ut);return Zt.batch(()=>(r.findAll(e).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},n=Zt.batch(()=>O(this,Ut).findAll(e).map(s=>s.cancel(r)));return Promise.all(n).then(hn).catch(hn)}invalidateQueries(e,t={}){return Zt.batch(()=>(O(this,Ut).findAll(e).forEach(r=>{r.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},n=Zt.batch(()=>O(this,Ut).findAll(e).filter(s=>!s.isDisabled()).map(s=>{let o=s.fetch(void 0,r);return r.throwOnError||(o=o.catch(hn)),s.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(n).then(hn)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=O(this,Ut).build(this,t);return r.isStaleByTime(Pa(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(hn).catch(hn)}fetchInfiniteQuery(e){return e.behavior=B0(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(hn).catch(hn)}ensureInfiniteQueryData(e){return e.behavior=B0(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Zd.isOnline()?O(this,pi).resumePausedMutations():Promise.resolve()}getQueryCache(){return O(this,Ut)}getMutationCache(){return O(this,pi)}getDefaultOptions(){return O(this,gi)}setDefaultOptions(e){_e(this,gi,e)}setQueryDefaults(e,t){O(this,Va).set(Do(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...O(this,Va).values()],r={};return t.forEach(n=>{Tc(e,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(e,t){O(this,Wa).set(Do(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...O(this,Wa).values()],r={};return t.forEach(n=>{Tc(e,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...O(this,gi).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=Zy(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===Xy&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...O(this,gi).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){O(this,Ut).clear(),O(this,pi).clear()}},Ut=new WeakMap,pi=new WeakMap,gi=new WeakMap,Va=new WeakMap,Wa=new WeakMap,yi=new WeakMap,qa=new WeakMap,Ha=new WeakMap,$b),zr,at,Jc,kr,wo,Ka,xi,ns,eu,Ga,Qa,bo,So,vi,Ya,wt,ql,Wp,qp,Hp,Kp,Gp,Qp,Yp,o2,Bb,c3=(Bb=class extends gl{constructor(t,r){super();Ue(this,wt);Ue(this,zr);Ue(this,at);Ue(this,Jc);Ue(this,kr);Ue(this,wo);Ue(this,Ka);Ue(this,xi);Ue(this,ns);Ue(this,eu);Ue(this,Ga);Ue(this,Qa);Ue(this,bo);Ue(this,So);Ue(this,vi);Ue(this,Ya,new Set);this.options=r,_e(this,zr,t),_e(this,ns,null),_e(this,xi,Vp()),this.options.experimental_prefetchInRender||O(this,xi).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(O(this,at).addObserver(this),V0(O(this,at),this.options)?Xe(this,wt,ql).call(this):this.updateResult(),Xe(this,wt,Kp).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Zp(O(this,at),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Zp(O(this,at),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Xe(this,wt,Gp).call(this),Xe(this,wt,Qp).call(this),O(this,at).removeObserver(this)}setOptions(t){const r=this.options,n=O(this,at);if(this.options=O(this,zr).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof On(this.options.enabled,O(this,at))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Xe(this,wt,Yp).call(this),O(this,at).setOptions(this.options),r._defaulted&&!Yd(this.options,r)&&O(this,zr).getQueryCache().notify({type:"observerOptionsUpdated",query:O(this,at),observer:this});const s=this.hasListeners();s&&W0(O(this,at),n,this.options,r)&&Xe(this,wt,ql).call(this),this.updateResult(),s&&(O(this,at)!==n||On(this.options.enabled,O(this,at))!==On(r.enabled,O(this,at))||Pa(this.options.staleTime,O(this,at))!==Pa(r.staleTime,O(this,at)))&&Xe(this,wt,Wp).call(this);const o=Xe(this,wt,qp).call(this);s&&(O(this,at)!==n||On(this.options.enabled,O(this,at))!==On(r.enabled,O(this,at))||o!==O(this,vi))&&Xe(this,wt,Hp).call(this,o)}getOptimisticResult(t){const r=O(this,zr).getQueryCache().build(O(this,zr),t),n=this.createResult(r,t);return d3(this,n)&&(_e(this,kr,n),_e(this,Ka,this.options),_e(this,wo,O(this,at).state)),n}getCurrentResult(){return O(this,kr)}trackResult(t,r){const n={};return Object.keys(t).forEach(s=>{Object.defineProperty(n,s,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(s),r==null||r(s),t[s])})}),n}trackProp(t){O(this,Ya).add(t)}getCurrentQuery(){return O(this,at)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const r=O(this,zr).defaultQueryOptions(t),n=O(this,zr).getQueryCache().build(O(this,zr),r);return n.fetch().then(()=>this.createResult(n,r))}fetch(t){return Xe(this,wt,ql).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),O(this,kr)))}createResult(t,r){var M;const n=O(this,at),s=this.options,o=O(this,kr),a=O(this,wo),l=O(this,Ka),u=t!==n?t.state:O(this,Jc),{state:d}=t;let f={...d},p=!1,v;if(r._optimisticResults){const F=this.hasListeners(),W=!F&&V0(t,r),re=F&&W0(t,n,r,s);(W||re)&&(f={...f,...s2(d.data,t.options)}),r._optimisticResults==="isRestoring"&&(f.fetchStatus="idle")}let{error:j,errorUpdatedAt:y,status:S}=f;if(r.select&&f.data!==void 0)if(o&&f.data===(a==null?void 0:a.data)&&r.select===O(this,eu))v=O(this,Ga);else try{_e(this,eu,r.select),v=r.select(f.data),v=zp(o==null?void 0:o.data,v,r),_e(this,Ga,v),_e(this,ns,null)}catch(F){_e(this,ns,F)}else v=f.data;if(r.placeholderData!==void 0&&v===void 0&&S==="pending"){let F;if(o!=null&&o.isPlaceholderData&&r.placeholderData===(l==null?void 0:l.placeholderData))F=o.data;else if(F=typeof r.placeholderData=="function"?r.placeholderData((M=O(this,Qa))==null?void 0:M.state.data,O(this,Qa)):r.placeholderData,r.select&&F!==void 0)try{F=r.select(F),_e(this,ns,null)}catch(W){_e(this,ns,W)}F!==void 0&&(S="success",v=zp(o==null?void 0:o.data,F,r),p=!0)}O(this,ns)&&(j=O(this,ns),v=O(this,Ga),y=Date.now(),S="error");const h=f.fetchStatus==="fetching",g=S==="pending",w=S==="error",_=g&&h,E=v!==void 0,P={status:S,fetchStatus:f.fetchStatus,isPending:g,isSuccess:S==="success",isError:w,isInitialLoading:_,isLoading:_,data:v,dataUpdatedAt:f.dataUpdatedAt,error:j,errorUpdatedAt:y,failureCount:f.fetchFailureCount,failureReason:f.fetchFailureReason,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>u.dataUpdateCount||f.errorUpdateCount>u.errorUpdateCount,isFetching:h,isRefetching:h&&!g,isLoadingError:w&&!E,isPaused:f.fetchStatus==="paused",isPlaceholderData:p,isRefetchError:w&&E,isStale:ex(t,r),refetch:this.refetch,promise:O(this,xi)};if(this.options.experimental_prefetchInRender){const F=q=>{P.status==="error"?q.reject(P.error):P.data!==void 0&&q.resolve(P.data)},W=()=>{const q=_e(this,xi,P.promise=Vp());F(q)},re=O(this,xi);switch(re.status){case"pending":t.queryHash===n.queryHash&&F(re);break;case"fulfilled":(P.status==="error"||P.data!==re.value)&&W();break;case"rejected":(P.status!=="error"||P.error!==re.reason)&&W();break}}return P}updateResult(){const t=O(this,kr),r=this.createResult(O(this,at),this.options);if(_e(this,wo,O(this,at).state),_e(this,Ka,this.options),O(this,wo).data!==void 0&&_e(this,Qa,O(this,at)),Yd(r,t))return;_e(this,kr,r);const n=()=>{if(!t)return!0;const{notifyOnChangeProps:s}=this.options,o=typeof s=="function"?s():s;if(o==="all"||!o&&!O(this,Ya).size)return!0;const a=new Set(o??O(this,Ya));return this.options.throwOnError&&a.add("error"),Object.keys(O(this,kr)).some(l=>{const c=l;return O(this,kr)[c]!==t[c]&&a.has(c)})};Xe(this,wt,o2).call(this,{listeners:n()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Xe(this,wt,Kp).call(this)}},zr=new WeakMap,at=new WeakMap,Jc=new WeakMap,kr=new WeakMap,wo=new WeakMap,Ka=new WeakMap,xi=new WeakMap,ns=new WeakMap,eu=new WeakMap,Ga=new WeakMap,Qa=new WeakMap,bo=new WeakMap,So=new WeakMap,vi=new WeakMap,Ya=new WeakMap,wt=new WeakSet,ql=function(t){Xe(this,wt,Yp).call(this);let r=O(this,at).fetch(this.options,t);return t!=null&&t.throwOnError||(r=r.catch(hn)),r},Wp=function(){Xe(this,wt,Gp).call(this);const t=Pa(this.options.staleTime,O(this,at));if(Io||O(this,kr).isStale||!$p(t))return;const n=ZC(O(this,kr).dataUpdatedAt,t)+1;_e(this,bo,setTimeout(()=>{O(this,kr).isStale||this.updateResult()},n))},qp=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(O(this,at)):this.options.refetchInterval)??!1},Hp=function(t){Xe(this,wt,Qp).call(this),_e(this,vi,t),!(Io||On(this.options.enabled,O(this,at))===!1||!$p(O(this,vi))||O(this,vi)===0)&&_e(this,So,setInterval(()=>{(this.options.refetchIntervalInBackground||Jy.isFocused())&&Xe(this,wt,ql).call(this)},O(this,vi)))},Kp=function(){Xe(this,wt,Wp).call(this),Xe(this,wt,Hp).call(this,Xe(this,wt,qp).call(this))},Gp=function(){O(this,bo)&&(clearTimeout(O(this,bo)),_e(this,bo,void 0))},Qp=function(){O(this,So)&&(clearInterval(O(this,So)),_e(this,So,void 0))},Yp=function(){const t=O(this,zr).getQueryCache().build(O(this,zr),this.options);if(t===O(this,at))return;const r=O(this,at);_e(this,at,t),_e(this,Jc,t.state),this.hasListeners()&&(r==null||r.removeObserver(this),t.addObserver(this))},o2=function(t){Zt.batch(()=>{t.listeners&&this.listeners.forEach(r=>{r(O(this,kr))}),O(this,zr).getQueryCache().notify({query:O(this,at),type:"observerResultsUpdated"})})},Bb);function u3(e,t){return On(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function V0(e,t){return u3(e,t)||e.state.data!==void 0&&Zp(e,t,t.refetchOnMount)}function Zp(e,t,r){if(On(t.enabled,e)!==!1){const n=typeof r=="function"?r(e):r;return n==="always"||n!==!1&&ex(e,t)}return!1}function W0(e,t,r,n){return(e!==t||On(n.enabled,e)===!1)&&(!r.suspense||e.state.status!=="error")&&ex(e,r)}function ex(e,t){return On(t.enabled,e)!==!1&&e.isStaleByTime(Pa(t.staleTime,e))}function d3(e,t){return!Yd(e.getCurrentResult(),t)}var wi,bi,Vr,Is,Fs,hd,Xp,zb,f3=(zb=class extends gl{constructor(r,n){super();Ue(this,Fs);Ue(this,wi);Ue(this,bi);Ue(this,Vr);Ue(this,Is);_e(this,wi,r),this.setOptions(n),this.bindMethods(),Xe(this,Fs,hd).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(r){var s;const n=this.options;this.options=O(this,wi).defaultMutationOptions(r),Yd(this.options,n)||O(this,wi).getMutationCache().notify({type:"observerOptionsUpdated",mutation:O(this,Vr),observer:this}),n!=null&&n.mutationKey&&this.options.mutationKey&&Do(n.mutationKey)!==Do(this.options.mutationKey)?this.reset():((s=O(this,Vr))==null?void 0:s.state.status)==="pending"&&O(this,Vr).setOptions(this.options)}onUnsubscribe(){var r;this.hasListeners()||(r=O(this,Vr))==null||r.removeObserver(this)}onMutationUpdate(r){Xe(this,Fs,hd).call(this),Xe(this,Fs,Xp).call(this,r)}getCurrentResult(){return O(this,bi)}reset(){var r;(r=O(this,Vr))==null||r.removeObserver(this),_e(this,Vr,void 0),Xe(this,Fs,hd).call(this),Xe(this,Fs,Xp).call(this)}mutate(r,n){var s;return _e(this,Is,n),(s=O(this,Vr))==null||s.removeObserver(this),_e(this,Vr,O(this,wi).getMutationCache().build(O(this,wi),this.options)),O(this,Vr).addObserver(this),O(this,Vr).execute(r)}},wi=new WeakMap,bi=new WeakMap,Vr=new WeakMap,Is=new WeakMap,Fs=new WeakSet,hd=function(){var n;const r=((n=O(this,Vr))==null?void 0:n.state)??i2();_e(this,bi,{...r,isPending:r.status==="pending",isSuccess:r.status==="success",isError:r.status==="error",isIdle:r.status==="idle",mutate:this.mutate,reset:this.reset})},Xp=function(r){Zt.batch(()=>{var n,s,o,a,l,c,u,d;if(O(this,Is)&&this.hasListeners()){const f=O(this,bi).variables,p=O(this,bi).context;(r==null?void 0:r.type)==="success"?((s=(n=O(this,Is)).onSuccess)==null||s.call(n,r.data,f,p),(a=(o=O(this,Is)).onSettled)==null||a.call(o,r.data,null,f,p)):(r==null?void 0:r.type)==="error"&&((c=(l=O(this,Is)).onError)==null||c.call(l,r.error,f,p),(d=(u=O(this,Is)).onSettled)==null||d.call(u,void 0,r.error,f,p))}this.listeners.forEach(f=>{f(O(this,bi))})})},zb),a2=m.createContext(void 0),Ys=e=>{const t=m.useContext(a2);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},h3=({client:e,children:t})=>(m.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),i.jsx(a2.Provider,{value:e,children:t})),l2=m.createContext(!1),m3=()=>m.useContext(l2);l2.Provider;function p3(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var g3=m.createContext(p3()),y3=()=>m.useContext(g3);function c2(e,t){return typeof e=="function"?e(...t):!!e}function Jp(){}var x3=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},v3=e=>{m.useEffect(()=>{e.clearReset()},[e])},w3=({result:e,errorResetBoundary:t,throwOnError:r,query:n,suspense:s})=>e.isError&&!t.isReset()&&!e.isFetching&&n&&(s&&e.data===void 0||c2(r,[e.error,n])),b3=e=>{const t=e.staleTime;e.suspense&&(e.staleTime=typeof t=="function"?(...r)=>Math.max(t(...r),1e3):Math.max(t??1e3,1e3),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3)))},S3=(e,t)=>e.isLoading&&e.isFetching&&!t,j3=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,q0=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function N3(e,t,r){var f,p,v,j,y;const n=Ys(),s=m3(),o=y3(),a=n.defaultQueryOptions(e);(p=(f=n.getDefaultOptions().queries)==null?void 0:f._experimental_beforeQuery)==null||p.call(f,a),a._optimisticResults=s?"isRestoring":"optimistic",b3(a),x3(a,o),v3(o);const l=!n.getQueryCache().get(a.queryHash),[c]=m.useState(()=>new t(n,a)),u=c.getOptimisticResult(a),d=!s&&e.subscribed!==!1;if(m.useSyncExternalStore(m.useCallback(S=>{const h=d?c.subscribe(Zt.batchCalls(S)):Jp;return c.updateResult(),h},[c,d]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),m.useEffect(()=>{c.setOptions(a)},[a,c]),j3(a,u))throw q0(a,c,o);if(w3({result:u,errorResetBoundary:o,throwOnError:a.throwOnError,query:n.getQueryCache().get(a.queryHash),suspense:a.suspense}))throw u.error;if((j=(v=n.getDefaultOptions().queries)==null?void 0:v._experimental_afterQuery)==null||j.call(v,a,u),a.experimental_prefetchInRender&&!Io&&S3(u,s)){const S=l?q0(a,c,o):(y=n.getQueryCache().get(a.queryHash))==null?void 0:y.promise;S==null||S.catch(Jp).finally(()=>{c.updateResult()})}return a.notifyOnChangeProps?u:c.trackResult(u)}function pt(e,t){return N3(e,c3)}function fr(e,t){const r=Ys(),[n]=m.useState(()=>new f3(r,e));m.useEffect(()=>{n.setOptions(e)},[n,e]);const s=m.useSyncExternalStore(m.useCallback(a=>n.subscribe(Zt.batchCalls(a)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),o=m.useCallback((a,l)=>{n.mutate(a,l).catch(Jp)},[n]);if(s.error&&c2(n.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:o,mutateAsync:s.mutate}}async function u2(e){if(!e.ok){let t=`${e.status}: ${e.statusText}`,r=null;try{const n=e.clone(),s=await e.text();if(s)try{r=JSON.parse(s),r.message&&(t=r.message)}catch{t=`${e.status}: ${s}`}console.error("API Error:",{url:e.url,status:e.status,statusText:e.statusText,data:r||s,headers:Object.fromEntries(n.headers.entries())})}catch(n){console.error("Error while processing API error:",n)}throw new Error(t)}}async function st(e,t,r,n){let s,o,a,l={};if(t&&typeof e=="string"&&typeof t=="string"?(s=e,o=t,a=r,l={}):(s="GET",o=e,l=t||{},a=void 0,l.method&&(s=l.method),l.body&&(a=l.body)),o.startsWith("/api/"))console.log(`Using relative API URL: ${o}`);else if(o.includes("/api/")){const c=new URL(o);o=c.pathname+c.search,console.log(`Converted to relative API URL: ${o}`)}l={method:s,credentials:"include",headers:{Accept:"application/json","Cache-Control":"no-cache"},...l},a&&(a instanceof FormData?l.body=a:(l.headers={...l.headers,"Content-Type":"application/json"},l.body=JSON.stringify(a))),l.credentials="include",console.log(`API ${s} request to ${o}`,{method:s,credentials:l.credentials,headers:l.headers});try{const c=await fetch(o,l);return console.log(`API ${s} request to ${o}, status: ${c.status}`),console.log("Response headers:",Object.fromEntries(c.headers.entries())),await u2(c),await c.json()}catch(c){throw console.error(`API Error for ${o}:`,c),c}}const d2=({on401:e})=>async({queryKey:t})=>{let r=t[0];if(r.startsWith("/api/"))console.log(`Using relative API URL: ${r}`);else if(r.includes("/api/")){const n=new URL(r);r=n.pathname+n.search,console.log(`Converted to relative API URL: ${r}`)}try{console.log(`Query fetch to ${r}`),console.log("Current cookies:",document.cookie);const n=await fetch(r,{credentials:"include",headers:{Accept:"application/json","Cache-Control":"no-cache"}});if(console.log(`Query fetch to ${r}, status: ${n.status}, ok: ${n.ok}`),console.log("Response headers:",Object.fromEntries(n.headers.entries())),e==="returnNull"&&n.status===401)return console.log("Unauthorized, returning null as configured"),r==="/api/user"&&!document.cookie.includes("connect.sid")&&console.log("No session cookie found, auth system may need refresh"),null;await u2(n);const s=await n.json();return console.log(`Query data from ${r}:`,s),s}catch(n){throw console.error(`Query error for ${r}:`,n),n}},ca=new l3({defaultOptions:{queries:{queryFn:d2({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}}),_3=1,C3=1e6;let um=0;function E3(){return um=(um+1)%Number.MAX_SAFE_INTEGER,um.toString()}const dm=new Map,H0=e=>{if(dm.has(e))return;const t=setTimeout(()=>{dm.delete(e),oc({type:"REMOVE_TOAST",toastId:e})},C3);dm.set(e,t)},k3=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,_3)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(r=>r.id===t.toast.id?{...r,...t.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=t;return r?H0(r):e.toasts.forEach(n=>{H0(n.id)}),{...e,toasts:e.toasts.map(n=>n.id===r||r===void 0?{...n,open:!1}:n)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(r=>r.id!==t.toastId)}}},md=[];let pd={toasts:[]};function oc(e){pd=k3(pd,e),md.forEach(t=>{t(pd)})}function eg({...e}){const t=E3(),r=s=>oc({type:"UPDATE_TOAST",toast:{...s,id:t}}),n=()=>oc({type:"DISMISS_TOAST",toastId:t});return oc({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:s=>{s||n()}}}),{id:t,dismiss:n,update:r}}function pr(){const[e,t]=m.useState(pd);return m.useEffect(()=>(md.push(t),()=>{const r=md.indexOf(t);r>-1&&md.splice(r,1)}),[e]),{...e,toast:eg,dismiss:r=>oc({type:"DISMISS_TOAST",toastId:r})}}function xe(e,t,{checkForDefaultPrevented:r=!0}={}){return function(s){if(e==null||e(s),r===!1||!s.defaultPrevented)return t==null?void 0:t(s)}}function K0(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Zf(...e){return t=>{let r=!1;const n=e.map(s=>{const o=K0(s,t);return!r&&typeof o=="function"&&(r=!0),o});if(r)return()=>{for(let s=0;s<n.length;s++){const o=n[s];typeof o=="function"?o():K0(e[s],null)}}}}function Ze(...e){return m.useCallback(Zf(...e),e)}function T3(e,t){const r=m.createContext(t),n=o=>{const{children:a,...l}=o,c=m.useMemo(()=>l,Object.values(l));return i.jsx(r.Provider,{value:c,children:a})};n.displayName=e+"Provider";function s(o){const a=m.useContext(r);if(a)return a;if(t!==void 0)return t;throw new Error(`\`${o}\` must be used within \`${e}\``)}return[n,s]}function Fr(e,t=[]){let r=[];function n(o,a){const l=m.createContext(a),c=r.length;r=[...r,a];const u=f=>{var h;const{scope:p,children:v,...j}=f,y=((h=p==null?void 0:p[e])==null?void 0:h[c])||l,S=m.useMemo(()=>j,Object.values(j));return i.jsx(y.Provider,{value:S,children:v})};u.displayName=o+"Provider";function d(f,p){var y;const v=((y=p==null?void 0:p[e])==null?void 0:y[c])||l,j=m.useContext(v);if(j)return j;if(a!==void 0)return a;throw new Error(`\`${f}\` must be used within \`${o}\``)}return[u,d]}const s=()=>{const o=r.map(a=>m.createContext(a));return function(l){const c=(l==null?void 0:l[e])||o;return m.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return s.scopeName=e,[n,P3(s,...t)]}function P3(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(o){const a=n.reduce((l,{useScope:c,scopeName:u})=>{const f=c(o)[`__scope${u}`];return{...l,...f}},{});return m.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return r.scopeName=t.scopeName,r}var ps=m.forwardRef((e,t)=>{const{children:r,...n}=e,s=m.Children.toArray(r),o=s.find(R3);if(o){const a=o.props.children,l=s.map(c=>c===o?m.Children.count(a)>1?m.Children.only(null):m.isValidElement(a)?a.props.children:null:c);return i.jsx(tg,{...n,ref:t,children:m.isValidElement(a)?m.cloneElement(a,void 0,l):null})}return i.jsx(tg,{...n,ref:t,children:r})});ps.displayName="Slot";var tg=m.forwardRef((e,t)=>{const{children:r,...n}=e;if(m.isValidElement(r)){const s=I3(r),o=A3(n,r.props);return r.type!==m.Fragment&&(o.ref=t?Zf(t,s):s),m.cloneElement(r,o)}return m.Children.count(r)>1?m.Children.only(null):null});tg.displayName="SlotClone";var tx=({children:e})=>i.jsx(i.Fragment,{children:e});function R3(e){return m.isValidElement(e)&&e.type===tx}function A3(e,t){const r={...t};for(const n in t){const s=e[n],o=t[n];/^on[A-Z]/.test(n)?s&&o?r[n]=(...l)=>{o(...l),s(...l)}:s&&(r[n]=s):n==="style"?r[n]={...s,...o}:n==="className"&&(r[n]=[s,o].filter(Boolean).join(" "))}return{...e,...r}}function I3(e){var n,s;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function au(e){const t=e+"CollectionProvider",[r,n]=Fr(t),[s,o]=r(t,{collectionRef:{current:null},itemMap:new Map}),a=v=>{const{scope:j,children:y}=v,S=$e.useRef(null),h=$e.useRef(new Map).current;return i.jsx(s,{scope:j,itemMap:h,collectionRef:S,children:y})};a.displayName=t;const l=e+"CollectionSlot",c=$e.forwardRef((v,j)=>{const{scope:y,children:S}=v,h=o(l,y),g=Ze(j,h.collectionRef);return i.jsx(ps,{ref:g,children:S})});c.displayName=l;const u=e+"CollectionItemSlot",d="data-radix-collection-item",f=$e.forwardRef((v,j)=>{const{scope:y,children:S,...h}=v,g=$e.useRef(null),w=Ze(j,g),_=o(u,y);return $e.useEffect(()=>(_.itemMap.set(g,{ref:g,...h}),()=>void _.itemMap.delete(g))),i.jsx(ps,{[d]:"",ref:w,children:S})});f.displayName=u;function p(v){const j=o(e+"CollectionConsumer",v);return $e.useCallback(()=>{const S=j.collectionRef.current;if(!S)return[];const h=Array.from(S.querySelectorAll(`[${d}]`));return Array.from(j.itemMap.values()).sort((_,E)=>h.indexOf(_.ref.current)-h.indexOf(E.ref.current))},[j.collectionRef,j.itemMap])}return[{Provider:a,Slot:c,ItemSlot:f},p,n]}var D3=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Le=D3.reduce((e,t)=>{const r=m.forwardRef((n,s)=>{const{asChild:o,...a}=n,l=o?ps:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),i.jsx(l,{...a,ref:s})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function rx(e,t){e&&qo.flushSync(()=>e.dispatchEvent(t))}function mr(e){const t=m.useRef(e);return m.useEffect(()=>{t.current=e}),m.useMemo(()=>(...r)=>{var n;return(n=t.current)==null?void 0:n.call(t,...r)},[])}function M3(e,t=globalThis==null?void 0:globalThis.document){const r=mr(e);m.useEffect(()=>{const n=s=>{s.key==="Escape"&&r(s)};return t.addEventListener("keydown",n,{capture:!0}),()=>t.removeEventListener("keydown",n,{capture:!0})},[r,t])}var O3="DismissableLayer",rg="dismissableLayer.update",L3="dismissableLayer.pointerDownOutside",F3="dismissableLayer.focusOutside",G0,f2=m.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Ko=m.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:s,onFocusOutside:o,onInteractOutside:a,onDismiss:l,...c}=e,u=m.useContext(f2),[d,f]=m.useState(null),p=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,v]=m.useState({}),j=Ze(t,P=>f(P)),y=Array.from(u.layers),[S]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),h=y.indexOf(S),g=d?y.indexOf(d):-1,w=u.layersWithOutsidePointerEventsDisabled.size>0,_=g>=h,E=$3(P=>{const M=P.target,F=[...u.branches].some(W=>W.contains(M));!_||F||(s==null||s(P),a==null||a(P),P.defaultPrevented||l==null||l())},p),I=B3(P=>{const M=P.target;[...u.branches].some(W=>W.contains(M))||(o==null||o(P),a==null||a(P),P.defaultPrevented||l==null||l())},p);return M3(P=>{g===u.layers.size-1&&(n==null||n(P),!P.defaultPrevented&&l&&(P.preventDefault(),l()))},p),m.useEffect(()=>{if(d)return r&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(G0=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),Q0(),()=>{r&&u.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=G0)}},[d,p,r,u]),m.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),Q0())},[d,u]),m.useEffect(()=>{const P=()=>v({});return document.addEventListener(rg,P),()=>document.removeEventListener(rg,P)},[]),i.jsx(Le.div,{...c,ref:j,style:{pointerEvents:w?_?"auto":"none":void 0,...e.style},onFocusCapture:xe(e.onFocusCapture,I.onFocusCapture),onBlurCapture:xe(e.onBlurCapture,I.onBlurCapture),onPointerDownCapture:xe(e.onPointerDownCapture,E.onPointerDownCapture)})});Ko.displayName=O3;var U3="DismissableLayerBranch",h2=m.forwardRef((e,t)=>{const r=m.useContext(f2),n=m.useRef(null),s=Ze(t,n);return m.useEffect(()=>{const o=n.current;if(o)return r.branches.add(o),()=>{r.branches.delete(o)}},[r.branches]),i.jsx(Le.div,{...e,ref:s})});h2.displayName=U3;function $3(e,t=globalThis==null?void 0:globalThis.document){const r=mr(e),n=m.useRef(!1),s=m.useRef(()=>{});return m.useEffect(()=>{const o=l=>{if(l.target&&!n.current){let c=function(){m2(L3,r,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",s.current),s.current=c,t.addEventListener("click",s.current,{once:!0})):c()}else t.removeEventListener("click",s.current);n.current=!1},a=window.setTimeout(()=>{t.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(a),t.removeEventListener("pointerdown",o),t.removeEventListener("click",s.current)}},[t,r]),{onPointerDownCapture:()=>n.current=!0}}function B3(e,t=globalThis==null?void 0:globalThis.document){const r=mr(e),n=m.useRef(!1);return m.useEffect(()=>{const s=o=>{o.target&&!n.current&&m2(F3,r,{originalEvent:o},{discrete:!1})};return t.addEventListener("focusin",s),()=>t.removeEventListener("focusin",s)},[t,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function Q0(){const e=new CustomEvent(rg);document.dispatchEvent(e)}function m2(e,t,r,{discrete:n}){const s=r.originalEvent.target,o=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&s.addEventListener(e,t,{once:!0}),n?rx(s,o):s.dispatchEvent(o)}var z3=Ko,V3=h2,ir=globalThis!=null&&globalThis.document?m.useLayoutEffect:()=>{},W3="Portal",yl=m.forwardRef((e,t)=>{var l;const{container:r,...n}=e,[s,o]=m.useState(!1);ir(()=>o(!0),[]);const a=r||s&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return a?yO.createPortal(i.jsx(Le.div,{...n,ref:t}),a):null});yl.displayName=W3;function q3(e,t){return m.useReducer((r,n)=>t[r][n]??r,e)}var ln=e=>{const{present:t,children:r}=e,n=H3(t),s=typeof r=="function"?r({present:n.isPresent}):m.Children.only(r),o=Ze(n.ref,K3(s));return typeof r=="function"||n.isPresent?m.cloneElement(s,{ref:o}):null};ln.displayName="Presence";function H3(e){const[t,r]=m.useState(),n=m.useRef({}),s=m.useRef(e),o=m.useRef("none"),a=e?"mounted":"unmounted",[l,c]=q3(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return m.useEffect(()=>{const u=Wu(n.current);o.current=l==="mounted"?u:"none"},[l]),ir(()=>{const u=n.current,d=s.current;if(d!==e){const p=o.current,v=Wu(u);e?c("MOUNT"):v==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(d&&p!==v?"ANIMATION_OUT":"UNMOUNT"),s.current=e}},[e,c]),ir(()=>{if(t){let u;const d=t.ownerDocument.defaultView??window,f=v=>{const y=Wu(n.current).includes(v.animationName);if(v.target===t&&y&&(c("ANIMATION_END"),!s.current)){const S=t.style.animationFillMode;t.style.animationFillMode="forwards",u=d.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=S)})}},p=v=>{v.target===t&&(o.current=Wu(n.current))};return t.addEventListener("animationstart",p),t.addEventListener("animationcancel",f),t.addEventListener("animationend",f),()=>{d.clearTimeout(u),t.removeEventListener("animationstart",p),t.removeEventListener("animationcancel",f),t.removeEventListener("animationend",f)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:m.useCallback(u=>{u&&(n.current=getComputedStyle(u)),r(u)},[])}}function Wu(e){return(e==null?void 0:e.animationName)||"none"}function K3(e){var n,s;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function Hn({prop:e,defaultProp:t,onChange:r=()=>{}}){const[n,s]=G3({defaultProp:t,onChange:r}),o=e!==void 0,a=o?e:n,l=mr(r),c=m.useCallback(u=>{if(o){const f=typeof u=="function"?u(e):u;f!==e&&l(f)}else s(u)},[o,e,s,l]);return[a,c]}function G3({defaultProp:e,onChange:t}){const r=m.useState(e),[n]=r,s=m.useRef(n),o=mr(t);return m.useEffect(()=>{s.current!==n&&(o(n),s.current=n)},[n,s,o]),r}var Q3="VisuallyHidden",lu=m.forwardRef((e,t)=>i.jsx(Le.span,{...e,ref:t,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...e.style}}));lu.displayName=Q3;var Y3=lu,nx="ToastProvider",[sx,Z3,X3]=au("Toast"),[p2,fH]=Fr("Toast",[X3]),[J3,Xf]=p2(nx),g2=e=>{const{__scopeToast:t,label:r="Notification",duration:n=5e3,swipeDirection:s="right",swipeThreshold:o=50,children:a}=e,[l,c]=m.useState(null),[u,d]=m.useState(0),f=m.useRef(!1),p=m.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${nx}\`. Expected non-empty \`string\`.`),i.jsx(sx.Provider,{scope:t,children:i.jsx(J3,{scope:t,label:r,duration:n,swipeDirection:s,swipeThreshold:o,toastCount:u,viewport:l,onViewportChange:c,onToastAdd:m.useCallback(()=>d(v=>v+1),[]),onToastRemove:m.useCallback(()=>d(v=>v-1),[]),isFocusedToastEscapeKeyDownRef:f,isClosePausedRef:p,children:a})})};g2.displayName=nx;var y2="ToastViewport",eL=["F8"],ng="toast.viewportPause",sg="toast.viewportResume",x2=m.forwardRef((e,t)=>{const{__scopeToast:r,hotkey:n=eL,label:s="Notifications ({hotkey})",...o}=e,a=Xf(y2,r),l=Z3(r),c=m.useRef(null),u=m.useRef(null),d=m.useRef(null),f=m.useRef(null),p=Ze(t,f,a.onViewportChange),v=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),j=a.toastCount>0;m.useEffect(()=>{const S=h=>{var w;n.length!==0&&n.every(_=>h[_]||h.code===_)&&((w=f.current)==null||w.focus())};return document.addEventListener("keydown",S),()=>document.removeEventListener("keydown",S)},[n]),m.useEffect(()=>{const S=c.current,h=f.current;if(j&&S&&h){const g=()=>{if(!a.isClosePausedRef.current){const I=new CustomEvent(ng);h.dispatchEvent(I),a.isClosePausedRef.current=!0}},w=()=>{if(a.isClosePausedRef.current){const I=new CustomEvent(sg);h.dispatchEvent(I),a.isClosePausedRef.current=!1}},_=I=>{!S.contains(I.relatedTarget)&&w()},E=()=>{S.contains(document.activeElement)||w()};return S.addEventListener("focusin",g),S.addEventListener("focusout",_),S.addEventListener("pointermove",g),S.addEventListener("pointerleave",E),window.addEventListener("blur",g),window.addEventListener("focus",w),()=>{S.removeEventListener("focusin",g),S.removeEventListener("focusout",_),S.removeEventListener("pointermove",g),S.removeEventListener("pointerleave",E),window.removeEventListener("blur",g),window.removeEventListener("focus",w)}}},[j,a.isClosePausedRef]);const y=m.useCallback(({tabbingDirection:S})=>{const g=l().map(w=>{const _=w.ref.current,E=[_,...hL(_)];return S==="forwards"?E:E.reverse()});return(S==="forwards"?g.reverse():g).flat()},[l]);return m.useEffect(()=>{const S=f.current;if(S){const h=g=>{var E,I,P;const w=g.altKey||g.ctrlKey||g.metaKey;if(g.key==="Tab"&&!w){const M=document.activeElement,F=g.shiftKey;if(g.target===S&&F){(E=u.current)==null||E.focus();return}const q=y({tabbingDirection:F?"backwards":"forwards"}),Y=q.findIndex(G=>G===M);fm(q.slice(Y+1))?g.preventDefault():F?(I=u.current)==null||I.focus():(P=d.current)==null||P.focus()}};return S.addEventListener("keydown",h),()=>S.removeEventListener("keydown",h)}},[l,y]),i.jsxs(V3,{ref:c,role:"region","aria-label":s.replace("{hotkey}",v),tabIndex:-1,style:{pointerEvents:j?void 0:"none"},children:[j&&i.jsx(ig,{ref:u,onFocusFromOutsideViewport:()=>{const S=y({tabbingDirection:"forwards"});fm(S)}}),i.jsx(sx.Slot,{scope:r,children:i.jsx(Le.ol,{tabIndex:-1,...o,ref:p})}),j&&i.jsx(ig,{ref:d,onFocusFromOutsideViewport:()=>{const S=y({tabbingDirection:"backwards"});fm(S)}})]})});x2.displayName=y2;var v2="ToastFocusProxy",ig=m.forwardRef((e,t)=>{const{__scopeToast:r,onFocusFromOutsideViewport:n,...s}=e,o=Xf(v2,r);return i.jsx(lu,{"aria-hidden":!0,tabIndex:0,...s,ref:t,style:{position:"fixed"},onFocus:a=>{var u;const l=a.relatedTarget;!((u=o.viewport)!=null&&u.contains(l))&&n()}})});ig.displayName=v2;var Jf="Toast",tL="toast.swipeStart",rL="toast.swipeMove",nL="toast.swipeCancel",sL="toast.swipeEnd",w2=m.forwardRef((e,t)=>{const{forceMount:r,open:n,defaultOpen:s,onOpenChange:o,...a}=e,[l=!0,c]=Hn({prop:n,defaultProp:s,onChange:o});return i.jsx(ln,{present:r||l,children:i.jsx(aL,{open:l,...a,ref:t,onClose:()=>c(!1),onPause:mr(e.onPause),onResume:mr(e.onResume),onSwipeStart:xe(e.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:xe(e.onSwipeMove,u=>{const{x:d,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${f}px`)}),onSwipeCancel:xe(e.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:xe(e.onSwipeEnd,u=>{const{x:d,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${f}px`),c(!1)})})})});w2.displayName=Jf;var[iL,oL]=p2(Jf,{onClose(){}}),aL=m.forwardRef((e,t)=>{const{__scopeToast:r,type:n="foreground",duration:s,open:o,onClose:a,onEscapeKeyDown:l,onPause:c,onResume:u,onSwipeStart:d,onSwipeMove:f,onSwipeCancel:p,onSwipeEnd:v,...j}=e,y=Xf(Jf,r),[S,h]=m.useState(null),g=Ze(t,G=>h(G)),w=m.useRef(null),_=m.useRef(null),E=s||y.duration,I=m.useRef(0),P=m.useRef(E),M=m.useRef(0),{onToastAdd:F,onToastRemove:W}=y,re=mr(()=>{var ne;(S==null?void 0:S.contains(document.activeElement))&&((ne=y.viewport)==null||ne.focus()),a()}),q=m.useCallback(G=>{!G||G===1/0||(window.clearTimeout(M.current),I.current=new Date().getTime(),M.current=window.setTimeout(re,G))},[re]);m.useEffect(()=>{const G=y.viewport;if(G){const ne=()=>{q(P.current),u==null||u()},Z=()=>{const fe=new Date().getTime()-I.current;P.current=P.current-fe,window.clearTimeout(M.current),c==null||c()};return G.addEventListener(ng,Z),G.addEventListener(sg,ne),()=>{G.removeEventListener(ng,Z),G.removeEventListener(sg,ne)}}},[y.viewport,E,c,u,q]),m.useEffect(()=>{o&&!y.isClosePausedRef.current&&q(E)},[o,E,y.isClosePausedRef,q]),m.useEffect(()=>(F(),()=>W()),[F,W]);const Y=m.useMemo(()=>S?E2(S):null,[S]);return y.viewport?i.jsxs(i.Fragment,{children:[Y&&i.jsx(lL,{__scopeToast:r,role:"status","aria-live":n==="foreground"?"assertive":"polite","aria-atomic":!0,children:Y}),i.jsx(iL,{scope:r,onClose:re,children:qo.createPortal(i.jsx(sx.ItemSlot,{scope:r,children:i.jsx(z3,{asChild:!0,onEscapeKeyDown:xe(l,()=>{y.isFocusedToastEscapeKeyDownRef.current||re(),y.isFocusedToastEscapeKeyDownRef.current=!1}),children:i.jsx(Le.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":o?"open":"closed","data-swipe-direction":y.swipeDirection,...j,ref:g,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:xe(e.onKeyDown,G=>{G.key==="Escape"&&(l==null||l(G.nativeEvent),G.nativeEvent.defaultPrevented||(y.isFocusedToastEscapeKeyDownRef.current=!0,re()))}),onPointerDown:xe(e.onPointerDown,G=>{G.button===0&&(w.current={x:G.clientX,y:G.clientY})}),onPointerMove:xe(e.onPointerMove,G=>{if(!w.current)return;const ne=G.clientX-w.current.x,Z=G.clientY-w.current.y,fe=!!_.current,B=["left","right"].includes(y.swipeDirection),z=["left","up"].includes(y.swipeDirection)?Math.min:Math.max,ue=B?z(0,ne):0,ae=B?0:z(0,Z),X=G.pointerType==="touch"?10:2,ee={x:ue,y:ae},je={originalEvent:G,delta:ee};fe?(_.current=ee,qu(rL,f,je,{discrete:!1})):Y0(ee,y.swipeDirection,X)?(_.current=ee,qu(tL,d,je,{discrete:!1}),G.target.setPointerCapture(G.pointerId)):(Math.abs(ne)>X||Math.abs(Z)>X)&&(w.current=null)}),onPointerUp:xe(e.onPointerUp,G=>{const ne=_.current,Z=G.target;if(Z.hasPointerCapture(G.pointerId)&&Z.releasePointerCapture(G.pointerId),_.current=null,w.current=null,ne){const fe=G.currentTarget,B={originalEvent:G,delta:ne};Y0(ne,y.swipeDirection,y.swipeThreshold)?qu(sL,v,B,{discrete:!0}):qu(nL,p,B,{discrete:!0}),fe.addEventListener("click",z=>z.preventDefault(),{once:!0})}})})})}),y.viewport)})]}):null}),lL=e=>{const{__scopeToast:t,children:r,...n}=e,s=Xf(Jf,t),[o,a]=m.useState(!1),[l,c]=m.useState(!1);return dL(()=>a(!0)),m.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),l?null:i.jsx(yl,{asChild:!0,children:i.jsx(lu,{...n,children:o&&i.jsxs(i.Fragment,{children:[s.label," ",r]})})})},cL="ToastTitle",b2=m.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e;return i.jsx(Le.div,{...n,ref:t})});b2.displayName=cL;var uL="ToastDescription",S2=m.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e;return i.jsx(Le.div,{...n,ref:t})});S2.displayName=uL;var j2="ToastAction",N2=m.forwardRef((e,t)=>{const{altText:r,...n}=e;return r.trim()?i.jsx(C2,{altText:r,asChild:!0,children:i.jsx(ix,{...n,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${j2}\`. Expected non-empty \`string\`.`),null)});N2.displayName=j2;var _2="ToastClose",ix=m.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e,s=oL(_2,r);return i.jsx(C2,{asChild:!0,children:i.jsx(Le.button,{type:"button",...n,ref:t,onClick:xe(e.onClick,s.onClose)})})});ix.displayName=_2;var C2=m.forwardRef((e,t)=>{const{__scopeToast:r,altText:n,...s}=e;return i.jsx(Le.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...s,ref:t})});function E2(e){const t=[];return Array.from(e.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&t.push(n.textContent),fL(n)){const s=n.ariaHidden||n.hidden||n.style.display==="none",o=n.dataset.radixToastAnnounceExclude==="";if(!s)if(o){const a=n.dataset.radixToastAnnounceAlt;a&&t.push(a)}else t.push(...E2(n))}}),t}function qu(e,t,r,{discrete:n}){const s=r.originalEvent.currentTarget,o=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:r});t&&s.addEventListener(e,t,{once:!0}),n?rx(s,o):s.dispatchEvent(o)}var Y0=(e,t,r=0)=>{const n=Math.abs(e.x),s=Math.abs(e.y),o=n>s;return t==="left"||t==="right"?o&&n>r:!o&&s>r};function dL(e=()=>{}){const t=mr(e);ir(()=>{let r=0,n=0;return r=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(n)}},[t])}function fL(e){return e.nodeType===e.ELEMENT_NODE}function hL(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const s=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||s?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function fm(e){const t=document.activeElement;return e.some(r=>r===t?!0:(r.focus(),document.activeElement!==t))}var mL=g2,k2=x2,T2=w2,P2=b2,R2=S2,A2=N2,I2=ix;function D2(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=D2(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function M2(){for(var e,t,r=0,n="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=D2(e))&&(n&&(n+=" "),n+=t);return n}const Z0=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,X0=M2,cu=(e,t)=>r=>{var n;if((t==null?void 0:t.variants)==null)return X0(e,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:s,defaultVariants:o}=t,a=Object.keys(s).map(u=>{const d=r==null?void 0:r[u],f=o==null?void 0:o[u];if(d===null)return null;const p=Z0(d)||Z0(f);return s[u][p]}),l=r&&Object.entries(r).reduce((u,d)=>{let[f,p]=d;return p===void 0||(u[f]=p),u},{}),c=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((u,d)=>{let{class:f,className:p,...v}=d;return Object.entries(v).every(j=>{let[y,S]=j;return Array.isArray(S)?S.includes({...o,...l}[y]):{...o,...l}[y]===S})?[...u,f,p]:u},[]);return X0(e,a,c,r==null?void 0:r.class,r==null?void 0:r.className)};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pL=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),O2=(...e)=>e.filter((t,r,n)=>!!t&&n.indexOf(t)===r).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var gL={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yL=m.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:s="",children:o,iconNode:a,...l},c)=>m.createElement("svg",{ref:c,...gL,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:O2("lucide",s),...l},[...a.map(([u,d])=>m.createElement(u,d)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=(e,t)=>{const r=m.forwardRef(({className:n,...s},o)=>m.createElement(yL,{ref:o,iconNode:t,className:O2(`lucide-${pL(e)}`,n),...s}));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xL=ke("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vL=ke("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wL=ke("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bL=ke("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const un=ke("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ox=ke("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SL=ke("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jL=ke("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ax=ke("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gd=ke("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NL=ke("CircleStop",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["rect",{x:"9",y:"9",width:"6",height:"6",rx:"1",key:"1ssd4o"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _L=ke("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L2=ke("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CL=ke("Compass",[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EL=ke("Contrast",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 18a6 6 0 0 0 0-12v12z",key:"j4l70d"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yd=ke("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kL=ke("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TL=ke("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ac=ke("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const og=ke("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J0=ke("Headphones",[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ag=ke("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PL=ke("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lx=ke("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F2=ke("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RL=ke("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AL=ke("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IL=ke("ListPlus",[["path",{d:"M11 12H3",key:"51ecnj"}],["path",{d:"M16 6H3",key:"1wxfjs"}],["path",{d:"M16 18H3",key:"12xzn7"}],["path",{d:"M18 9v6",key:"1twb98"}],["path",{d:"M21 12h-6",key:"bt1uis"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DL=ke("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gs=ke("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ML=ke("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ew=ke("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OL=ke("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LL=ke("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lg=ke("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FL=ke("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tw=ke("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nr=ke("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rw=ke("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cx=ke("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UL=ke("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pc=ke("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $L=ke("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const us=ke("Radio",[["path",{d:"M4.9 19.1C1 15.2 1 8.8 4.9 4.9",key:"1vaf9d"}],["path",{d:"M7.8 16.2c-2.3-2.3-2.3-6.1 0-8.5",key:"u1ii0m"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M16.2 7.8c2.3 2.3 2.3 6.1 0 8.5",key:"1j5fej"}],["path",{d:"M19.1 4.9C23 8.8 23 15.1 19.1 19",key:"10b0cb"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BL=ke("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zL=ke("Repeat",[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VL=ke("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rc=ke("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xd=ke("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WL=ke("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cg=ke("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nw=ke("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qL=ke("Shuffle",[["path",{d:"M2 18h1.4c1.3 0 2.5-.6 3.3-1.7l6.1-8.6c.7-1.1 2-1.7 3.3-1.7H22",key:"1wmou1"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 6h1.9c1.5 0 2.9.9 3.6 2.2",key:"10bdb2"}],["path",{d:"M22 18h-5.9c-1.3 0-2.6-.7-3.3-1.8l-.5-.8",key:"vgxac0"}],["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U2=ke("SkipBack",[["polygon",{points:"19 20 9 12 19 4 19 20",key:"o2sva"}],["line",{x1:"5",x2:"5",y1:"19",y2:"5",key:"1ocqjk"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $2=ke("SkipForward",[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HL=ke("SquarePlay",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"m9 8 6 4-6 4Z",key:"f1r3lt"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KL=ke("Tags",[["path",{d:"m15 5 6.3 6.3a2.4 2.4 0 0 1 0 3.4L17 19",key:"1cbfv1"}],["path",{d:"M9.586 5.586A2 2 0 0 0 8.172 5H3a1 1 0 0 0-1 1v5.172a2 2 0 0 0 .586 1.414L8.29 18.29a2.426 2.426 0 0 0 3.42 0l3.58-3.58a2.426 2.426 0 0 0 0-3.42z",key:"135mg7"}],["circle",{cx:"6.5",cy:"9.5",r:".5",fill:"currentColor",key:"5pm5xn"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ux=ke("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GL=ke("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B2=ke("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z2=ke("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ds=ke("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QL=ke("VideoOff",[["path",{d:"M10.66 6H14a2 2 0 0 1 2 2v2.5l5.248-3.062A.5.5 0 0 1 22 7.87v8.196",key:"w8jjjt"}],["path",{d:"M16 16a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h2",key:"1xawa7"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ls=ke("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eh=ke("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dx=ke("VolumeX",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const th=ke("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),fx="-",YL=e=>{const t=XL(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:a=>{const l=a.split(fx);return l[0]===""&&l.length!==1&&l.shift(),V2(l,t)||ZL(a)},getConflictingClassGroupIds:(a,l)=>{const c=r[a]||[];return l&&n[a]?[...c,...n[a]]:c}}},V2=(e,t)=>{var a;if(e.length===0)return t.classGroupId;const r=e[0],n=t.nextPart.get(r),s=n?V2(e.slice(1),n):void 0;if(s)return s;if(t.validators.length===0)return;const o=e.join(fx);return(a=t.validators.find(({validator:l})=>l(o)))==null?void 0:a.classGroupId},sw=/^\[(.+)\]$/,ZL=e=>{if(sw.test(e)){const t=sw.exec(e)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},XL=e=>{const{theme:t,prefix:r}=e,n={nextPart:new Map,validators:[]};return eF(Object.entries(e.classGroups),r).forEach(([o,a])=>{ug(a,n,o,t)}),n},ug=(e,t,r,n)=>{e.forEach(s=>{if(typeof s=="string"){const o=s===""?t:iw(t,s);o.classGroupId=r;return}if(typeof s=="function"){if(JL(s)){ug(s(n),t,r,n);return}t.validators.push({validator:s,classGroupId:r});return}Object.entries(s).forEach(([o,a])=>{ug(a,iw(t,o),r,n)})})},iw=(e,t)=>{let r=e;return t.split(fx).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},JL=e=>e.isThemeGetter,eF=(e,t)=>t?e.map(([r,n])=>{const s=n.map(o=>typeof o=="string"?t+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(([a,l])=>[t+a,l])):o);return[r,s]}):e,tF=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,n=new Map;const s=(o,a)=>{r.set(o,a),t++,t>e&&(t=0,n=r,r=new Map)};return{get(o){let a=r.get(o);if(a!==void 0)return a;if((a=n.get(o))!==void 0)return s(o,a),a},set(o,a){r.has(o)?r.set(o,a):s(o,a)}}},W2="!",rF=e=>{const{separator:t,experimentalParseClassName:r}=e,n=t.length===1,s=t[0],o=t.length,a=l=>{const c=[];let u=0,d=0,f;for(let S=0;S<l.length;S++){let h=l[S];if(u===0){if(h===s&&(n||l.slice(S,S+o)===t)){c.push(l.slice(d,S)),d=S+o;continue}if(h==="/"){f=S;continue}}h==="["?u++:h==="]"&&u--}const p=c.length===0?l:l.substring(d),v=p.startsWith(W2),j=v?p.substring(1):p,y=f&&f>d?f-d:void 0;return{modifiers:c,hasImportantModifier:v,baseClassName:j,maybePostfixModifierPosition:y}};return r?l=>r({className:l,parseClassName:a}):a},nF=e=>{if(e.length<=1)return e;const t=[];let r=[];return e.forEach(n=>{n[0]==="["?(t.push(...r.sort(),n),r=[]):r.push(n)}),t.push(...r.sort()),t},sF=e=>({cache:tF(e.cacheSize),parseClassName:rF(e),...YL(e)}),iF=/\s+/,oF=(e,t)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:s}=t,o=[],a=e.trim().split(iF);let l="";for(let c=a.length-1;c>=0;c-=1){const u=a[c],{modifiers:d,hasImportantModifier:f,baseClassName:p,maybePostfixModifierPosition:v}=r(u);let j=!!v,y=n(j?p.substring(0,v):p);if(!y){if(!j){l=u+(l.length>0?" "+l:l);continue}if(y=n(p),!y){l=u+(l.length>0?" "+l:l);continue}j=!1}const S=nF(d).join(":"),h=f?S+W2:S,g=h+y;if(o.includes(g))continue;o.push(g);const w=s(y,j);for(let _=0;_<w.length;++_){const E=w[_];o.push(h+E)}l=u+(l.length>0?" "+l:l)}return l};function aF(){let e=0,t,r,n="";for(;e<arguments.length;)(t=arguments[e++])&&(r=q2(t))&&(n&&(n+=" "),n+=r);return n}const q2=e=>{if(typeof e=="string")return e;let t,r="";for(let n=0;n<e.length;n++)e[n]&&(t=q2(e[n]))&&(r&&(r+=" "),r+=t);return r};function lF(e,...t){let r,n,s,o=a;function a(c){const u=t.reduce((d,f)=>f(d),e());return r=sF(u),n=r.cache.get,s=r.cache.set,o=l,l(c)}function l(c){const u=n(c);if(u)return u;const d=oF(c,r);return s(c,d),d}return function(){return o(aF.apply(null,arguments))}}const Pt=e=>{const t=r=>r[e]||[];return t.isThemeGetter=!0,t},H2=/^\[(?:([a-z-]+):)?(.+)\]$/i,cF=/^\d+\/\d+$/,uF=new Set(["px","full","screen"]),dF=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,fF=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,hF=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,mF=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,pF=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ns=e=>Ra(e)||uF.has(e)||cF.test(e),ri=e=>xl(e,"length",jF),Ra=e=>!!e&&!Number.isNaN(Number(e)),hm=e=>xl(e,"number",Ra),Dl=e=>!!e&&Number.isInteger(Number(e)),gF=e=>e.endsWith("%")&&Ra(e.slice(0,-1)),Qe=e=>H2.test(e),ni=e=>dF.test(e),yF=new Set(["length","size","percentage"]),xF=e=>xl(e,yF,K2),vF=e=>xl(e,"position",K2),wF=new Set(["image","url"]),bF=e=>xl(e,wF,_F),SF=e=>xl(e,"",NF),Ml=()=>!0,xl=(e,t,r)=>{const n=H2.exec(e);return n?n[1]?typeof t=="string"?n[1]===t:t.has(n[1]):r(n[2]):!1},jF=e=>fF.test(e)&&!hF.test(e),K2=()=>!1,NF=e=>mF.test(e),_F=e=>pF.test(e),CF=()=>{const e=Pt("colors"),t=Pt("spacing"),r=Pt("blur"),n=Pt("brightness"),s=Pt("borderColor"),o=Pt("borderRadius"),a=Pt("borderSpacing"),l=Pt("borderWidth"),c=Pt("contrast"),u=Pt("grayscale"),d=Pt("hueRotate"),f=Pt("invert"),p=Pt("gap"),v=Pt("gradientColorStops"),j=Pt("gradientColorStopPositions"),y=Pt("inset"),S=Pt("margin"),h=Pt("opacity"),g=Pt("padding"),w=Pt("saturate"),_=Pt("scale"),E=Pt("sepia"),I=Pt("skew"),P=Pt("space"),M=Pt("translate"),F=()=>["auto","contain","none"],W=()=>["auto","hidden","clip","visible","scroll"],re=()=>["auto",Qe,t],q=()=>[Qe,t],Y=()=>["",Ns,ri],G=()=>["auto",Ra,Qe],ne=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],Z=()=>["solid","dashed","dotted","double","none"],fe=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],B=()=>["start","end","center","between","around","evenly","stretch"],z=()=>["","0",Qe],ue=()=>["auto","avoid","all","avoid-page","page","left","right","column"],ae=()=>[Ra,Qe];return{cacheSize:500,separator:":",theme:{colors:[Ml],spacing:[Ns,ri],blur:["none","",ni,Qe],brightness:ae(),borderColor:[e],borderRadius:["none","","full",ni,Qe],borderSpacing:q(),borderWidth:Y(),contrast:ae(),grayscale:z(),hueRotate:ae(),invert:z(),gap:q(),gradientColorStops:[e],gradientColorStopPositions:[gF,ri],inset:re(),margin:re(),opacity:ae(),padding:q(),saturate:ae(),scale:ae(),sepia:z(),skew:ae(),space:q(),translate:q()},classGroups:{aspect:[{aspect:["auto","square","video",Qe]}],container:["container"],columns:[{columns:[ni]}],"break-after":[{"break-after":ue()}],"break-before":[{"break-before":ue()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...ne(),Qe]}],overflow:[{overflow:W()}],"overflow-x":[{"overflow-x":W()}],"overflow-y":[{"overflow-y":W()}],overscroll:[{overscroll:F()}],"overscroll-x":[{"overscroll-x":F()}],"overscroll-y":[{"overscroll-y":F()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[y]}],"inset-x":[{"inset-x":[y]}],"inset-y":[{"inset-y":[y]}],start:[{start:[y]}],end:[{end:[y]}],top:[{top:[y]}],right:[{right:[y]}],bottom:[{bottom:[y]}],left:[{left:[y]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Dl,Qe]}],basis:[{basis:re()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Qe]}],grow:[{grow:z()}],shrink:[{shrink:z()}],order:[{order:["first","last","none",Dl,Qe]}],"grid-cols":[{"grid-cols":[Ml]}],"col-start-end":[{col:["auto",{span:["full",Dl,Qe]},Qe]}],"col-start":[{"col-start":G()}],"col-end":[{"col-end":G()}],"grid-rows":[{"grid-rows":[Ml]}],"row-start-end":[{row:["auto",{span:[Dl,Qe]},Qe]}],"row-start":[{"row-start":G()}],"row-end":[{"row-end":G()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Qe]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Qe]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal",...B()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...B(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...B(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[g]}],px:[{px:[g]}],py:[{py:[g]}],ps:[{ps:[g]}],pe:[{pe:[g]}],pt:[{pt:[g]}],pr:[{pr:[g]}],pb:[{pb:[g]}],pl:[{pl:[g]}],m:[{m:[S]}],mx:[{mx:[S]}],my:[{my:[S]}],ms:[{ms:[S]}],me:[{me:[S]}],mt:[{mt:[S]}],mr:[{mr:[S]}],mb:[{mb:[S]}],ml:[{ml:[S]}],"space-x":[{"space-x":[P]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[P]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Qe,t]}],"min-w":[{"min-w":[Qe,t,"min","max","fit"]}],"max-w":[{"max-w":[Qe,t,"none","full","min","max","fit","prose",{screen:[ni]},ni]}],h:[{h:[Qe,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Qe,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Qe,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Qe,t,"auto","min","max","fit"]}],"font-size":[{text:["base",ni,ri]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",hm]}],"font-family":[{font:[Ml]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Qe]}],"line-clamp":[{"line-clamp":["none",Ra,hm]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Ns,Qe]}],"list-image":[{"list-image":["none",Qe]}],"list-style-type":[{list:["none","disc","decimal",Qe]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[h]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[h]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Z(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Ns,ri]}],"underline-offset":[{"underline-offset":["auto",Ns,Qe]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:q()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Qe]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Qe]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[h]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...ne(),vF]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",xF]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},bF]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[j]}],"gradient-via-pos":[{via:[j]}],"gradient-to-pos":[{to:[j]}],"gradient-from":[{from:[v]}],"gradient-via":[{via:[v]}],"gradient-to":[{to:[v]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[h]}],"border-style":[{border:[...Z(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[h]}],"divide-style":[{divide:Z()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...Z()]}],"outline-offset":[{"outline-offset":[Ns,Qe]}],"outline-w":[{outline:[Ns,ri]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:Y()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[h]}],"ring-offset-w":[{"ring-offset":[Ns,ri]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",ni,SF]}],"shadow-color":[{shadow:[Ml]}],opacity:[{opacity:[h]}],"mix-blend":[{"mix-blend":[...fe(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":fe()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",ni,Qe]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[f]}],saturate:[{saturate:[w]}],sepia:[{sepia:[E]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[h]}],"backdrop-saturate":[{"backdrop-saturate":[w]}],"backdrop-sepia":[{"backdrop-sepia":[E]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Qe]}],duration:[{duration:ae()}],ease:[{ease:["linear","in","out","in-out",Qe]}],delay:[{delay:ae()}],animate:[{animate:["none","spin","ping","pulse","bounce",Qe]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[_]}],"scale-x":[{"scale-x":[_]}],"scale-y":[{"scale-y":[_]}],rotate:[{rotate:[Dl,Qe]}],"translate-x":[{"translate-x":[M]}],"translate-y":[{"translate-y":[M]}],"skew-x":[{"skew-x":[I]}],"skew-y":[{"skew-y":[I]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Qe]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Qe]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":q()}],"scroll-mx":[{"scroll-mx":q()}],"scroll-my":[{"scroll-my":q()}],"scroll-ms":[{"scroll-ms":q()}],"scroll-me":[{"scroll-me":q()}],"scroll-mt":[{"scroll-mt":q()}],"scroll-mr":[{"scroll-mr":q()}],"scroll-mb":[{"scroll-mb":q()}],"scroll-ml":[{"scroll-ml":q()}],"scroll-p":[{"scroll-p":q()}],"scroll-px":[{"scroll-px":q()}],"scroll-py":[{"scroll-py":q()}],"scroll-ps":[{"scroll-ps":q()}],"scroll-pe":[{"scroll-pe":q()}],"scroll-pt":[{"scroll-pt":q()}],"scroll-pr":[{"scroll-pr":q()}],"scroll-pb":[{"scroll-pb":q()}],"scroll-pl":[{"scroll-pl":q()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Qe]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Ns,ri,hm]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},EF=lF(CF);function we(...e){return EF(M2(e))}const kF=mL,G2=m.forwardRef(({className:e,...t},r)=>i.jsx(k2,{ref:r,className:we("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));G2.displayName=k2.displayName;const TF=cu("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Q2=m.forwardRef(({className:e,variant:t,...r},n)=>i.jsx(T2,{ref:n,className:we(TF({variant:t}),e),...r}));Q2.displayName=T2.displayName;const PF=m.forwardRef(({className:e,...t},r)=>i.jsx(A2,{ref:r,className:we("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));PF.displayName=A2.displayName;const Y2=m.forwardRef(({className:e,...t},r)=>i.jsx(I2,{ref:r,className:we("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:i.jsx(th,{className:"h-4 w-4"})}));Y2.displayName=I2.displayName;const Z2=m.forwardRef(({className:e,...t},r)=>i.jsx(P2,{ref:r,className:we("text-sm font-semibold",e),...t}));Z2.displayName=P2.displayName;const X2=m.forwardRef(({className:e,...t},r)=>i.jsx(R2,{ref:r,className:we("text-sm opacity-90",e),...t}));X2.displayName=R2.displayName;function RF(){const{toasts:e}=pr();return i.jsxs(kF,{children:[e.map(function({id:t,title:r,description:n,action:s,...o}){return i.jsxs(Q2,{...o,children:[i.jsxs("div",{className:"grid gap-1",children:[r&&i.jsx(Z2,{children:r}),n&&i.jsx(X2,{children:n})]}),s,i.jsx(Y2,{})]},t)}),i.jsx(G2,{})]})}const ow="beatstream_player_state",J2=m.createContext(void 0),AF=e=>{if(isNaN(e))return"0:00";const t=Math.floor(e/60),r=Math.floor(e%60);return`${t}:${r<10?"0":""}${r}`};function IF({children:e}){const t=m.useRef(null),[r,n]=m.useState(null),[s,o]=m.useState(null),[a,l]=m.useState(!1),[c,u]=m.useState([]),[d,f]=m.useState([]),[p,v]=m.useState(!1),[j,y]=m.useState(0),[S,h]=m.useState(0),[g,w]=m.useState(75),[_,E]=m.useState(75),[I,P]=m.useState(!1),[M,F]=m.useState(!1),[W,re]=m.useState("off");m.useEffect(()=>(t.current||(t.current=new Audio,t.current.preload="metadata",n(t.current)),()=>{t.current&&(t.current.pause(),t.current.src="")}),[]),m.useEffect(()=>{const ee=t.current;if(!ee)return;const je=()=>{ee.duration&&!isNaN(ee.duration)&&y(ee.duration)},Ce=()=>h(ee.currentTime),D=()=>{G()},R=()=>{a&&ee.play().catch(Q=>console.error("Error auto-playing audio:",Q))};return ee.addEventListener("loadedmetadata",je),ee.addEventListener("timeupdate",Ce),ee.addEventListener("ended",D),ee.addEventListener("canplay",R),()=>{ee.removeEventListener("loadedmetadata",je),ee.removeEventListener("timeupdate",Ce),ee.removeEventListener("ended",D),ee.removeEventListener("canplay",R)}},[]),m.useEffect(()=>{try{const ee=localStorage.getItem("beatstream_volume");if(ee){const Ce=parseInt(ee);w(Ce),P(Ce===0)}const je=localStorage.getItem(ow);if(je){const Ce=JSON.parse(je);Ce.queue&&u(Ce.queue),Ce.history&&f(Ce.history),Ce.repeatMode&&re(Ce.repeatMode),Ce.isShuffling!==void 0&&F(Ce.isShuffling),Ce.isMinimized!==void 0&&v(Ce.isMinimized),Ce.currentTrack&&(o(Ce.currentTrack),t.current&&Ce.currentTrack.audioUrl&&(t.current.src=Ce.currentTrack.audioUrl,Ce.currentTime&&(t.current.currentTime=Ce.currentTime,h(Ce.currentTime)),Ce.isPlaying&&(t.current.play().catch(D=>{console.error("Error auto-resuming playback:",D)}),l(!0))))}}catch(ee){console.error("Error restoring player state:",ee)}},[]),m.useEffect(()=>{try{const ee={currentTrack:s,isPlaying:a,currentTime:S,queue:c,history:d.slice(0,10),repeatMode:W,isShuffling:M,isMinimized:p};localStorage.setItem(ow,JSON.stringify(ee))}catch(ee){console.error("Error saving player state:",ee)}},[s,a,S,c,d,W,M,p]),m.useEffect(()=>{localStorage.setItem("beatstream_volume",g.toString()),t.current&&(t.current.volume=g/100)},[g]),m.useEffect(()=>{!t.current||!s||(a?t.current.play().catch(ee=>{console.error("Error playing audio:",ee),l(!1)}):t.current.pause())},[a,s]),m.useEffect(()=>{if(!t.current||!s)return;const ee=a;t.current.src!==s.audioUrl&&(t.current.src=s.audioUrl,t.current.load(),h(0),ee&&t.current.play().catch(je=>{console.error("Error playing new track:",je),l(!1)}))},[s]),m.useCallback(ee=>{h(ee)},[]);const q=m.useCallback(ee=>{s&&f(je=>[s,...je.slice(0,19)]),o(ee),l(!0),v(!1)},[s]),Y=m.useCallback(()=>{s&&l(!a)},[s,a]),G=m.useCallback(()=>{if(W==="one"&&s){t.current&&(t.current.currentTime=0),h(0),l(!0);return}if(c.length>0){const ee=c[0],je=c.slice(1);s&&f(Ce=>[s,...Ce.slice(0,19)]),o(ee),u(je),l(!0)}else if(W==="all"&&s){const ee=[...d];s&&ee.unshift(s),ee.length>0&&(o(ee[0]),f(ee.slice(1)),l(!0))}else s&&(l(!1),t.current&&(t.current.currentTime=0),h(0))},[c,s,d,W]),ne=m.useCallback(()=>{if(S>3){t.current&&(t.current.currentTime=0),h(0);return}if(d.length>0){const ee=d[0],je=d.slice(1);s&&u(Ce=>[s,...Ce]),o(ee),f(je),l(!0)}else s&&(t.current&&(t.current.currentTime=0),h(0),l(!0))},[s,d,S]),Z=m.useCallback(ee=>{u(je=>[...je,ee])},[]),fe=m.useCallback(ee=>{u(je=>[ee,...je])},[]),B=m.useCallback(()=>{u([])},[]),z=m.useCallback(()=>{I?w(_):(E(g),w(0)),P(!I)},[I,g,_]),ue=m.useCallback(()=>{if(F(!M),!M&&c.length>1){const ee=[...c];for(let je=ee.length-1;je>0;je--){const Ce=Math.floor(Math.random()*(je+1));[ee[je],ee[Ce]]=[ee[Ce],ee[je]]}u(ee)}},[M,c]),ae=m.useCallback(()=>{re(ee=>ee==="off"?"all":ee==="all"?"one":"off")},[]),X=m.useCallback(()=>{v(!p)},[p]);return i.jsx(J2.Provider,{value:{currentTrack:s,isPlaying:a,queue:c,history:d,playTrack:q,togglePlayPause:Y,nextTrack:G,previousTrack:ne,addToQueue:Z,addTrackAndPlayNext:fe,clearQueue:B,duration:j,currentTime:S,setCurrentTime:h,volume:g,setVolume:w,isMuted:I,toggleMute:z,isShuffling:M,toggleShuffle:ue,repeatMode:W,toggleRepeat:ae,isMinimized:p,toggleMinimized:X,audioElement:r,formatTime:AF},children:e})}function hx(){const e=m.useContext(J2);if(e===void 0)throw new Error("useAudioPlayer must be used within an AudioPlayerProvider");return e}async function eE(){const e=await st("/api/posts/recent");return await Promise.all(e.map(async r=>{try{const n=await st(`/api/users/${r.userId}`);return{...r,user:n}}catch{return r}}))}async function tE(e){return await st(`/api/posts/user/${e}`)}async function mx(e){return await st(`/api/user-settings/${e}`)}async function px(e,t){console.log("API: Updating user settings:",{userId:e,data:t});try{const r=await st(`/api/user-settings/${e}`,{method:"PATCH",body:t});return console.log("API: User settings update result:",r),r}catch(r){throw console.error("API: Failed to update user settings:",r),r}}async function rE(e,t){return await st(`/api/users/${e}`,{method:"PATCH",body:t})}async function uu(){return await st("/api/tracks/recent")}async function nE(e){return await st(`/api/tracks/user/${e}`)}async function sE(e){return await st(`/api/tracks/${e}`,{method:"DELETE"})}async function rh(){return await st("/api/streams/featured")}async function gx(e){return await st(`/api/streams/user/${e}`)}async function dg(e){return await st(`/api/streams/${e}`)}async function iE(e){const t=await st("/api/user"),r={...e,userId:t.id,streamType:e.streamType||"video",useCamera:e.streamType==="audio"?!1:e.useCamera??!0,useMicrophone:e.useMicrophone??!0,useSystemAudio:e.useSystemAudio??!1,hasVisualElement:e.hasVisualElement??!1};return console.log("Creating stream with data:",r),await st("/api/streams",{method:"POST",body:r})}async function DF(e,t){try{console.log(`API: Uploading visual element for stream ${e}, type: ${t.type}, size: ${t.size} bytes`);const r=new FormData;r.append("visualElement",t);const n=await fetch(`/api/streams/${e}/visual-element`,{method:"POST",body:r,credentials:"include"});if(!n.ok){const o=await n.text();let a;try{a=JSON.parse(o)}catch{throw console.error("API: Server returned non-JSON error:",o),new Error(`Server error: ${n.status} ${n.statusText}`)}throw console.error("API: Failed to upload visual element:",a),new Error(a.error||"Failed to upload visual element")}const s=await n.json();return console.log("API: Visual element upload successful:",s),s}catch(r){throw console.error("API: Visual element upload exception:",r),r}}async function oE(e){return await st(`/api/streams/${e}`,{method:"DELETE"})}async function yx(e){return await st(`/api/streams/${e}/end`,{method:"POST"})}async function aE(e){const t=await st("/api/user");return await st("/api/streams/hls",{method:"POST",body:{...e,userId:t.id}})}async function lE(e){return await st(`/api/streams/${e}/hls`,{method:"POST"})}async function cE(e){return await st(`/api/streams/${e}/hls/end`,{method:"POST"})}async function fg(e,t){return await st(`/api/streams/${e}/recording/finalize`,{method:"POST",body:{savePermanently:t}})}async function uE(e,t){try{console.log(`API: Uploading segment for stream ${e}, size: ${t.size} bytes`);const r=new FormData;r.append("segment",t);const n=await fetch(`/api/streams/${e}/segment`,{method:"POST",body:r,credentials:"include"});if(!n.ok){const o=await n.text();let a;try{a=JSON.parse(o)}catch{throw console.error("API: Server returned non-JSON error:",o),new Error(`Server error: ${n.status} ${n.statusText}`)}throw console.error("API: Failed to upload segment:",a),new Error(a.error||"Failed to upload segment")}const s=await n.json();return console.log("API: Segment upload successful:",s),s}catch(r){throw console.error("API: Segment upload exception:",r),r}}async function xx(){return await st("/api/creators/recommended")}const MF=Object.freeze(Object.defineProperty({__proto__:null,createHLSStream:aE,createStream:iE,deleteStream:oE,deleteTrack:sE,endHLSStream:cE,endStream:yx,finalizeStreamRecording:fg,getFeaturedStreams:rh,getPosts:eE,getPostsByUser:tE,getRecentTracks:uu,getRecommendedCreators:xx,getStreamById:dg,getStreamsByUser:gx,getTracksByUser:nE,getUserSettings:mx,initializeHLSStream:lE,updateUserProfile:rE,updateUserSettings:px,uploadHLSSegment:uE,uploadVisualElement:DF},Symbol.toStringTag,{value:"Module"})),dE=m.createContext(null);function OF({children:e}){const{toast:t}=pr(),{data:r,error:n,isLoading:s,refetch:o}=pt({queryKey:["/api/user"],queryFn:d2({on401:"returnNull"}),retry:1,retryDelay:1e3,staleTime:5*60*1e3,refetchOnWindowFocus:!0}),a=fr({mutationFn:async u=>{console.log("Attempting login for user:",u.username);try{const d=await st("POST","/api/login",u);return console.log("Login successful, received user data:",d),d}catch(d){throw console.error("Login failed:",d),d}},onSuccess:u=>{console.log("Setting user data in queryClient cache"),ca.setQueryData(["/api/user"],u),ca.invalidateQueries({queryKey:["/api/user-settings"]}),t({title:"Login successful",description:`Welcome back, ${u.displayName}!`})},onError:u=>{console.error("Login mutation error handler:",u),t({title:"Login failed",description:u.message,variant:"destructive"})}}),l=fr({mutationFn:async u=>{console.log("Attempting to register new user:",u.username);try{const d=await st("POST","/api/register",u);return console.log("Registration successful, received user data:",d),d}catch(d){throw console.error("Registration failed:",d),d}},onSuccess:u=>{console.log("Setting user data in queryClient cache after registration"),ca.setQueryData(["/api/user"],u),t({title:"Registration successful",description:`Welcome to Traxx, ${u.displayName}!`})},onError:u=>{console.error("Registration mutation error handler:",u),t({title:"Registration failed",description:u.message,variant:"destructive"})}}),c=fr({mutationFn:async()=>{console.log("Attempting to log out");try{const u=await st("POST","/api/logout");return console.log("Logout successful:",u),u}catch(u){throw console.error("Logout failed:",u),u}},onSuccess:()=>{console.log("Clearing user data from queryClient cache"),ca.setQueryData(["/api/user"],null),ca.removeQueries({queryKey:["/api/user-settings"]}),t({title:"Logged out",description:"You have been successfully logged out."})},onError:u=>{console.error("Logout mutation error handler:",u),t({title:"Logout failed",description:u.message,variant:"destructive"})}});return i.jsx(dE.Provider,{value:{user:r??null,isLoading:s,error:n,loginMutation:a,logoutMutation:c,registerMutation:l,refetchUser:o},children:e})}function or(){const e=m.useContext(dE);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e}const fE=m.createContext(void 0),Hu="#8B5CF6",Qr={background:"#000000",foreground:"#FFFFFF",primary:"#FFFF00",border:"#FFFFFF",muted:"#505050"};function LF({children:e}){const t=()=>{try{const y=localStorage.getItem("traxx_theme_cache");if(y)return JSON.parse(y)}catch(y){console.error("Error parsing cached theme settings:",y)}return null},r=y=>{try{const h={...t()||{},...y};localStorage.setItem("traxx_theme_cache",JSON.stringify(h)),console.log("Theme cache updated:",h)}catch(S){console.error("Error updating theme cache:",S)}},n=t();console.log("Initial cached settings:",n);const[s,o]=m.useState((n==null?void 0:n.uiColor)||Hu),[a,l]=m.useState((n==null?void 0:n.highContrastMode)||!1),{user:c}=or(),{data:u}=pt({queryKey:["/api/user-settings",c==null?void 0:c.id],queryFn:()=>c?mx(c.id):Promise.reject("No authenticated user"),enabled:!!c}),d=fr({mutationFn:y=>c?(console.log("ThemeContext: Saving user settings to database:",y),px(c.id,y)):Promise.reject("No authenticated user"),onSuccess:y=>{console.log("ThemeContext: Successfully updated user settings in database:",y)},onError:y=>{console.error("ThemeContext: Failed to update user settings in database:",y)}});m.useEffect(()=>{console.log("Applying initial theme from cache:",a,s),a?f():p(s)},[]),m.useEffect(()=>{u&&(console.log("Settings loaded from server:",u),(u.uiColor!==s||u.highContrastMode!==a)&&(console.log("Applying theme from server settings"),o(u.uiColor||Hu),l(u.highContrastMode||!1),r({uiColor:u.uiColor||Hu,highContrastMode:u.highContrastMode||!1}),u.highContrastMode?f():p(u.uiColor||Hu)))},[u]);const f=()=>{const y=document.documentElement;y.style.setProperty("--background",Qr.background),y.style.setProperty("--foreground",Qr.foreground),y.style.setProperty("--primary",Qr.primary),y.style.setProperty("--primary-foreground","#000000"),y.style.setProperty("--border",Qr.border),y.style.setProperty("--muted",Qr.muted),y.style.setProperty("--muted-foreground",Qr.foreground),y.style.setProperty("--ring",Qr.primary),y.style.setProperty("--focus",Qr.primary),y.style.setProperty("--accent",Qr.primary),y.style.setProperty("--accent-foreground","#000000"),y.style.setProperty("--primary-50","#FFFFCC"),y.style.setProperty("--primary-900","#DDDD00"),y.style.setProperty("--gradient-from",Qr.primary),y.style.setProperty("--gradient-to",Qr.primary),y.style.setProperty("--font-size-base","1.05rem"),y.style.setProperty("--letter-spacing","0.025em"),y.style.setProperty("--border-width","2px"),document.body.classList.remove("custom-theme"),document.body.classList.add("high-contrast"),document.body.classList.add("custom-theme");const S={primary:Qr.primary,variant:"high-contrast",appearance:"dark",radius:.25};localStorage.setItem("theme",JSON.stringify(S)),console.log("High contrast mode applied with primary color:",Qr.primary)},p=y=>{const S=document.documentElement;document.body.classList.remove("high-contrast");const h=(P,M)=>{const F=parseInt(P.replace("#",""),16),W=Math.round(2.55*M),re=(F>>16)+W,q=(F>>8&255)+W,Y=(F&255)+W;return"#"+(16777216+(re<255?re<1?0:re:255)*65536+(q<255?q<1?0:q:255)*256+(Y<255?Y<1?0:Y:255)).toString(16).slice(1)},w=(P=>{const M=P.replace("#",""),F=parseInt(M.substr(0,2),16),W=parseInt(M.substr(2,2),16),re=parseInt(M.substr(4,2),16);return(F*299+W*587+re*114)/1e3>155})(y)?"#000000":"#ffffff";S.style.setProperty("--font-size-base","1rem"),S.style.setProperty("--letter-spacing","normal"),S.style.setProperty("--primary",y),S.style.setProperty("--primary-foreground",w),S.style.setProperty("--primary-50",h(y,90)),S.style.setProperty("--primary-100",h(y,80)),S.style.setProperty("--primary-200",h(y,60)),S.style.setProperty("--primary-300",h(y,40)),S.style.setProperty("--primary-400",h(y,20)),S.style.setProperty("--primary-500",y),S.style.setProperty("--primary-600",h(y,-20)),S.style.setProperty("--primary-700",h(y,-40)),S.style.setProperty("--primary-800",h(y,-60)),S.style.setProperty("--primary-900",h(y,-80)),S.style.setProperty("--ring",y),S.style.setProperty("--border-hover",h(y,20)),S.style.setProperty("--accent",h(y,-10)),S.style.setProperty("--accent-foreground",w);const _=h(y,30),E=h(y,-30);S.style.setProperty("--gradient-from",E),S.style.setProperty("--gradient-to",_),S.style.setProperty("--focus-visible-ring",y),document.body.classList.add("custom-theme"),document.body.style.setProperty("--theme-color",y);const I={primary:y,variant:"vibrant",appearance:"dark",radius:.5};localStorage.setItem("theme",JSON.stringify(I)),console.log("Theme updated with color:",y)},v=y=>{y!==s&&(o(y),r({uiColor:y}),console.log("Color changed to:",y),a||p(y),c&&d.mutate({uiColor:y,highContrastMode:a}))},j=y=>{y!==a&&(l(y),r({highContrastMode:y}),console.log("High contrast mode changed to:",y),y?f():p(s),c&&d.mutate({uiColor:s,highContrastMode:y}))};return i.jsx(fE.Provider,{value:{primaryColor:s,setPrimaryColor:v,highContrastMode:a,setHighContrastMode:j},children:e})}const hE=()=>{const e=m.useContext(fE);if(e===void 0)throw new Error("useTheme must be used within a ThemeProvider");return e},vt=m.forwardRef(({className:e,type:t,...r},n)=>i.jsx("input",{type:t,className:we("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...r}));vt.displayName="Input";function aw(){const[e,t]=m.useState(""),[,r]=Nn(),[n,s]=m.useState(!1),o=c=>{t(c.target.value)},a=c=>{c.preventDefault(),e.trim()&&r(`/search?q=${encodeURIComponent(e.trim())}`)},l=()=>{t("")};return i.jsxs("form",{onSubmit:a,className:"relative w-full max-w-md",children:[i.jsx(vt,{type:"text",placeholder:"Search tracks, users, streams, or posts",value:e,onChange:o,onFocus:()=>s(!0),onBlur:()=>s(!1),className:`w-full py-2 px-4 pr-16 rounded-lg focus:outline-none focus:ring-1 focus:ring-primary transition-all duration-200 ${n?"bg-background/90":"bg-background/50"}`}),e&&i.jsx("button",{type:"button",onClick:l,className:"absolute right-10 top-2.5 text-muted-foreground hover:text-foreground",children:i.jsx(th,{className:"h-4 w-4"})}),i.jsx("button",{type:"submit",className:"absolute right-3 top-2.5 text-primary hover:text-primary/80",children:i.jsx(Rc,{className:"h-4 w-4"})})]})}var vx="Avatar",[FF,hH]=Fr(vx),[UF,mE]=FF(vx),pE=m.forwardRef((e,t)=>{const{__scopeAvatar:r,...n}=e,[s,o]=m.useState("idle");return i.jsx(UF,{scope:r,imageLoadingStatus:s,onImageLoadingStatusChange:o,children:i.jsx(Le.span,{...n,ref:t})})});pE.displayName=vx;var gE="AvatarImage",yE=m.forwardRef((e,t)=>{const{__scopeAvatar:r,src:n,onLoadingStatusChange:s=()=>{},...o}=e,a=mE(gE,r),l=$F(n,o.referrerPolicy),c=mr(u=>{s(u),a.onImageLoadingStatusChange(u)});return ir(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?i.jsx(Le.img,{...o,ref:t,src:n}):null});yE.displayName=gE;var xE="AvatarFallback",vE=m.forwardRef((e,t)=>{const{__scopeAvatar:r,delayMs:n,...s}=e,o=mE(xE,r),[a,l]=m.useState(n===void 0);return m.useEffect(()=>{if(n!==void 0){const c=window.setTimeout(()=>l(!0),n);return()=>window.clearTimeout(c)}},[n]),a&&o.imageLoadingStatus!=="loaded"?i.jsx(Le.span,{...s,ref:t}):null});vE.displayName=xE;function $F(e,t){const[r,n]=m.useState("idle");return ir(()=>{if(!e){n("error");return}let s=!0;const o=new window.Image,a=l=>()=>{s&&n(l)};return n("loading"),o.onload=a("loaded"),o.onerror=a("error"),o.src=e,t&&(o.referrerPolicy=t),()=>{s=!1}},[e,t]),r}var wE=pE,bE=yE,SE=vE;const ys=m.forwardRef(({className:e,...t},r)=>i.jsx(wE,{ref:r,className:we("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));ys.displayName=wE.displayName;const Yi=m.forwardRef(({className:e,...t},r)=>i.jsx(bE,{ref:r,className:we("aspect-square h-full w-full",e),...t}));Yi.displayName=bE.displayName;const Ws=m.forwardRef(({className:e,...t},r)=>i.jsx(SE,{ref:r,className:we("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));Ws.displayName=SE.displayName;var BF=m.createContext(void 0);function du(e){const t=m.useContext(BF);return e||t||"ltr"}var mm=0;function nh(){m.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??lw()),document.body.insertAdjacentElement("beforeend",e[1]??lw()),mm++,()=>{mm===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),mm--}},[])}function lw(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var pm="focusScope.autoFocusOnMount",gm="focusScope.autoFocusOnUnmount",cw={bubbles:!1,cancelable:!0},zF="FocusScope",fu=m.forwardRef((e,t)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:s,onUnmountAutoFocus:o,...a}=e,[l,c]=m.useState(null),u=mr(s),d=mr(o),f=m.useRef(null),p=Ze(t,y=>c(y)),v=m.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;m.useEffect(()=>{if(n){let y=function(w){if(v.paused||!l)return;const _=w.target;l.contains(_)?f.current=_:oi(f.current,{select:!0})},S=function(w){if(v.paused||!l)return;const _=w.relatedTarget;_!==null&&(l.contains(_)||oi(f.current,{select:!0}))},h=function(w){if(document.activeElement===document.body)for(const E of w)E.removedNodes.length>0&&oi(l)};document.addEventListener("focusin",y),document.addEventListener("focusout",S);const g=new MutationObserver(h);return l&&g.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",y),document.removeEventListener("focusout",S),g.disconnect()}}},[n,l,v.paused]),m.useEffect(()=>{if(l){dw.add(v);const y=document.activeElement;if(!l.contains(y)){const h=new CustomEvent(pm,cw);l.addEventListener(pm,u),l.dispatchEvent(h),h.defaultPrevented||(VF(GF(jE(l)),{select:!0}),document.activeElement===y&&oi(l))}return()=>{l.removeEventListener(pm,u),setTimeout(()=>{const h=new CustomEvent(gm,cw);l.addEventListener(gm,d),l.dispatchEvent(h),h.defaultPrevented||oi(y??document.body,{select:!0}),l.removeEventListener(gm,d),dw.remove(v)},0)}}},[l,u,d,v]);const j=m.useCallback(y=>{if(!r&&!n||v.paused)return;const S=y.key==="Tab"&&!y.altKey&&!y.ctrlKey&&!y.metaKey,h=document.activeElement;if(S&&h){const g=y.currentTarget,[w,_]=WF(g);w&&_?!y.shiftKey&&h===_?(y.preventDefault(),r&&oi(w,{select:!0})):y.shiftKey&&h===w&&(y.preventDefault(),r&&oi(_,{select:!0})):h===g&&y.preventDefault()}},[r,n,v.paused]);return i.jsx(Le.div,{tabIndex:-1,...a,ref:p,onKeyDown:j})});fu.displayName=zF;function VF(e,{select:t=!1}={}){const r=document.activeElement;for(const n of e)if(oi(n,{select:t}),document.activeElement!==r)return}function WF(e){const t=jE(e),r=uw(t,e),n=uw(t.reverse(),e);return[r,n]}function jE(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const s=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||s?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function uw(e,t){for(const r of e)if(!qF(r,{upTo:t}))return r}function qF(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function HF(e){return e instanceof HTMLInputElement&&"select"in e}function oi(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&HF(e)&&t&&e.select()}}var dw=KF();function KF(){let e=[];return{add(t){const r=e[0];t!==r&&(r==null||r.pause()),e=fw(e,t),e.unshift(t)},remove(t){var r;e=fw(e,t),(r=e[0])==null||r.resume()}}}function fw(e,t){const r=[...e],n=r.indexOf(t);return n!==-1&&r.splice(n,1),r}function GF(e){return e.filter(t=>t.tagName!=="A")}var QF=MN.useId||(()=>{}),YF=0;function wn(e){const[t,r]=m.useState(QF());return ir(()=>{r(n=>n??String(YF++))},[e]),t?`radix-${t}`:""}const ZF=["top","right","bottom","left"],Fi=Math.min,Xr=Math.max,Jd=Math.round,Ku=Math.floor,fs=e=>({x:e,y:e}),XF={left:"right",right:"left",bottom:"top",top:"bottom"},JF={start:"end",end:"start"};function hg(e,t,r){return Xr(e,Fi(t,r))}function qs(e,t){return typeof e=="function"?e(t):e}function Hs(e){return e.split("-")[0]}function vl(e){return e.split("-")[1]}function wx(e){return e==="x"?"y":"x"}function bx(e){return e==="y"?"height":"width"}function Ui(e){return["top","bottom"].includes(Hs(e))?"y":"x"}function Sx(e){return wx(Ui(e))}function e6(e,t,r){r===void 0&&(r=!1);const n=vl(e),s=Sx(e),o=bx(s);let a=s==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[o]>t.floating[o]&&(a=ef(a)),[a,ef(a)]}function t6(e){const t=ef(e);return[mg(e),t,mg(t)]}function mg(e){return e.replace(/start|end/g,t=>JF[t])}function r6(e,t,r){const n=["left","right"],s=["right","left"],o=["top","bottom"],a=["bottom","top"];switch(e){case"top":case"bottom":return r?t?s:n:t?n:s;case"left":case"right":return t?o:a;default:return[]}}function n6(e,t,r,n){const s=vl(e);let o=r6(Hs(e),r==="start",n);return s&&(o=o.map(a=>a+"-"+s),t&&(o=o.concat(o.map(mg)))),o}function ef(e){return e.replace(/left|right|bottom|top/g,t=>XF[t])}function s6(e){return{top:0,right:0,bottom:0,left:0,...e}}function NE(e){return typeof e!="number"?s6(e):{top:e,right:e,bottom:e,left:e}}function tf(e){const{x:t,y:r,width:n,height:s}=e;return{width:n,height:s,top:r,left:t,right:t+n,bottom:r+s,x:t,y:r}}function hw(e,t,r){let{reference:n,floating:s}=e;const o=Ui(t),a=Sx(t),l=bx(a),c=Hs(t),u=o==="y",d=n.x+n.width/2-s.width/2,f=n.y+n.height/2-s.height/2,p=n[l]/2-s[l]/2;let v;switch(c){case"top":v={x:d,y:n.y-s.height};break;case"bottom":v={x:d,y:n.y+n.height};break;case"right":v={x:n.x+n.width,y:f};break;case"left":v={x:n.x-s.width,y:f};break;default:v={x:n.x,y:n.y}}switch(vl(t)){case"start":v[a]-=p*(r&&u?-1:1);break;case"end":v[a]+=p*(r&&u?-1:1);break}return v}const i6=async(e,t,r)=>{const{placement:n="bottom",strategy:s="absolute",middleware:o=[],platform:a}=r,l=o.filter(Boolean),c=await(a.isRTL==null?void 0:a.isRTL(t));let u=await a.getElementRects({reference:e,floating:t,strategy:s}),{x:d,y:f}=hw(u,n,c),p=n,v={},j=0;for(let y=0;y<l.length;y++){const{name:S,fn:h}=l[y],{x:g,y:w,data:_,reset:E}=await h({x:d,y:f,initialPlacement:n,placement:p,strategy:s,middlewareData:v,rects:u,platform:a,elements:{reference:e,floating:t}});d=g??d,f=w??f,v={...v,[S]:{...v[S],..._}},E&&j<=50&&(j++,typeof E=="object"&&(E.placement&&(p=E.placement),E.rects&&(u=E.rects===!0?await a.getElementRects({reference:e,floating:t,strategy:s}):E.rects),{x:d,y:f}=hw(u,p,c)),y=-1)}return{x:d,y:f,placement:p,strategy:s,middlewareData:v}};async function Ac(e,t){var r;t===void 0&&(t={});const{x:n,y:s,platform:o,rects:a,elements:l,strategy:c}=e,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:f="floating",altBoundary:p=!1,padding:v=0}=qs(t,e),j=NE(v),S=l[p?f==="floating"?"reference":"floating":f],h=tf(await o.getClippingRect({element:(r=await(o.isElement==null?void 0:o.isElement(S)))==null||r?S:S.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(l.floating)),boundary:u,rootBoundary:d,strategy:c})),g=f==="floating"?{x:n,y:s,width:a.floating.width,height:a.floating.height}:a.reference,w=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l.floating)),_=await(o.isElement==null?void 0:o.isElement(w))?await(o.getScale==null?void 0:o.getScale(w))||{x:1,y:1}:{x:1,y:1},E=tf(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:g,offsetParent:w,strategy:c}):g);return{top:(h.top-E.top+j.top)/_.y,bottom:(E.bottom-h.bottom+j.bottom)/_.y,left:(h.left-E.left+j.left)/_.x,right:(E.right-h.right+j.right)/_.x}}const o6=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:n,placement:s,rects:o,platform:a,elements:l,middlewareData:c}=t,{element:u,padding:d=0}=qs(e,t)||{};if(u==null)return{};const f=NE(d),p={x:r,y:n},v=Sx(s),j=bx(v),y=await a.getDimensions(u),S=v==="y",h=S?"top":"left",g=S?"bottom":"right",w=S?"clientHeight":"clientWidth",_=o.reference[j]+o.reference[v]-p[v]-o.floating[j],E=p[v]-o.reference[v],I=await(a.getOffsetParent==null?void 0:a.getOffsetParent(u));let P=I?I[w]:0;(!P||!await(a.isElement==null?void 0:a.isElement(I)))&&(P=l.floating[w]||o.floating[j]);const M=_/2-E/2,F=P/2-y[j]/2-1,W=Fi(f[h],F),re=Fi(f[g],F),q=W,Y=P-y[j]-re,G=P/2-y[j]/2+M,ne=hg(q,G,Y),Z=!c.arrow&&vl(s)!=null&&G!==ne&&o.reference[j]/2-(G<q?W:re)-y[j]/2<0,fe=Z?G<q?G-q:G-Y:0;return{[v]:p[v]+fe,data:{[v]:ne,centerOffset:G-ne-fe,...Z&&{alignmentOffset:fe}},reset:Z}}}),a6=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,n;const{placement:s,middlewareData:o,rects:a,initialPlacement:l,platform:c,elements:u}=t,{mainAxis:d=!0,crossAxis:f=!0,fallbackPlacements:p,fallbackStrategy:v="bestFit",fallbackAxisSideDirection:j="none",flipAlignment:y=!0,...S}=qs(e,t);if((r=o.arrow)!=null&&r.alignmentOffset)return{};const h=Hs(s),g=Ui(l),w=Hs(l)===l,_=await(c.isRTL==null?void 0:c.isRTL(u.floating)),E=p||(w||!y?[ef(l)]:t6(l)),I=j!=="none";!p&&I&&E.push(...n6(l,y,j,_));const P=[l,...E],M=await Ac(t,S),F=[];let W=((n=o.flip)==null?void 0:n.overflows)||[];if(d&&F.push(M[h]),f){const G=e6(s,a,_);F.push(M[G[0]],M[G[1]])}if(W=[...W,{placement:s,overflows:F}],!F.every(G=>G<=0)){var re,q;const G=(((re=o.flip)==null?void 0:re.index)||0)+1,ne=P[G];if(ne)return{data:{index:G,overflows:W},reset:{placement:ne}};let Z=(q=W.filter(fe=>fe.overflows[0]<=0).sort((fe,B)=>fe.overflows[1]-B.overflows[1])[0])==null?void 0:q.placement;if(!Z)switch(v){case"bestFit":{var Y;const fe=(Y=W.filter(B=>{if(I){const z=Ui(B.placement);return z===g||z==="y"}return!0}).map(B=>[B.placement,B.overflows.filter(z=>z>0).reduce((z,ue)=>z+ue,0)]).sort((B,z)=>B[1]-z[1])[0])==null?void 0:Y[0];fe&&(Z=fe);break}case"initialPlacement":Z=l;break}if(s!==Z)return{reset:{placement:Z}}}return{}}}};function mw(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function pw(e){return ZF.some(t=>e[t]>=0)}const l6=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:r}=t,{strategy:n="referenceHidden",...s}=qs(e,t);switch(n){case"referenceHidden":{const o=await Ac(t,{...s,elementContext:"reference"}),a=mw(o,r.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:pw(a)}}}case"escaped":{const o=await Ac(t,{...s,altBoundary:!0}),a=mw(o,r.floating);return{data:{escapedOffsets:a,escaped:pw(a)}}}default:return{}}}}};async function c6(e,t){const{placement:r,platform:n,elements:s}=e,o=await(n.isRTL==null?void 0:n.isRTL(s.floating)),a=Hs(r),l=vl(r),c=Ui(r)==="y",u=["left","top"].includes(a)?-1:1,d=o&&c?-1:1,f=qs(t,e);let{mainAxis:p,crossAxis:v,alignmentAxis:j}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return l&&typeof j=="number"&&(v=l==="end"?j*-1:j),c?{x:v*d,y:p*u}:{x:p*u,y:v*d}}const u6=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,n;const{x:s,y:o,placement:a,middlewareData:l}=t,c=await c6(t,e);return a===((r=l.offset)==null?void 0:r.placement)&&(n=l.arrow)!=null&&n.alignmentOffset?{}:{x:s+c.x,y:o+c.y,data:{...c,placement:a}}}}},d6=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:n,placement:s}=t,{mainAxis:o=!0,crossAxis:a=!1,limiter:l={fn:S=>{let{x:h,y:g}=S;return{x:h,y:g}}},...c}=qs(e,t),u={x:r,y:n},d=await Ac(t,c),f=Ui(Hs(s)),p=wx(f);let v=u[p],j=u[f];if(o){const S=p==="y"?"top":"left",h=p==="y"?"bottom":"right",g=v+d[S],w=v-d[h];v=hg(g,v,w)}if(a){const S=f==="y"?"top":"left",h=f==="y"?"bottom":"right",g=j+d[S],w=j-d[h];j=hg(g,j,w)}const y=l.fn({...t,[p]:v,[f]:j});return{...y,data:{x:y.x-r,y:y.y-n,enabled:{[p]:o,[f]:a}}}}}},f6=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:r,y:n,placement:s,rects:o,middlewareData:a}=t,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=qs(e,t),d={x:r,y:n},f=Ui(s),p=wx(f);let v=d[p],j=d[f];const y=qs(l,t),S=typeof y=="number"?{mainAxis:y,crossAxis:0}:{mainAxis:0,crossAxis:0,...y};if(c){const w=p==="y"?"height":"width",_=o.reference[p]-o.floating[w]+S.mainAxis,E=o.reference[p]+o.reference[w]-S.mainAxis;v<_?v=_:v>E&&(v=E)}if(u){var h,g;const w=p==="y"?"width":"height",_=["top","left"].includes(Hs(s)),E=o.reference[f]-o.floating[w]+(_&&((h=a.offset)==null?void 0:h[f])||0)+(_?0:S.crossAxis),I=o.reference[f]+o.reference[w]+(_?0:((g=a.offset)==null?void 0:g[f])||0)-(_?S.crossAxis:0);j<E?j=E:j>I&&(j=I)}return{[p]:v,[f]:j}}}},h6=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var r,n;const{placement:s,rects:o,platform:a,elements:l}=t,{apply:c=()=>{},...u}=qs(e,t),d=await Ac(t,u),f=Hs(s),p=vl(s),v=Ui(s)==="y",{width:j,height:y}=o.floating;let S,h;f==="top"||f==="bottom"?(S=f,h=p===(await(a.isRTL==null?void 0:a.isRTL(l.floating))?"start":"end")?"left":"right"):(h=f,S=p==="end"?"top":"bottom");const g=y-d.top-d.bottom,w=j-d.left-d.right,_=Fi(y-d[S],g),E=Fi(j-d[h],w),I=!t.middlewareData.shift;let P=_,M=E;if((r=t.middlewareData.shift)!=null&&r.enabled.x&&(M=w),(n=t.middlewareData.shift)!=null&&n.enabled.y&&(P=g),I&&!p){const W=Xr(d.left,0),re=Xr(d.right,0),q=Xr(d.top,0),Y=Xr(d.bottom,0);v?M=j-2*(W!==0||re!==0?W+re:Xr(d.left,d.right)):P=y-2*(q!==0||Y!==0?q+Y:Xr(d.top,d.bottom))}await c({...t,availableWidth:M,availableHeight:P});const F=await a.getDimensions(l.floating);return j!==F.width||y!==F.height?{reset:{rects:!0}}:{}}}};function sh(){return typeof window<"u"}function wl(e){return _E(e)?(e.nodeName||"").toLowerCase():"#document"}function tn(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Ss(e){var t;return(t=(_E(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function _E(e){return sh()?e instanceof Node||e instanceof tn(e).Node:!1}function Kn(e){return sh()?e instanceof Element||e instanceof tn(e).Element:!1}function xs(e){return sh()?e instanceof HTMLElement||e instanceof tn(e).HTMLElement:!1}function gw(e){return!sh()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof tn(e).ShadowRoot}function hu(e){const{overflow:t,overflowX:r,overflowY:n,display:s}=Gn(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!["inline","contents"].includes(s)}function m6(e){return["table","td","th"].includes(wl(e))}function ih(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function jx(e){const t=Nx(),r=Kn(e)?Gn(e):e;return["transform","translate","scale","rotate","perspective"].some(n=>r[n]?r[n]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(n=>(r.willChange||"").includes(n))||["paint","layout","strict","content"].some(n=>(r.contain||"").includes(n))}function p6(e){let t=$i(e);for(;xs(t)&&!il(t);){if(jx(t))return t;if(ih(t))return null;t=$i(t)}return null}function Nx(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function il(e){return["html","body","#document"].includes(wl(e))}function Gn(e){return tn(e).getComputedStyle(e)}function oh(e){return Kn(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function $i(e){if(wl(e)==="html")return e;const t=e.assignedSlot||e.parentNode||gw(e)&&e.host||Ss(e);return gw(t)?t.host:t}function CE(e){const t=$i(e);return il(t)?e.ownerDocument?e.ownerDocument.body:e.body:xs(t)&&hu(t)?t:CE(t)}function Ic(e,t,r){var n;t===void 0&&(t=[]),r===void 0&&(r=!0);const s=CE(e),o=s===((n=e.ownerDocument)==null?void 0:n.body),a=tn(s);if(o){const l=pg(a);return t.concat(a,a.visualViewport||[],hu(s)?s:[],l&&r?Ic(l):[])}return t.concat(s,Ic(s,[],r))}function pg(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function EE(e){const t=Gn(e);let r=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const s=xs(e),o=s?e.offsetWidth:r,a=s?e.offsetHeight:n,l=Jd(r)!==o||Jd(n)!==a;return l&&(r=o,n=a),{width:r,height:n,$:l}}function _x(e){return Kn(e)?e:e.contextElement}function Aa(e){const t=_x(e);if(!xs(t))return fs(1);const r=t.getBoundingClientRect(),{width:n,height:s,$:o}=EE(t);let a=(o?Jd(r.width):r.width)/n,l=(o?Jd(r.height):r.height)/s;return(!a||!Number.isFinite(a))&&(a=1),(!l||!Number.isFinite(l))&&(l=1),{x:a,y:l}}const g6=fs(0);function kE(e){const t=tn(e);return!Nx()||!t.visualViewport?g6:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function y6(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==tn(e)?!1:t}function Mo(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r=!1);const s=e.getBoundingClientRect(),o=_x(e);let a=fs(1);t&&(n?Kn(n)&&(a=Aa(n)):a=Aa(e));const l=y6(o,r,n)?kE(o):fs(0);let c=(s.left+l.x)/a.x,u=(s.top+l.y)/a.y,d=s.width/a.x,f=s.height/a.y;if(o){const p=tn(o),v=n&&Kn(n)?tn(n):n;let j=p,y=pg(j);for(;y&&n&&v!==j;){const S=Aa(y),h=y.getBoundingClientRect(),g=Gn(y),w=h.left+(y.clientLeft+parseFloat(g.paddingLeft))*S.x,_=h.top+(y.clientTop+parseFloat(g.paddingTop))*S.y;c*=S.x,u*=S.y,d*=S.x,f*=S.y,c+=w,u+=_,j=tn(y),y=pg(j)}}return tf({width:d,height:f,x:c,y:u})}function Cx(e,t){const r=oh(e).scrollLeft;return t?t.left+r:Mo(Ss(e)).left+r}function TE(e,t,r){r===void 0&&(r=!1);const n=e.getBoundingClientRect(),s=n.left+t.scrollLeft-(r?0:Cx(e,n)),o=n.top+t.scrollTop;return{x:s,y:o}}function x6(e){let{elements:t,rect:r,offsetParent:n,strategy:s}=e;const o=s==="fixed",a=Ss(n),l=t?ih(t.floating):!1;if(n===a||l&&o)return r;let c={scrollLeft:0,scrollTop:0},u=fs(1);const d=fs(0),f=xs(n);if((f||!f&&!o)&&((wl(n)!=="body"||hu(a))&&(c=oh(n)),xs(n))){const v=Mo(n);u=Aa(n),d.x=v.x+n.clientLeft,d.y=v.y+n.clientTop}const p=a&&!f&&!o?TE(a,c,!0):fs(0);return{width:r.width*u.x,height:r.height*u.y,x:r.x*u.x-c.scrollLeft*u.x+d.x+p.x,y:r.y*u.y-c.scrollTop*u.y+d.y+p.y}}function v6(e){return Array.from(e.getClientRects())}function w6(e){const t=Ss(e),r=oh(e),n=e.ownerDocument.body,s=Xr(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),o=Xr(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let a=-r.scrollLeft+Cx(e);const l=-r.scrollTop;return Gn(n).direction==="rtl"&&(a+=Xr(t.clientWidth,n.clientWidth)-s),{width:s,height:o,x:a,y:l}}function b6(e,t){const r=tn(e),n=Ss(e),s=r.visualViewport;let o=n.clientWidth,a=n.clientHeight,l=0,c=0;if(s){o=s.width,a=s.height;const u=Nx();(!u||u&&t==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}return{width:o,height:a,x:l,y:c}}function S6(e,t){const r=Mo(e,!0,t==="fixed"),n=r.top+e.clientTop,s=r.left+e.clientLeft,o=xs(e)?Aa(e):fs(1),a=e.clientWidth*o.x,l=e.clientHeight*o.y,c=s*o.x,u=n*o.y;return{width:a,height:l,x:c,y:u}}function yw(e,t,r){let n;if(t==="viewport")n=b6(e,r);else if(t==="document")n=w6(Ss(e));else if(Kn(t))n=S6(t,r);else{const s=kE(e);n={x:t.x-s.x,y:t.y-s.y,width:t.width,height:t.height}}return tf(n)}function PE(e,t){const r=$i(e);return r===t||!Kn(r)||il(r)?!1:Gn(r).position==="fixed"||PE(r,t)}function j6(e,t){const r=t.get(e);if(r)return r;let n=Ic(e,[],!1).filter(l=>Kn(l)&&wl(l)!=="body"),s=null;const o=Gn(e).position==="fixed";let a=o?$i(e):e;for(;Kn(a)&&!il(a);){const l=Gn(a),c=jx(a);!c&&l.position==="fixed"&&(s=null),(o?!c&&!s:!c&&l.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||hu(a)&&!c&&PE(e,a))?n=n.filter(d=>d!==a):s=l,a=$i(a)}return t.set(e,n),n}function N6(e){let{element:t,boundary:r,rootBoundary:n,strategy:s}=e;const a=[...r==="clippingAncestors"?ih(t)?[]:j6(t,this._c):[].concat(r),n],l=a[0],c=a.reduce((u,d)=>{const f=yw(t,d,s);return u.top=Xr(f.top,u.top),u.right=Fi(f.right,u.right),u.bottom=Fi(f.bottom,u.bottom),u.left=Xr(f.left,u.left),u},yw(t,l,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function _6(e){const{width:t,height:r}=EE(e);return{width:t,height:r}}function C6(e,t,r){const n=xs(t),s=Ss(t),o=r==="fixed",a=Mo(e,!0,o,t);let l={scrollLeft:0,scrollTop:0};const c=fs(0);if(n||!n&&!o)if((wl(t)!=="body"||hu(s))&&(l=oh(t)),n){const p=Mo(t,!0,o,t);c.x=p.x+t.clientLeft,c.y=p.y+t.clientTop}else s&&(c.x=Cx(s));const u=s&&!n&&!o?TE(s,l):fs(0),d=a.left+l.scrollLeft-c.x-u.x,f=a.top+l.scrollTop-c.y-u.y;return{x:d,y:f,width:a.width,height:a.height}}function ym(e){return Gn(e).position==="static"}function xw(e,t){if(!xs(e)||Gn(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return Ss(e)===r&&(r=r.ownerDocument.body),r}function RE(e,t){const r=tn(e);if(ih(e))return r;if(!xs(e)){let s=$i(e);for(;s&&!il(s);){if(Kn(s)&&!ym(s))return s;s=$i(s)}return r}let n=xw(e,t);for(;n&&m6(n)&&ym(n);)n=xw(n,t);return n&&il(n)&&ym(n)&&!jx(n)?r:n||p6(e)||r}const E6=async function(e){const t=this.getOffsetParent||RE,r=this.getDimensions,n=await r(e.floating);return{reference:C6(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function k6(e){return Gn(e).direction==="rtl"}const T6={convertOffsetParentRelativeRectToViewportRelativeRect:x6,getDocumentElement:Ss,getClippingRect:N6,getOffsetParent:RE,getElementRects:E6,getClientRects:v6,getDimensions:_6,getScale:Aa,isElement:Kn,isRTL:k6};function AE(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function P6(e,t){let r=null,n;const s=Ss(e);function o(){var l;clearTimeout(n),(l=r)==null||l.disconnect(),r=null}function a(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),o();const u=e.getBoundingClientRect(),{left:d,top:f,width:p,height:v}=u;if(l||t(),!p||!v)return;const j=Ku(f),y=Ku(s.clientWidth-(d+p)),S=Ku(s.clientHeight-(f+v)),h=Ku(d),w={rootMargin:-j+"px "+-y+"px "+-S+"px "+-h+"px",threshold:Xr(0,Fi(1,c))||1};let _=!0;function E(I){const P=I[0].intersectionRatio;if(P!==c){if(!_)return a();P?a(!1,P):n=setTimeout(()=>{a(!1,1e-7)},1e3)}P===1&&!AE(u,e.getBoundingClientRect())&&a(),_=!1}try{r=new IntersectionObserver(E,{...w,root:s.ownerDocument})}catch{r=new IntersectionObserver(E,w)}r.observe(e)}return a(!0),o}function R6(e,t,r,n){n===void 0&&(n={});const{ancestorScroll:s=!0,ancestorResize:o=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=n,u=_x(e),d=s||o?[...u?Ic(u):[],...Ic(t)]:[];d.forEach(h=>{s&&h.addEventListener("scroll",r,{passive:!0}),o&&h.addEventListener("resize",r)});const f=u&&l?P6(u,r):null;let p=-1,v=null;a&&(v=new ResizeObserver(h=>{let[g]=h;g&&g.target===u&&v&&(v.unobserve(t),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var w;(w=v)==null||w.observe(t)})),r()}),u&&!c&&v.observe(u),v.observe(t));let j,y=c?Mo(e):null;c&&S();function S(){const h=Mo(e);y&&!AE(y,h)&&r(),y=h,j=requestAnimationFrame(S)}return r(),()=>{var h;d.forEach(g=>{s&&g.removeEventListener("scroll",r),o&&g.removeEventListener("resize",r)}),f==null||f(),(h=v)==null||h.disconnect(),v=null,c&&cancelAnimationFrame(j)}}const A6=u6,I6=d6,D6=a6,M6=h6,O6=l6,vw=o6,L6=f6,F6=(e,t,r)=>{const n=new Map,s={platform:T6,...r},o={...s.platform,_c:n};return i6(e,t,{...s,platform:o})};var xd=typeof document<"u"?m.useLayoutEffect:m.useEffect;function rf(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,n,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(n=r;n--!==0;)if(!rf(e[n],t[n]))return!1;return!0}if(s=Object.keys(e),r=s.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(t,s[n]))return!1;for(n=r;n--!==0;){const o=s[n];if(!(o==="_owner"&&e.$$typeof)&&!rf(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function IE(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function ww(e,t){const r=IE(e);return Math.round(t*r)/r}function xm(e){const t=m.useRef(e);return xd(()=>{t.current=e}),t}function U6(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:n=[],platform:s,elements:{reference:o,floating:a}={},transform:l=!0,whileElementsMounted:c,open:u}=e,[d,f]=m.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[p,v]=m.useState(n);rf(p,n)||v(n);const[j,y]=m.useState(null),[S,h]=m.useState(null),g=m.useCallback(B=>{B!==I.current&&(I.current=B,y(B))},[]),w=m.useCallback(B=>{B!==P.current&&(P.current=B,h(B))},[]),_=o||j,E=a||S,I=m.useRef(null),P=m.useRef(null),M=m.useRef(d),F=c!=null,W=xm(c),re=xm(s),q=xm(u),Y=m.useCallback(()=>{if(!I.current||!P.current)return;const B={placement:t,strategy:r,middleware:p};re.current&&(B.platform=re.current),F6(I.current,P.current,B).then(z=>{const ue={...z,isPositioned:q.current!==!1};G.current&&!rf(M.current,ue)&&(M.current=ue,qo.flushSync(()=>{f(ue)}))})},[p,t,r,re,q]);xd(()=>{u===!1&&M.current.isPositioned&&(M.current.isPositioned=!1,f(B=>({...B,isPositioned:!1})))},[u]);const G=m.useRef(!1);xd(()=>(G.current=!0,()=>{G.current=!1}),[]),xd(()=>{if(_&&(I.current=_),E&&(P.current=E),_&&E){if(W.current)return W.current(_,E,Y);Y()}},[_,E,Y,W,F]);const ne=m.useMemo(()=>({reference:I,floating:P,setReference:g,setFloating:w}),[g,w]),Z=m.useMemo(()=>({reference:_,floating:E}),[_,E]),fe=m.useMemo(()=>{const B={position:r,left:0,top:0};if(!Z.floating)return B;const z=ww(Z.floating,d.x),ue=ww(Z.floating,d.y);return l?{...B,transform:"translate("+z+"px, "+ue+"px)",...IE(Z.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:z,top:ue}},[r,l,Z.floating,d.x,d.y]);return m.useMemo(()=>({...d,update:Y,refs:ne,elements:Z,floatingStyles:fe}),[d,Y,ne,Z,fe])}const $6=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:n,padding:s}=typeof e=="function"?e(r):e;return n&&t(n)?n.current!=null?vw({element:n.current,padding:s}).fn(r):{}:n?vw({element:n,padding:s}).fn(r):{}}}},B6=(e,t)=>({...A6(e),options:[e,t]}),z6=(e,t)=>({...I6(e),options:[e,t]}),V6=(e,t)=>({...L6(e),options:[e,t]}),W6=(e,t)=>({...D6(e),options:[e,t]}),q6=(e,t)=>({...M6(e),options:[e,t]}),H6=(e,t)=>({...O6(e),options:[e,t]}),K6=(e,t)=>({...$6(e),options:[e,t]});var G6="Arrow",DE=m.forwardRef((e,t)=>{const{children:r,width:n=10,height:s=5,...o}=e;return i.jsx(Le.svg,{...o,ref:t,width:n,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:i.jsx("polygon",{points:"0,0 30,0 15,10"})})});DE.displayName=G6;var Q6=DE;function Ex(e){const[t,r]=m.useState(void 0);return ir(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const n=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const o=s[0];let a,l;if("borderBoxSize"in o){const c=o.borderBoxSize,u=Array.isArray(c)?c[0]:c;a=u.inlineSize,l=u.blockSize}else a=e.offsetWidth,l=e.offsetHeight;r({width:a,height:l})});return n.observe(e,{box:"border-box"}),()=>n.unobserve(e)}else r(void 0)},[e]),t}var kx="Popper",[ME,Zi]=Fr(kx),[Y6,OE]=ME(kx),LE=e=>{const{__scopePopper:t,children:r}=e,[n,s]=m.useState(null);return i.jsx(Y6,{scope:t,anchor:n,onAnchorChange:s,children:r})};LE.displayName=kx;var FE="PopperAnchor",UE=m.forwardRef((e,t)=>{const{__scopePopper:r,virtualRef:n,...s}=e,o=OE(FE,r),a=m.useRef(null),l=Ze(t,a);return m.useEffect(()=>{o.onAnchorChange((n==null?void 0:n.current)||a.current)}),n?null:i.jsx(Le.div,{...s,ref:l})});UE.displayName=FE;var Tx="PopperContent",[Z6,X6]=ME(Tx),$E=m.forwardRef((e,t)=>{var R,Q,de,le,C,k;const{__scopePopper:r,side:n="bottom",sideOffset:s=0,align:o="center",alignOffset:a=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:f="partial",hideWhenDetached:p=!1,updatePositionStrategy:v="optimized",onPlaced:j,...y}=e,S=OE(Tx,r),[h,g]=m.useState(null),w=Ze(t,K=>g(K)),[_,E]=m.useState(null),I=Ex(_),P=(I==null?void 0:I.width)??0,M=(I==null?void 0:I.height)??0,F=n+(o!=="center"?"-"+o:""),W=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},re=Array.isArray(u)?u:[u],q=re.length>0,Y={padding:W,boundary:re.filter(e5),altBoundary:q},{refs:G,floatingStyles:ne,placement:Z,isPositioned:fe,middlewareData:B}=U6({strategy:"fixed",placement:F,whileElementsMounted:(...K)=>R6(...K,{animationFrame:v==="always"}),elements:{reference:S.anchor},middleware:[B6({mainAxis:s+M,alignmentAxis:a}),c&&z6({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?V6():void 0,...Y}),c&&W6({...Y}),q6({...Y,apply:({elements:K,rects:ie,availableWidth:De,availableHeight:Pe})=>{const{width:Me,height:se}=ie.reference,ve=K.floating.style;ve.setProperty("--radix-popper-available-width",`${De}px`),ve.setProperty("--radix-popper-available-height",`${Pe}px`),ve.setProperty("--radix-popper-anchor-width",`${Me}px`),ve.setProperty("--radix-popper-anchor-height",`${se}px`)}}),_&&K6({element:_,padding:l}),t5({arrowWidth:P,arrowHeight:M}),p&&H6({strategy:"referenceHidden",...Y})]}),[z,ue]=VE(Z),ae=mr(j);ir(()=>{fe&&(ae==null||ae())},[fe,ae]);const X=(R=B.arrow)==null?void 0:R.x,ee=(Q=B.arrow)==null?void 0:Q.y,je=((de=B.arrow)==null?void 0:de.centerOffset)!==0,[Ce,D]=m.useState();return ir(()=>{h&&D(window.getComputedStyle(h).zIndex)},[h]),i.jsx("div",{ref:G.setFloating,"data-radix-popper-content-wrapper":"",style:{...ne,transform:fe?ne.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Ce,"--radix-popper-transform-origin":[(le=B.transformOrigin)==null?void 0:le.x,(C=B.transformOrigin)==null?void 0:C.y].join(" "),...((k=B.hide)==null?void 0:k.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:i.jsx(Z6,{scope:r,placedSide:z,onArrowChange:E,arrowX:X,arrowY:ee,shouldHideArrow:je,children:i.jsx(Le.div,{"data-side":z,"data-align":ue,...y,ref:w,style:{...y.style,animation:fe?void 0:"none"}})})})});$E.displayName=Tx;var BE="PopperArrow",J6={top:"bottom",right:"left",bottom:"top",left:"right"},zE=m.forwardRef(function(t,r){const{__scopePopper:n,...s}=t,o=X6(BE,n),a=J6[o.placedSide];return i.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:i.jsx(Q6,{...s,ref:r,style:{...s.style,display:"block"}})})});zE.displayName=BE;function e5(e){return e!==null}var t5=e=>({name:"transformOrigin",options:e,fn(t){var S,h,g;const{placement:r,rects:n,middlewareData:s}=t,a=((S=s.arrow)==null?void 0:S.centerOffset)!==0,l=a?0:e.arrowWidth,c=a?0:e.arrowHeight,[u,d]=VE(r),f={start:"0%",center:"50%",end:"100%"}[d],p=(((h=s.arrow)==null?void 0:h.x)??0)+l/2,v=(((g=s.arrow)==null?void 0:g.y)??0)+c/2;let j="",y="";return u==="bottom"?(j=a?f:`${p}px`,y=`${-c}px`):u==="top"?(j=a?f:`${p}px`,y=`${n.floating.height+c}px`):u==="right"?(j=`${-c}px`,y=a?f:`${v}px`):u==="left"&&(j=`${n.floating.width+c}px`,y=a?f:`${v}px`),{data:{x:j,y}}}});function VE(e){const[t,r="center"]=e.split("-");return[t,r]}var ah=LE,mu=UE,lh=$E,ch=zE,vm="rovingFocusGroup.onEntryFocus",r5={bubbles:!1,cancelable:!0},uh="RovingFocusGroup",[gg,WE,n5]=au(uh),[s5,dh]=Fr(uh,[n5]),[i5,o5]=s5(uh),qE=m.forwardRef((e,t)=>i.jsx(gg.Provider,{scope:e.__scopeRovingFocusGroup,children:i.jsx(gg.Slot,{scope:e.__scopeRovingFocusGroup,children:i.jsx(a5,{...e,ref:t})})}));qE.displayName=uh;var a5=m.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:s=!1,dir:o,currentTabStopId:a,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...f}=e,p=m.useRef(null),v=Ze(t,p),j=du(o),[y=null,S]=Hn({prop:a,defaultProp:l,onChange:c}),[h,g]=m.useState(!1),w=mr(u),_=WE(r),E=m.useRef(!1),[I,P]=m.useState(0);return m.useEffect(()=>{const M=p.current;if(M)return M.addEventListener(vm,w),()=>M.removeEventListener(vm,w)},[w]),i.jsx(i5,{scope:r,orientation:n,dir:j,loop:s,currentTabStopId:y,onItemFocus:m.useCallback(M=>S(M),[S]),onItemShiftTab:m.useCallback(()=>g(!0),[]),onFocusableItemAdd:m.useCallback(()=>P(M=>M+1),[]),onFocusableItemRemove:m.useCallback(()=>P(M=>M-1),[]),children:i.jsx(Le.div,{tabIndex:h||I===0?-1:0,"data-orientation":n,...f,ref:v,style:{outline:"none",...e.style},onMouseDown:xe(e.onMouseDown,()=>{E.current=!0}),onFocus:xe(e.onFocus,M=>{const F=!E.current;if(M.target===M.currentTarget&&F&&!h){const W=new CustomEvent(vm,r5);if(M.currentTarget.dispatchEvent(W),!W.defaultPrevented){const re=_().filter(Z=>Z.focusable),q=re.find(Z=>Z.active),Y=re.find(Z=>Z.id===y),ne=[q,Y,...re].filter(Boolean).map(Z=>Z.ref.current);GE(ne,d)}}E.current=!1}),onBlur:xe(e.onBlur,()=>g(!1))})})}),HE="RovingFocusGroupItem",KE=m.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:s=!1,tabStopId:o,...a}=e,l=wn(),c=o||l,u=o5(HE,r),d=u.currentTabStopId===c,f=WE(r),{onFocusableItemAdd:p,onFocusableItemRemove:v}=u;return m.useEffect(()=>{if(n)return p(),()=>v()},[n,p,v]),i.jsx(gg.ItemSlot,{scope:r,id:c,focusable:n,active:s,children:i.jsx(Le.span,{tabIndex:d?0:-1,"data-orientation":u.orientation,...a,ref:t,onMouseDown:xe(e.onMouseDown,j=>{n?u.onItemFocus(c):j.preventDefault()}),onFocus:xe(e.onFocus,()=>u.onItemFocus(c)),onKeyDown:xe(e.onKeyDown,j=>{if(j.key==="Tab"&&j.shiftKey){u.onItemShiftTab();return}if(j.target!==j.currentTarget)return;const y=u5(j,u.orientation,u.dir);if(y!==void 0){if(j.metaKey||j.ctrlKey||j.altKey||j.shiftKey)return;j.preventDefault();let h=f().filter(g=>g.focusable).map(g=>g.ref.current);if(y==="last")h.reverse();else if(y==="prev"||y==="next"){y==="prev"&&h.reverse();const g=h.indexOf(j.currentTarget);h=u.loop?d5(h,g+1):h.slice(g+1)}setTimeout(()=>GE(h))}})})})});KE.displayName=HE;var l5={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function c5(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function u5(e,t,r){const n=c5(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return l5[n]}function GE(e,t=!1){const r=document.activeElement;for(const n of e)if(n===r||(n.focus({preventScroll:t}),document.activeElement!==r))return}function d5(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var QE=qE,YE=KE,f5=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},na=new WeakMap,Gu=new WeakMap,Qu={},wm=0,ZE=function(e){return e&&(e.host||ZE(e.parentNode))},h5=function(e,t){return t.map(function(r){if(e.contains(r))return r;var n=ZE(r);return n&&e.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",e,". Doing nothing"),null)}).filter(function(r){return!!r})},m5=function(e,t,r,n){var s=h5(t,Array.isArray(e)?e:[e]);Qu[r]||(Qu[r]=new WeakMap);var o=Qu[r],a=[],l=new Set,c=new Set(s),u=function(f){!f||l.has(f)||(l.add(f),u(f.parentNode))};s.forEach(u);var d=function(f){!f||c.has(f)||Array.prototype.forEach.call(f.children,function(p){if(l.has(p))d(p);else try{var v=p.getAttribute(n),j=v!==null&&v!=="false",y=(na.get(p)||0)+1,S=(o.get(p)||0)+1;na.set(p,y),o.set(p,S),a.push(p),y===1&&j&&Gu.set(p,!0),S===1&&p.setAttribute(r,"true"),j||p.setAttribute(n,"true")}catch(h){console.error("aria-hidden: cannot operate on ",p,h)}})};return d(t),l.clear(),wm++,function(){a.forEach(function(f){var p=na.get(f)-1,v=o.get(f)-1;na.set(f,p),o.set(f,v),p||(Gu.has(f)||f.removeAttribute(n),Gu.delete(f)),v||f.removeAttribute(r)}),wm--,wm||(na=new WeakMap,na=new WeakMap,Gu=new WeakMap,Qu={})}},fh=function(e,t,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(e)?e:[e]),s=f5(e);return s?(n.push.apply(n,Array.from(s.querySelectorAll("[aria-live]"))),m5(n,s,r,"aria-hidden")):function(){return null}},is=function(){return is=Object.assign||function(t){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},is.apply(this,arguments)};function XE(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r}function p5(e,t,r){if(r||arguments.length===2)for(var n=0,s=t.length,o;n<s;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return e.concat(o||Array.prototype.slice.call(t))}var vd="right-scroll-bar-position",wd="width-before-scroll-bar",g5="with-scroll-bars-hidden",y5="--removed-body-scroll-bar-size";function bm(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function x5(e,t){var r=m.useState(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(n){var s=r.value;s!==n&&(r.value=n,r.callback(n,s))}}}})[0];return r.callback=t,r.facade}var v5=typeof window<"u"?m.useLayoutEffect:m.useEffect,bw=new WeakMap;function w5(e,t){var r=x5(null,function(n){return e.forEach(function(s){return bm(s,n)})});return v5(function(){var n=bw.get(r);if(n){var s=new Set(n),o=new Set(e),a=r.current;s.forEach(function(l){o.has(l)||bm(l,null)}),o.forEach(function(l){s.has(l)||bm(l,a)})}bw.set(r,e)},[e]),r}function b5(e){return e}function S5(e,t){t===void 0&&(t=b5);var r=[],n=!1,s={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(o){var a=t(o,n);return r.push(a),function(){r=r.filter(function(l){return l!==a})}},assignSyncMedium:function(o){for(n=!0;r.length;){var a=r;r=[],a.forEach(o)}r={push:function(l){return o(l)},filter:function(){return r}}},assignMedium:function(o){n=!0;var a=[];if(r.length){var l=r;r=[],l.forEach(o),a=r}var c=function(){var d=a;a=[],d.forEach(o)},u=function(){return Promise.resolve().then(c)};u(),r={push:function(d){a.push(d),u()},filter:function(d){return a=a.filter(d),r}}}};return s}function j5(e){e===void 0&&(e={});var t=S5(null);return t.options=is({async:!0,ssr:!1},e),t}var JE=function(e){var t=e.sideCar,r=XE(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return m.createElement(n,is({},r))};JE.isSideCarExport=!0;function N5(e,t){return e.useMedium(t),JE}var ek=j5(),Sm=function(){},hh=m.forwardRef(function(e,t){var r=m.useRef(null),n=m.useState({onScrollCapture:Sm,onWheelCapture:Sm,onTouchMoveCapture:Sm}),s=n[0],o=n[1],a=e.forwardProps,l=e.children,c=e.className,u=e.removeScrollBar,d=e.enabled,f=e.shards,p=e.sideCar,v=e.noIsolation,j=e.inert,y=e.allowPinchZoom,S=e.as,h=S===void 0?"div":S,g=e.gapMode,w=XE(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),_=p,E=w5([r,t]),I=is(is({},w),s);return m.createElement(m.Fragment,null,d&&m.createElement(_,{sideCar:ek,removeScrollBar:u,shards:f,noIsolation:v,inert:j,setCallbacks:o,allowPinchZoom:!!y,lockRef:r,gapMode:g}),a?m.cloneElement(m.Children.only(l),is(is({},I),{ref:E})):m.createElement(h,is({},I,{className:c,ref:E}),l))});hh.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};hh.classNames={fullWidth:wd,zeroRight:vd};var _5=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function C5(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=_5();return t&&e.setAttribute("nonce",t),e}function E5(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function k5(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var T5=function(){var e=0,t=null;return{add:function(r){e==0&&(t=C5())&&(E5(t,r),k5(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},P5=function(){var e=T5();return function(t,r){m.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},tk=function(){var e=P5(),t=function(r){var n=r.styles,s=r.dynamic;return e(n,s),null};return t},R5={left:0,top:0,right:0,gap:0},jm=function(e){return parseInt(e||"",10)||0},A5=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],n=t[e==="padding"?"paddingTop":"marginTop"],s=t[e==="padding"?"paddingRight":"marginRight"];return[jm(r),jm(n),jm(s)]},I5=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return R5;var t=A5(e),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-r+t[2]-t[0])}},D5=tk(),Ia="data-scroll-locked",M5=function(e,t,r,n){var s=e.left,o=e.top,a=e.right,l=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(g5,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(l,"px ").concat(n,`;
  }
  body[`).concat(Ia,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(l,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(vd,` {
    right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(wd,` {
    margin-right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(vd," .").concat(vd,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(wd," .").concat(wd,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(Ia,`] {
    `).concat(y5,": ").concat(l,`px;
  }
`)},Sw=function(){var e=parseInt(document.body.getAttribute(Ia)||"0",10);return isFinite(e)?e:0},O5=function(){m.useEffect(function(){return document.body.setAttribute(Ia,(Sw()+1).toString()),function(){var e=Sw()-1;e<=0?document.body.removeAttribute(Ia):document.body.setAttribute(Ia,e.toString())}},[])},L5=function(e){var t=e.noRelative,r=e.noImportant,n=e.gapMode,s=n===void 0?"margin":n;O5();var o=m.useMemo(function(){return I5(s)},[s]);return m.createElement(D5,{styles:M5(o,!t,s,r?"":"!important")})},yg=!1;if(typeof window<"u")try{var Yu=Object.defineProperty({},"passive",{get:function(){return yg=!0,!0}});window.addEventListener("test",Yu,Yu),window.removeEventListener("test",Yu,Yu)}catch{yg=!1}var sa=yg?{passive:!1}:!1,F5=function(e){return e.tagName==="TEXTAREA"},rk=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!F5(e)&&r[t]==="visible")},U5=function(e){return rk(e,"overflowY")},$5=function(e){return rk(e,"overflowX")},jw=function(e,t){var r=t.ownerDocument,n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var s=nk(e,n);if(s){var o=sk(e,n),a=o[1],l=o[2];if(a>l)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},B5=function(e){var t=e.scrollTop,r=e.scrollHeight,n=e.clientHeight;return[t,r,n]},z5=function(e){var t=e.scrollLeft,r=e.scrollWidth,n=e.clientWidth;return[t,r,n]},nk=function(e,t){return e==="v"?U5(t):$5(t)},sk=function(e,t){return e==="v"?B5(t):z5(t)},V5=function(e,t){return e==="h"&&t==="rtl"?-1:1},W5=function(e,t,r,n,s){var o=V5(e,window.getComputedStyle(t).direction),a=o*n,l=r.target,c=t.contains(l),u=!1,d=a>0,f=0,p=0;do{var v=sk(e,l),j=v[0],y=v[1],S=v[2],h=y-S-o*j;(j||h)&&nk(e,l)&&(f+=h,p+=j),l instanceof ShadowRoot?l=l.host:l=l.parentNode}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(d&&Math.abs(f)<1||!d&&Math.abs(p)<1)&&(u=!0),u},Zu=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Nw=function(e){return[e.deltaX,e.deltaY]},_w=function(e){return e&&"current"in e?e.current:e},q5=function(e,t){return e[0]===t[0]&&e[1]===t[1]},H5=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},K5=0,ia=[];function G5(e){var t=m.useRef([]),r=m.useRef([0,0]),n=m.useRef(),s=m.useState(K5++)[0],o=m.useState(tk)[0],a=m.useRef(e);m.useEffect(function(){a.current=e},[e]),m.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var y=p5([e.lockRef.current],(e.shards||[]).map(_w),!0).filter(Boolean);return y.forEach(function(S){return S.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),y.forEach(function(S){return S.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var l=m.useCallback(function(y,S){if("touches"in y&&y.touches.length===2||y.type==="wheel"&&y.ctrlKey)return!a.current.allowPinchZoom;var h=Zu(y),g=r.current,w="deltaX"in y?y.deltaX:g[0]-h[0],_="deltaY"in y?y.deltaY:g[1]-h[1],E,I=y.target,P=Math.abs(w)>Math.abs(_)?"h":"v";if("touches"in y&&P==="h"&&I.type==="range")return!1;var M=jw(P,I);if(!M)return!0;if(M?E=P:(E=P==="v"?"h":"v",M=jw(P,I)),!M)return!1;if(!n.current&&"changedTouches"in y&&(w||_)&&(n.current=E),!E)return!0;var F=n.current||E;return W5(F,S,y,F==="h"?w:_)},[]),c=m.useCallback(function(y){var S=y;if(!(!ia.length||ia[ia.length-1]!==o)){var h="deltaY"in S?Nw(S):Zu(S),g=t.current.filter(function(E){return E.name===S.type&&(E.target===S.target||S.target===E.shadowParent)&&q5(E.delta,h)})[0];if(g&&g.should){S.cancelable&&S.preventDefault();return}if(!g){var w=(a.current.shards||[]).map(_w).filter(Boolean).filter(function(E){return E.contains(S.target)}),_=w.length>0?l(S,w[0]):!a.current.noIsolation;_&&S.cancelable&&S.preventDefault()}}},[]),u=m.useCallback(function(y,S,h,g){var w={name:y,delta:S,target:h,should:g,shadowParent:Q5(h)};t.current.push(w),setTimeout(function(){t.current=t.current.filter(function(_){return _!==w})},1)},[]),d=m.useCallback(function(y){r.current=Zu(y),n.current=void 0},[]),f=m.useCallback(function(y){u(y.type,Nw(y),y.target,l(y,e.lockRef.current))},[]),p=m.useCallback(function(y){u(y.type,Zu(y),y.target,l(y,e.lockRef.current))},[]);m.useEffect(function(){return ia.push(o),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:p}),document.addEventListener("wheel",c,sa),document.addEventListener("touchmove",c,sa),document.addEventListener("touchstart",d,sa),function(){ia=ia.filter(function(y){return y!==o}),document.removeEventListener("wheel",c,sa),document.removeEventListener("touchmove",c,sa),document.removeEventListener("touchstart",d,sa)}},[]);var v=e.removeScrollBar,j=e.inert;return m.createElement(m.Fragment,null,j?m.createElement(o,{styles:H5(s)}):null,v?m.createElement(L5,{gapMode:e.gapMode}):null)}function Q5(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const Y5=N5(ek,G5);var pu=m.forwardRef(function(e,t){return m.createElement(hh,is({},e,{ref:t,sideCar:Y5}))});pu.classNames=hh.classNames;var xg=["Enter"," "],Z5=["ArrowDown","PageUp","Home"],ik=["ArrowUp","PageDown","End"],X5=[...Z5,...ik],J5={ltr:[...xg,"ArrowRight"],rtl:[...xg,"ArrowLeft"]},e8={ltr:["ArrowLeft"],rtl:["ArrowRight"]},gu="Menu",[Dc,t8,r8]=au(gu),[Go,ok]=Fr(gu,[r8,Zi,dh]),mh=Zi(),ak=dh(),[n8,Qo]=Go(gu),[s8,yu]=Go(gu),lk=e=>{const{__scopeMenu:t,open:r=!1,children:n,dir:s,onOpenChange:o,modal:a=!0}=e,l=mh(t),[c,u]=m.useState(null),d=m.useRef(!1),f=mr(o),p=du(s);return m.useEffect(()=>{const v=()=>{d.current=!0,document.addEventListener("pointerdown",j,{capture:!0,once:!0}),document.addEventListener("pointermove",j,{capture:!0,once:!0})},j=()=>d.current=!1;return document.addEventListener("keydown",v,{capture:!0}),()=>{document.removeEventListener("keydown",v,{capture:!0}),document.removeEventListener("pointerdown",j,{capture:!0}),document.removeEventListener("pointermove",j,{capture:!0})}},[]),i.jsx(ah,{...l,children:i.jsx(n8,{scope:t,open:r,onOpenChange:f,content:c,onContentChange:u,children:i.jsx(s8,{scope:t,onClose:m.useCallback(()=>f(!1),[f]),isUsingKeyboardRef:d,dir:p,modal:a,children:n})})})};lk.displayName=gu;var i8="MenuAnchor",Px=m.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e,s=mh(r);return i.jsx(mu,{...s,...n,ref:t})});Px.displayName=i8;var Rx="MenuPortal",[o8,ck]=Go(Rx,{forceMount:void 0}),uk=e=>{const{__scopeMenu:t,forceMount:r,children:n,container:s}=e,o=Qo(Rx,t);return i.jsx(o8,{scope:t,forceMount:r,children:i.jsx(ln,{present:r||o.open,children:i.jsx(yl,{asChild:!0,container:s,children:n})})})};uk.displayName=Rx;var bn="MenuContent",[a8,Ax]=Go(bn),dk=m.forwardRef((e,t)=>{const r=ck(bn,e.__scopeMenu),{forceMount:n=r.forceMount,...s}=e,o=Qo(bn,e.__scopeMenu),a=yu(bn,e.__scopeMenu);return i.jsx(Dc.Provider,{scope:e.__scopeMenu,children:i.jsx(ln,{present:n||o.open,children:i.jsx(Dc.Slot,{scope:e.__scopeMenu,children:a.modal?i.jsx(l8,{...s,ref:t}):i.jsx(c8,{...s,ref:t})})})})}),l8=m.forwardRef((e,t)=>{const r=Qo(bn,e.__scopeMenu),n=m.useRef(null),s=Ze(t,n);return m.useEffect(()=>{const o=n.current;if(o)return fh(o)},[]),i.jsx(Ix,{...e,ref:s,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:xe(e.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>r.onOpenChange(!1)})}),c8=m.forwardRef((e,t)=>{const r=Qo(bn,e.__scopeMenu);return i.jsx(Ix,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>r.onOpenChange(!1)})}),Ix=m.forwardRef((e,t)=>{const{__scopeMenu:r,loop:n=!1,trapFocus:s,onOpenAutoFocus:o,onCloseAutoFocus:a,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:f,onInteractOutside:p,onDismiss:v,disableOutsideScroll:j,...y}=e,S=Qo(bn,r),h=yu(bn,r),g=mh(r),w=ak(r),_=t8(r),[E,I]=m.useState(null),P=m.useRef(null),M=Ze(t,P,S.onContentChange),F=m.useRef(0),W=m.useRef(""),re=m.useRef(0),q=m.useRef(null),Y=m.useRef("right"),G=m.useRef(0),ne=j?pu:m.Fragment,Z=j?{as:ps,allowPinchZoom:!0}:void 0,fe=z=>{var R,Q;const ue=W.current+z,ae=_().filter(de=>!de.disabled),X=document.activeElement,ee=(R=ae.find(de=>de.ref.current===X))==null?void 0:R.textValue,je=ae.map(de=>de.textValue),Ce=b8(je,ue,ee),D=(Q=ae.find(de=>de.textValue===Ce))==null?void 0:Q.ref.current;(function de(le){W.current=le,window.clearTimeout(F.current),le!==""&&(F.current=window.setTimeout(()=>de(""),1e3))})(ue),D&&setTimeout(()=>D.focus())};m.useEffect(()=>()=>window.clearTimeout(F.current),[]),nh();const B=m.useCallback(z=>{var ae,X;return Y.current===((ae=q.current)==null?void 0:ae.side)&&j8(z,(X=q.current)==null?void 0:X.area)},[]);return i.jsx(a8,{scope:r,searchRef:W,onItemEnter:m.useCallback(z=>{B(z)&&z.preventDefault()},[B]),onItemLeave:m.useCallback(z=>{var ue;B(z)||((ue=P.current)==null||ue.focus(),I(null))},[B]),onTriggerLeave:m.useCallback(z=>{B(z)&&z.preventDefault()},[B]),pointerGraceTimerRef:re,onPointerGraceIntentChange:m.useCallback(z=>{q.current=z},[]),children:i.jsx(ne,{...Z,children:i.jsx(fu,{asChild:!0,trapped:s,onMountAutoFocus:xe(o,z=>{var ue;z.preventDefault(),(ue=P.current)==null||ue.focus({preventScroll:!0})}),onUnmountAutoFocus:a,children:i.jsx(Ko,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:f,onInteractOutside:p,onDismiss:v,children:i.jsx(QE,{asChild:!0,...w,dir:h.dir,orientation:"vertical",loop:n,currentTabStopId:E,onCurrentTabStopIdChange:I,onEntryFocus:xe(c,z=>{h.isUsingKeyboardRef.current||z.preventDefault()}),preventScrollOnEntryFocus:!0,children:i.jsx(lh,{role:"menu","aria-orientation":"vertical","data-state":Ek(S.open),"data-radix-menu-content":"",dir:h.dir,...g,...y,ref:M,style:{outline:"none",...y.style},onKeyDown:xe(y.onKeyDown,z=>{const ae=z.target.closest("[data-radix-menu-content]")===z.currentTarget,X=z.ctrlKey||z.altKey||z.metaKey,ee=z.key.length===1;ae&&(z.key==="Tab"&&z.preventDefault(),!X&&ee&&fe(z.key));const je=P.current;if(z.target!==je||!X5.includes(z.key))return;z.preventDefault();const D=_().filter(R=>!R.disabled).map(R=>R.ref.current);ik.includes(z.key)&&D.reverse(),v8(D)}),onBlur:xe(e.onBlur,z=>{z.currentTarget.contains(z.target)||(window.clearTimeout(F.current),W.current="")}),onPointerMove:xe(e.onPointerMove,Mc(z=>{const ue=z.target,ae=G.current!==z.clientX;if(z.currentTarget.contains(ue)&&ae){const X=z.clientX>G.current?"right":"left";Y.current=X,G.current=z.clientX}}))})})})})})})});dk.displayName=bn;var u8="MenuGroup",Dx=m.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return i.jsx(Le.div,{role:"group",...n,ref:t})});Dx.displayName=u8;var d8="MenuLabel",fk=m.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return i.jsx(Le.div,{...n,ref:t})});fk.displayName=d8;var nf="MenuItem",Cw="menu.itemSelect",ph=m.forwardRef((e,t)=>{const{disabled:r=!1,onSelect:n,...s}=e,o=m.useRef(null),a=yu(nf,e.__scopeMenu),l=Ax(nf,e.__scopeMenu),c=Ze(t,o),u=m.useRef(!1),d=()=>{const f=o.current;if(!r&&f){const p=new CustomEvent(Cw,{bubbles:!0,cancelable:!0});f.addEventListener(Cw,v=>n==null?void 0:n(v),{once:!0}),rx(f,p),p.defaultPrevented?u.current=!1:a.onClose()}};return i.jsx(hk,{...s,ref:c,disabled:r,onClick:xe(e.onClick,d),onPointerDown:f=>{var p;(p=e.onPointerDown)==null||p.call(e,f),u.current=!0},onPointerUp:xe(e.onPointerUp,f=>{var p;u.current||(p=f.currentTarget)==null||p.click()}),onKeyDown:xe(e.onKeyDown,f=>{const p=l.searchRef.current!=="";r||p&&f.key===" "||xg.includes(f.key)&&(f.currentTarget.click(),f.preventDefault())})})});ph.displayName=nf;var hk=m.forwardRef((e,t)=>{const{__scopeMenu:r,disabled:n=!1,textValue:s,...o}=e,a=Ax(nf,r),l=ak(r),c=m.useRef(null),u=Ze(t,c),[d,f]=m.useState(!1),[p,v]=m.useState("");return m.useEffect(()=>{const j=c.current;j&&v((j.textContent??"").trim())},[o.children]),i.jsx(Dc.ItemSlot,{scope:r,disabled:n,textValue:s??p,children:i.jsx(YE,{asChild:!0,...l,focusable:!n,children:i.jsx(Le.div,{role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":n||void 0,"data-disabled":n?"":void 0,...o,ref:u,onPointerMove:xe(e.onPointerMove,Mc(j=>{n?a.onItemLeave(j):(a.onItemEnter(j),j.defaultPrevented||j.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:xe(e.onPointerLeave,Mc(j=>a.onItemLeave(j))),onFocus:xe(e.onFocus,()=>f(!0)),onBlur:xe(e.onBlur,()=>f(!1))})})})}),f8="MenuCheckboxItem",mk=m.forwardRef((e,t)=>{const{checked:r=!1,onCheckedChange:n,...s}=e;return i.jsx(vk,{scope:e.__scopeMenu,checked:r,children:i.jsx(ph,{role:"menuitemcheckbox","aria-checked":sf(r)?"mixed":r,...s,ref:t,"data-state":Ox(r),onSelect:xe(s.onSelect,()=>n==null?void 0:n(sf(r)?!0:!r),{checkForDefaultPrevented:!1})})})});mk.displayName=f8;var pk="MenuRadioGroup",[h8,m8]=Go(pk,{value:void 0,onValueChange:()=>{}}),gk=m.forwardRef((e,t)=>{const{value:r,onValueChange:n,...s}=e,o=mr(n);return i.jsx(h8,{scope:e.__scopeMenu,value:r,onValueChange:o,children:i.jsx(Dx,{...s,ref:t})})});gk.displayName=pk;var yk="MenuRadioItem",xk=m.forwardRef((e,t)=>{const{value:r,...n}=e,s=m8(yk,e.__scopeMenu),o=r===s.value;return i.jsx(vk,{scope:e.__scopeMenu,checked:o,children:i.jsx(ph,{role:"menuitemradio","aria-checked":o,...n,ref:t,"data-state":Ox(o),onSelect:xe(n.onSelect,()=>{var a;return(a=s.onValueChange)==null?void 0:a.call(s,r)},{checkForDefaultPrevented:!1})})})});xk.displayName=yk;var Mx="MenuItemIndicator",[vk,p8]=Go(Mx,{checked:!1}),wk=m.forwardRef((e,t)=>{const{__scopeMenu:r,forceMount:n,...s}=e,o=p8(Mx,r);return i.jsx(ln,{present:n||sf(o.checked)||o.checked===!0,children:i.jsx(Le.span,{...s,ref:t,"data-state":Ox(o.checked)})})});wk.displayName=Mx;var g8="MenuSeparator",bk=m.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return i.jsx(Le.div,{role:"separator","aria-orientation":"horizontal",...n,ref:t})});bk.displayName=g8;var y8="MenuArrow",Sk=m.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e,s=mh(r);return i.jsx(ch,{...s,...n,ref:t})});Sk.displayName=y8;var x8="MenuSub",[mH,jk]=Go(x8),Hl="MenuSubTrigger",Nk=m.forwardRef((e,t)=>{const r=Qo(Hl,e.__scopeMenu),n=yu(Hl,e.__scopeMenu),s=jk(Hl,e.__scopeMenu),o=Ax(Hl,e.__scopeMenu),a=m.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=o,u={__scopeMenu:e.__scopeMenu},d=m.useCallback(()=>{a.current&&window.clearTimeout(a.current),a.current=null},[]);return m.useEffect(()=>d,[d]),m.useEffect(()=>{const f=l.current;return()=>{window.clearTimeout(f),c(null)}},[l,c]),i.jsx(Px,{asChild:!0,...u,children:i.jsx(hk,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":s.contentId,"data-state":Ek(r.open),...e,ref:Zf(t,s.onTriggerChange),onClick:f=>{var p;(p=e.onClick)==null||p.call(e,f),!(e.disabled||f.defaultPrevented)&&(f.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:xe(e.onPointerMove,Mc(f=>{o.onItemEnter(f),!f.defaultPrevented&&!e.disabled&&!r.open&&!a.current&&(o.onPointerGraceIntentChange(null),a.current=window.setTimeout(()=>{r.onOpenChange(!0),d()},100))})),onPointerLeave:xe(e.onPointerLeave,Mc(f=>{var v,j;d();const p=(v=r.content)==null?void 0:v.getBoundingClientRect();if(p){const y=(j=r.content)==null?void 0:j.dataset.side,S=y==="right",h=S?-5:5,g=p[S?"left":"right"],w=p[S?"right":"left"];o.onPointerGraceIntentChange({area:[{x:f.clientX+h,y:f.clientY},{x:g,y:p.top},{x:w,y:p.top},{x:w,y:p.bottom},{x:g,y:p.bottom}],side:y}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>o.onPointerGraceIntentChange(null),300)}else{if(o.onTriggerLeave(f),f.defaultPrevented)return;o.onPointerGraceIntentChange(null)}})),onKeyDown:xe(e.onKeyDown,f=>{var v;const p=o.searchRef.current!=="";e.disabled||p&&f.key===" "||J5[n.dir].includes(f.key)&&(r.onOpenChange(!0),(v=r.content)==null||v.focus(),f.preventDefault())})})})});Nk.displayName=Hl;var _k="MenuSubContent",Ck=m.forwardRef((e,t)=>{const r=ck(bn,e.__scopeMenu),{forceMount:n=r.forceMount,...s}=e,o=Qo(bn,e.__scopeMenu),a=yu(bn,e.__scopeMenu),l=jk(_k,e.__scopeMenu),c=m.useRef(null),u=Ze(t,c);return i.jsx(Dc.Provider,{scope:e.__scopeMenu,children:i.jsx(ln,{present:n||o.open,children:i.jsx(Dc.Slot,{scope:e.__scopeMenu,children:i.jsx(Ix,{id:l.contentId,"aria-labelledby":l.triggerId,...s,ref:u,align:"start",side:a.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:d=>{var f;a.isUsingKeyboardRef.current&&((f=c.current)==null||f.focus()),d.preventDefault()},onCloseAutoFocus:d=>d.preventDefault(),onFocusOutside:xe(e.onFocusOutside,d=>{d.target!==l.trigger&&o.onOpenChange(!1)}),onEscapeKeyDown:xe(e.onEscapeKeyDown,d=>{a.onClose(),d.preventDefault()}),onKeyDown:xe(e.onKeyDown,d=>{var v;const f=d.currentTarget.contains(d.target),p=e8[a.dir].includes(d.key);f&&p&&(o.onOpenChange(!1),(v=l.trigger)==null||v.focus(),d.preventDefault())})})})})})});Ck.displayName=_k;function Ek(e){return e?"open":"closed"}function sf(e){return e==="indeterminate"}function Ox(e){return sf(e)?"indeterminate":e?"checked":"unchecked"}function v8(e){const t=document.activeElement;for(const r of e)if(r===t||(r.focus(),document.activeElement!==t))return}function w8(e,t){return e.map((r,n)=>e[(t+n)%e.length])}function b8(e,t,r){const s=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,o=r?e.indexOf(r):-1;let a=w8(e,Math.max(o,0));s.length===1&&(a=a.filter(u=>u!==r));const c=a.find(u=>u.toLowerCase().startsWith(s.toLowerCase()));return c!==r?c:void 0}function S8(e,t){const{x:r,y:n}=e;let s=!1;for(let o=0,a=t.length-1;o<t.length;a=o++){const l=t[o].x,c=t[o].y,u=t[a].x,d=t[a].y;c>n!=d>n&&r<(u-l)*(n-c)/(d-c)+l&&(s=!s)}return s}function j8(e,t){if(!t)return!1;const r={x:e.clientX,y:e.clientY};return S8(r,t)}function Mc(e){return t=>t.pointerType==="mouse"?e(t):void 0}var N8=lk,_8=Px,C8=uk,E8=dk,k8=Dx,T8=fk,P8=ph,R8=mk,A8=gk,I8=xk,D8=wk,M8=bk,O8=Sk,L8=Nk,F8=Ck,Lx="DropdownMenu",[U8,pH]=Fr(Lx,[ok]),Ur=ok(),[$8,kk]=U8(Lx),Tk=e=>{const{__scopeDropdownMenu:t,children:r,dir:n,open:s,defaultOpen:o,onOpenChange:a,modal:l=!0}=e,c=Ur(t),u=m.useRef(null),[d=!1,f]=Hn({prop:s,defaultProp:o,onChange:a});return i.jsx($8,{scope:t,triggerId:wn(),triggerRef:u,contentId:wn(),open:d,onOpenChange:f,onOpenToggle:m.useCallback(()=>f(p=>!p),[f]),modal:l,children:i.jsx(N8,{...c,open:d,onOpenChange:f,dir:n,modal:l,children:r})})};Tk.displayName=Lx;var Pk="DropdownMenuTrigger",Rk=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,disabled:n=!1,...s}=e,o=kk(Pk,r),a=Ur(r);return i.jsx(_8,{asChild:!0,...a,children:i.jsx(Le.button,{type:"button",id:o.triggerId,"aria-haspopup":"menu","aria-expanded":o.open,"aria-controls":o.open?o.contentId:void 0,"data-state":o.open?"open":"closed","data-disabled":n?"":void 0,disabled:n,...s,ref:Zf(t,o.triggerRef),onPointerDown:xe(e.onPointerDown,l=>{!n&&l.button===0&&l.ctrlKey===!1&&(o.onOpenToggle(),o.open||l.preventDefault())}),onKeyDown:xe(e.onKeyDown,l=>{n||(["Enter"," "].includes(l.key)&&o.onOpenToggle(),l.key==="ArrowDown"&&o.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});Rk.displayName=Pk;var B8="DropdownMenuPortal",Ak=e=>{const{__scopeDropdownMenu:t,...r}=e,n=Ur(t);return i.jsx(C8,{...n,...r})};Ak.displayName=B8;var Ik="DropdownMenuContent",Dk=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=kk(Ik,r),o=Ur(r),a=m.useRef(!1);return i.jsx(E8,{id:s.contentId,"aria-labelledby":s.triggerId,...o,...n,ref:t,onCloseAutoFocus:xe(e.onCloseAutoFocus,l=>{var c;a.current||(c=s.triggerRef.current)==null||c.focus(),a.current=!1,l.preventDefault()}),onInteractOutside:xe(e.onInteractOutside,l=>{const c=l.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0,d=c.button===2||u;(!s.modal||d)&&(a.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Dk.displayName=Ik;var z8="DropdownMenuGroup",V8=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=Ur(r);return i.jsx(k8,{...s,...n,ref:t})});V8.displayName=z8;var W8="DropdownMenuLabel",Mk=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=Ur(r);return i.jsx(T8,{...s,...n,ref:t})});Mk.displayName=W8;var q8="DropdownMenuItem",Ok=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=Ur(r);return i.jsx(P8,{...s,...n,ref:t})});Ok.displayName=q8;var H8="DropdownMenuCheckboxItem",Lk=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=Ur(r);return i.jsx(R8,{...s,...n,ref:t})});Lk.displayName=H8;var K8="DropdownMenuRadioGroup",G8=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=Ur(r);return i.jsx(A8,{...s,...n,ref:t})});G8.displayName=K8;var Q8="DropdownMenuRadioItem",Fk=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=Ur(r);return i.jsx(I8,{...s,...n,ref:t})});Fk.displayName=Q8;var Y8="DropdownMenuItemIndicator",Uk=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=Ur(r);return i.jsx(D8,{...s,...n,ref:t})});Uk.displayName=Y8;var Z8="DropdownMenuSeparator",$k=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=Ur(r);return i.jsx(M8,{...s,...n,ref:t})});$k.displayName=Z8;var X8="DropdownMenuArrow",J8=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=Ur(r);return i.jsx(O8,{...s,...n,ref:t})});J8.displayName=X8;var eU="DropdownMenuSubTrigger",Bk=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=Ur(r);return i.jsx(L8,{...s,...n,ref:t})});Bk.displayName=eU;var tU="DropdownMenuSubContent",zk=m.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,s=Ur(r);return i.jsx(F8,{...s,...n,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});zk.displayName=tU;var rU=Tk,nU=Rk,sU=Ak,Vk=Dk,Wk=Mk,qk=Ok,Hk=Lk,Kk=Fk,Gk=Uk,Qk=$k,Yk=Bk,Zk=zk;const Xk=rU,Jk=nU,iU=m.forwardRef(({className:e,inset:t,children:r,...n},s)=>i.jsxs(Yk,{ref:s,className:we("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",e),...n,children:[r,i.jsx(SL,{className:"ml-auto h-4 w-4"})]}));iU.displayName=Yk.displayName;const oU=m.forwardRef(({className:e,...t},r)=>i.jsx(Zk,{ref:r,className:we("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));oU.displayName=Zk.displayName;const Fx=m.forwardRef(({className:e,sideOffset:t=4,...r},n)=>i.jsx(sU,{children:i.jsx(Vk,{ref:n,sideOffset:t,className:we("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));Fx.displayName=Vk.displayName;const Fn=m.forwardRef(({className:e,inset:t,...r},n)=>i.jsx(qk,{ref:n,className:we("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t&&"pl-8",e),...r}));Fn.displayName=qk.displayName;const aU=m.forwardRef(({className:e,children:t,checked:r,...n},s)=>i.jsxs(Hk,{ref:s,className:we("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:r,...n,children:[i.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(Gk,{children:i.jsx(un,{className:"h-4 w-4"})})}),t]}));aU.displayName=Hk.displayName;const lU=m.forwardRef(({className:e,children:t,...r},n)=>i.jsxs(Kk,{ref:n,className:we("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[i.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(Gk,{children:i.jsx(_L,{className:"h-2 w-2 fill-current"})})}),t]}));lU.displayName=Kk.displayName;const eT=m.forwardRef(({className:e,inset:t,...r},n)=>i.jsx(Wk,{ref:n,className:we("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...r}));eT.displayName=Wk.displayName;const of=m.forwardRef(({className:e,...t},r)=>i.jsx(Qk,{ref:r,className:we("-mx-1 my-1 h-px bg-muted",e),...t}));of.displayName=Qk.displayName;const Ux=cu("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),te=m.forwardRef(({className:e,variant:t,size:r,asChild:n=!1,...s},o)=>{const a=n?ps:"button";return i.jsx(a,{className:we(Ux({variant:t,size:r,className:e})),ref:o,...s})});te.displayName="Button";function Yo(){var l;const[,e]=Nn(),[t,r]=m.useState(!1),{user:n,logoutMutation:s}=or(),o=()=>{r(!t)},a=()=>{s.mutate()};return i.jsxs(i.Fragment,{children:[i.jsx("header",{className:"bg-background border-b themed-border py-3 px-4 absolute top-0 w-full z-50",children:i.jsxs("div",{className:"flex items-center justify-between max-w-7xl mx-auto",children:[i.jsx("div",{className:"flex items-center",children:i.jsx(Oe,{href:"/",className:"text-primary font-bold text-xl flex items-center",children:i.jsx("span",{className:"themed-text-gradient",children:"TRAXX"})})}),i.jsx("div",{className:"hidden md:block flex-grow max-w-xl mx-4",children:i.jsx(aw,{})}),i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsx("button",{className:"md:hidden text-muted-foreground hover:text-primary transition-colors",onClick:o,children:i.jsx(Rc,{className:"themed-icon",size:20})}),i.jsxs(Oe,{href:"/discover",className:"hidden md:flex items-center text-muted-foreground hover:text-primary transition-colors",children:[i.jsx(CL,{className:"mr-1 themed-icon",size:18}),i.jsx("span",{children:"Discover"})]}),i.jsxs(te,{variant:"default",className:"bg-primary hover:bg-primary/80 text-primary-foreground",onClick:()=>e("/go-live"),children:[i.jsx(Ls,{className:"mr-1",size:18}),i.jsx("span",{className:"hidden md:inline",children:"Go Live"})]}),i.jsxs(Xk,{children:[i.jsx(Jk,{className:"focus:outline-none",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsxs(ys,{className:"w-8 h-8 border-2 themed-border ring-2 ring-primary/20",children:[n!=null&&n.profileImageUrl?i.jsx(Yi,{src:n.profileImageUrl}):null,i.jsx(Ws,{className:"bg-primary/10 text-primary font-semibold",children:((l=n==null?void 0:n.displayName)==null?void 0:l.charAt(0))||"U"})]}),i.jsx(ox,{className:"h-4 w-4 text-muted-foreground hidden md:block"})]})}),i.jsxs(Fx,{align:"end",className:"w-56",children:[i.jsx(eT,{children:n?n.displayName:"My Account"}),i.jsx(of,{}),i.jsx(Fn,{onClick:()=>e("/dashboard"),children:"Creator Dashboard"}),i.jsx(Fn,{onClick:()=>e(`/profile/${n==null?void 0:n.username}`),children:"Profile"}),i.jsx(Fn,{onClick:()=>e("/settings"),children:"Settings"}),i.jsx(Fn,{onClick:()=>e("/library"),children:"My Library"}),i.jsx(of,{}),i.jsx(Fn,{onClick:a,disabled:s.isPending,children:s.isPending?i.jsxs(i.Fragment,{children:[i.jsx(gs,{className:"mr-2 h-4 w-4 animate-spin"}),"Signing out..."]}):"Sign out"})]})]})]})]})}),t&&i.jsx("div",{className:"md:hidden px-4 pt-16 pb-2 bg-background border-b themed-border fixed w-full z-40",children:i.jsx(aw,{})})]})}function Zo(){const[e]=Nn(),t=r=>e===r;return i.jsx("nav",{className:"md:hidden fixed bottom-16 left-0 w-full bg-stone-200 border-t border-dark-100 py-2 z-50",children:i.jsxs("div",{className:"flex items-center justify-around",children:[i.jsxs(Oe,{href:"/",className:`flex flex-col items-center ${t("/")?"text-primary":"text-gray-400 hover:text-primary"} transition`,children:[i.jsx(PL,{size:16}),i.jsx("span",{className:"text-xs mt-1",children:"Home"})]}),i.jsxs(Oe,{href:"/streams",className:`flex flex-col items-center ${t("/streams")?"text-primary":"text-gray-400 hover:text-primary"} transition`,children:[i.jsx(us,{size:16}),i.jsx("span",{className:"text-xs mt-1",children:"Streams"})]}),i.jsxs(Oe,{href:"/dashboard",className:`flex flex-col items-center ${t("/dashboard")?"text-primary":"text-gray-400 hover:text-primary"} transition`,children:[i.jsx(RL,{size:16}),i.jsx("span",{className:"text-xs mt-1",children:"Dashboard"})]}),i.jsxs(Oe,{href:"/go-live",className:`flex flex-col items-center ${t("/go-live")?"text-primary":"text-gray-400 hover:text-primary"} transition`,children:[i.jsx(Ls,{size:16}),i.jsx("span",{className:"text-xs mt-1",children:"Go Live"})]}),i.jsxs(Oe,{href:"/library",className:`flex flex-col items-center ${t("/library")?"text-primary":"text-gray-400 hover:text-primary"} transition`,children:[i.jsx(vL,{size:16}),i.jsx("span",{className:"text-xs mt-1",children:"Library"})]})]})})}function $x({children:e}){const{user:t}=or();return i.jsxs("div",{className:"flex flex-col min-h-screen",children:[i.jsx(Yo,{}),i.jsx("main",{className:"flex-1 pb-20 md:pb-24",children:e}),i.jsx(Zo,{}),t&&i.jsxs("div",{className:"fixed bottom-24 right-6 flex flex-col gap-4 md:bottom-8",children:[i.jsx(Oe,{href:"/go-live",children:i.jsx(te,{size:"icon",className:"rounded-full bg-red-500 hover:bg-red-600 shadow-lg h-14 w-14",title:"Go Live",children:i.jsx(us,{className:"h-6 w-6"})})}),i.jsx(Oe,{href:"/upload-track",children:i.jsx(te,{size:"icon",className:"rounded-full bg-primary hover:bg-primary/90 shadow-lg h-14 w-14",title:"Upload Track",children:i.jsx(B2,{className:"h-6 w-6"})})}),i.jsx(Oe,{href:"/posts/new",children:i.jsx(te,{size:"icon",className:"rounded-full bg-primary hover:bg-primary/90 shadow-lg h-14 w-14",title:"Create Post",children:i.jsx($L,{className:"h-6 w-6"})})})]})]})}function Br({path:e,component:t}){const{user:r,isLoading:n}=or();return n?i.jsx(Ps,{path:e,children:i.jsx("div",{className:"flex items-center justify-center min-h-screen",children:i.jsx(gs,{className:"h-8 w-8 animate-spin text-border"})})}):r?i.jsx(Ps,{path:e,children:i.jsx($x,{children:i.jsx(t,{})})}):i.jsx(Ps,{path:e,children:i.jsx(YC,{to:"/auth"})})}function af(e,[t,r]){return Math.min(r,Math.max(t,e))}function Bx(e){const t=m.useRef({value:e,previous:e});return m.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var tT=["PageUp","PageDown"],rT=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],nT={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},bl="Slider",[vg,cU,uU]=au(bl),[sT,gH]=Fr(bl,[uU]),[dU,gh]=sT(bl),iT=m.forwardRef((e,t)=>{const{name:r,min:n=0,max:s=100,step:o=1,orientation:a="horizontal",disabled:l=!1,minStepsBetweenThumbs:c=0,defaultValue:u=[n],value:d,onValueChange:f=()=>{},onValueCommit:p=()=>{},inverted:v=!1,form:j,...y}=e,S=m.useRef(new Set),h=m.useRef(0),w=a==="horizontal"?fU:hU,[_=[],E]=Hn({prop:d,defaultProp:u,onChange:re=>{var Y;(Y=[...S.current][h.current])==null||Y.focus(),f(re)}}),I=m.useRef(_);function P(re){const q=xU(_,re);W(re,q)}function M(re){W(re,h.current)}function F(){const re=I.current[h.current];_[h.current]!==re&&p(_)}function W(re,q,{commit:Y}={commit:!1}){const G=SU(o),ne=jU(Math.round((re-n)/o)*o+n,G),Z=af(ne,[n,s]);E((fe=[])=>{const B=gU(fe,Z,q);if(bU(B,c*o)){h.current=B.indexOf(Z);const z=String(B)!==String(fe);return z&&Y&&p(B),z?B:fe}else return fe})}return i.jsx(dU,{scope:e.__scopeSlider,name:r,disabled:l,min:n,max:s,valueIndexToChangeRef:h,thumbs:S.current,values:_,orientation:a,form:j,children:i.jsx(vg.Provider,{scope:e.__scopeSlider,children:i.jsx(vg.Slot,{scope:e.__scopeSlider,children:i.jsx(w,{"aria-disabled":l,"data-disabled":l?"":void 0,...y,ref:t,onPointerDown:xe(y.onPointerDown,()=>{l||(I.current=_)}),min:n,max:s,inverted:v,onSlideStart:l?void 0:P,onSlideMove:l?void 0:M,onSlideEnd:l?void 0:F,onHomeKeyDown:()=>!l&&W(n,0,{commit:!0}),onEndKeyDown:()=>!l&&W(s,_.length-1,{commit:!0}),onStepKeyDown:({event:re,direction:q})=>{if(!l){const ne=tT.includes(re.key)||re.shiftKey&&rT.includes(re.key)?10:1,Z=h.current,fe=_[Z],B=o*ne*q;W(fe+B,Z,{commit:!0})}}})})})})});iT.displayName=bl;var[oT,aT]=sT(bl,{startEdge:"left",endEdge:"right",size:"width",direction:1}),fU=m.forwardRef((e,t)=>{const{min:r,max:n,dir:s,inverted:o,onSlideStart:a,onSlideMove:l,onSlideEnd:c,onStepKeyDown:u,...d}=e,[f,p]=m.useState(null),v=Ze(t,w=>p(w)),j=m.useRef(void 0),y=du(s),S=y==="ltr",h=S&&!o||!S&&o;function g(w){const _=j.current||f.getBoundingClientRect(),E=[0,_.width],P=zx(E,h?[r,n]:[n,r]);return j.current=_,P(w-_.left)}return i.jsx(oT,{scope:e.__scopeSlider,startEdge:h?"left":"right",endEdge:h?"right":"left",direction:h?1:-1,size:"width",children:i.jsx(lT,{dir:y,"data-orientation":"horizontal",...d,ref:v,style:{...d.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:w=>{const _=g(w.clientX);a==null||a(_)},onSlideMove:w=>{const _=g(w.clientX);l==null||l(_)},onSlideEnd:()=>{j.current=void 0,c==null||c()},onStepKeyDown:w=>{const E=nT[h?"from-left":"from-right"].includes(w.key);u==null||u({event:w,direction:E?-1:1})}})})}),hU=m.forwardRef((e,t)=>{const{min:r,max:n,inverted:s,onSlideStart:o,onSlideMove:a,onSlideEnd:l,onStepKeyDown:c,...u}=e,d=m.useRef(null),f=Ze(t,d),p=m.useRef(void 0),v=!s;function j(y){const S=p.current||d.current.getBoundingClientRect(),h=[0,S.height],w=zx(h,v?[n,r]:[r,n]);return p.current=S,w(y-S.top)}return i.jsx(oT,{scope:e.__scopeSlider,startEdge:v?"bottom":"top",endEdge:v?"top":"bottom",size:"height",direction:v?1:-1,children:i.jsx(lT,{"data-orientation":"vertical",...u,ref:f,style:{...u.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:y=>{const S=j(y.clientY);o==null||o(S)},onSlideMove:y=>{const S=j(y.clientY);a==null||a(S)},onSlideEnd:()=>{p.current=void 0,l==null||l()},onStepKeyDown:y=>{const h=nT[v?"from-bottom":"from-top"].includes(y.key);c==null||c({event:y,direction:h?-1:1})}})})}),lT=m.forwardRef((e,t)=>{const{__scopeSlider:r,onSlideStart:n,onSlideMove:s,onSlideEnd:o,onHomeKeyDown:a,onEndKeyDown:l,onStepKeyDown:c,...u}=e,d=gh(bl,r);return i.jsx(Le.span,{...u,ref:t,onKeyDown:xe(e.onKeyDown,f=>{f.key==="Home"?(a(f),f.preventDefault()):f.key==="End"?(l(f),f.preventDefault()):tT.concat(rT).includes(f.key)&&(c(f),f.preventDefault())}),onPointerDown:xe(e.onPointerDown,f=>{const p=f.target;p.setPointerCapture(f.pointerId),f.preventDefault(),d.thumbs.has(p)?p.focus():n(f)}),onPointerMove:xe(e.onPointerMove,f=>{f.target.hasPointerCapture(f.pointerId)&&s(f)}),onPointerUp:xe(e.onPointerUp,f=>{const p=f.target;p.hasPointerCapture(f.pointerId)&&(p.releasePointerCapture(f.pointerId),o(f))})})}),cT="SliderTrack",uT=m.forwardRef((e,t)=>{const{__scopeSlider:r,...n}=e,s=gh(cT,r);return i.jsx(Le.span,{"data-disabled":s.disabled?"":void 0,"data-orientation":s.orientation,...n,ref:t})});uT.displayName=cT;var wg="SliderRange",dT=m.forwardRef((e,t)=>{const{__scopeSlider:r,...n}=e,s=gh(wg,r),o=aT(wg,r),a=m.useRef(null),l=Ze(t,a),c=s.values.length,u=s.values.map(p=>hT(p,s.min,s.max)),d=c>1?Math.min(...u):0,f=100-Math.max(...u);return i.jsx(Le.span,{"data-orientation":s.orientation,"data-disabled":s.disabled?"":void 0,...n,ref:l,style:{...e.style,[o.startEdge]:d+"%",[o.endEdge]:f+"%"}})});dT.displayName=wg;var bg="SliderThumb",fT=m.forwardRef((e,t)=>{const r=cU(e.__scopeSlider),[n,s]=m.useState(null),o=Ze(t,l=>s(l)),a=m.useMemo(()=>n?r().findIndex(l=>l.ref.current===n):-1,[r,n]);return i.jsx(mU,{...e,ref:o,index:a})}),mU=m.forwardRef((e,t)=>{const{__scopeSlider:r,index:n,name:s,...o}=e,a=gh(bg,r),l=aT(bg,r),[c,u]=m.useState(null),d=Ze(t,g=>u(g)),f=c?a.form||!!c.closest("form"):!0,p=Ex(c),v=a.values[n],j=v===void 0?0:hT(v,a.min,a.max),y=yU(n,a.values.length),S=p==null?void 0:p[l.size],h=S?vU(S,j,l.direction):0;return m.useEffect(()=>{if(c)return a.thumbs.add(c),()=>{a.thumbs.delete(c)}},[c,a.thumbs]),i.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[l.startEdge]:`calc(${j}% + ${h}px)`},children:[i.jsx(vg.ItemSlot,{scope:e.__scopeSlider,children:i.jsx(Le.span,{role:"slider","aria-label":e["aria-label"]||y,"aria-valuemin":a.min,"aria-valuenow":v,"aria-valuemax":a.max,"aria-orientation":a.orientation,"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,tabIndex:a.disabled?void 0:0,...o,ref:d,style:v===void 0?{display:"none"}:e.style,onFocus:xe(e.onFocus,()=>{a.valueIndexToChangeRef.current=n})})}),f&&i.jsx(pU,{name:s??(a.name?a.name+(a.values.length>1?"[]":""):void 0),form:a.form,value:v},n)]})});fT.displayName=bg;var pU=e=>{const{value:t,...r}=e,n=m.useRef(null),s=Bx(t);return m.useEffect(()=>{const o=n.current,a=window.HTMLInputElement.prototype,c=Object.getOwnPropertyDescriptor(a,"value").set;if(s!==t&&c){const u=new Event("input",{bubbles:!0});c.call(o,t),o.dispatchEvent(u)}},[s,t]),i.jsx("input",{style:{display:"none"},...r,ref:n,defaultValue:t})};function gU(e=[],t,r){const n=[...e];return n[r]=t,n.sort((s,o)=>s-o)}function hT(e,t,r){const o=100/(r-t)*(e-t);return af(o,[0,100])}function yU(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function xU(e,t){if(e.length===1)return 0;const r=e.map(s=>Math.abs(s-t)),n=Math.min(...r);return r.indexOf(n)}function vU(e,t,r){const n=e/2,o=zx([0,50],[0,n]);return(n-o(t)*r)*r}function wU(e){return e.slice(0,-1).map((t,r)=>e[r+1]-t)}function bU(e,t){if(t>0){const r=wU(e);return Math.min(...r)>=t}return!0}function zx(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const n=(t[1]-t[0])/(e[1]-e[0]);return t[0]+n*(r-e[0])}}function SU(e){return(String(e).split(".")[1]||"").length}function jU(e,t){const r=Math.pow(10,t);return Math.round(e*r)/r}var mT=iT,NU=uT,_U=dT,CU=fT;const _o=m.forwardRef(({className:e,...t},r)=>i.jsxs(mT,{ref:r,className:we("relative flex w-full touch-none select-none items-center",e),...t,children:[i.jsx(NU,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:i.jsx(_U,{className:"absolute h-full bg-primary"})}),i.jsx(CU,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));_o.displayName=mT.displayName;var[yh,yH]=Fr("Tooltip",[Zi]),xh=Zi(),pT="TooltipProvider",EU=700,Sg="tooltip.open",[kU,Vx]=yh(pT),gT=e=>{const{__scopeTooltip:t,delayDuration:r=EU,skipDelayDuration:n=300,disableHoverableContent:s=!1,children:o}=e,[a,l]=m.useState(!0),c=m.useRef(!1),u=m.useRef(0);return m.useEffect(()=>{const d=u.current;return()=>window.clearTimeout(d)},[]),i.jsx(kU,{scope:t,isOpenDelayed:a,delayDuration:r,onOpen:m.useCallback(()=>{window.clearTimeout(u.current),l(!1)},[]),onClose:m.useCallback(()=>{window.clearTimeout(u.current),u.current=window.setTimeout(()=>l(!0),n)},[n]),isPointerInTransitRef:c,onPointerInTransitChange:m.useCallback(d=>{c.current=d},[]),disableHoverableContent:s,children:o})};gT.displayName=pT;var vh="Tooltip",[TU,wh]=yh(vh),yT=e=>{const{__scopeTooltip:t,children:r,open:n,defaultOpen:s=!1,onOpenChange:o,disableHoverableContent:a,delayDuration:l}=e,c=Vx(vh,e.__scopeTooltip),u=xh(t),[d,f]=m.useState(null),p=wn(),v=m.useRef(0),j=a??c.disableHoverableContent,y=l??c.delayDuration,S=m.useRef(!1),[h=!1,g]=Hn({prop:n,defaultProp:s,onChange:P=>{P?(c.onOpen(),document.dispatchEvent(new CustomEvent(Sg))):c.onClose(),o==null||o(P)}}),w=m.useMemo(()=>h?S.current?"delayed-open":"instant-open":"closed",[h]),_=m.useCallback(()=>{window.clearTimeout(v.current),v.current=0,S.current=!1,g(!0)},[g]),E=m.useCallback(()=>{window.clearTimeout(v.current),v.current=0,g(!1)},[g]),I=m.useCallback(()=>{window.clearTimeout(v.current),v.current=window.setTimeout(()=>{S.current=!0,g(!0),v.current=0},y)},[y,g]);return m.useEffect(()=>()=>{v.current&&(window.clearTimeout(v.current),v.current=0)},[]),i.jsx(ah,{...u,children:i.jsx(TU,{scope:t,contentId:p,open:h,stateAttribute:w,trigger:d,onTriggerChange:f,onTriggerEnter:m.useCallback(()=>{c.isOpenDelayed?I():_()},[c.isOpenDelayed,I,_]),onTriggerLeave:m.useCallback(()=>{j?E():(window.clearTimeout(v.current),v.current=0)},[E,j]),onOpen:_,onClose:E,disableHoverableContent:j,children:r})})};yT.displayName=vh;var jg="TooltipTrigger",xT=m.forwardRef((e,t)=>{const{__scopeTooltip:r,...n}=e,s=wh(jg,r),o=Vx(jg,r),a=xh(r),l=m.useRef(null),c=Ze(t,l,s.onTriggerChange),u=m.useRef(!1),d=m.useRef(!1),f=m.useCallback(()=>u.current=!1,[]);return m.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),i.jsx(mu,{asChild:!0,...a,children:i.jsx(Le.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...n,ref:c,onPointerMove:xe(e.onPointerMove,p=>{p.pointerType!=="touch"&&!d.current&&!o.isPointerInTransitRef.current&&(s.onTriggerEnter(),d.current=!0)}),onPointerLeave:xe(e.onPointerLeave,()=>{s.onTriggerLeave(),d.current=!1}),onPointerDown:xe(e.onPointerDown,()=>{u.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:xe(e.onFocus,()=>{u.current||s.onOpen()}),onBlur:xe(e.onBlur,s.onClose),onClick:xe(e.onClick,s.onClose)})})});xT.displayName=jg;var PU="TooltipPortal",[xH,RU]=yh(PU,{forceMount:void 0}),ol="TooltipContent",vT=m.forwardRef((e,t)=>{const r=RU(ol,e.__scopeTooltip),{forceMount:n=r.forceMount,side:s="top",...o}=e,a=wh(ol,e.__scopeTooltip);return i.jsx(ln,{present:n||a.open,children:a.disableHoverableContent?i.jsx(wT,{side:s,...o,ref:t}):i.jsx(AU,{side:s,...o,ref:t})})}),AU=m.forwardRef((e,t)=>{const r=wh(ol,e.__scopeTooltip),n=Vx(ol,e.__scopeTooltip),s=m.useRef(null),o=Ze(t,s),[a,l]=m.useState(null),{trigger:c,onClose:u}=r,d=s.current,{onPointerInTransitChange:f}=n,p=m.useCallback(()=>{l(null),f(!1)},[f]),v=m.useCallback((j,y)=>{const S=j.currentTarget,h={x:j.clientX,y:j.clientY},g=OU(h,S.getBoundingClientRect()),w=LU(h,g),_=FU(y.getBoundingClientRect()),E=$U([...w,..._]);l(E),f(!0)},[f]);return m.useEffect(()=>()=>p(),[p]),m.useEffect(()=>{if(c&&d){const j=S=>v(S,d),y=S=>v(S,c);return c.addEventListener("pointerleave",j),d.addEventListener("pointerleave",y),()=>{c.removeEventListener("pointerleave",j),d.removeEventListener("pointerleave",y)}}},[c,d,v,p]),m.useEffect(()=>{if(a){const j=y=>{const S=y.target,h={x:y.clientX,y:y.clientY},g=(c==null?void 0:c.contains(S))||(d==null?void 0:d.contains(S)),w=!UU(h,a);g?p():w&&(p(),u())};return document.addEventListener("pointermove",j),()=>document.removeEventListener("pointermove",j)}},[c,d,a,u,p]),i.jsx(wT,{...e,ref:o})}),[IU,DU]=yh(vh,{isInside:!1}),wT=m.forwardRef((e,t)=>{const{__scopeTooltip:r,children:n,"aria-label":s,onEscapeKeyDown:o,onPointerDownOutside:a,...l}=e,c=wh(ol,r),u=xh(r),{onClose:d}=c;return m.useEffect(()=>(document.addEventListener(Sg,d),()=>document.removeEventListener(Sg,d)),[d]),m.useEffect(()=>{if(c.trigger){const f=p=>{const v=p.target;v!=null&&v.contains(c.trigger)&&d()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[c.trigger,d]),i.jsx(Ko,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:o,onPointerDownOutside:a,onFocusOutside:f=>f.preventDefault(),onDismiss:d,children:i.jsxs(lh,{"data-state":c.stateAttribute,...u,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[i.jsx(tx,{children:n}),i.jsx(IU,{scope:r,isInside:!0,children:i.jsx(Y3,{id:c.contentId,role:"tooltip",children:s||n})})]})})});vT.displayName=ol;var bT="TooltipArrow",MU=m.forwardRef((e,t)=>{const{__scopeTooltip:r,...n}=e,s=xh(r);return DU(bT,r).isInside?null:i.jsx(ch,{...s,...n,ref:t})});MU.displayName=bT;function OU(e,t){const r=Math.abs(t.top-e.y),n=Math.abs(t.bottom-e.y),s=Math.abs(t.right-e.x),o=Math.abs(t.left-e.x);switch(Math.min(r,n,s,o)){case o:return"left";case s:return"right";case r:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function LU(e,t,r=5){const n=[];switch(t){case"top":n.push({x:e.x-r,y:e.y+r},{x:e.x+r,y:e.y+r});break;case"bottom":n.push({x:e.x-r,y:e.y-r},{x:e.x+r,y:e.y-r});break;case"left":n.push({x:e.x+r,y:e.y-r},{x:e.x+r,y:e.y+r});break;case"right":n.push({x:e.x-r,y:e.y-r},{x:e.x-r,y:e.y+r});break}return n}function FU(e){const{top:t,right:r,bottom:n,left:s}=e;return[{x:s,y:t},{x:r,y:t},{x:r,y:n},{x:s,y:n}]}function UU(e,t){const{x:r,y:n}=e;let s=!1;for(let o=0,a=t.length-1;o<t.length;a=o++){const l=t[o].x,c=t[o].y,u=t[a].x,d=t[a].y;c>n!=d>n&&r<(u-l)*(n-c)/(d-c)+l&&(s=!s)}return s}function $U(e){const t=e.slice();return t.sort((r,n)=>r.x<n.x?-1:r.x>n.x?1:r.y<n.y?-1:r.y>n.y?1:0),BU(t)}function BU(e){if(e.length<=1)return e.slice();const t=[];for(let n=0;n<e.length;n++){const s=e[n];for(;t.length>=2;){const o=t[t.length-1],a=t[t.length-2];if((o.x-a.x)*(s.y-a.y)>=(o.y-a.y)*(s.x-a.x))t.pop();else break}t.push(s)}t.pop();const r=[];for(let n=e.length-1;n>=0;n--){const s=e[n];for(;r.length>=2;){const o=r[r.length-1],a=r[r.length-2];if((o.x-a.x)*(s.y-a.y)>=(o.y-a.y)*(s.x-a.x))r.pop();else break}r.push(s)}return r.pop(),t.length===1&&r.length===1&&t[0].x===r[0].x&&t[0].y===r[0].y?t:t.concat(r)}var zU=gT,VU=yT,WU=xT,ST=vT;const Ng=zU,no=VU,so=WU,ci=m.forwardRef(({className:e,sideOffset:t=4,...r},n)=>i.jsx(ST,{ref:n,sideOffset:t,className:we("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r}));ci.displayName=ST.displayName;var Wx="Popover",[jT,vH]=Fr(Wx,[Zi]),xu=Zi(),[qU,Xi]=jT(Wx),NT=e=>{const{__scopePopover:t,children:r,open:n,defaultOpen:s,onOpenChange:o,modal:a=!1}=e,l=xu(t),c=m.useRef(null),[u,d]=m.useState(!1),[f=!1,p]=Hn({prop:n,defaultProp:s,onChange:o});return i.jsx(ah,{...l,children:i.jsx(qU,{scope:t,contentId:wn(),triggerRef:c,open:f,onOpenChange:p,onOpenToggle:m.useCallback(()=>p(v=>!v),[p]),hasCustomAnchor:u,onCustomAnchorAdd:m.useCallback(()=>d(!0),[]),onCustomAnchorRemove:m.useCallback(()=>d(!1),[]),modal:a,children:r})})};NT.displayName=Wx;var _T="PopoverAnchor",HU=m.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,s=Xi(_T,r),o=xu(r),{onCustomAnchorAdd:a,onCustomAnchorRemove:l}=s;return m.useEffect(()=>(a(),()=>l()),[a,l]),i.jsx(mu,{...o,...n,ref:t})});HU.displayName=_T;var CT="PopoverTrigger",ET=m.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,s=Xi(CT,r),o=xu(r),a=Ze(t,s.triggerRef),l=i.jsx(Le.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":AT(s.open),...n,ref:a,onClick:xe(e.onClick,s.onOpenToggle)});return s.hasCustomAnchor?l:i.jsx(mu,{asChild:!0,...o,children:l})});ET.displayName=CT;var qx="PopoverPortal",[KU,GU]=jT(qx,{forceMount:void 0}),kT=e=>{const{__scopePopover:t,forceMount:r,children:n,container:s}=e,o=Xi(qx,t);return i.jsx(KU,{scope:t,forceMount:r,children:i.jsx(ln,{present:r||o.open,children:i.jsx(yl,{asChild:!0,container:s,children:n})})})};kT.displayName=qx;var al="PopoverContent",TT=m.forwardRef((e,t)=>{const r=GU(al,e.__scopePopover),{forceMount:n=r.forceMount,...s}=e,o=Xi(al,e.__scopePopover);return i.jsx(ln,{present:n||o.open,children:o.modal?i.jsx(QU,{...s,ref:t}):i.jsx(YU,{...s,ref:t})})});TT.displayName=al;var QU=m.forwardRef((e,t)=>{const r=Xi(al,e.__scopePopover),n=m.useRef(null),s=Ze(t,n),o=m.useRef(!1);return m.useEffect(()=>{const a=n.current;if(a)return fh(a)},[]),i.jsx(pu,{as:ps,allowPinchZoom:!0,children:i.jsx(PT,{...e,ref:s,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:xe(e.onCloseAutoFocus,a=>{var l;a.preventDefault(),o.current||(l=r.triggerRef.current)==null||l.focus()}),onPointerDownOutside:xe(e.onPointerDownOutside,a=>{const l=a.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;o.current=u},{checkForDefaultPrevented:!1}),onFocusOutside:xe(e.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1})})})}),YU=m.forwardRef((e,t)=>{const r=Xi(al,e.__scopePopover),n=m.useRef(!1),s=m.useRef(!1);return i.jsx(PT,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var a,l;(a=e.onCloseAutoFocus)==null||a.call(e,o),o.defaultPrevented||(n.current||(l=r.triggerRef.current)==null||l.focus(),o.preventDefault()),n.current=!1,s.current=!1},onInteractOutside:o=>{var c,u;(c=e.onInteractOutside)==null||c.call(e,o),o.defaultPrevented||(n.current=!0,o.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const a=o.target;((u=r.triggerRef.current)==null?void 0:u.contains(a))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&s.current&&o.preventDefault()}})}),PT=m.forwardRef((e,t)=>{const{__scopePopover:r,trapFocus:n,onOpenAutoFocus:s,onCloseAutoFocus:o,disableOutsidePointerEvents:a,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onInteractOutside:d,...f}=e,p=Xi(al,r),v=xu(r);return nh(),i.jsx(fu,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:s,onUnmountAutoFocus:o,children:i.jsx(Ko,{asChild:!0,disableOutsidePointerEvents:a,onInteractOutside:d,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onDismiss:()=>p.onOpenChange(!1),children:i.jsx(lh,{"data-state":AT(p.open),role:"dialog",id:p.contentId,...v,...f,ref:t,style:{...f.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),RT="PopoverClose",ZU=m.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,s=Xi(RT,r);return i.jsx(Le.button,{type:"button",...n,ref:t,onClick:xe(e.onClick,()=>s.onOpenChange(!1))})});ZU.displayName=RT;var XU="PopoverArrow",JU=m.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,s=xu(r);return i.jsx(ch,{...s,...n,ref:t})});JU.displayName=XU;function AT(e){return e?"open":"closed"}var e$=NT,t$=ET,r$=kT,IT=TT;const DT=e$,MT=t$,Hx=m.forwardRef(({className:e,align:t="center",sideOffset:r=4,...n},s)=>i.jsx(r$,{children:i.jsx(IT,{ref:s,align:t,sideOffset:r,className:we("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})}));Hx.displayName=IT.displayName;const n$=cu("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Ct({className:e,variant:t,...r}){return i.jsx("div",{className:we(n$({variant:t}),e),...r})}function Xo(){const{currentTrack:e,isPlaying:t,queue:r,history:n,togglePlayPause:s,nextTrack:o,previousTrack:a,addToQueue:l,duration:c,currentTime:u,setCurrentTime:d,volume:f,setVolume:p,isMuted:v,toggleMute:j,isShuffling:y,toggleShuffle:S,repeatMode:h,toggleRepeat:g,toggleMinimized:w,isMinimized:_,formatTime:E,audioElement:I}=hx();if(!e||_)return null;const P=c>0?u/c*100:0,M=F=>{if(I&&e){const W=F[0]/100*c;d(W)}};return i.jsx("div",{className:"fixed bottom-0 left-0 w-full bg-background border-t border-primary/20 py-3 px-4 z-50 player-container",children:i.jsx("div",{className:"max-w-7xl mx-auto",children:i.jsxs("div",{className:"flex items-center",children:[i.jsxs("div",{className:"flex items-center mr-4 w-1/4",children:[e.coverUrl?i.jsx("img",{src:e.coverUrl,alt:e.title,className:"w-12 h-12 object-cover rounded-md mr-3 hidden sm:block border border-primary/30 shadow-sm"}):i.jsx("div",{className:"w-12 h-12 rounded-md flex items-center justify-center bg-primary/10 mr-3 hidden sm:block border border-primary/30",children:i.jsx(Nr,{className:"h-6 w-6 text-primary"})}),i.jsxs("div",{className:"truncate",children:[i.jsx("h4",{className:"font-medium text-sm truncate hover:text-primary transition-colors",children:e.title}),i.jsx("p",{className:"text-xs text-muted-foreground hover:text-primary/80 transition-colors truncate",children:e.artistName})]})]}),i.jsxs("div",{className:"flex-1 md:mx-4",children:[i.jsx("div",{className:"flex items-center justify-center space-x-4 mb-1",children:i.jsxs(Ng,{children:[i.jsxs(no,{children:[i.jsx(so,{asChild:!0,children:i.jsx("button",{className:we("text-muted-foreground hover:text-primary focus:outline-none transition-colors",y&&"text-primary"),onClick:S,children:i.jsx(qL,{size:16,className:y?"filter drop-shadow-sm":""})})}),i.jsx(ci,{children:i.jsx("p",{children:y?"Disable shuffle":"Enable shuffle"})})]}),i.jsxs(no,{children:[i.jsx(so,{asChild:!0,children:i.jsx("button",{className:"text-muted-foreground hover:text-primary focus:outline-none transition-colors",onClick:a,children:i.jsx(U2,{size:16})})}),i.jsx(ci,{children:i.jsx("p",{children:n.length>0?"Previous track":"Restart track"})})]}),i.jsx("button",{className:"text-white focus:outline-none bg-primary hover:bg-primary/80 rounded-full w-8 h-8 flex items-center justify-center shadow-sm transition-colors",onClick:s,children:t?i.jsx(cx,{size:14}):i.jsx(Pc,{size:14,className:"ml-0.5"})}),i.jsxs(no,{children:[i.jsx(so,{asChild:!0,children:i.jsx("button",{className:"text-muted-foreground hover:text-primary focus:outline-none transition-colors",onClick:o,children:i.jsx($2,{size:16})})}),i.jsx(ci,{children:i.jsx("p",{children:r.length>0?"Next track":"End playback"})})]}),i.jsxs(no,{children:[i.jsx(so,{asChild:!0,children:i.jsxs("button",{className:we("text-muted-foreground hover:text-primary focus:outline-none transition-colors",h!=="off"&&"text-primary"),onClick:g,children:[i.jsx(zL,{size:16,className:we(h==="one"?"relative":"",h!=="off"?"filter drop-shadow-sm":""),...h==="one"?{"data-number":"1","data-content":"1"}:{}}),h==="one"&&i.jsx("span",{className:"absolute text-[8px] font-bold text-primary",style:{left:"50%",top:"50%",transform:"translate(-50%, -40%)"},children:"1"})]})}),i.jsx(ci,{children:i.jsxs("p",{children:[h==="off"&&"Enable repeat all",h==="all"&&"Enable repeat one",h==="one"&&"Disable repeat"]})})]})]})}),i.jsxs("div",{className:"hidden sm:flex items-center",children:[i.jsx("span",{className:"text-xs text-muted-foreground mr-2 min-w-[40px] text-right",children:E(u)}),i.jsx("div",{className:"flex-1 relative",children:i.jsx(_o,{value:[P],max:100,step:1,className:"cursor-pointer audio-progress-bar themed-slider",onValueChange:M})}),i.jsx("span",{className:"text-xs text-muted-foreground ml-2 min-w-[40px]",children:E(c||0)})]})]}),i.jsx("div",{className:"hidden md:flex items-center space-x-4 w-1/6 justify-end",children:i.jsxs(Ng,{children:[i.jsxs(no,{children:[i.jsx(so,{asChild:!0,children:i.jsx("button",{className:"text-muted-foreground hover:text-primary focus:outline-none transition-colors",onClick:j,children:v?i.jsx(dx,{size:16}):i.jsx(eh,{size:16})})}),i.jsx(ci,{children:i.jsx("p",{children:v?"Unmute":"Mute"})})]}),i.jsx("div",{className:"w-24 relative",children:i.jsx(_o,{value:[f],max:100,step:1,className:"cursor-pointer volume-slider themed-slider",onValueChange:F=>p(F[0])})}),i.jsxs(DT,{children:[i.jsx(MT,{asChild:!0,children:i.jsxs("button",{className:"text-muted-foreground hover:text-primary focus:outline-none relative transition-colors",children:[i.jsx(DL,{size:16}),r.length>0&&i.jsx(Ct,{className:"absolute -top-2 -right-2 h-4 w-4 p-0 flex items-center justify-center text-[10px] bg-primary text-white",children:r.length})]})}),i.jsxs(Hx,{className:"w-80 p-0 border-primary/20",align:"end",children:[i.jsx("div",{className:"p-3 border-b border-primary/10",children:i.jsxs("h4",{className:"font-medium text-primary-foreground",children:["Queue: ",r.length," tracks"]})}),i.jsx("div",{className:"max-h-64 overflow-y-auto",children:r.length===0?i.jsx("div",{className:"p-4 text-center text-sm text-muted-foreground",children:"Your queue is empty"}):i.jsx("div",{className:"p-1",children:r.map((F,W)=>i.jsxs("div",{className:"flex items-center p-2 hover:bg-primary/5 rounded-md transition-colors",children:[F.coverUrl?i.jsx("img",{src:F.coverUrl,alt:F.title,className:"w-8 h-8 rounded-md mr-2 border border-primary/20"}):i.jsx("div",{className:"w-8 h-8 rounded-md bg-primary/10 flex items-center justify-center mr-2 border border-primary/20",children:i.jsx(Nr,{size:12,className:"text-primary"})}),i.jsxs("div",{className:"flex-1 truncate",children:[i.jsx("p",{className:"text-xs font-medium truncate hover:text-primary transition-colors",children:F.title}),i.jsx("p",{className:"text-xs text-muted-foreground hover:text-primary/80 transition-colors truncate",children:F.artistName})]}),i.jsx("div",{className:"text-xs text-muted-foreground",children:E(F.duration||0)})]},`${F.id}-${W}`))})})]})]}),i.jsxs(no,{children:[i.jsx(so,{asChild:!0,children:i.jsx("button",{className:"text-muted-foreground hover:text-primary focus:outline-none transition-colors",onClick:w,children:i.jsx(FL,{size:16})})}),i.jsx(ci,{children:i.jsx("p",{children:"Minimize player"})})]})]})})]})})})}function s$(){const{currentTrack:e,isPlaying:t,togglePlayPause:r,currentTime:n,duration:s,formatTime:o,setCurrentTime:a,volume:l,setVolume:c,isMuted:u,toggleMute:d,nextTrack:f,previousTrack:p,toggleMinimized:v,isMinimized:j}=hx(),[,y]=Nn();if(!e||!j)return null;const S=()=>{v(),y(`/tracks/${e.id}`)},h=w=>{a(w[0])},g=w=>{c(w[0])};return i.jsxs("div",{className:"fixed bottom-0 left-0 right-0 bg-background border-t border-primary/20 z-50 px-4 py-2",children:[i.jsxs("div",{className:"flex items-center justify-between gap-2 max-w-7xl mx-auto",children:[i.jsxs("div",{className:"flex items-center space-x-3 min-w-0 flex-1",children:[e.coverUrl?i.jsx("img",{src:e.coverUrl,alt:e.title,className:"h-10 w-10 rounded-md object-cover border border-primary/30"}):i.jsx("div",{className:"h-10 w-10 rounded-md bg-primary/10 flex items-center justify-center border border-primary/30",children:i.jsx(Nr,{className:"h-5 w-5 text-primary"})}),i.jsxs("div",{className:"min-w-0 flex-1",children:[i.jsx(Oe,{href:`/tracks/${e.id}`,className:"text-sm font-medium truncate block hover:text-primary",children:e.title}),e.artistName&&i.jsx(Oe,{href:`/user/${e.userId}`,className:"text-xs text-muted-foreground truncate block hover:text-primary",children:e.artistName})]})]}),i.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-4",children:[i.jsx("div",{className:"hidden sm:flex items-center space-x-1",children:i.jsx("span",{className:"text-xs w-10 text-right",children:o(n)})}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(te,{variant:"ghost",size:"icon",onClick:p,className:"h-8 w-8 hidden sm:flex","aria-label":"Previous track",children:i.jsx(U2,{size:16})}),i.jsx(te,{variant:"ghost",size:"icon",onClick:r,className:"h-8 w-8","aria-label":t?"Pause":"Play",children:t?i.jsx(cx,{size:16}):i.jsx(Pc,{size:16})}),i.jsx(te,{variant:"ghost",size:"icon",onClick:f,className:"h-8 w-8 hidden sm:flex","aria-label":"Next track",children:i.jsx($2,{size:16})})]}),i.jsx("div",{className:"hidden sm:flex items-center space-x-1",children:i.jsx("span",{className:"text-xs w-10",children:o(s)})}),i.jsx("div",{className:"hidden md:block w-64 lg:w-96",children:i.jsx(_o,{value:[n],min:0,max:s||100,step:.1,onValueChange:h,className:"w-full","aria-label":"Playback progress"})}),i.jsxs("div",{className:"hidden lg:flex items-center space-x-2",children:[i.jsx(te,{variant:"ghost",size:"icon",onClick:d,className:"h-8 w-8","aria-label":u?"Unmute":"Mute",children:u||l===0?i.jsx(dx,{size:16}):i.jsx(eh,{size:16})}),i.jsx(_o,{value:[l],min:0,max:100,step:1,onValueChange:g,className:"w-24","aria-label":"Volume"})]}),i.jsx(te,{variant:"ghost",size:"icon",onClick:S,className:"h-8 w-8","aria-label":"Open full player",children:i.jsx(ML,{size:16})})]})]}),i.jsxs("div",{className:"mt-1 md:hidden",children:[i.jsx(_o,{value:[n],min:0,max:s||100,step:.1,onValueChange:h,className:"w-full","aria-label":"Playback progress"}),i.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[i.jsx("span",{children:o(n)}),i.jsx("span",{children:o(s)})]})]})]})}var i$="Separator",Ew="horizontal",o$=["horizontal","vertical"],OT=m.forwardRef((e,t)=>{const{decorative:r,orientation:n=Ew,...s}=e,o=a$(n)?n:Ew,l=r?{role:"none"}:{"aria-orientation":o==="vertical"?o:void 0,role:"separator"};return i.jsx(Le.div,{"data-orientation":o,...l,...s,ref:t})});OT.displayName=i$;function a$(e){return o$.includes(e)}var LT=OT;const Bi=m.forwardRef(({className:e,orientation:t="horizontal",decorative:r=!0,...n},s)=>i.jsx(LT,{ref:s,decorative:r,orientation:t,className:we("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...n}));Bi.displayName=LT.displayName;function Sl(){const e=[{id:1,username:"dj_vibe",displayName:"DJ Vibe",profileImageUrl:"",isStreaming:!0},{id:2,username:"music_lover",displayName:"Music Lover",profileImageUrl:"",isStreaming:!1},{id:3,username:"beatmaker",displayName:"Beat Maker",profileImageUrl:"",isStreaming:!1}],t=[{id:1,name:"Electronic"},{id:2,name:"Hip Hop"},{id:3,name:"Lo-Fi"},{id:4,name:"House"},{id:5,name:"Indie"}],{data:r,isLoading:n}=pt({queryKey:["/api/channels/followed"],enabled:!1}),{data:s,isLoading:o}=pt({queryKey:["/api/genres"],enabled:!1}),a=r||e,l=s||t;return i.jsxs("aside",{className:"hidden md:flex flex-col w-60 bg-dark-200 fixed h-full border-r border-dark-100 pt-2",children:[i.jsxs("div",{className:"p-3",children:[i.jsx("h2",{className:"font-semibold text-lg mb-4",children:"Navigation"}),i.jsxs("div",{className:"space-y-2 mb-4",children:[i.jsx(Oe,{href:"/",className:"flex items-center space-x-3 p-2 rounded hover:bg-dark-100 transition",children:i.jsx("span",{className:"text-sm font-medium",children:"Home"})}),i.jsx(Oe,{href:"/streams",className:"flex items-center space-x-3 p-2 rounded hover:bg-dark-100 transition",children:i.jsx("span",{className:"text-sm font-medium",children:"Live Streams"})}),i.jsx(Oe,{href:"/dashboard",className:"flex items-center space-x-3 p-2 rounded hover:bg-dark-100 transition",children:i.jsx("span",{className:"text-sm font-medium",children:"Creator Dashboard"})}),i.jsx(Oe,{href:"/library",className:"flex items-center space-x-3 p-2 rounded hover:bg-dark-100 transition",children:i.jsx("span",{className:"text-sm font-medium",children:"Library"})}),i.jsx(Oe,{href:"/posts",className:"flex items-center space-x-3 p-2 rounded hover:bg-dark-100 transition",children:i.jsx("span",{className:"text-sm font-medium",children:"Posts"})}),i.jsx(Oe,{href:"/upload-track",className:"flex items-center space-x-3 p-2 rounded hover:bg-dark-100 transition",children:i.jsx("span",{className:"text-sm font-medium",children:"Upload Track"})}),i.jsx(Oe,{href:"/go-live",className:"flex items-center space-x-3 p-2 rounded hover:bg-dark-100 transition",children:i.jsx("span",{className:"text-sm font-medium",children:"Go Live"})}),i.jsx(Oe,{href:"/settings",className:"flex items-center space-x-3 p-2 rounded hover:bg-dark-100 transition",children:i.jsx("span",{className:"text-sm font-medium",children:"Settings"})})]}),i.jsx("h2",{className:"font-semibold text-lg mb-2 mt-6",children:"Channels"}),i.jsx("div",{className:"space-y-2",children:a.map(c=>i.jsxs(Oe,{href:`/profile/${c.username}`,className:"flex items-center space-x-3 p-2 rounded hover:bg-dark-100 transition",children:[i.jsxs("div",{className:"relative",children:[i.jsxs(ys,{className:"w-9 h-9",children:[c.profileImageUrl?i.jsx(Yi,{src:c.profileImageUrl}):null,i.jsx(Ws,{children:c.displayName.charAt(0)})]}),c.isStreaming&&i.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 w-3 h-3 bg-[#00b074] rounded-full border border-dark-200"})]}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"text-sm font-medium truncate",children:c.displayName}),i.jsx("p",{className:"text-xs text-gray-400 truncate",children:c.isStreaming?"Live":"Offline"})]})]},c.id))})]}),i.jsx(Bi,{className:"my-2 bg-dark-100"}),i.jsxs("div",{className:"p-3",children:[i.jsx("h2",{className:"font-semibold text-lg mb-2",children:"Recommended Genres"}),i.jsx("div",{className:"flex flex-wrap gap-2",children:l.map(c=>i.jsx(Oe,{href:`/genre/${c.name.toLowerCase()}`,className:"px-3 py-1 text-sm bg-dark-100 hover:bg-primary/20 rounded-full transition",children:c.name},c.id))})]})]})}const Re=m.forwardRef(({className:e,...t},r)=>i.jsx("div",{ref:r,className:we("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));Re.displayName="Card";const Ye=m.forwardRef(({className:e,...t},r)=>i.jsx("div",{ref:r,className:we("flex flex-col space-y-1.5 p-6",e),...t}));Ye.displayName="CardHeader";const He=m.forwardRef(({className:e,...t},r)=>i.jsx("h3",{ref:r,className:we("text-2xl font-semibold leading-none tracking-tight",e),...t}));He.displayName="CardTitle";const kt=m.forwardRef(({className:e,...t},r)=>i.jsx("p",{ref:r,className:we("text-sm text-muted-foreground",e),...t}));kt.displayName="CardDescription";const Ae=m.forwardRef(({className:e,...t},r)=>i.jsx("div",{ref:r,className:we("p-6 pt-0",e),...t}));Ae.displayName="CardContent";const nr=m.forwardRef(({className:e,...t},r)=>i.jsx("div",{ref:r,className:we("flex items-center p-6 pt-0",e),...t}));nr.displayName="CardFooter";function Di({stream:e,isOwner:t=!1}){const{toast:r}=pr(),n=Ys(),s=fr({mutationFn:()=>oE(e.id),onSuccess:()=>{n.invalidateQueries({queryKey:["/api/streams/featured"]}),n.invalidateQueries({queryKey:["/api/streams/user"]}),r({title:"Stream deleted",description:"The stream has been successfully deleted"})},onError:c=>{r({title:"Error",description:c instanceof Error?c.message:"Failed to delete stream",variant:"destructive"})}}),o=fr({mutationFn:()=>yx(e.id),onSuccess:()=>{n.invalidateQueries({queryKey:["/api/streams/featured"]}),n.invalidateQueries({queryKey:["/api/streams/user"]}),r({title:"Stream ended",description:"Your live stream has been ended successfully"})},onError:c=>{r({title:"Error",description:c instanceof Error?c.message:"Failed to end stream",variant:"destructive"})}}),a=c=>{c.preventDefault(),c.stopPropagation(),confirm("Are you sure you want to delete this stream?")&&s.mutate()},l=c=>{c.preventDefault(),c.stopPropagation(),confirm("Are you sure you want to end this live stream?")&&o.mutate()};return i.jsxs(Re,{className:"overflow-hidden hover:shadow-md transition-shadow",children:[i.jsx(Ye,{className:"p-0",children:i.jsxs("div",{className:"aspect-video relative bg-primary/10",children:[i.jsx("img",{src:e.thumbnailUrl||`https://source.unsplash.com/random/600x340?music=${e.id}`,alt:e.title,className:"w-full h-full object-cover"}),e.isLive&&i.jsx(Ct,{className:"absolute top-2 left-2 bg-red-500 text-white font-bold",children:"LIVE"}),t&&i.jsx(Ct,{className:"absolute top-2 right-2",variant:"outline",children:"Your Stream"}),i.jsxs("div",{className:"absolute bottom-2 right-2 bg-background/80 text-foreground px-2 py-1 rounded text-sm flex items-center",children:[i.jsx(ds,{className:"h-3 w-3 mr-1"}),e.viewerCount||0]})]})}),i.jsxs(Ae,{className:"p-4",children:[i.jsx(Oe,{href:`/stream/${e.id}`,children:i.jsx("h3",{className:"font-medium text-lg hover:text-primary truncate",children:e.title})}),i.jsx("p",{className:"text-sm text-muted-foreground",children:e.description?i.jsxs(i.Fragment,{children:[e.description.substring(0,100),e.description.length>100?"...":""]}):"No description available"}),i.jsxs("div",{className:"flex justify-between mt-2 items-center",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"h-6 w-6 rounded-full overflow-hidden bg-primary/10",children:i.jsx("img",{src:`https://source.unsplash.com/random/50x50?portrait=${e.userId}`,alt:"Creator",className:"h-full w-full object-cover"})}),i.jsxs("span",{className:"text-sm",children:["Creator ",e.userId]})]}),i.jsxs("div",{className:"flex gap-2",children:[t&&i.jsxs(i.Fragment,{children:[i.jsx(te,{size:"sm",variant:"destructive",onClick:a,disabled:s.isPending,children:i.jsx(ux,{className:"h-4 w-4"})}),e.isLive&&i.jsxs(te,{size:"sm",variant:"secondary",onClick:l,disabled:o.isPending,children:[i.jsx(NL,{className:"h-4 w-4 mr-1"}),"End"]})]}),i.jsx(te,{size:"sm",variant:"outline",asChild:!0,children:i.jsx(Oe,{href:`/stream/${e.id}`,children:e.isLive?"Join Stream":"View Details"})})]})]})]})]})}var FT={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},kw=$e.createContext&&$e.createContext(FT),l$=["attr","size","title"];function c$(e,t){if(e==null)return{};var r=u$(e,t),n,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(s=0;s<o.length;s++)n=o[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function u$(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function lf(){return lf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},lf.apply(this,arguments)}function Tw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function cf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Tw(Object(r),!0).forEach(function(n){d$(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Tw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function d$(e,t,r){return t=f$(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f$(e){var t=h$(e,"string");return typeof t=="symbol"?t:t+""}function h$(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function UT(e){return e&&e.map((t,r)=>$e.createElement(t.tag,cf({key:r},t.attr),UT(t.child)))}function Zs(e){return t=>$e.createElement(m$,lf({attr:cf({},e.attr)},t),UT(e.child))}function m$(e){var t=r=>{var{attr:n,size:s,title:o}=e,a=c$(e,l$),l=s||r.size||"1em",c;return r.className&&(c=r.className),e.className&&(c=(c?c+" ":"")+e.className),$e.createElement("svg",lf({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,n,a,{className:c,style:cf(cf({color:e.color||r.color},r.style),e.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),o&&$e.createElement("title",null,o),e.children)};return kw!==void 0?$e.createElement(kw.Consumer,null,r=>t(r)):t(FT)}function $T(e){return Zs({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.28c-30.8 0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"},child:[]}]})(e)}function p$(e){return Zs({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"},child:[]}]})(e)}function g$(e){return Zs({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M201.5 305.5c-13.8 0-24.9-11.1-24.9-24.6 0-13.8 11.1-24.9 24.9-24.9 13.6 0 24.6 11.1 24.6 24.9 0 13.6-11.1 24.6-24.6 24.6zM504 256c0 137-111 248-248 248S8 393 8 256 119 8 256 8s248 111 248 248zm-132.3-41.2c-9.4 0-17.7 3.9-23.8 10-22.4-15.5-52.6-25.5-86.1-26.6l17.4-78.3 55.4 12.5c0 13.6 11.1 24.6 24.6 24.6 13.8 0 24.9-11.3 24.9-24.9s-11.1-24.9-24.9-24.9c-9.7 0-18 5.8-22.1 13.8l-61.2-13.6c-3-.8-6.1 1.4-6.9 4.4l-19.1 86.4c-33.2 1.4-63.1 11.3-85.5 26.8-6.1-6.4-14.7-10.2-24.1-10.2-34.9 0-46.3 46.9-14.4 62.8-1.1 5-1.7 10.2-1.7 15.5 0 52.6 59.2 95.2 132 95.2 73.1 0 132.3-42.6 132.3-95.2 0-5.3-.6-10.8-1.9-15.8 31.3-16 19.8-62.5-14.9-62.5zM302.8 331c-18.2 18.2-76.1 17.9-93.6 0-2.2-2.2-6.1-2.2-8.3 0-2.5 2.5-2.5 6.4 0 8.6 22.8 22.8 87.3 22.8 110.2 0 2.5-2.2 2.5-6.1 0-8.6-2.2-2.2-6.1-2.2-8.3 0zm7.7-75c-13.6 0-24.6 11.1-24.6 24.9 0 13.6 11.1 24.6 24.6 24.6 13.8 0 24.9-11.1 24.9-24.6 0-13.8-11-24.9-24.9-24.9z"},child:[]}]})(e)}function BT(e){return Zs({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M446.7 98.6l-67.6 318.8c-5.1 22.5-18.4 28.1-37.3 17.5l-103-75.9-49.7 47.8c-5.5 5.5-10.1 10.1-20.7 10.1l7.4-104.9 190.9-172.5c8.3-7.4-1.8-11.5-12.9-4.1L117.8 284 16.2 252.2c-22.1-6.9-22.5-22.1 4.6-32.7L418.2 66.4c18.4-6.9 34.5 4.1 28.5 32.2z"},child:[]}]})(e)}function zT(e){return Zs({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"},child:[]}]})(e)}function VT(e){return Zs({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M380.9 97.1C339 55.1 283.2 32 223.9 32c-122.4 0-222 99.6-222 222 0 39.1 10.2 77.3 29.6 111L0 480l117.7-30.9c32.4 17.7 68.9 27 106.1 27h.1c122.3 0 224.1-99.6 224.1-222 0-59.3-25.2-115-67.1-157zm-157 341.6c-33.2 0-65.7-8.9-94-25.7l-6.7-4-69.8 18.3L72 359.2l-4.4-7c-18.5-29.4-28.2-63.3-28.2-98.2 0-101.7 82.8-184.5 184.6-184.5 49.3 0 95.6 19.2 130.4 54.1 34.8 34.9 56.2 81.2 56.1 130.5 0 101.8-84.9 184.6-186.6 184.6zm101.2-138.2c-5.5-2.8-32.8-16.2-37.9-18-5.1-1.9-8.8-2.8-12.5 2.8-3.7 5.6-14.3 18-17.6 21.8-3.2 3.7-6.5 4.2-12 1.4-32.6-16.3-54-29.1-75.5-66-5.7-9.8 5.7-9.1 16.3-30.3 1.8-3.7.9-6.9-.5-9.7-1.4-2.8-12.5-30.1-17.1-41.2-4.5-10.8-9.1-9.3-12.5-9.5-3.2-.2-6.9-.2-10.6-.2-3.7 0-9.7 1.4-14.8 6.9-5.1 5.6-19.4 19-19.4 46.3 0 27.3 19.9 53.7 22.6 57.4 2.8 3.7 39.1 59.7 94.8 83.8 35.2 15.2 49 16.5 66.6 13.9 10.7-1.6 32.8-13.4 37.4-26.4 4.6-13 4.6-24.1 3.2-26.4-1.3-2.5-5-3.9-10.5-6.6z"},child:[]}]})(e)}function y$(e){return Zs({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"},child:[]}]})(e)}function x$(e){return Zs({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"},child:[]}]})(e)}function v$(e){return Zs({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M352 320c-22.608 0-43.387 7.819-59.79 20.895l-102.486-64.054a96.551 96.551 0 0 0 0-41.683l102.486-64.054C308.613 184.181 329.392 192 352 192c53.019 0 96-42.981 96-96S405.019 0 352 0s-96 42.981-96 96c0 7.158.79 14.13 2.276 20.841L155.79 180.895C139.387 167.819 118.608 160 96 160c-53.019 0-96 42.981-96 96s42.981 96 96 96c22.608 0 43.387-7.819 59.79-20.895l102.486 64.054A96.301 96.301 0 0 0 256 416c0 53.019 42.981 96 96 96s96-42.981 96-96-42.981-96-96-96z"},child:[]}]})(e)}function WT({title:e,description:t="",url:r,type:n,compact:s=!1,className:o}){const{toast:a}=pr(),[,l]=Nn(),[c,u]=m.useState(!1),d=r.startsWith("http")?r:`${window.location.origin}${r}`,f=`Check out this ${n==="track"?"track":n==="stream"?"live stream":"post"} on BeatStream: ${e}`,p=encodeURIComponent(f),v=encodeURIComponent(d),j=_=>{const E=_.match(/\/([^\/]+)\/(\d+)/);return E?E[2]:""},y={facebook:`https://www.facebook.com/sharer/sharer.php?u=${v}&quote=${p}`,twitter:`https://twitter.com/intent/tweet?text=${p}&url=${v}`,linkedin:`https://www.linkedin.com/sharing/share-offsite/?url=${v}`,reddit:`https://www.reddit.com/submit?url=${v}&title=${p}`,whatsapp:`https://wa.me/?text=${p}%20${v}`,telegram:`https://t.me/share/url?url=${v}&text=${p}`},S=_=>{window.open(y[_],"_blank","width=600,height=400")},h=()=>{const E=`/share?id=${j(r)}&type=${n}&title=${encodeURIComponent(e)}&description=${encodeURIComponent(t)}&returnUrl=${encodeURIComponent(r)}`;l(E)},g=async()=>{try{await navigator.clipboard.writeText(d),u(!0),a({title:"Link copied!",description:"The link has been copied to your clipboard.",duration:3e3}),setTimeout(()=>u(!1),3e3)}catch(_){console.error("Failed to copy:",_),a({title:"Failed to copy",description:"Please try again or copy the link manually.",variant:"destructive"})}},w=s?16:20;return i.jsxs(DT,{children:[i.jsx(MT,{asChild:!0,children:i.jsxs(te,{variant:"outline",size:s?"sm":"default",className:we("gap-2",o),children:[i.jsx(cg,{size:w}),!s&&"Share"]})}),i.jsx(Hx,{className:"w-full max-w-[300px] p-2",children:i.jsxs("div",{className:"p-2",children:[i.jsxs("h3",{className:"font-semibold mb-2",children:["Share this ",n]}),i.jsxs("div",{className:"grid grid-cols-4 gap-2 mb-3",children:[i.jsx(te,{variant:"outline",className:"p-2 h-10 aspect-square",onClick:()=>S("facebook"),title:"Share to Facebook",children:i.jsx($T,{size:w,className:"text-blue-600"})}),i.jsx(te,{variant:"outline",className:"p-2 h-10 aspect-square",onClick:()=>S("twitter"),title:"Share to Twitter",children:i.jsx(zT,{size:w,className:"text-sky-500"})}),i.jsx(te,{variant:"outline",className:"p-2 h-10 aspect-square",onClick:()=>S("whatsapp"),title:"Share to WhatsApp",children:i.jsx(VT,{size:w,className:"text-green-500"})}),i.jsx(te,{variant:"outline",className:"p-2 h-10 aspect-square",onClick:()=>S("telegram"),title:"Share to Telegram",children:i.jsx(BT,{size:w,className:"text-blue-500"})})]}),i.jsxs("div",{className:"flex gap-2 mb-3",children:[i.jsxs(te,{variant:"outline",className:"flex-1 h-10 justify-start",onClick:g,title:"Copy link",children:[i.jsx(x$,{size:w,className:we("mr-2",c?"text-green-500":"text-gray-500")}),c?"Copied!":"Copy link"]}),i.jsxs(te,{variant:"outline",className:"flex-1 h-10 justify-start",onClick:h,title:"More sharing options",children:[i.jsx(v$,{size:w,className:"mr-2 text-primary"}),"More options"]})]}),!s&&i.jsx("div",{className:"text-xs text-muted-foreground",children:"Share this content with your friends and followers!"})]})})]})}function w$({contentId:e,contentType:t,initialLikeCount:r=0,size:n="md",className:s="",showCount:o=!0}){const a=Ys(),{toast:l}=pr(),{user:c}=or(),[u,d]=m.useState(r),f={sm:{buttonClass:"h-8 px-2",iconSize:16,fontSize:"text-sm"},md:{buttonClass:"h-9 px-3",iconSize:18,fontSize:"text-base"},lg:{buttonClass:"h-10 px-4",iconSize:20,fontSize:"text-lg"}},{data:p}=pt({queryKey:["/api/likes/check",{userId:c==null?void 0:c.id,contentId:e,contentType:t}],queryFn:async()=>c?(await st("GET",`/api/likes/check?userId=${c.id}&contentId=${e}&contentType=${t}`)).json():{isLiked:!1},enabled:!!c}),{data:v}=pt({queryKey:["/api/likes/count",{contentId:e,contentType:t}],queryFn:async()=>(await st("GET",`/api/likes/count/${t}/${e}`)).json()}),j=fr({mutationFn:async()=>{if(!c)throw new Error("You must be logged in to like content");return await st("POST","/api/likes",{userId:c.id,contentId:e,contentType:t})},onSuccess:()=>{a.invalidateQueries({queryKey:["/api/likes/check"]}),a.invalidateQueries({queryKey:["/api/likes/count"]}),d(w=>w+1)},onError:w=>{l({variant:"destructive",title:"Error",description:w.message||"Failed to like content"})}}),y=fr({mutationFn:async()=>{if(!c)throw new Error("You must be logged in to unlike content");return await st("DELETE","/api/likes",{userId:c.id,contentId:e,contentType:t})},onSuccess:()=>{a.invalidateQueries({queryKey:["/api/likes/check"]}),a.invalidateQueries({queryKey:["/api/likes/count"]}),d(w=>Math.max(0,w-1))},onError:w=>{l({variant:"destructive",title:"Error",description:w.message||"Failed to unlike content"})}});m.useEffect(()=>{(v==null?void 0:v.count)!==void 0&&d(v.count)},[v]);const S=(p==null?void 0:p.isLiked)||!1,h=j.isPending||y.isPending,g=()=>{if(!c){l({title:"Authentication Required",description:"Please log in to like content",variant:"default"});return}S?y.mutate():j.mutate()};return i.jsxs(te,{variant:S?"secondary":"outline",size:"sm",className:we("gap-1 group transition-all",f[n].buttonClass,S&&"bg-primary/10 hover:bg-primary/20 text-primary border-primary/20",s),onClick:g,disabled:h,children:[S?i.jsx(ag,{size:f[n].iconSize,className:"fill-primary text-primary mr-1"}):i.jsx(ag,{size:f[n].iconSize,className:"text-muted-foreground group-hover:text-primary mr-1 transition-colors"}),o&&i.jsx("span",{className:we(f[n].fontSize,S?"text-primary font-medium":"text-muted-foreground"),children:u})]})}var Kx="Dialog",[qT,HT]=Fr(Kx),[b$,Yn]=qT(Kx),KT=e=>{const{__scopeDialog:t,children:r,open:n,defaultOpen:s,onOpenChange:o,modal:a=!0}=e,l=m.useRef(null),c=m.useRef(null),[u=!1,d]=Hn({prop:n,defaultProp:s,onChange:o});return i.jsx(b$,{scope:t,triggerRef:l,contentRef:c,contentId:wn(),titleId:wn(),descriptionId:wn(),open:u,onOpenChange:d,onOpenToggle:m.useCallback(()=>d(f=>!f),[d]),modal:a,children:r})};KT.displayName=Kx;var GT="DialogTrigger",QT=m.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=Yn(GT,r),o=Ze(t,s.triggerRef);return i.jsx(Le.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":Yx(s.open),...n,ref:o,onClick:xe(e.onClick,s.onOpenToggle)})});QT.displayName=GT;var Gx="DialogPortal",[S$,YT]=qT(Gx,{forceMount:void 0}),ZT=e=>{const{__scopeDialog:t,forceMount:r,children:n,container:s}=e,o=Yn(Gx,t);return i.jsx(S$,{scope:t,forceMount:r,children:m.Children.map(n,a=>i.jsx(ln,{present:r||o.open,children:i.jsx(yl,{asChild:!0,container:s,children:a})}))})};ZT.displayName=Gx;var uf="DialogOverlay",XT=m.forwardRef((e,t)=>{const r=YT(uf,e.__scopeDialog),{forceMount:n=r.forceMount,...s}=e,o=Yn(uf,e.__scopeDialog);return o.modal?i.jsx(ln,{present:n||o.open,children:i.jsx(j$,{...s,ref:t})}):null});XT.displayName=uf;var j$=m.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=Yn(uf,r);return i.jsx(pu,{as:ps,allowPinchZoom:!0,shards:[s.contentRef],children:i.jsx(Le.div,{"data-state":Yx(s.open),...n,ref:t,style:{pointerEvents:"auto",...n.style}})})}),Oo="DialogContent",JT=m.forwardRef((e,t)=>{const r=YT(Oo,e.__scopeDialog),{forceMount:n=r.forceMount,...s}=e,o=Yn(Oo,e.__scopeDialog);return i.jsx(ln,{present:n||o.open,children:o.modal?i.jsx(N$,{...s,ref:t}):i.jsx(_$,{...s,ref:t})})});JT.displayName=Oo;var N$=m.forwardRef((e,t)=>{const r=Yn(Oo,e.__scopeDialog),n=m.useRef(null),s=Ze(t,r.contentRef,n);return m.useEffect(()=>{const o=n.current;if(o)return fh(o)},[]),i.jsx(eP,{...e,ref:s,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:xe(e.onCloseAutoFocus,o=>{var a;o.preventDefault(),(a=r.triggerRef.current)==null||a.focus()}),onPointerDownOutside:xe(e.onPointerDownOutside,o=>{const a=o.detail.originalEvent,l=a.button===0&&a.ctrlKey===!0;(a.button===2||l)&&o.preventDefault()}),onFocusOutside:xe(e.onFocusOutside,o=>o.preventDefault())})}),_$=m.forwardRef((e,t)=>{const r=Yn(Oo,e.__scopeDialog),n=m.useRef(!1),s=m.useRef(!1);return i.jsx(eP,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var a,l;(a=e.onCloseAutoFocus)==null||a.call(e,o),o.defaultPrevented||(n.current||(l=r.triggerRef.current)==null||l.focus(),o.preventDefault()),n.current=!1,s.current=!1},onInteractOutside:o=>{var c,u;(c=e.onInteractOutside)==null||c.call(e,o),o.defaultPrevented||(n.current=!0,o.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const a=o.target;((u=r.triggerRef.current)==null?void 0:u.contains(a))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&s.current&&o.preventDefault()}})}),eP=m.forwardRef((e,t)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:s,onCloseAutoFocus:o,...a}=e,l=Yn(Oo,r),c=m.useRef(null),u=Ze(t,c);return nh(),i.jsxs(i.Fragment,{children:[i.jsx(fu,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:s,onUnmountAutoFocus:o,children:i.jsx(Ko,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":Yx(l.open),...a,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),i.jsxs(i.Fragment,{children:[i.jsx(E$,{titleId:l.titleId}),i.jsx(T$,{contentRef:c,descriptionId:l.descriptionId})]})]})}),Qx="DialogTitle",tP=m.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=Yn(Qx,r);return i.jsx(Le.h2,{id:s.titleId,...n,ref:t})});tP.displayName=Qx;var rP="DialogDescription",nP=m.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=Yn(rP,r);return i.jsx(Le.p,{id:s.descriptionId,...n,ref:t})});nP.displayName=rP;var sP="DialogClose",iP=m.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,s=Yn(sP,r);return i.jsx(Le.button,{type:"button",...n,ref:t,onClick:xe(e.onClick,()=>s.onOpenChange(!1))})});iP.displayName=sP;function Yx(e){return e?"open":"closed"}var oP="DialogTitleWarning",[C$,aP]=T3(oP,{contentName:Oo,titleName:Qx,docsSlug:"dialog"}),E$=({titleId:e})=>{const t=aP(oP),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return m.useEffect(()=>{e&&(document.getElementById(e)||console.error(r))},[r,e]),null},k$="DialogDescriptionWarning",T$=({contentRef:e,descriptionId:t})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${aP(k$).contentName}}.`;return m.useEffect(()=>{var o;const s=(o=e.current)==null?void 0:o.getAttribute("aria-describedby");t&&s&&(document.getElementById(t)||console.warn(n))},[n,e,t]),null},lP=KT,P$=QT,cP=ZT,Zx=XT,Xx=JT,Jx=tP,ev=nP,tv=iP,uP="AlertDialog",[R$,wH]=Fr(uP,[HT]),Xs=HT(),dP=e=>{const{__scopeAlertDialog:t,...r}=e,n=Xs(t);return i.jsx(lP,{...n,...r,modal:!0})};dP.displayName=uP;var A$="AlertDialogTrigger",I$=m.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,s=Xs(r);return i.jsx(P$,{...s,...n,ref:t})});I$.displayName=A$;var D$="AlertDialogPortal",fP=e=>{const{__scopeAlertDialog:t,...r}=e,n=Xs(t);return i.jsx(cP,{...n,...r})};fP.displayName=D$;var M$="AlertDialogOverlay",hP=m.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,s=Xs(r);return i.jsx(Zx,{...s,...n,ref:t})});hP.displayName=M$;var Da="AlertDialogContent",[O$,L$]=R$(Da),mP=m.forwardRef((e,t)=>{const{__scopeAlertDialog:r,children:n,...s}=e,o=Xs(r),a=m.useRef(null),l=Ze(t,a),c=m.useRef(null);return i.jsx(C$,{contentName:Da,titleName:pP,docsSlug:"alert-dialog",children:i.jsx(O$,{scope:r,cancelRef:c,children:i.jsxs(Xx,{role:"alertdialog",...o,...s,ref:l,onOpenAutoFocus:xe(s.onOpenAutoFocus,u=>{var d;u.preventDefault(),(d=c.current)==null||d.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[i.jsx(tx,{children:n}),i.jsx(U$,{contentRef:a})]})})})});mP.displayName=Da;var pP="AlertDialogTitle",gP=m.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,s=Xs(r);return i.jsx(Jx,{...s,...n,ref:t})});gP.displayName=pP;var yP="AlertDialogDescription",xP=m.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,s=Xs(r);return i.jsx(ev,{...s,...n,ref:t})});xP.displayName=yP;var F$="AlertDialogAction",vP=m.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,s=Xs(r);return i.jsx(tv,{...s,...n,ref:t})});vP.displayName=F$;var wP="AlertDialogCancel",bP=m.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,{cancelRef:s}=L$(wP,r),o=Xs(r),a=Ze(t,s);return i.jsx(tv,{...o,...n,ref:a})});bP.displayName=wP;var U$=({contentRef:e})=>{const t=`\`${Da}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Da}\` by passing a \`${yP}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Da}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return m.useEffect(()=>{var n;document.getElementById((n=e.current)==null?void 0:n.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},$$=dP,B$=fP,SP=hP,jP=mP,NP=vP,_P=bP,CP=gP,EP=xP;const z$=$$,V$=B$,kP=m.forwardRef(({className:e,...t},r)=>i.jsx(SP,{className:we("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:r}));kP.displayName=SP.displayName;const TP=m.forwardRef(({className:e,...t},r)=>i.jsxs(V$,{children:[i.jsx(kP,{}),i.jsx(jP,{ref:r,className:we("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));TP.displayName=jP.displayName;const PP=({className:e,...t})=>i.jsx("div",{className:we("flex flex-col space-y-2 text-center sm:text-left",e),...t});PP.displayName="AlertDialogHeader";const RP=({className:e,...t})=>i.jsx("div",{className:we("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});RP.displayName="AlertDialogFooter";const AP=m.forwardRef(({className:e,...t},r)=>i.jsx(CP,{ref:r,className:we("text-lg font-semibold",e),...t}));AP.displayName=CP.displayName;const IP=m.forwardRef(({className:e,...t},r)=>i.jsx(EP,{ref:r,className:we("text-sm text-muted-foreground",e),...t}));IP.displayName=EP.displayName;const DP=m.forwardRef(({className:e,...t},r)=>i.jsx(NP,{ref:r,className:we(Ux(),e),...t}));DP.displayName=NP.displayName;const MP=m.forwardRef(({className:e,...t},r)=>i.jsx(_P,{ref:r,className:we(Ux({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));MP.displayName=_P.displayName;function zi({track:e,showBadge:t=!1}){const{currentTrack:r,isPlaying:n,playTrack:s,togglePlayPause:o,addToQueue:a,addTrackAndPlayNext:l}=hx(),c=(r==null?void 0:r.id)===e.id,{toast:u}=pr(),{user:d}=or(),f=Ys(),[p,v]=m.useState(!1),j=(d==null?void 0:d.id)===e.userId,y=E=>{const I=Math.floor(E/60),P=Math.floor(E%60);return`${I}:${P<10?"0":""}${P}`},S=E=>{E.stopPropagation(),c?o():s(e)},h=E=>{E.stopPropagation(),a(e),u({title:"Added to queue",description:`${e.title} by ${e.artistName} added to your queue`,duration:3e3})},g=E=>{E.stopPropagation(),l(e),u({title:"Playing next",description:`${e.title} by ${e.artistName} will play next`,duration:3e3})},w=fr({mutationFn:()=>sE(e.id),onSuccess:()=>{u({title:"Track deleted",description:`"${e.title}" has been deleted successfully.`}),f.invalidateQueries({queryKey:["/api/tracks/recent"]}),f.invalidateQueries({queryKey:[`/api/tracks/user/${d==null?void 0:d.id}`]}),v(!1)},onError:E=>{u({title:"Failed to delete track",description:"There was an error deleting your track. Please try again.",variant:"destructive"}),console.error("Error deleting track:",E)}}),_=e.playCount??0;return e.likeCount,i.jsxs(i.Fragment,{children:[i.jsx("div",{className:we("p-4 rounded-lg group hover:bg-primary/5 transition cursor-pointer border",c?"border-primary card-border-accent bg-primary/5":"border-primary/10"),children:i.jsxs("div",{className:"flex space-x-3",children:[i.jsxs("div",{className:"relative flex-shrink-0",children:[e.coverUrl?i.jsx("img",{src:e.coverUrl,alt:e.title,className:we("w-16 h-16 object-cover rounded-md shadow-md",c?"border-2 border-primary":"border border-primary/20")}):i.jsx("div",{className:we("w-16 h-16 rounded-md flex items-center justify-center shadow-md",c?"bg-primary/20 border-2 border-primary":"bg-primary/5 border border-primary/20"),children:i.jsx(Nr,{className:we("h-8 w-8",c?"text-primary":"text-primary/60")})}),i.jsx("button",{className:"absolute inset-0 flex items-center justify-center bg-black/50 opacity-0 group-hover:opacity-100 transition rounded-md hover:bg-primary/40",onClick:S,children:c&&n?i.jsx(cx,{className:"h-6 w-6 text-white"}):i.jsx(Pc,{className:"h-6 w-6 text-white"})}),t&&i.jsx(Ct,{className:"absolute -top-2 -right-2 px-2 py-1 bg-primary text-white",children:"New"})]}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsxs("div",{children:[i.jsx("h3",{className:we("font-medium line-clamp-1",c?"text-primary":"hover:text-primary transition-colors"),children:e.title}),i.jsx(Oe,{href:`/profile/${e.userId}`,className:"text-xs text-muted-foreground hover:text-primary transition-colors",children:e.artistName||"Unknown artist"}),e.genre&&i.jsx(Ct,{variant:"outline",className:"mt-1 text-xs border-primary/30 hover:bg-primary/5",children:e.genre})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("p",{className:"text-xs text-muted-foreground",children:y(e.duration)}),i.jsx(Ng,{children:i.jsxs(no,{children:[i.jsx(so,{asChild:!0,children:i.jsx("button",{className:"text-muted-foreground hover:text-primary transition-colors",onClick:h,children:i.jsx(IL,{size:16})})}),i.jsx(ci,{children:i.jsx("p",{children:"Add to queue"})})]})}),i.jsxs(Xk,{children:[i.jsx(Jk,{asChild:!0,onClick:E=>E.stopPropagation(),children:i.jsx("button",{className:"text-muted-foreground hover:text-primary transition-colors",children:i.jsx(kL,{size:16})})}),i.jsxs(Fx,{align:"end",children:[i.jsx(Fn,{onClick:g,children:"Play next"}),i.jsx(Fn,{onClick:h,children:"Add to queue"}),i.jsx(Fn,{onClick:E=>E.stopPropagation(),children:"Like track"}),i.jsx(Fn,{onClick:E=>{E.stopPropagation()},children:i.jsx("div",{onClick:E=>E.stopPropagation(),className:"w-full",children:i.jsx(WT,{title:e.title,description:`A track by ${e.artistName}`,url:`/track/${e.id}`,type:"track",compact:!0})})}),j&&i.jsxs(i.Fragment,{children:[i.jsx(of,{}),i.jsxs(Fn,{onClick:E=>{E.stopPropagation(),v(!0)},className:"text-destructive focus:text-destructive",children:[i.jsx(ux,{className:"mr-2 h-4 w-4"}),"Delete track"]})]})]})]})]}),i.jsxs("div",{className:"flex items-center mt-1 space-x-3 text-xs",children:[i.jsxs("span",{className:"flex items-center text-muted-foreground",children:[i.jsx(Pc,{className:we("h-3 w-3 mr-1",c&&"text-primary")}),i.jsx("span",{className:c?"text-primary font-medium":"",children:_.toLocaleString()})]}),i.jsx("span",{className:"flex items-center",children:i.jsx(w$,{contentId:e.id,contentType:"track",initialLikeCount:e.likeCount||0,size:"sm"})})]})]})]}),i.jsx("div",{className:"mt-2",children:i.jsx("div",{className:"h-1.5 bg-primary/10 rounded-full overflow-hidden",children:i.jsx("div",{className:we("h-full bg-gradient-to-r from-primary/70 to-primary transition-all duration-300 audio-progress-bar",c?"w-1/2":"w-0 group-hover:w-full")})})})]})]})}),i.jsx(z$,{open:p,onOpenChange:v,children:i.jsxs(TP,{className:"border-primary/20",children:[i.jsxs(PP,{children:[i.jsx(AP,{className:"text-primary font-semibold",children:"Delete Track"}),i.jsxs(IP,{children:["Are you sure you want to delete ",i.jsxs("span",{className:"text-primary font-medium",children:['"',e.title,'"']}),"? This action cannot be undone and the track will be permanently removed from your library."]})]}),i.jsxs(RP,{children:[i.jsx(MP,{disabled:w.isPending,className:"border-primary/20 hover:bg-primary/5 hover:text-primary",children:"Cancel"}),i.jsx(DP,{onClick:E=>{E.preventDefault(),w.mutate()},disabled:w.isPending,className:"bg-destructive hover:bg-destructive/90",children:w.isPending?i.jsxs("span",{className:"flex items-center",children:[i.jsx("span",{className:"mr-2 h-4 w-4 animate-spin rounded-full border-2 border-background border-r-transparent"}),"Deleting..."]}):"Delete"})]})]})})]})}function OP({creator:e,isFollowing:t=!1}){const[r,n]=m.useState(t),[s,o]=m.useState(!1),a=async()=>{o(!0);try{r?await st("DELETE",`/api/follows/${e.id}`,void 0):await st("POST","/api/follows",{followedId:e.id}),n(!r)}catch(l){console.error("Error toggling follow:",l)}finally{o(!1)}};return i.jsxs("div",{className:"bg-dark-200 rounded-lg overflow-hidden group hover:bg-dark-100 transition text-center p-4",children:[i.jsx(Oe,{href:`/profile/${e.username}`,children:i.jsxs(ys,{className:"w-20 h-20 mx-auto border-2 border-primary",children:[i.jsx(Yi,{src:e.profileImageUrl}),i.jsx(Ws,{children:e.displayName.charAt(0)})]})}),i.jsx(Oe,{href:`/profile/${e.username}`,children:i.jsx("h3",{className:"font-medium mt-2 hover:text-primary",children:e.displayName})}),i.jsx("p",{className:"text-xs text-gray-400 mb-2",children:e.bio}),i.jsx("div",{className:"text-xs text-gray-400",children:i.jsxs("p",{children:[e.followerCount.toLocaleString()," followers"]})}),i.jsx(te,{onClick:a,disabled:s,variant:r?"outline":"default",className:`mt-3 w-full py-1 rounded-full text-sm font-medium ${r?"bg-dark-100 hover:bg-dark-300":"bg-primary hover:bg-primary/80"}`,children:r?"Following":"Follow"})]})}function tt({className:e,...t}){return i.jsx("div",{className:we("animate-pulse rounded-md bg-muted",e),...t})}function Zn(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function Lo(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}const LP=6048e5,W$=864e5;let q$={};function bh(){return q$}function Oc(e,t){var l,c,u,d;const r=bh(),n=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,s=Zn(e),o=s.getDay(),a=(o<n?7:0)+o-n;return s.setDate(s.getDate()-a),s.setHours(0,0,0,0),s}function df(e){return Oc(e,{weekStartsOn:1})}function FP(e){const t=Zn(e),r=t.getFullYear(),n=Lo(e,0);n.setFullYear(r+1,0,4),n.setHours(0,0,0,0);const s=df(n),o=Lo(e,0);o.setFullYear(r,0,4),o.setHours(0,0,0,0);const a=df(o);return t.getTime()>=s.getTime()?r+1:t.getTime()>=a.getTime()?r:r-1}function Pw(e){const t=Zn(e);return t.setHours(0,0,0,0),t}function Rw(e){const t=Zn(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}function H$(e,t){const r=Pw(e),n=Pw(t),s=+r-Rw(r),o=+n-Rw(n);return Math.round((s-o)/W$)}function K$(e){const t=FP(e),r=Lo(e,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),df(r)}function G$(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function Q$(e){if(!G$(e)&&typeof e!="number")return!1;const t=Zn(e);return!isNaN(Number(t))}function Y$(e){const t=Zn(e),r=Lo(e,0);return r.setFullYear(t.getFullYear(),0,1),r.setHours(0,0,0,0),r}const Z$={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},X$=(e,t,r)=>{let n;const s=Z$[e];return typeof s=="string"?n=s:t===1?n=s.one:n=s.other.replace("{{count}}",t.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function Nm(e){return(t={})=>{const r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}const J$={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},eB={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},tB={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},rB={date:Nm({formats:J$,defaultWidth:"full"}),time:Nm({formats:eB,defaultWidth:"full"}),dateTime:Nm({formats:tB,defaultWidth:"full"})},nB={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},sB=(e,t,r,n)=>nB[e];function Ol(e){return(t,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let s;if(n==="formatting"&&e.formattingValues){const a=e.defaultFormattingWidth||e.defaultWidth,l=r!=null&&r.width?String(r.width):a;s=e.formattingValues[l]||e.formattingValues[a]}else{const a=e.defaultWidth,l=r!=null&&r.width?String(r.width):e.defaultWidth;s=e.values[l]||e.values[a]}const o=e.argumentCallback?e.argumentCallback(t):t;return s[o]}}const iB={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},oB={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},aB={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},lB={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},cB={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},uB={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},dB=(e,t)=>{const r=Number(e),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},fB={ordinalNumber:dB,era:Ol({values:iB,defaultWidth:"wide"}),quarter:Ol({values:oB,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Ol({values:aB,defaultWidth:"wide"}),day:Ol({values:lB,defaultWidth:"wide"}),dayPeriod:Ol({values:cB,defaultWidth:"wide",formattingValues:uB,defaultFormattingWidth:"wide"})};function Ll(e){return(t,r={})=>{const n=r.width,s=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],o=t.match(s);if(!o)return null;const a=o[0],l=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?mB(l,f=>f.test(a)):hB(l,f=>f.test(a));let u;u=e.valueCallback?e.valueCallback(c):c,u=r.valueCallback?r.valueCallback(u):u;const d=t.slice(a.length);return{value:u,rest:d}}}function hB(e,t){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r}function mB(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r}function pB(e){return(t,r={})=>{const n=t.match(e.matchPattern);if(!n)return null;const s=n[0],o=t.match(e.parsePattern);if(!o)return null;let a=e.valueCallback?e.valueCallback(o[0]):o[0];a=r.valueCallback?r.valueCallback(a):a;const l=t.slice(s.length);return{value:a,rest:l}}}const gB=/^(\d+)(th|st|nd|rd)?/i,yB=/\d+/i,xB={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},vB={any:[/^b/i,/^(a|c)/i]},wB={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},bB={any:[/1/i,/2/i,/3/i,/4/i]},SB={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},jB={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},NB={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},_B={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},CB={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},EB={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},kB={ordinalNumber:pB({matchPattern:gB,parsePattern:yB,valueCallback:e=>parseInt(e,10)}),era:Ll({matchPatterns:xB,defaultMatchWidth:"wide",parsePatterns:vB,defaultParseWidth:"any"}),quarter:Ll({matchPatterns:wB,defaultMatchWidth:"wide",parsePatterns:bB,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Ll({matchPatterns:SB,defaultMatchWidth:"wide",parsePatterns:jB,defaultParseWidth:"any"}),day:Ll({matchPatterns:NB,defaultMatchWidth:"wide",parsePatterns:_B,defaultParseWidth:"any"}),dayPeriod:Ll({matchPatterns:CB,defaultMatchWidth:"any",parsePatterns:EB,defaultParseWidth:"any"})},TB={code:"en-US",formatDistance:X$,formatLong:rB,formatRelative:sB,localize:fB,match:kB,options:{weekStartsOn:0,firstWeekContainsDate:1}};function PB(e){const t=Zn(e);return H$(t,Y$(t))+1}function RB(e){const t=Zn(e),r=+df(t)-+K$(t);return Math.round(r/LP)+1}function UP(e,t){var d,f,p,v;const r=Zn(e),n=r.getFullYear(),s=bh(),o=(t==null?void 0:t.firstWeekContainsDate)??((f=(d=t==null?void 0:t.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??s.firstWeekContainsDate??((v=(p=s.locale)==null?void 0:p.options)==null?void 0:v.firstWeekContainsDate)??1,a=Lo(e,0);a.setFullYear(n+1,0,o),a.setHours(0,0,0,0);const l=Oc(a,t),c=Lo(e,0);c.setFullYear(n,0,o),c.setHours(0,0,0,0);const u=Oc(c,t);return r.getTime()>=l.getTime()?n+1:r.getTime()>=u.getTime()?n:n-1}function AB(e,t){var l,c,u,d;const r=bh(),n=(t==null?void 0:t.firstWeekContainsDate)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??r.firstWeekContainsDate??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,s=UP(e,t),o=Lo(e,0);return o.setFullYear(s,0,n),o.setHours(0,0,0,0),Oc(o,t)}function IB(e,t){const r=Zn(e),n=+Oc(r,t)-+AB(r,t);return Math.round(n/LP)+1}function jt(e,t){const r=e<0?"-":"",n=Math.abs(e).toString().padStart(t,"0");return r+n}const si={y(e,t){const r=e.getFullYear(),n=r>0?r:1-r;return jt(t==="yy"?n%100:n,t.length)},M(e,t){const r=e.getMonth();return t==="M"?String(r+1):jt(r+1,2)},d(e,t){return jt(e.getDate(),t.length)},a(e,t){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(e,t){return jt(e.getHours()%12||12,t.length)},H(e,t){return jt(e.getHours(),t.length)},m(e,t){return jt(e.getMinutes(),t.length)},s(e,t){return jt(e.getSeconds(),t.length)},S(e,t){const r=t.length,n=e.getMilliseconds(),s=Math.trunc(n*Math.pow(10,r-3));return jt(s,t.length)}},oa={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Aw={G:function(e,t,r){const n=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(e,t,r){if(t==="yo"){const n=e.getFullYear(),s=n>0?n:1-n;return r.ordinalNumber(s,{unit:"year"})}return si.y(e,t)},Y:function(e,t,r,n){const s=UP(e,n),o=s>0?s:1-s;if(t==="YY"){const a=o%100;return jt(a,2)}return t==="Yo"?r.ordinalNumber(o,{unit:"year"}):jt(o,t.length)},R:function(e,t){const r=FP(e);return jt(r,t.length)},u:function(e,t){const r=e.getFullYear();return jt(r,t.length)},Q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return jt(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return jt(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,t,r){const n=e.getMonth();switch(t){case"M":case"MM":return si.M(e,t);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(e,t,r){const n=e.getMonth();switch(t){case"L":return String(n+1);case"LL":return jt(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(e,t,r,n){const s=IB(e,n);return t==="wo"?r.ordinalNumber(s,{unit:"week"}):jt(s,t.length)},I:function(e,t,r){const n=RB(e);return t==="Io"?r.ordinalNumber(n,{unit:"week"}):jt(n,t.length)},d:function(e,t,r){return t==="do"?r.ordinalNumber(e.getDate(),{unit:"date"}):si.d(e,t)},D:function(e,t,r){const n=PB(e);return t==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):jt(n,t.length)},E:function(e,t,r){const n=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(e,t,r,n){const s=e.getDay(),o=(s-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(o);case"ee":return jt(o,2);case"eo":return r.ordinalNumber(o,{unit:"day"});case"eee":return r.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(s,{width:"short",context:"formatting"});case"eeee":default:return r.day(s,{width:"wide",context:"formatting"})}},c:function(e,t,r,n){const s=e.getDay(),o=(s-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(o);case"cc":return jt(o,t.length);case"co":return r.ordinalNumber(o,{unit:"day"});case"ccc":return r.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(s,{width:"narrow",context:"standalone"});case"cccccc":return r.day(s,{width:"short",context:"standalone"});case"cccc":default:return r.day(s,{width:"wide",context:"standalone"})}},i:function(e,t,r){const n=e.getDay(),s=n===0?7:n;switch(t){case"i":return String(s);case"ii":return jt(s,t.length);case"io":return r.ordinalNumber(s,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(e,t,r){const s=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(e,t,r){const n=e.getHours();let s;switch(n===12?s=oa.noon:n===0?s=oa.midnight:s=n/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(e,t,r){const n=e.getHours();let s;switch(n>=17?s=oa.evening:n>=12?s=oa.afternoon:n>=4?s=oa.morning:s=oa.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(e,t,r){if(t==="ho"){let n=e.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return si.h(e,t)},H:function(e,t,r){return t==="Ho"?r.ordinalNumber(e.getHours(),{unit:"hour"}):si.H(e,t)},K:function(e,t,r){const n=e.getHours()%12;return t==="Ko"?r.ordinalNumber(n,{unit:"hour"}):jt(n,t.length)},k:function(e,t,r){let n=e.getHours();return n===0&&(n=24),t==="ko"?r.ordinalNumber(n,{unit:"hour"}):jt(n,t.length)},m:function(e,t,r){return t==="mo"?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):si.m(e,t)},s:function(e,t,r){return t==="so"?r.ordinalNumber(e.getSeconds(),{unit:"second"}):si.s(e,t)},S:function(e,t){return si.S(e,t)},X:function(e,t,r){const n=e.getTimezoneOffset();if(n===0)return"Z";switch(t){case"X":return Dw(n);case"XXXX":case"XX":return io(n);case"XXXXX":case"XXX":default:return io(n,":")}},x:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"x":return Dw(n);case"xxxx":case"xx":return io(n);case"xxxxx":case"xxx":default:return io(n,":")}},O:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+Iw(n,":");case"OOOO":default:return"GMT"+io(n,":")}},z:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+Iw(n,":");case"zzzz":default:return"GMT"+io(n,":")}},t:function(e,t,r){const n=Math.trunc(e.getTime()/1e3);return jt(n,t.length)},T:function(e,t,r){const n=e.getTime();return jt(n,t.length)}};function Iw(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),s=Math.trunc(n/60),o=n%60;return o===0?r+String(s):r+String(s)+t+jt(o,2)}function Dw(e,t){return e%60===0?(e>0?"-":"+")+jt(Math.abs(e)/60,2):io(e,t)}function io(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),s=jt(Math.trunc(n/60),2),o=jt(n%60,2);return r+s+t+o}const Mw=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},$P=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},DB=(e,t)=>{const r=e.match(/(P+)(p+)?/)||[],n=r[1],s=r[2];if(!s)return Mw(e,t);let o;switch(n){case"P":o=t.dateTime({width:"short"});break;case"PP":o=t.dateTime({width:"medium"});break;case"PPP":o=t.dateTime({width:"long"});break;case"PPPP":default:o=t.dateTime({width:"full"});break}return o.replace("{{date}}",Mw(n,t)).replace("{{time}}",$P(s,t))},MB={p:$P,P:DB},OB=/^D+$/,LB=/^Y+$/,FB=["D","DD","YY","YYYY"];function UB(e){return OB.test(e)}function $B(e){return LB.test(e)}function BB(e,t,r){const n=zB(e,t,r);if(console.warn(n),FB.includes(e))throw new RangeError(n)}function zB(e,t,r){const n=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const VB=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,WB=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,qB=/^'([^]*?)'?$/,HB=/''/g,KB=/[a-zA-Z]/;function GB(e,t,r){var d,f,p,v;const n=bh(),s=n.locale??TB,o=n.firstWeekContainsDate??((f=(d=n.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??1,a=n.weekStartsOn??((v=(p=n.locale)==null?void 0:p.options)==null?void 0:v.weekStartsOn)??0,l=Zn(e);if(!Q$(l))throw new RangeError("Invalid time value");let c=t.match(WB).map(j=>{const y=j[0];if(y==="p"||y==="P"){const S=MB[y];return S(j,s.formatLong)}return j}).join("").match(VB).map(j=>{if(j==="''")return{isToken:!1,value:"'"};const y=j[0];if(y==="'")return{isToken:!1,value:QB(j)};if(Aw[y])return{isToken:!0,value:j};if(y.match(KB))throw new RangeError("Format string contains an unescaped latin alphabet character `"+y+"`");return{isToken:!1,value:j}});s.localize.preprocessor&&(c=s.localize.preprocessor(l,c));const u={firstWeekContainsDate:o,weekStartsOn:a,locale:s};return c.map(j=>{if(!j.isToken)return j.value;const y=j.value;($B(y)||UB(y))&&BB(y,t,String(e));const S=Aw[y[0]];return S(l,y,s.localize,u)}).join("")}function QB(e){const t=e.match(qB);return t?t[1].replace(HB,"'"):e}function lc({post:e}){var r,n,s,o,a,l;const t=e.createdAt?GB(new Date(e.createdAt),"MMM d, yyyy"):"";return i.jsxs(Re,{className:"w-full mb-4 overflow-hidden",children:[i.jsxs(Ye,{className:"pb-2",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs(ys,{children:[i.jsx(Yi,{src:((r=e.user)==null?void 0:r.profileImageUrl)||"",alt:((n=e.user)==null?void 0:n.displayName)||"User"}),i.jsx(Ws,{children:((o=(s=e.user)==null?void 0:s.displayName)==null?void 0:o.charAt(0))||"U"})]}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:((a=e.user)==null?void 0:a.displayName)||"User"}),i.jsx("div",{className:"text-sm text-muted-foreground",children:t})]})]}),i.jsx(He,{className:"mt-2 text-xl",children:e.title})]}),i.jsxs(Ae,{className:"pb-2",children:[i.jsx("div",{className:"text-base text-card-foreground mb-4",children:e.content}),e.postType==="image"&&e.imageUrl&&i.jsx("div",{className:"relative w-full h-64 overflow-hidden rounded-md",children:i.jsx("img",{src:e.imageUrl,alt:e.title,className:"object-cover w-full h-full"})}),e.tags&&e.tags.length>0&&i.jsx("div",{className:"flex flex-wrap gap-2 mt-4",children:e.tags.map((c,u)=>i.jsx(Ct,{variant:"secondary",className:"text-xs",children:c},u))})]}),i.jsx(nr,{className:"pt-2 border-t",children:i.jsxs("div",{className:"flex items-center justify-between w-full",children:[i.jsxs("div",{className:"flex items-center gap-6 text-muted-foreground",children:[i.jsxs("button",{className:"flex items-center gap-1.5 hover:text-primary transition-colors",children:[i.jsx(ag,{size:18}),i.jsx("span",{children:e.likeCount})]}),i.jsxs("button",{className:"flex items-center gap-1.5 hover:text-primary transition-colors",children:[i.jsx(OL,{size:18}),i.jsx("span",{children:e.commentCount})]})]}),i.jsx(WT,{title:e.title,description:((l=e.content)==null?void 0:l.substring(0,100))||"",url:`/post/${e.id}`,type:"post",compact:!0})]})})]})}function YB(){const{user:e}=or(),{data:t,isLoading:r}=pt({queryKey:["/api/streams/featured"],queryFn:rh}),{data:n,isLoading:s}=pt({queryKey:["/api/tracks/recent"],queryFn:uu}),{data:o,isLoading:a}=pt({queryKey:["/api/creators/recommended"],queryFn:xx}),{data:l,isLoading:c}=pt({queryKey:["/api/posts/user",e==null?void 0:e.id],queryFn:async()=>{if(!e)return[];const f=await fetch(`/api/posts/user/${e.id}`);if(!f.ok)throw new Error("Failed to fetch posts");return f.json()},enabled:!!e}),{data:u,isLoading:d}=pt({queryKey:["/api/tracks/user",e==null?void 0:e.id],queryFn:async()=>{if(!e)return[];const f=await fetch(`/api/tracks/user/${e.id}`);if(!f.ok)throw new Error("Failed to fetch tracks");return f.json()},enabled:!!e});return i.jsxs("div",{className:"flex flex-col min-h-screen bg-dark-300 text-white",children:[i.jsx(Yo,{}),i.jsxs("main",{className:"flex flex-1 pt-14 md:pt-16",children:[i.jsx(Sl,{}),i.jsx("div",{className:"flex-1 md:ml-60 pb-20 md:pb-24",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-5",children:[e&&i.jsxs("section",{className:"mb-10 bg-dark-200 rounded-lg p-6 border-l-4 border-primary",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-primary",children:"Your Creative Space"}),i.jsxs("div",{className:"flex flex-wrap gap-2",children:[i.jsx(Oe,{href:"/upload-track",children:i.jsxs(te,{variant:"outline",size:"sm",className:"flex items-center gap-2 border-primary text-primary hover:bg-primary/10",children:[i.jsx(Nr,{size:16,className:"themed-icon"}),i.jsx("span",{children:"Upload Track"})]})}),i.jsx(Oe,{href:"/go-live",children:i.jsxs(te,{variant:"outline",size:"sm",className:"flex items-center gap-2 border-primary text-primary hover:bg-primary/10",children:[i.jsx(us,{size:16,className:"themed-icon"}),i.jsx("span",{children:"Go Live"})]})}),i.jsx(Oe,{href:"/posts/new",children:i.jsxs(te,{variant:"outline",size:"sm",className:"flex items-center gap-2 border-primary text-primary hover:bg-primary/10",children:[i.jsx(UL,{size:16,className:"themed-icon"}),i.jsx("span",{children:"Create Post"})]})})]})]}),u&&u.length>0&&i.jsxs("div",{className:"mb-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-3 text-primary",children:i.jsx("span",{className:"border-b-2 border-primary pb-1",children:"Your Tracks"})}),i.jsx("div",{className:"space-y-3",children:d?i.jsx(tt,{className:"h-20 w-full"}):u.map(f=>i.jsx(zi,{track:f,showBadge:!0},f.id))})]}),l&&l.length>0&&i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold mb-3 text-primary",children:i.jsx("span",{className:"border-b-2 border-primary pb-1",children:"Your Posts"})}),i.jsx("div",{className:"space-y-4",children:c?i.jsx(tt,{className:"h-32 w-full"}):l.map(f=>i.jsx(lc,{post:{...f,user:{displayName:e.displayName,profileImageUrl:e.profileImageUrl}}},f.id))})]}),(!u||u.length===0)&&(!l||l.length===0)&&i.jsxs("div",{className:"text-center py-10",children:[i.jsx("h3",{className:"text-xl font-medium mb-2 text-primary",children:"Share your music with the world"}),i.jsx("p",{className:"text-gray-400 mb-4",children:"Upload tracks, go live, or create posts to get started"}),i.jsx("div",{className:"flex justify-center space-x-3",children:i.jsx(Oe,{href:"/upload-track",children:i.jsxs(te,{className:"flex items-center gap-2 bg-primary hover:bg-primary/80",children:[i.jsx(Nr,{size:16}),i.jsx("span",{children:"Upload Your First Track"})]})})})]})]}),i.jsxs("section",{className:"mb-10",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h2",{className:"text-xl font-bold border-l-4 border-primary pl-3",children:"Featured Live Streams"}),i.jsx(Oe,{href:"/streams",className:"text-sm text-primary hover:underline hover-effect",children:"See All"})]}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:r?Array(3).fill(0).map((f,p)=>i.jsxs("div",{className:"bg-dark-200 rounded-lg overflow-hidden",children:[i.jsx(tt,{className:"w-full h-40"}),i.jsxs("div",{className:"p-3 flex space-x-2",children:[i.jsx(tt,{className:"h-10 w-10 rounded-full"}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(tt,{className:"h-4 w-32"}),i.jsx(tt,{className:"h-3 w-24"}),i.jsxs("div",{className:"flex space-x-2",children:[i.jsx(tt,{className:"h-3 w-12"}),i.jsx(tt,{className:"h-3 w-16"})]})]})]})]},p)):t&&t.length>0?t.map(f=>i.jsx(Di,{stream:f},f.id)):i.jsxs("div",{className:"col-span-1 sm:col-span-2 lg:col-span-3 text-center py-10 bg-dark-200 rounded-lg",children:[i.jsx("h3",{className:"text-lg font-medium mb-2",children:"No live streams right now"}),i.jsx("p",{className:"text-gray-400",children:"Check back later or start streaming yourself"})]})})]}),i.jsxs("section",{className:"mb-10",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h2",{className:"text-xl font-bold border-l-4 border-primary pl-3",children:"Recent Uploads"}),i.jsx(Oe,{href:"/tracks",className:"text-sm text-primary hover:underline hover-effect",children:"See All"})]}),i.jsx("div",{className:"space-y-3",children:s?Array(4).fill(0).map((f,p)=>i.jsx("div",{className:"bg-dark-200 p-3 rounded-lg",children:i.jsxs("div",{className:"flex space-x-3",children:[i.jsx(tt,{className:"w-16 h-16 rounded"}),i.jsxs("div",{className:"flex-1 space-y-2",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx(tt,{className:"h-4 w-32"}),i.jsx(tt,{className:"h-3 w-24"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(tt,{className:"h-3 w-8"}),i.jsxs("div",{className:"flex space-x-3",children:[i.jsx(tt,{className:"h-3 w-10"}),i.jsx(tt,{className:"h-3 w-10"})]})]})]}),i.jsx(tt,{className:"h-1.5 w-full rounded-full"})]})]})},p)):n&&n.length>0?n.map(f=>i.jsx(zi,{track:f},f.id)):i.jsxs("div",{className:"text-center py-10 bg-dark-200 rounded-lg border border-dark-100",children:[i.jsx("h3",{className:"text-lg font-medium mb-2",children:"No tracks uploaded yet"}),i.jsx("p",{className:"text-gray-400 mb-4",children:"Be the first to share your music"}),i.jsx(Oe,{href:"/upload-track",children:i.jsx(te,{className:"bg-primary hover:bg-primary/80",children:"Upload Track"})})]})})]}),i.jsxs("section",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h2",{className:"text-xl font-bold border-l-4 border-primary pl-3",children:"Discover Creators"}),i.jsx(Oe,{href:"/discover",className:"text-sm text-primary hover:underline hover-effect",children:"See All"})]}),i.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4",children:a?Array(5).fill(0).map((f,p)=>i.jsxs("div",{className:"bg-dark-200 rounded-lg overflow-hidden p-4 text-center",children:[i.jsx(tt,{className:"h-20 w-20 rounded-full mx-auto"}),i.jsx(tt,{className:"h-4 w-24 mx-auto mt-2"}),i.jsx(tt,{className:"h-3 w-16 mx-auto mt-1"}),i.jsx(tt,{className:"h-3 w-20 mx-auto mt-2"}),i.jsx(tt,{className:"h-8 w-full rounded-full mt-3"})]},p)):o&&o.length>0?o.map(f=>i.jsx(OP,{creator:f,isFollowing:!1},f.id)):i.jsxs("div",{className:"col-span-2 sm:col-span-3 md:col-span-4 lg:col-span-5 text-center py-10 bg-dark-200 rounded-lg",children:[i.jsx("h3",{className:"text-lg font-medium mb-2",children:"No recommended creators yet"}),i.jsx("p",{className:"text-gray-400",children:"Check back soon for personalized recommendations"})]})})]})]})})]}),i.jsx(Xo,{}),i.jsx(Zo,{})]})}const _m=768;function ZB(){const[e,t]=m.useState(typeof window<"u"?window.matchMedia(`(max-width: ${_m-1}px)`).matches:!1);return m.useEffect(()=>{const r=window.matchMedia(`(max-width: ${_m-1}px)`),n=()=>{t(window.innerWidth<_m)};return r.addEventListener("change",n),()=>r.removeEventListener("change",n)},[]),e}function XB({audioLevel:e,color:t}){const{primaryColor:r,highContrastMode:n}=hE(),s=m.useRef(null),o=ZB();return m.useEffect(()=>{const a=s.current;if(!a)return;const l=a.getContext("2d");if(!l)return;l.clearRect(0,0,a.width,a.height);const c=Math.min(Math.max((e+60)/60,0),1),u=o?12:20,d=a.width/(u*2),f=a.height;let p=t||r||"#8B5CF6";n&&(p="#FFFF00",l.strokeStyle="#FFFFFF",l.lineWidth=1),l.fillStyle=p;for(let v=0;v<u;v++){const j=n?.3:.5,y=f*c*(.5+Math.random()*j);l.fillRect(v*d*2,f-y,d,y),n&&l.strokeRect(v*d*2,f-y,d,y),l.fillRect(a.width-v*d*2-d,f-y,d,y),n&&l.strokeRect(a.width-v*d*2-d,f-y,d,y)}},[e,t,o,r,n]),i.jsx("div",{className:`rounded-md ${n?"border border-white p-1":""}`,children:i.jsx("canvas",{ref:s,width:300,height:o?40:50,className:"w-full h-full rounded-md","aria-label":"Audio visualization showing audio levels",role:"img"})})}const JB="modulepreload",e9=function(e){return"/"+e},Ow={},BP=function(t,r,n){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(r.map(c=>{if(c=e9(c),c in Ow)return;Ow[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":JB,u||(f.as="script"),f.crossOrigin="",f.href=c,l&&f.setAttribute("nonce",l),document.head.appendChild(f),u)return new Promise((p,v)=>{f.addEventListener("load",p),f.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${c}`)))})}))}function o(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return s.then(a=>{for(const l of a||[])l.status==="rejected"&&o(l.reason);return t().catch(o)})};var _g={exports:{}},Cm,Lw;function t9(){if(Lw)return Cm;Lw=1;var e=1e3,t=e*60,r=t*60,n=r*24,s=n*7,o=n*365.25;Cm=function(d,f){f=f||{};var p=typeof d;if(p==="string"&&d.length>0)return a(d);if(p==="number"&&isFinite(d))return f.long?c(d):l(d);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(d))};function a(d){if(d=String(d),!(d.length>100)){var f=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(d);if(f){var p=parseFloat(f[1]),v=(f[2]||"ms").toLowerCase();switch(v){case"years":case"year":case"yrs":case"yr":case"y":return p*o;case"weeks":case"week":case"w":return p*s;case"days":case"day":case"d":return p*n;case"hours":case"hour":case"hrs":case"hr":case"h":return p*r;case"minutes":case"minute":case"mins":case"min":case"m":return p*t;case"seconds":case"second":case"secs":case"sec":case"s":return p*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return p;default:return}}}}function l(d){var f=Math.abs(d);return f>=n?Math.round(d/n)+"d":f>=r?Math.round(d/r)+"h":f>=t?Math.round(d/t)+"m":f>=e?Math.round(d/e)+"s":d+"ms"}function c(d){var f=Math.abs(d);return f>=n?u(d,f,n,"day"):f>=r?u(d,f,r,"hour"):f>=t?u(d,f,t,"minute"):f>=e?u(d,f,e,"second"):d+" ms"}function u(d,f,p,v){var j=f>=p*1.5;return Math.round(d/p)+" "+v+(j?"s":"")}return Cm}function r9(e){r.debug=r,r.default=r,r.coerce=c,r.disable=a,r.enable=s,r.enabled=l,r.humanize=t9(),r.destroy=u,Object.keys(e).forEach(d=>{r[d]=e[d]}),r.names=[],r.skips=[],r.formatters={};function t(d){let f=0;for(let p=0;p<d.length;p++)f=(f<<5)-f+d.charCodeAt(p),f|=0;return r.colors[Math.abs(f)%r.colors.length]}r.selectColor=t;function r(d){let f,p=null,v,j;function y(...S){if(!y.enabled)return;const h=y,g=Number(new Date),w=g-(f||g);h.diff=w,h.prev=f,h.curr=g,f=g,S[0]=r.coerce(S[0]),typeof S[0]!="string"&&S.unshift("%O");let _=0;S[0]=S[0].replace(/%([a-zA-Z%])/g,(I,P)=>{if(I==="%%")return"%";_++;const M=r.formatters[P];if(typeof M=="function"){const F=S[_];I=M.call(h,F),S.splice(_,1),_--}return I}),r.formatArgs.call(h,S),(h.log||r.log).apply(h,S)}return y.namespace=d,y.useColors=r.useColors(),y.color=r.selectColor(d),y.extend=n,y.destroy=r.destroy,Object.defineProperty(y,"enabled",{enumerable:!0,configurable:!1,get:()=>p!==null?p:(v!==r.namespaces&&(v=r.namespaces,j=r.enabled(d)),j),set:S=>{p=S}}),typeof r.init=="function"&&r.init(y),y}function n(d,f){const p=r(this.namespace+(typeof f>"u"?":":f)+d);return p.log=this.log,p}function s(d){r.save(d),r.namespaces=d,r.names=[],r.skips=[];const f=(typeof d=="string"?d:"").trim().replace(" ",",").split(",").filter(Boolean);for(const p of f)p[0]==="-"?r.skips.push(p.slice(1)):r.names.push(p)}function o(d,f){let p=0,v=0,j=-1,y=0;for(;p<d.length;)if(v<f.length&&(f[v]===d[p]||f[v]==="*"))f[v]==="*"?(j=v,y=p,v++):(p++,v++);else if(j!==-1)v=j+1,y++,p=y;else return!1;for(;v<f.length&&f[v]==="*";)v++;return v===f.length}function a(){const d=[...r.names,...r.skips.map(f=>"-"+f)].join(",");return r.enable(""),d}function l(d){for(const f of r.skips)if(o(d,f))return!1;for(const f of r.names)if(o(d,f))return!0;return!1}function c(d){return d instanceof Error?d.stack||d.message:d}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}var n9=r9;(function(e,t){var r={};t.formatArgs=s,t.save=o,t.load=a,t.useColors=n,t.storage=l(),t.destroy=(()=>{let u=!1;return()=>{u||(u=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function n(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let u;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(u=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(u[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function s(u){if(u[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+u[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const d="color: "+this.color;u.splice(1,0,d,"color: inherit");let f=0,p=0;u[0].replace(/%[a-zA-Z%]/g,v=>{v!=="%%"&&(f++,v==="%c"&&(p=f))}),u.splice(p,0,d)}t.log=console.debug||console.log||(()=>{});function o(u){try{u?t.storage.setItem("debug",u):t.storage.removeItem("debug")}catch{}}function a(){let u;try{u=t.storage.getItem("debug")}catch{}return!u&&typeof process<"u"&&"env"in process&&(u=r.DEBUG),u}function l(){try{return localStorage}catch{}}e.exports=n9(t);const{formatters:c}=e.exports;c.j=function(u){try{return JSON.stringify(u)}catch(d){return"[UnexpectedJSONParseError]: "+d.message}}})(_g,_g.exports);var s9=_g.exports,i9=function(){if(typeof globalThis>"u")return null;var t={RTCPeerConnection:globalThis.RTCPeerConnection||globalThis.mozRTCPeerConnection||globalThis.webkitRTCPeerConnection,RTCSessionDescription:globalThis.RTCSessionDescription||globalThis.mozRTCSessionDescription||globalThis.webkitRTCSessionDescription,RTCIceCandidate:globalThis.RTCIceCandidate||globalThis.mozRTCIceCandidate||globalThis.webkitRTCIceCandidate};return t.RTCPeerConnection?t:null},Cg={exports:{}},Eg={exports:{}},Jo={},Sh={};Sh.byteLength=l9;Sh.toByteArray=u9;Sh.fromByteArray=h9;var os=[],dn=[],o9=typeof Uint8Array<"u"?Uint8Array:Array,Em="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var aa=0,a9=Em.length;aa<a9;++aa)os[aa]=Em[aa],dn[Em.charCodeAt(aa)]=aa;dn[45]=62;dn[95]=63;function zP(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");r===-1&&(r=t);var n=r===t?0:4-r%4;return[r,n]}function l9(e){var t=zP(e),r=t[0],n=t[1];return(r+n)*3/4-n}function c9(e,t,r){return(t+r)*3/4-r}function u9(e){var t,r=zP(e),n=r[0],s=r[1],o=new o9(c9(e,n,s)),a=0,l=s>0?n-4:n,c;for(c=0;c<l;c+=4)t=dn[e.charCodeAt(c)]<<18|dn[e.charCodeAt(c+1)]<<12|dn[e.charCodeAt(c+2)]<<6|dn[e.charCodeAt(c+3)],o[a++]=t>>16&255,o[a++]=t>>8&255,o[a++]=t&255;return s===2&&(t=dn[e.charCodeAt(c)]<<2|dn[e.charCodeAt(c+1)]>>4,o[a++]=t&255),s===1&&(t=dn[e.charCodeAt(c)]<<10|dn[e.charCodeAt(c+1)]<<4|dn[e.charCodeAt(c+2)]>>2,o[a++]=t>>8&255,o[a++]=t&255),o}function d9(e){return os[e>>18&63]+os[e>>12&63]+os[e>>6&63]+os[e&63]}function f9(e,t,r){for(var n,s=[],o=t;o<r;o+=3)n=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(e[o+2]&255),s.push(d9(n));return s.join("")}function h9(e){for(var t,r=e.length,n=r%3,s=[],o=16383,a=0,l=r-n;a<l;a+=o)s.push(f9(e,a,a+o>l?l:a+o));return n===1?(t=e[r-1],s.push(os[t>>2]+os[t<<4&63]+"==")):n===2&&(t=(e[r-2]<<8)+e[r-1],s.push(os[t>>10]+os[t>>4&63]+os[t<<2&63]+"=")),s.join("")}var rv={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */rv.read=function(e,t,r,n,s){var o,a,l=s*8-n-1,c=(1<<l)-1,u=c>>1,d=-7,f=r?s-1:0,p=r?-1:1,v=e[t+f];for(f+=p,o=v&(1<<-d)-1,v>>=-d,d+=l;d>0;o=o*256+e[t+f],f+=p,d-=8);for(a=o&(1<<-d)-1,o>>=-d,d+=n;d>0;a=a*256+e[t+f],f+=p,d-=8);if(o===0)o=1-u;else{if(o===c)return a?NaN:(v?-1:1)*(1/0);a=a+Math.pow(2,n),o=o-u}return(v?-1:1)*a*Math.pow(2,o-n)};rv.write=function(e,t,r,n,s,o){var a,l,c,u=o*8-s-1,d=(1<<u)-1,f=d>>1,p=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,v=n?0:o-1,j=n?1:-1,y=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(l=isNaN(t)?1:0,a=d):(a=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-a))<1&&(a--,c*=2),a+f>=1?t+=p/c:t+=p*Math.pow(2,1-f),t*c>=2&&(a++,c/=2),a+f>=d?(l=0,a=d):a+f>=1?(l=(t*c-1)*Math.pow(2,s),a=a+f):(l=t*Math.pow(2,f-1)*Math.pow(2,s),a=0));s>=8;e[r+v]=l&255,v+=j,l/=256,s-=8);for(a=a<<s|l,u+=s;u>0;e[r+v]=a&255,v+=j,a/=256,u-=8);e[r+v-j]|=y*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(e){const t=Sh,r=rv,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=l,e.SlowBuffer=g,e.INSPECT_MAX_BYTES=50;const s=2147483647;e.kMaxLength=s,l.TYPED_ARRAY_SUPPORT=o(),!l.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function o(){try{const N=new Uint8Array(1),x={foo:function(){return 42}};return Object.setPrototypeOf(x,Uint8Array.prototype),Object.setPrototypeOf(N,x),N.foo()===42}catch{return!1}}Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}});function a(N){if(N>s)throw new RangeError('The value "'+N+'" is invalid for option "size"');const x=new Uint8Array(N);return Object.setPrototypeOf(x,l.prototype),x}function l(N,x,b){if(typeof N=="number"){if(typeof x=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return f(N)}return c(N,x,b)}l.poolSize=8192;function c(N,x,b){if(typeof N=="string")return p(N,x);if(ArrayBuffer.isView(N))return j(N);if(N==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof N);if(A(N,ArrayBuffer)||N&&A(N.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(A(N,SharedArrayBuffer)||N&&A(N.buffer,SharedArrayBuffer)))return y(N,x,b);if(typeof N=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const T=N.valueOf&&N.valueOf();if(T!=null&&T!==N)return l.from(T,x,b);const L=S(N);if(L)return L;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof N[Symbol.toPrimitive]=="function")return l.from(N[Symbol.toPrimitive]("string"),x,b);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof N)}l.from=function(N,x,b){return c(N,x,b)},Object.setPrototypeOf(l.prototype,Uint8Array.prototype),Object.setPrototypeOf(l,Uint8Array);function u(N){if(typeof N!="number")throw new TypeError('"size" argument must be of type number');if(N<0)throw new RangeError('The value "'+N+'" is invalid for option "size"')}function d(N,x,b){return u(N),N<=0?a(N):x!==void 0?typeof b=="string"?a(N).fill(x,b):a(N).fill(x):a(N)}l.alloc=function(N,x,b){return d(N,x,b)};function f(N){return u(N),a(N<0?0:h(N)|0)}l.allocUnsafe=function(N){return f(N)},l.allocUnsafeSlow=function(N){return f(N)};function p(N,x){if((typeof x!="string"||x==="")&&(x="utf8"),!l.isEncoding(x))throw new TypeError("Unknown encoding: "+x);const b=w(N,x)|0;let T=a(b);const L=T.write(N,x);return L!==b&&(T=T.slice(0,L)),T}function v(N){const x=N.length<0?0:h(N.length)|0,b=a(x);for(let T=0;T<x;T+=1)b[T]=N[T]&255;return b}function j(N){if(A(N,Uint8Array)){const x=new Uint8Array(N);return y(x.buffer,x.byteOffset,x.byteLength)}return v(N)}function y(N,x,b){if(x<0||N.byteLength<x)throw new RangeError('"offset" is outside of buffer bounds');if(N.byteLength<x+(b||0))throw new RangeError('"length" is outside of buffer bounds');let T;return x===void 0&&b===void 0?T=new Uint8Array(N):b===void 0?T=new Uint8Array(N,x):T=new Uint8Array(N,x,b),Object.setPrototypeOf(T,l.prototype),T}function S(N){if(l.isBuffer(N)){const x=h(N.length)|0,b=a(x);return b.length===0||N.copy(b,0,0,x),b}if(N.length!==void 0)return typeof N.length!="number"||U(N.length)?a(0):v(N);if(N.type==="Buffer"&&Array.isArray(N.data))return v(N.data)}function h(N){if(N>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return N|0}function g(N){return+N!=N&&(N=0),l.alloc(+N)}l.isBuffer=function(x){return x!=null&&x._isBuffer===!0&&x!==l.prototype},l.compare=function(x,b){if(A(x,Uint8Array)&&(x=l.from(x,x.offset,x.byteLength)),A(b,Uint8Array)&&(b=l.from(b,b.offset,b.byteLength)),!l.isBuffer(x)||!l.isBuffer(b))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(x===b)return 0;let T=x.length,L=b.length;for(let H=0,oe=Math.min(T,L);H<oe;++H)if(x[H]!==b[H]){T=x[H],L=b[H];break}return T<L?-1:L<T?1:0},l.isEncoding=function(x){switch(String(x).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(x,b){if(!Array.isArray(x))throw new TypeError('"list" argument must be an Array of Buffers');if(x.length===0)return l.alloc(0);let T;if(b===void 0)for(b=0,T=0;T<x.length;++T)b+=x[T].length;const L=l.allocUnsafe(b);let H=0;for(T=0;T<x.length;++T){let oe=x[T];if(A(oe,Uint8Array))H+oe.length>L.length?(l.isBuffer(oe)||(oe=l.from(oe)),oe.copy(L,H)):Uint8Array.prototype.set.call(L,oe,H);else if(l.isBuffer(oe))oe.copy(L,H);else throw new TypeError('"list" argument must be an Array of Buffers');H+=oe.length}return L};function w(N,x){if(l.isBuffer(N))return N.length;if(ArrayBuffer.isView(N)||A(N,ArrayBuffer))return N.byteLength;if(typeof N!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof N);const b=N.length,T=arguments.length>2&&arguments[2]===!0;if(!T&&b===0)return 0;let L=!1;for(;;)switch(x){case"ascii":case"latin1":case"binary":return b;case"utf8":case"utf-8":return Me(N).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return b*2;case"hex":return b>>>1;case"base64":return Fe(N).length;default:if(L)return T?-1:Me(N).length;x=(""+x).toLowerCase(),L=!0}}l.byteLength=w;function _(N,x,b){let T=!1;if((x===void 0||x<0)&&(x=0),x>this.length||((b===void 0||b>this.length)&&(b=this.length),b<=0)||(b>>>=0,x>>>=0,b<=x))return"";for(N||(N="utf8");;)switch(N){case"hex":return z(this,x,b);case"utf8":case"utf-8":return G(this,x,b);case"ascii":return fe(this,x,b);case"latin1":case"binary":return B(this,x,b);case"base64":return Y(this,x,b);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ue(this,x,b);default:if(T)throw new TypeError("Unknown encoding: "+N);N=(N+"").toLowerCase(),T=!0}}l.prototype._isBuffer=!0;function E(N,x,b){const T=N[x];N[x]=N[b],N[b]=T}l.prototype.swap16=function(){const x=this.length;if(x%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let b=0;b<x;b+=2)E(this,b,b+1);return this},l.prototype.swap32=function(){const x=this.length;if(x%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let b=0;b<x;b+=4)E(this,b,b+3),E(this,b+1,b+2);return this},l.prototype.swap64=function(){const x=this.length;if(x%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let b=0;b<x;b+=8)E(this,b,b+7),E(this,b+1,b+6),E(this,b+2,b+5),E(this,b+3,b+4);return this},l.prototype.toString=function(){const x=this.length;return x===0?"":arguments.length===0?G(this,0,x):_.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(x){if(!l.isBuffer(x))throw new TypeError("Argument must be a Buffer");return this===x?!0:l.compare(this,x)===0},l.prototype.inspect=function(){let x="";const b=e.INSPECT_MAX_BYTES;return x=this.toString("hex",0,b).replace(/(.{2})/g,"$1 ").trim(),this.length>b&&(x+=" ... "),"<Buffer "+x+">"},n&&(l.prototype[n]=l.prototype.inspect),l.prototype.compare=function(x,b,T,L,H){if(A(x,Uint8Array)&&(x=l.from(x,x.offset,x.byteLength)),!l.isBuffer(x))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof x);if(b===void 0&&(b=0),T===void 0&&(T=x?x.length:0),L===void 0&&(L=0),H===void 0&&(H=this.length),b<0||T>x.length||L<0||H>this.length)throw new RangeError("out of range index");if(L>=H&&b>=T)return 0;if(L>=H)return-1;if(b>=T)return 1;if(b>>>=0,T>>>=0,L>>>=0,H>>>=0,this===x)return 0;let oe=H-L,qe=T-b;const Et=Math.min(oe,qe),bt=this.slice(L,H),St=x.slice(b,T);for(let ht=0;ht<Et;++ht)if(bt[ht]!==St[ht]){oe=bt[ht],qe=St[ht];break}return oe<qe?-1:qe<oe?1:0};function I(N,x,b,T,L){if(N.length===0)return-1;if(typeof b=="string"?(T=b,b=0):b>2147483647?b=2147483647:b<-2147483648&&(b=-2147483648),b=+b,U(b)&&(b=L?0:N.length-1),b<0&&(b=N.length+b),b>=N.length){if(L)return-1;b=N.length-1}else if(b<0)if(L)b=0;else return-1;if(typeof x=="string"&&(x=l.from(x,T)),l.isBuffer(x))return x.length===0?-1:P(N,x,b,T,L);if(typeof x=="number")return x=x&255,typeof Uint8Array.prototype.indexOf=="function"?L?Uint8Array.prototype.indexOf.call(N,x,b):Uint8Array.prototype.lastIndexOf.call(N,x,b):P(N,[x],b,T,L);throw new TypeError("val must be string, number or Buffer")}function P(N,x,b,T,L){let H=1,oe=N.length,qe=x.length;if(T!==void 0&&(T=String(T).toLowerCase(),T==="ucs2"||T==="ucs-2"||T==="utf16le"||T==="utf-16le")){if(N.length<2||x.length<2)return-1;H=2,oe/=2,qe/=2,b/=2}function Et(St,ht){return H===1?St[ht]:St.readUInt16BE(ht*H)}let bt;if(L){let St=-1;for(bt=b;bt<oe;bt++)if(Et(N,bt)===Et(x,St===-1?0:bt-St)){if(St===-1&&(St=bt),bt-St+1===qe)return St*H}else St!==-1&&(bt-=bt-St),St=-1}else for(b+qe>oe&&(b=oe-qe),bt=b;bt>=0;bt--){let St=!0;for(let ht=0;ht<qe;ht++)if(Et(N,bt+ht)!==Et(x,ht)){St=!1;break}if(St)return bt}return-1}l.prototype.includes=function(x,b,T){return this.indexOf(x,b,T)!==-1},l.prototype.indexOf=function(x,b,T){return I(this,x,b,T,!0)},l.prototype.lastIndexOf=function(x,b,T){return I(this,x,b,T,!1)};function M(N,x,b,T){b=Number(b)||0;const L=N.length-b;T?(T=Number(T),T>L&&(T=L)):T=L;const H=x.length;T>H/2&&(T=H/2);let oe;for(oe=0;oe<T;++oe){const qe=parseInt(x.substr(oe*2,2),16);if(U(qe))return oe;N[b+oe]=qe}return oe}function F(N,x,b,T){return gt(Me(x,N.length-b),N,b,T)}function W(N,x,b,T){return gt(se(x),N,b,T)}function re(N,x,b,T){return gt(Fe(x),N,b,T)}function q(N,x,b,T){return gt(ve(x,N.length-b),N,b,T)}l.prototype.write=function(x,b,T,L){if(b===void 0)L="utf8",T=this.length,b=0;else if(T===void 0&&typeof b=="string")L=b,T=this.length,b=0;else if(isFinite(b))b=b>>>0,isFinite(T)?(T=T>>>0,L===void 0&&(L="utf8")):(L=T,T=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const H=this.length-b;if((T===void 0||T>H)&&(T=H),x.length>0&&(T<0||b<0)||b>this.length)throw new RangeError("Attempt to write outside buffer bounds");L||(L="utf8");let oe=!1;for(;;)switch(L){case"hex":return M(this,x,b,T);case"utf8":case"utf-8":return F(this,x,b,T);case"ascii":case"latin1":case"binary":return W(this,x,b,T);case"base64":return re(this,x,b,T);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return q(this,x,b,T);default:if(oe)throw new TypeError("Unknown encoding: "+L);L=(""+L).toLowerCase(),oe=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Y(N,x,b){return x===0&&b===N.length?t.fromByteArray(N):t.fromByteArray(N.slice(x,b))}function G(N,x,b){b=Math.min(N.length,b);const T=[];let L=x;for(;L<b;){const H=N[L];let oe=null,qe=H>239?4:H>223?3:H>191?2:1;if(L+qe<=b){let Et,bt,St,ht;switch(qe){case 1:H<128&&(oe=H);break;case 2:Et=N[L+1],(Et&192)===128&&(ht=(H&31)<<6|Et&63,ht>127&&(oe=ht));break;case 3:Et=N[L+1],bt=N[L+2],(Et&192)===128&&(bt&192)===128&&(ht=(H&15)<<12|(Et&63)<<6|bt&63,ht>2047&&(ht<55296||ht>57343)&&(oe=ht));break;case 4:Et=N[L+1],bt=N[L+2],St=N[L+3],(Et&192)===128&&(bt&192)===128&&(St&192)===128&&(ht=(H&15)<<18|(Et&63)<<12|(bt&63)<<6|St&63,ht>65535&&ht<1114112&&(oe=ht))}}oe===null?(oe=65533,qe=1):oe>65535&&(oe-=65536,T.push(oe>>>10&1023|55296),oe=56320|oe&1023),T.push(oe),L+=qe}return Z(T)}const ne=4096;function Z(N){const x=N.length;if(x<=ne)return String.fromCharCode.apply(String,N);let b="",T=0;for(;T<x;)b+=String.fromCharCode.apply(String,N.slice(T,T+=ne));return b}function fe(N,x,b){let T="";b=Math.min(N.length,b);for(let L=x;L<b;++L)T+=String.fromCharCode(N[L]&127);return T}function B(N,x,b){let T="";b=Math.min(N.length,b);for(let L=x;L<b;++L)T+=String.fromCharCode(N[L]);return T}function z(N,x,b){const T=N.length;(!x||x<0)&&(x=0),(!b||b<0||b>T)&&(b=T);let L="";for(let H=x;H<b;++H)L+=V[N[H]];return L}function ue(N,x,b){const T=N.slice(x,b);let L="";for(let H=0;H<T.length-1;H+=2)L+=String.fromCharCode(T[H]+T[H+1]*256);return L}l.prototype.slice=function(x,b){const T=this.length;x=~~x,b=b===void 0?T:~~b,x<0?(x+=T,x<0&&(x=0)):x>T&&(x=T),b<0?(b+=T,b<0&&(b=0)):b>T&&(b=T),b<x&&(b=x);const L=this.subarray(x,b);return Object.setPrototypeOf(L,l.prototype),L};function ae(N,x,b){if(N%1!==0||N<0)throw new RangeError("offset is not uint");if(N+x>b)throw new RangeError("Trying to access beyond buffer length")}l.prototype.readUintLE=l.prototype.readUIntLE=function(x,b,T){x=x>>>0,b=b>>>0,T||ae(x,b,this.length);let L=this[x],H=1,oe=0;for(;++oe<b&&(H*=256);)L+=this[x+oe]*H;return L},l.prototype.readUintBE=l.prototype.readUIntBE=function(x,b,T){x=x>>>0,b=b>>>0,T||ae(x,b,this.length);let L=this[x+--b],H=1;for(;b>0&&(H*=256);)L+=this[x+--b]*H;return L},l.prototype.readUint8=l.prototype.readUInt8=function(x,b){return x=x>>>0,b||ae(x,1,this.length),this[x]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(x,b){return x=x>>>0,b||ae(x,2,this.length),this[x]|this[x+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(x,b){return x=x>>>0,b||ae(x,2,this.length),this[x]<<8|this[x+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(x,b){return x=x>>>0,b||ae(x,4,this.length),(this[x]|this[x+1]<<8|this[x+2]<<16)+this[x+3]*16777216},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(x,b){return x=x>>>0,b||ae(x,4,this.length),this[x]*16777216+(this[x+1]<<16|this[x+2]<<8|this[x+3])},l.prototype.readBigUInt64LE=pe(function(x){x=x>>>0,K(x,"offset");const b=this[x],T=this[x+7];(b===void 0||T===void 0)&&ie(x,this.length-8);const L=b+this[++x]*2**8+this[++x]*2**16+this[++x]*2**24,H=this[++x]+this[++x]*2**8+this[++x]*2**16+T*2**24;return BigInt(L)+(BigInt(H)<<BigInt(32))}),l.prototype.readBigUInt64BE=pe(function(x){x=x>>>0,K(x,"offset");const b=this[x],T=this[x+7];(b===void 0||T===void 0)&&ie(x,this.length-8);const L=b*2**24+this[++x]*2**16+this[++x]*2**8+this[++x],H=this[++x]*2**24+this[++x]*2**16+this[++x]*2**8+T;return(BigInt(L)<<BigInt(32))+BigInt(H)}),l.prototype.readIntLE=function(x,b,T){x=x>>>0,b=b>>>0,T||ae(x,b,this.length);let L=this[x],H=1,oe=0;for(;++oe<b&&(H*=256);)L+=this[x+oe]*H;return H*=128,L>=H&&(L-=Math.pow(2,8*b)),L},l.prototype.readIntBE=function(x,b,T){x=x>>>0,b=b>>>0,T||ae(x,b,this.length);let L=b,H=1,oe=this[x+--L];for(;L>0&&(H*=256);)oe+=this[x+--L]*H;return H*=128,oe>=H&&(oe-=Math.pow(2,8*b)),oe},l.prototype.readInt8=function(x,b){return x=x>>>0,b||ae(x,1,this.length),this[x]&128?(255-this[x]+1)*-1:this[x]},l.prototype.readInt16LE=function(x,b){x=x>>>0,b||ae(x,2,this.length);const T=this[x]|this[x+1]<<8;return T&32768?T|4294901760:T},l.prototype.readInt16BE=function(x,b){x=x>>>0,b||ae(x,2,this.length);const T=this[x+1]|this[x]<<8;return T&32768?T|4294901760:T},l.prototype.readInt32LE=function(x,b){return x=x>>>0,b||ae(x,4,this.length),this[x]|this[x+1]<<8|this[x+2]<<16|this[x+3]<<24},l.prototype.readInt32BE=function(x,b){return x=x>>>0,b||ae(x,4,this.length),this[x]<<24|this[x+1]<<16|this[x+2]<<8|this[x+3]},l.prototype.readBigInt64LE=pe(function(x){x=x>>>0,K(x,"offset");const b=this[x],T=this[x+7];(b===void 0||T===void 0)&&ie(x,this.length-8);const L=this[x+4]+this[x+5]*2**8+this[x+6]*2**16+(T<<24);return(BigInt(L)<<BigInt(32))+BigInt(b+this[++x]*2**8+this[++x]*2**16+this[++x]*2**24)}),l.prototype.readBigInt64BE=pe(function(x){x=x>>>0,K(x,"offset");const b=this[x],T=this[x+7];(b===void 0||T===void 0)&&ie(x,this.length-8);const L=(b<<24)+this[++x]*2**16+this[++x]*2**8+this[++x];return(BigInt(L)<<BigInt(32))+BigInt(this[++x]*2**24+this[++x]*2**16+this[++x]*2**8+T)}),l.prototype.readFloatLE=function(x,b){return x=x>>>0,b||ae(x,4,this.length),r.read(this,x,!0,23,4)},l.prototype.readFloatBE=function(x,b){return x=x>>>0,b||ae(x,4,this.length),r.read(this,x,!1,23,4)},l.prototype.readDoubleLE=function(x,b){return x=x>>>0,b||ae(x,8,this.length),r.read(this,x,!0,52,8)},l.prototype.readDoubleBE=function(x,b){return x=x>>>0,b||ae(x,8,this.length),r.read(this,x,!1,52,8)};function X(N,x,b,T,L,H){if(!l.isBuffer(N))throw new TypeError('"buffer" argument must be a Buffer instance');if(x>L||x<H)throw new RangeError('"value" argument is out of bounds');if(b+T>N.length)throw new RangeError("Index out of range")}l.prototype.writeUintLE=l.prototype.writeUIntLE=function(x,b,T,L){if(x=+x,b=b>>>0,T=T>>>0,!L){const qe=Math.pow(2,8*T)-1;X(this,x,b,T,qe,0)}let H=1,oe=0;for(this[b]=x&255;++oe<T&&(H*=256);)this[b+oe]=x/H&255;return b+T},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(x,b,T,L){if(x=+x,b=b>>>0,T=T>>>0,!L){const qe=Math.pow(2,8*T)-1;X(this,x,b,T,qe,0)}let H=T-1,oe=1;for(this[b+H]=x&255;--H>=0&&(oe*=256);)this[b+H]=x/oe&255;return b+T},l.prototype.writeUint8=l.prototype.writeUInt8=function(x,b,T){return x=+x,b=b>>>0,T||X(this,x,b,1,255,0),this[b]=x&255,b+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(x,b,T){return x=+x,b=b>>>0,T||X(this,x,b,2,65535,0),this[b]=x&255,this[b+1]=x>>>8,b+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(x,b,T){return x=+x,b=b>>>0,T||X(this,x,b,2,65535,0),this[b]=x>>>8,this[b+1]=x&255,b+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(x,b,T){return x=+x,b=b>>>0,T||X(this,x,b,4,4294967295,0),this[b+3]=x>>>24,this[b+2]=x>>>16,this[b+1]=x>>>8,this[b]=x&255,b+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(x,b,T){return x=+x,b=b>>>0,T||X(this,x,b,4,4294967295,0),this[b]=x>>>24,this[b+1]=x>>>16,this[b+2]=x>>>8,this[b+3]=x&255,b+4};function ee(N,x,b,T,L){k(x,T,L,N,b,7);let H=Number(x&BigInt(4294967295));N[b++]=H,H=H>>8,N[b++]=H,H=H>>8,N[b++]=H,H=H>>8,N[b++]=H;let oe=Number(x>>BigInt(32)&BigInt(4294967295));return N[b++]=oe,oe=oe>>8,N[b++]=oe,oe=oe>>8,N[b++]=oe,oe=oe>>8,N[b++]=oe,b}function je(N,x,b,T,L){k(x,T,L,N,b,7);let H=Number(x&BigInt(4294967295));N[b+7]=H,H=H>>8,N[b+6]=H,H=H>>8,N[b+5]=H,H=H>>8,N[b+4]=H;let oe=Number(x>>BigInt(32)&BigInt(4294967295));return N[b+3]=oe,oe=oe>>8,N[b+2]=oe,oe=oe>>8,N[b+1]=oe,oe=oe>>8,N[b]=oe,b+8}l.prototype.writeBigUInt64LE=pe(function(x,b=0){return ee(this,x,b,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeBigUInt64BE=pe(function(x,b=0){return je(this,x,b,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeIntLE=function(x,b,T,L){if(x=+x,b=b>>>0,!L){const Et=Math.pow(2,8*T-1);X(this,x,b,T,Et-1,-Et)}let H=0,oe=1,qe=0;for(this[b]=x&255;++H<T&&(oe*=256);)x<0&&qe===0&&this[b+H-1]!==0&&(qe=1),this[b+H]=(x/oe>>0)-qe&255;return b+T},l.prototype.writeIntBE=function(x,b,T,L){if(x=+x,b=b>>>0,!L){const Et=Math.pow(2,8*T-1);X(this,x,b,T,Et-1,-Et)}let H=T-1,oe=1,qe=0;for(this[b+H]=x&255;--H>=0&&(oe*=256);)x<0&&qe===0&&this[b+H+1]!==0&&(qe=1),this[b+H]=(x/oe>>0)-qe&255;return b+T},l.prototype.writeInt8=function(x,b,T){return x=+x,b=b>>>0,T||X(this,x,b,1,127,-128),x<0&&(x=255+x+1),this[b]=x&255,b+1},l.prototype.writeInt16LE=function(x,b,T){return x=+x,b=b>>>0,T||X(this,x,b,2,32767,-32768),this[b]=x&255,this[b+1]=x>>>8,b+2},l.prototype.writeInt16BE=function(x,b,T){return x=+x,b=b>>>0,T||X(this,x,b,2,32767,-32768),this[b]=x>>>8,this[b+1]=x&255,b+2},l.prototype.writeInt32LE=function(x,b,T){return x=+x,b=b>>>0,T||X(this,x,b,4,2147483647,-2147483648),this[b]=x&255,this[b+1]=x>>>8,this[b+2]=x>>>16,this[b+3]=x>>>24,b+4},l.prototype.writeInt32BE=function(x,b,T){return x=+x,b=b>>>0,T||X(this,x,b,4,2147483647,-2147483648),x<0&&(x=4294967295+x+1),this[b]=x>>>24,this[b+1]=x>>>16,this[b+2]=x>>>8,this[b+3]=x&255,b+4},l.prototype.writeBigInt64LE=pe(function(x,b=0){return ee(this,x,b,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),l.prototype.writeBigInt64BE=pe(function(x,b=0){return je(this,x,b,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Ce(N,x,b,T,L,H){if(b+T>N.length)throw new RangeError("Index out of range");if(b<0)throw new RangeError("Index out of range")}function D(N,x,b,T,L){return x=+x,b=b>>>0,L||Ce(N,x,b,4),r.write(N,x,b,T,23,4),b+4}l.prototype.writeFloatLE=function(x,b,T){return D(this,x,b,!0,T)},l.prototype.writeFloatBE=function(x,b,T){return D(this,x,b,!1,T)};function R(N,x,b,T,L){return x=+x,b=b>>>0,L||Ce(N,x,b,8),r.write(N,x,b,T,52,8),b+8}l.prototype.writeDoubleLE=function(x,b,T){return R(this,x,b,!0,T)},l.prototype.writeDoubleBE=function(x,b,T){return R(this,x,b,!1,T)},l.prototype.copy=function(x,b,T,L){if(!l.isBuffer(x))throw new TypeError("argument should be a Buffer");if(T||(T=0),!L&&L!==0&&(L=this.length),b>=x.length&&(b=x.length),b||(b=0),L>0&&L<T&&(L=T),L===T||x.length===0||this.length===0)return 0;if(b<0)throw new RangeError("targetStart out of bounds");if(T<0||T>=this.length)throw new RangeError("Index out of range");if(L<0)throw new RangeError("sourceEnd out of bounds");L>this.length&&(L=this.length),x.length-b<L-T&&(L=x.length-b+T);const H=L-T;return this===x&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(b,T,L):Uint8Array.prototype.set.call(x,this.subarray(T,L),b),H},l.prototype.fill=function(x,b,T,L){if(typeof x=="string"){if(typeof b=="string"?(L=b,b=0,T=this.length):typeof T=="string"&&(L=T,T=this.length),L!==void 0&&typeof L!="string")throw new TypeError("encoding must be a string");if(typeof L=="string"&&!l.isEncoding(L))throw new TypeError("Unknown encoding: "+L);if(x.length===1){const oe=x.charCodeAt(0);(L==="utf8"&&oe<128||L==="latin1")&&(x=oe)}}else typeof x=="number"?x=x&255:typeof x=="boolean"&&(x=Number(x));if(b<0||this.length<b||this.length<T)throw new RangeError("Out of range index");if(T<=b)return this;b=b>>>0,T=T===void 0?this.length:T>>>0,x||(x=0);let H;if(typeof x=="number")for(H=b;H<T;++H)this[H]=x;else{const oe=l.isBuffer(x)?x:l.from(x,L),qe=oe.length;if(qe===0)throw new TypeError('The value "'+x+'" is invalid for argument "value"');for(H=0;H<T-b;++H)this[H+b]=oe[H%qe]}return this};const Q={};function de(N,x,b){Q[N]=class extends b{constructor(){super(),Object.defineProperty(this,"message",{value:x.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${N}]`,this.stack,delete this.name}get code(){return N}set code(L){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:L,writable:!0})}toString(){return`${this.name} [${N}]: ${this.message}`}}}de("ERR_BUFFER_OUT_OF_BOUNDS",function(N){return N?`${N} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),de("ERR_INVALID_ARG_TYPE",function(N,x){return`The "${N}" argument must be of type number. Received type ${typeof x}`},TypeError),de("ERR_OUT_OF_RANGE",function(N,x,b){let T=`The value of "${N}" is out of range.`,L=b;return Number.isInteger(b)&&Math.abs(b)>2**32?L=le(String(b)):typeof b=="bigint"&&(L=String(b),(b>BigInt(2)**BigInt(32)||b<-(BigInt(2)**BigInt(32)))&&(L=le(L)),L+="n"),T+=` It must be ${x}. Received ${L}`,T},RangeError);function le(N){let x="",b=N.length;const T=N[0]==="-"?1:0;for(;b>=T+4;b-=3)x=`_${N.slice(b-3,b)}${x}`;return`${N.slice(0,b)}${x}`}function C(N,x,b){K(x,"offset"),(N[x]===void 0||N[x+b]===void 0)&&ie(x,N.length-(b+1))}function k(N,x,b,T,L,H){if(N>b||N<x){const oe=typeof x=="bigint"?"n":"";let qe;throw x===0||x===BigInt(0)?qe=`>= 0${oe} and < 2${oe} ** ${(H+1)*8}${oe}`:qe=`>= -(2${oe} ** ${(H+1)*8-1}${oe}) and < 2 ** ${(H+1)*8-1}${oe}`,new Q.ERR_OUT_OF_RANGE("value",qe,N)}C(T,L,H)}function K(N,x){if(typeof N!="number")throw new Q.ERR_INVALID_ARG_TYPE(x,"number",N)}function ie(N,x,b){throw Math.floor(N)!==N?(K(N,b),new Q.ERR_OUT_OF_RANGE("offset","an integer",N)):x<0?new Q.ERR_BUFFER_OUT_OF_BOUNDS:new Q.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${x}`,N)}const De=/[^+/0-9A-Za-z-_]/g;function Pe(N){if(N=N.split("=")[0],N=N.trim().replace(De,""),N.length<2)return"";for(;N.length%4!==0;)N=N+"=";return N}function Me(N,x){x=x||1/0;let b;const T=N.length;let L=null;const H=[];for(let oe=0;oe<T;++oe){if(b=N.charCodeAt(oe),b>55295&&b<57344){if(!L){if(b>56319){(x-=3)>-1&&H.push(239,191,189);continue}else if(oe+1===T){(x-=3)>-1&&H.push(239,191,189);continue}L=b;continue}if(b<56320){(x-=3)>-1&&H.push(239,191,189),L=b;continue}b=(L-55296<<10|b-56320)+65536}else L&&(x-=3)>-1&&H.push(239,191,189);if(L=null,b<128){if((x-=1)<0)break;H.push(b)}else if(b<2048){if((x-=2)<0)break;H.push(b>>6|192,b&63|128)}else if(b<65536){if((x-=3)<0)break;H.push(b>>12|224,b>>6&63|128,b&63|128)}else if(b<1114112){if((x-=4)<0)break;H.push(b>>18|240,b>>12&63|128,b>>6&63|128,b&63|128)}else throw new Error("Invalid code point")}return H}function se(N){const x=[];for(let b=0;b<N.length;++b)x.push(N.charCodeAt(b)&255);return x}function ve(N,x){let b,T,L;const H=[];for(let oe=0;oe<N.length&&!((x-=2)<0);++oe)b=N.charCodeAt(oe),T=b>>8,L=b%256,H.push(L),H.push(T);return H}function Fe(N){return t.toByteArray(Pe(N))}function gt(N,x,b,T){let L;for(L=0;L<T&&!(L+b>=x.length||L>=N.length);++L)x[L+b]=N[L];return L}function A(N,x){return N instanceof x||N!=null&&N.constructor!=null&&N.constructor.name!=null&&N.constructor.name===x.name}function U(N){return N!==N}const V=function(){const N="0123456789abcdef",x=new Array(256);for(let b=0;b<16;++b){const T=b*16;for(let L=0;L<16;++L)x[T+L]=N[b]+N[L]}return x}();function pe(N){return typeof BigInt>"u"?ye:N}function ye(){throw new Error("BigInt not supported")}})(Jo);/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(e,t){var r=Jo,n=r.Buffer;function s(a,l){for(var c in a)l[c]=a[c]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?e.exports=r:(s(r,t),t.Buffer=o);function o(a,l,c){return n(a,l,c)}o.prototype=Object.create(n.prototype),s(n,o),o.from=function(a,l,c){if(typeof a=="number")throw new TypeError("Argument must not be a number");return n(a,l,c)},o.alloc=function(a,l,c){if(typeof a!="number")throw new TypeError("Argument must be a number");var u=n(a);return l!==void 0?typeof c=="string"?u.fill(l,c):u.fill(l):u.fill(0),u},o.allocUnsafe=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return n(a)},o.allocUnsafeSlow=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return r.SlowBuffer(a)}})(Eg,Eg.exports);var m9=Eg.exports,km=65536,p9=4294967295;function g9(){throw new Error(`Secure random number generation is not supported by this browser.
Use Chrome, Firefox or Internet Explorer 11`)}var y9=m9.Buffer,ff=Us.crypto||Us.msCrypto;ff&&ff.getRandomValues?Cg.exports=x9:Cg.exports=g9;function x9(e,t){if(e>p9)throw new RangeError("requested too many random bytes");var r=y9.allocUnsafe(e);if(e>0)if(e>km)for(var n=0;n<e;n+=km)ff.getRandomValues(r.slice(n,n+km));else ff.getRandomValues(r);return typeof t=="function"?process.nextTick(function(){t(null,r)}):r}var v9=Cg.exports,kg={exports:{}};const w9={},b9=Object.freeze(Object.defineProperty({__proto__:null,default:w9},Symbol.toStringTag,{value:"Module"})),hf=zI(b9);var VP=hf.EventEmitter,Tm,Fw;function S9(){if(Fw)return Tm;Fw=1;function e(j,y){var S=Object.keys(j);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(j);y&&(h=h.filter(function(g){return Object.getOwnPropertyDescriptor(j,g).enumerable})),S.push.apply(S,h)}return S}function t(j){for(var y=1;y<arguments.length;y++){var S=arguments[y]!=null?arguments[y]:{};y%2?e(Object(S),!0).forEach(function(h){r(j,h,S[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(j,Object.getOwnPropertyDescriptors(S)):e(Object(S)).forEach(function(h){Object.defineProperty(j,h,Object.getOwnPropertyDescriptor(S,h))})}return j}function r(j,y,S){return y=a(y),y in j?Object.defineProperty(j,y,{value:S,enumerable:!0,configurable:!0,writable:!0}):j[y]=S,j}function n(j,y){if(!(j instanceof y))throw new TypeError("Cannot call a class as a function")}function s(j,y){for(var S=0;S<y.length;S++){var h=y[S];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(j,a(h.key),h)}}function o(j,y,S){return y&&s(j.prototype,y),Object.defineProperty(j,"prototype",{writable:!1}),j}function a(j){var y=l(j,"string");return typeof y=="symbol"?y:String(y)}function l(j,y){if(typeof j!="object"||j===null)return j;var S=j[Symbol.toPrimitive];if(S!==void 0){var h=S.call(j,y);if(typeof h!="object")return h;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(j)}var c=Jo,u=c.Buffer,d=hf,f=d.inspect,p=f&&f.custom||"inspect";function v(j,y,S){u.prototype.copy.call(j,y,S)}return Tm=function(){function j(){n(this,j),this.head=null,this.tail=null,this.length=0}return o(j,[{key:"push",value:function(S){var h={data:S,next:null};this.length>0?this.tail.next=h:this.head=h,this.tail=h,++this.length}},{key:"unshift",value:function(S){var h={data:S,next:this.head};this.length===0&&(this.tail=h),this.head=h,++this.length}},{key:"shift",value:function(){if(this.length!==0){var S=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,S}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(S){if(this.length===0)return"";for(var h=this.head,g=""+h.data;h=h.next;)g+=S+h.data;return g}},{key:"concat",value:function(S){if(this.length===0)return u.alloc(0);for(var h=u.allocUnsafe(S>>>0),g=this.head,w=0;g;)v(g.data,h,w),w+=g.data.length,g=g.next;return h}},{key:"consume",value:function(S,h){var g;return S<this.head.data.length?(g=this.head.data.slice(0,S),this.head.data=this.head.data.slice(S)):S===this.head.data.length?g=this.shift():g=h?this._getString(S):this._getBuffer(S),g}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(S){var h=this.head,g=1,w=h.data;for(S-=w.length;h=h.next;){var _=h.data,E=S>_.length?_.length:S;if(E===_.length?w+=_:w+=_.slice(0,S),S-=E,S===0){E===_.length?(++g,h.next?this.head=h.next:this.head=this.tail=null):(this.head=h,h.data=_.slice(E));break}++g}return this.length-=g,w}},{key:"_getBuffer",value:function(S){var h=u.allocUnsafe(S),g=this.head,w=1;for(g.data.copy(h),S-=g.data.length;g=g.next;){var _=g.data,E=S>_.length?_.length:S;if(_.copy(h,h.length-S,0,E),S-=E,S===0){E===_.length?(++w,g.next?this.head=g.next:this.head=this.tail=null):(this.head=g,g.data=_.slice(E));break}++w}return this.length-=w,h}},{key:p,value:function(S,h){return f(this,t(t({},h),{},{depth:0,customInspect:!1}))}}]),j}(),Tm}function j9(e,t){var r=this,n=this._readableState&&this._readableState.destroyed,s=this._writableState&&this._writableState.destroyed;return n||s?(t?t(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(Tg,this,e)):process.nextTick(Tg,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(o){!t&&o?r._writableState?r._writableState.errorEmitted?process.nextTick(bd,r):(r._writableState.errorEmitted=!0,process.nextTick(Uw,r,o)):process.nextTick(Uw,r,o):t?(process.nextTick(bd,r),t(o)):process.nextTick(bd,r)}),this)}function Uw(e,t){Tg(e,t),bd(e)}function bd(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function N9(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function Tg(e,t){e.emit("error",t)}function _9(e,t){var r=e._readableState,n=e._writableState;r&&r.autoDestroy||n&&n.autoDestroy?e.destroy(t):e.emit("error",t)}var WP={destroy:j9,undestroy:N9,errorOrDestroy:_9},ea={};function C9(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var qP={};function _n(e,t,r){r||(r=Error);function n(o,a,l){return typeof t=="string"?t:t(o,a,l)}var s=function(o){C9(a,o);function a(l,c,u){return o.call(this,n(l,c,u))||this}return a}(r);s.prototype.name=r.name,s.prototype.code=e,qP[e]=s}function $w(e,t){if(Array.isArray(e)){var r=e.length;return e=e.map(function(n){return String(n)}),r>2?"one of ".concat(t," ").concat(e.slice(0,r-1).join(", "),", or ")+e[r-1]:r===2?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}else return"of ".concat(t," ").concat(String(e))}function E9(e,t,r){return e.substr(0,t.length)===t}function k9(e,t,r){return(r===void 0||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t}function T9(e,t,r){return typeof r!="number"&&(r=0),r+t.length>e.length?!1:e.indexOf(t,r)!==-1}_n("ERR_INVALID_OPT_VALUE",function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'},TypeError);_n("ERR_INVALID_ARG_TYPE",function(e,t,r){var n;typeof t=="string"&&E9(t,"not ")?(n="must not be",t=t.replace(/^not /,"")):n="must be";var s;if(k9(e," argument"))s="The ".concat(e," ").concat(n," ").concat($w(t,"type"));else{var o=T9(e,".")?"property":"argument";s='The "'.concat(e,'" ').concat(o," ").concat(n," ").concat($w(t,"type"))}return s+=". Received type ".concat(typeof r),s},TypeError);_n("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");_n("ERR_METHOD_NOT_IMPLEMENTED",function(e){return"The "+e+" method is not implemented"});_n("ERR_STREAM_PREMATURE_CLOSE","Premature close");_n("ERR_STREAM_DESTROYED",function(e){return"Cannot call "+e+" after a stream was destroyed"});_n("ERR_MULTIPLE_CALLBACK","Callback called multiple times");_n("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");_n("ERR_STREAM_WRITE_AFTER_END","write after end");_n("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);_n("ERR_UNKNOWN_ENCODING",function(e){return"Unknown encoding: "+e},TypeError);_n("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");ea.codes=qP;var P9=ea.codes.ERR_INVALID_OPT_VALUE;function R9(e,t,r){return e.highWaterMark!=null?e.highWaterMark:t?e[r]:null}function A9(e,t,r,n){var s=R9(t,n,r);if(s!=null){if(!(isFinite(s)&&Math.floor(s)===s)||s<0){var o=n?r:"highWaterMark";throw new P9(o,s)}return Math.floor(s)}return e.objectMode?16:16*1024}var HP={getHighWaterMark:A9},Pg={exports:{}};typeof Object.create=="function"?Pg.exports=function(t,r){r&&(t.super_=r,t.prototype=Object.create(r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:Pg.exports=function(t,r){if(r){t.super_=r;var n=function(){};n.prototype=r.prototype,t.prototype=new n,t.prototype.constructor=t}};var vu=Pg.exports,I9=D9;function D9(e,t){if(Pm("noDeprecation"))return e;var r=!1;function n(){if(!r){if(Pm("throwDeprecation"))throw new Error(t);Pm("traceDeprecation")?console.trace(t):console.warn(t),r=!0}return e.apply(this,arguments)}return n}function Pm(e){try{if(!Us.localStorage)return!1}catch{return!1}var t=Us.localStorage[e];return t==null?!1:String(t).toLowerCase()==="true"}var Rm,Bw;function KP(){if(Bw)return Rm;Bw=1,Rm=M;function e(D){var R=this;this.next=null,this.entry=null,this.finish=function(){Ce(R,D)}}var t;M.WritableState=I;var r={deprecate:I9},n=VP,s=Jo.Buffer,o=(typeof Us<"u"?Us:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function a(D){return s.from(D)}function l(D){return s.isBuffer(D)||D instanceof o}var c=WP,u=HP,d=u.getHighWaterMark,f=ea.codes,p=f.ERR_INVALID_ARG_TYPE,v=f.ERR_METHOD_NOT_IMPLEMENTED,j=f.ERR_MULTIPLE_CALLBACK,y=f.ERR_STREAM_CANNOT_PIPE,S=f.ERR_STREAM_DESTROYED,h=f.ERR_STREAM_NULL_VALUES,g=f.ERR_STREAM_WRITE_AFTER_END,w=f.ERR_UNKNOWN_ENCODING,_=c.errorOrDestroy;vu(M,n);function E(){}function I(D,R,Q){t=t||ll(),D=D||{},typeof Q!="boolean"&&(Q=R instanceof t),this.objectMode=!!D.objectMode,Q&&(this.objectMode=this.objectMode||!!D.writableObjectMode),this.highWaterMark=d(this,D,"writableHighWaterMark",Q),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var de=D.decodeStrings===!1;this.decodeStrings=!de,this.defaultEncoding=D.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(le){Z(R,le)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=D.emitClose!==!1,this.autoDestroy=!!D.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new e(this)}I.prototype.getBuffer=function(){for(var R=this.bufferedRequest,Q=[];R;)Q.push(R),R=R.next;return Q},function(){try{Object.defineProperty(I.prototype,"buffer",{get:r.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var P;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(P=Function.prototype[Symbol.hasInstance],Object.defineProperty(M,Symbol.hasInstance,{value:function(R){return P.call(this,R)?!0:this!==M?!1:R&&R._writableState instanceof I}})):P=function(R){return R instanceof this};function M(D){t=t||ll();var R=this instanceof t;if(!R&&!P.call(M,this))return new M(D);this._writableState=new I(D,this,R),this.writable=!0,D&&(typeof D.write=="function"&&(this._write=D.write),typeof D.writev=="function"&&(this._writev=D.writev),typeof D.destroy=="function"&&(this._destroy=D.destroy),typeof D.final=="function"&&(this._final=D.final)),n.call(this)}M.prototype.pipe=function(){_(this,new y)};function F(D,R){var Q=new g;_(D,Q),process.nextTick(R,Q)}function W(D,R,Q,de){var le;return Q===null?le=new h:typeof Q!="string"&&!R.objectMode&&(le=new p("chunk",["string","Buffer"],Q)),le?(_(D,le),process.nextTick(de,le),!1):!0}M.prototype.write=function(D,R,Q){var de=this._writableState,le=!1,C=!de.objectMode&&l(D);return C&&!s.isBuffer(D)&&(D=a(D)),typeof R=="function"&&(Q=R,R=null),C?R="buffer":R||(R=de.defaultEncoding),typeof Q!="function"&&(Q=E),de.ending?F(this,Q):(C||W(this,de,D,Q))&&(de.pendingcb++,le=q(this,de,C,D,R,Q)),le},M.prototype.cork=function(){this._writableState.corked++},M.prototype.uncork=function(){var D=this._writableState;D.corked&&(D.corked--,!D.writing&&!D.corked&&!D.bufferProcessing&&D.bufferedRequest&&z(this,D))},M.prototype.setDefaultEncoding=function(R){if(typeof R=="string"&&(R=R.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((R+"").toLowerCase())>-1))throw new w(R);return this._writableState.defaultEncoding=R,this},Object.defineProperty(M.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function re(D,R,Q){return!D.objectMode&&D.decodeStrings!==!1&&typeof R=="string"&&(R=s.from(R,Q)),R}Object.defineProperty(M.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function q(D,R,Q,de,le,C){if(!Q){var k=re(R,de,le);de!==k&&(Q=!0,le="buffer",de=k)}var K=R.objectMode?1:de.length;R.length+=K;var ie=R.length<R.highWaterMark;if(ie||(R.needDrain=!0),R.writing||R.corked){var De=R.lastBufferedRequest;R.lastBufferedRequest={chunk:de,encoding:le,isBuf:Q,callback:C,next:null},De?De.next=R.lastBufferedRequest:R.bufferedRequest=R.lastBufferedRequest,R.bufferedRequestCount+=1}else Y(D,R,!1,K,de,le,C);return ie}function Y(D,R,Q,de,le,C,k){R.writelen=de,R.writecb=k,R.writing=!0,R.sync=!0,R.destroyed?R.onwrite(new S("write")):Q?D._writev(le,R.onwrite):D._write(le,C,R.onwrite),R.sync=!1}function G(D,R,Q,de,le){--R.pendingcb,Q?(process.nextTick(le,de),process.nextTick(ee,D,R),D._writableState.errorEmitted=!0,_(D,de)):(le(de),D._writableState.errorEmitted=!0,_(D,de),ee(D,R))}function ne(D){D.writing=!1,D.writecb=null,D.length-=D.writelen,D.writelen=0}function Z(D,R){var Q=D._writableState,de=Q.sync,le=Q.writecb;if(typeof le!="function")throw new j;if(ne(Q),R)G(D,Q,de,R,le);else{var C=ue(Q)||D.destroyed;!C&&!Q.corked&&!Q.bufferProcessing&&Q.bufferedRequest&&z(D,Q),de?process.nextTick(fe,D,Q,C,le):fe(D,Q,C,le)}}function fe(D,R,Q,de){Q||B(D,R),R.pendingcb--,de(),ee(D,R)}function B(D,R){R.length===0&&R.needDrain&&(R.needDrain=!1,D.emit("drain"))}function z(D,R){R.bufferProcessing=!0;var Q=R.bufferedRequest;if(D._writev&&Q&&Q.next){var de=R.bufferedRequestCount,le=new Array(de),C=R.corkedRequestsFree;C.entry=Q;for(var k=0,K=!0;Q;)le[k]=Q,Q.isBuf||(K=!1),Q=Q.next,k+=1;le.allBuffers=K,Y(D,R,!0,R.length,le,"",C.finish),R.pendingcb++,R.lastBufferedRequest=null,C.next?(R.corkedRequestsFree=C.next,C.next=null):R.corkedRequestsFree=new e(R),R.bufferedRequestCount=0}else{for(;Q;){var ie=Q.chunk,De=Q.encoding,Pe=Q.callback,Me=R.objectMode?1:ie.length;if(Y(D,R,!1,Me,ie,De,Pe),Q=Q.next,R.bufferedRequestCount--,R.writing)break}Q===null&&(R.lastBufferedRequest=null)}R.bufferedRequest=Q,R.bufferProcessing=!1}M.prototype._write=function(D,R,Q){Q(new v("_write()"))},M.prototype._writev=null,M.prototype.end=function(D,R,Q){var de=this._writableState;return typeof D=="function"?(Q=D,D=null,R=null):typeof R=="function"&&(Q=R,R=null),D!=null&&this.write(D,R),de.corked&&(de.corked=1,this.uncork()),de.ending||je(this,de,Q),this},Object.defineProperty(M.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function ue(D){return D.ending&&D.length===0&&D.bufferedRequest===null&&!D.finished&&!D.writing}function ae(D,R){D._final(function(Q){R.pendingcb--,Q&&_(D,Q),R.prefinished=!0,D.emit("prefinish"),ee(D,R)})}function X(D,R){!R.prefinished&&!R.finalCalled&&(typeof D._final=="function"&&!R.destroyed?(R.pendingcb++,R.finalCalled=!0,process.nextTick(ae,D,R)):(R.prefinished=!0,D.emit("prefinish")))}function ee(D,R){var Q=ue(R);if(Q&&(X(D,R),R.pendingcb===0&&(R.finished=!0,D.emit("finish"),R.autoDestroy))){var de=D._readableState;(!de||de.autoDestroy&&de.endEmitted)&&D.destroy()}return Q}function je(D,R,Q){R.ending=!0,ee(D,R),Q&&(R.finished?process.nextTick(Q):D.once("finish",Q)),R.ended=!0,D.writable=!1}function Ce(D,R,Q){var de=D.entry;for(D.entry=null;de;){var le=de.callback;R.pendingcb--,le(Q),de=de.next}R.corkedRequestsFree.next=D}return Object.defineProperty(M.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(R){this._writableState&&(this._writableState.destroyed=R)}}),M.prototype.destroy=c.destroy,M.prototype._undestroy=c.undestroy,M.prototype._destroy=function(D,R){R(D)},Rm}var Am,zw;function ll(){if(zw)return Am;zw=1;var e=Object.keys||function(u){var d=[];for(var f in u)d.push(f);return d};Am=a;var t=QP(),r=KP();vu(a,t);for(var n=e(r.prototype),s=0;s<n.length;s++){var o=n[s];a.prototype[o]||(a.prototype[o]=r.prototype[o])}function a(u){if(!(this instanceof a))return new a(u);t.call(this,u),r.call(this,u),this.allowHalfOpen=!0,u&&(u.readable===!1&&(this.readable=!1),u.writable===!1&&(this.writable=!1),u.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",l)))}Object.defineProperty(a.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(a.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(a.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function l(){this._writableState.ended||process.nextTick(c,this)}function c(u){u.end()}return Object.defineProperty(a.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(d){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=d,this._writableState.destroyed=d)}}),Am}var Im={},Xu={exports:{}},Vw;function M9(){return Vw||(Vw=1,function(e,t){var r=Jo,n=r.Buffer;function s(a,l){for(var c in a)l[c]=a[c]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?e.exports=r:(s(r,t),t.Buffer=o);function o(a,l,c){return n(a,l,c)}s(n,o),o.from=function(a,l,c){if(typeof a=="number")throw new TypeError("Argument must not be a number");return n(a,l,c)},o.alloc=function(a,l,c){if(typeof a!="number")throw new TypeError("Argument must be a number");var u=n(a);return l!==void 0?typeof c=="string"?u.fill(l,c):u.fill(l):u.fill(0),u},o.allocUnsafe=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return n(a)},o.allocUnsafeSlow=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return r.SlowBuffer(a)}}(Xu,Xu.exports)),Xu.exports}var Ww;function qw(){if(Ww)return Im;Ww=1;var e=M9().Buffer,t=e.isEncoding||function(h){switch(h=""+h,h&&h.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function r(h){if(!h)return"utf8";for(var g;;)switch(h){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return h;default:if(g)return;h=(""+h).toLowerCase(),g=!0}}function n(h){var g=r(h);if(typeof g!="string"&&(e.isEncoding===t||!t(h)))throw new Error("Unknown encoding: "+h);return g||h}Im.StringDecoder=s;function s(h){this.encoding=n(h);var g;switch(this.encoding){case"utf16le":this.text=f,this.end=p,g=4;break;case"utf8":this.fillLast=c,g=4;break;case"base64":this.text=v,this.end=j,g=3;break;default:this.write=y,this.end=S;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=e.allocUnsafe(g)}s.prototype.write=function(h){if(h.length===0)return"";var g,w;if(this.lastNeed){if(g=this.fillLast(h),g===void 0)return"";w=this.lastNeed,this.lastNeed=0}else w=0;return w<h.length?g?g+this.text(h,w):this.text(h,w):g||""},s.prototype.end=d,s.prototype.text=u,s.prototype.fillLast=function(h){if(this.lastNeed<=h.length)return h.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);h.copy(this.lastChar,this.lastTotal-this.lastNeed,0,h.length),this.lastNeed-=h.length};function o(h){return h<=127?0:h>>5===6?2:h>>4===14?3:h>>3===30?4:h>>6===2?-1:-2}function a(h,g,w){var _=g.length-1;if(_<w)return 0;var E=o(g[_]);return E>=0?(E>0&&(h.lastNeed=E-1),E):--_<w||E===-2?0:(E=o(g[_]),E>=0?(E>0&&(h.lastNeed=E-2),E):--_<w||E===-2?0:(E=o(g[_]),E>=0?(E>0&&(E===2?E=0:h.lastNeed=E-3),E):0))}function l(h,g,w){if((g[0]&192)!==128)return h.lastNeed=0,"";if(h.lastNeed>1&&g.length>1){if((g[1]&192)!==128)return h.lastNeed=1,"";if(h.lastNeed>2&&g.length>2&&(g[2]&192)!==128)return h.lastNeed=2,""}}function c(h){var g=this.lastTotal-this.lastNeed,w=l(this,h);if(w!==void 0)return w;if(this.lastNeed<=h.length)return h.copy(this.lastChar,g,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);h.copy(this.lastChar,g,0,h.length),this.lastNeed-=h.length}function u(h,g){var w=a(this,h,g);if(!this.lastNeed)return h.toString("utf8",g);this.lastTotal=w;var _=h.length-(w-this.lastNeed);return h.copy(this.lastChar,0,_),h.toString("utf8",g,_)}function d(h){var g=h&&h.length?this.write(h):"";return this.lastNeed?g+"":g}function f(h,g){if((h.length-g)%2===0){var w=h.toString("utf16le",g);if(w){var _=w.charCodeAt(w.length-1);if(_>=55296&&_<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=h[h.length-2],this.lastChar[1]=h[h.length-1],w.slice(0,-1)}return w}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=h[h.length-1],h.toString("utf16le",g,h.length-1)}function p(h){var g=h&&h.length?this.write(h):"";if(this.lastNeed){var w=this.lastTotal-this.lastNeed;return g+this.lastChar.toString("utf16le",0,w)}return g}function v(h,g){var w=(h.length-g)%3;return w===0?h.toString("base64",g):(this.lastNeed=3-w,this.lastTotal=3,w===1?this.lastChar[0]=h[h.length-1]:(this.lastChar[0]=h[h.length-2],this.lastChar[1]=h[h.length-1]),h.toString("base64",g,h.length-w))}function j(h){var g=h&&h.length?this.write(h):"";return this.lastNeed?g+this.lastChar.toString("base64",0,3-this.lastNeed):g}function y(h){return h.toString(this.encoding)}function S(h){return h&&h.length?this.write(h):""}return Im}var Hw=ea.codes.ERR_STREAM_PREMATURE_CLOSE;function O9(e){var t=!1;return function(){if(!t){t=!0;for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];e.apply(this,n)}}}function L9(){}function F9(e){return e.setHeader&&typeof e.abort=="function"}function GP(e,t,r){if(typeof t=="function")return GP(e,null,t);t||(t={}),r=O9(r||L9);var n=t.readable||t.readable!==!1&&e.readable,s=t.writable||t.writable!==!1&&e.writable,o=function(){e.writable||l()},a=e._writableState&&e._writableState.finished,l=function(){s=!1,a=!0,n||r.call(e)},c=e._readableState&&e._readableState.endEmitted,u=function(){n=!1,c=!0,s||r.call(e)},d=function(j){r.call(e,j)},f=function(){var j;if(n&&!c)return(!e._readableState||!e._readableState.ended)&&(j=new Hw),r.call(e,j);if(s&&!a)return(!e._writableState||!e._writableState.ended)&&(j=new Hw),r.call(e,j)},p=function(){e.req.on("finish",l)};return F9(e)?(e.on("complete",l),e.on("abort",f),e.req?p():e.on("request",p)):s&&!e._writableState&&(e.on("end",o),e.on("close",o)),e.on("end",u),e.on("finish",l),t.error!==!1&&e.on("error",d),e.on("close",f),function(){e.removeListener("complete",l),e.removeListener("abort",f),e.removeListener("request",p),e.req&&e.req.removeListener("finish",l),e.removeListener("end",o),e.removeListener("close",o),e.removeListener("finish",l),e.removeListener("end",u),e.removeListener("error",d),e.removeListener("close",f)}}var nv=GP,Dm,Kw;function U9(){if(Kw)return Dm;Kw=1;var e;function t(w,_,E){return _=r(_),_ in w?Object.defineProperty(w,_,{value:E,enumerable:!0,configurable:!0,writable:!0}):w[_]=E,w}function r(w){var _=n(w,"string");return typeof _=="symbol"?_:String(_)}function n(w,_){if(typeof w!="object"||w===null)return w;var E=w[Symbol.toPrimitive];if(E!==void 0){var I=E.call(w,_);if(typeof I!="object")return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return(_==="string"?String:Number)(w)}var s=nv,o=Symbol("lastResolve"),a=Symbol("lastReject"),l=Symbol("error"),c=Symbol("ended"),u=Symbol("lastPromise"),d=Symbol("handlePromise"),f=Symbol("stream");function p(w,_){return{value:w,done:_}}function v(w){var _=w[o];if(_!==null){var E=w[f].read();E!==null&&(w[u]=null,w[o]=null,w[a]=null,_(p(E,!1)))}}function j(w){process.nextTick(v,w)}function y(w,_){return function(E,I){w.then(function(){if(_[c]){E(p(void 0,!0));return}_[d](E,I)},I)}}var S=Object.getPrototypeOf(function(){}),h=Object.setPrototypeOf((e={get stream(){return this[f]},next:function(){var _=this,E=this[l];if(E!==null)return Promise.reject(E);if(this[c])return Promise.resolve(p(void 0,!0));if(this[f].destroyed)return new Promise(function(F,W){process.nextTick(function(){_[l]?W(_[l]):F(p(void 0,!0))})});var I=this[u],P;if(I)P=new Promise(y(I,this));else{var M=this[f].read();if(M!==null)return Promise.resolve(p(M,!1));P=new Promise(this[d])}return this[u]=P,P}},t(e,Symbol.asyncIterator,function(){return this}),t(e,"return",function(){var _=this;return new Promise(function(E,I){_[f].destroy(null,function(P){if(P){I(P);return}E(p(void 0,!0))})})}),e),S),g=function(_){var E,I=Object.create(h,(E={},t(E,f,{value:_,writable:!0}),t(E,o,{value:null,writable:!0}),t(E,a,{value:null,writable:!0}),t(E,l,{value:null,writable:!0}),t(E,c,{value:_._readableState.endEmitted,writable:!0}),t(E,d,{value:function(M,F){var W=I[f].read();W?(I[u]=null,I[o]=null,I[a]=null,M(p(W,!1))):(I[o]=M,I[a]=F)},writable:!0}),E));return I[u]=null,s(_,function(P){if(P&&P.code!=="ERR_STREAM_PREMATURE_CLOSE"){var M=I[a];M!==null&&(I[u]=null,I[o]=null,I[a]=null,M(P)),I[l]=P;return}var F=I[o];F!==null&&(I[u]=null,I[o]=null,I[a]=null,F(p(void 0,!0))),I[c]=!0}),_.on("readable",j.bind(null,I)),I};return Dm=g,Dm}var Mm,Gw;function $9(){return Gw||(Gw=1,Mm=function(){throw new Error("Readable.from is not available in the browser")}),Mm}var Om,Qw;function QP(){if(Qw)return Om;Qw=1,Om=F;var e;F.ReadableState=M,hf.EventEmitter;var t=function(k,K){return k.listeners(K).length},r=VP,n=Jo.Buffer,s=(typeof Us<"u"?Us:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function o(C){return n.from(C)}function a(C){return n.isBuffer(C)||C instanceof s}var l=hf,c;l&&l.debuglog?c=l.debuglog("stream"):c=function(){};var u=S9(),d=WP,f=HP,p=f.getHighWaterMark,v=ea.codes,j=v.ERR_INVALID_ARG_TYPE,y=v.ERR_STREAM_PUSH_AFTER_EOF,S=v.ERR_METHOD_NOT_IMPLEMENTED,h=v.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,g,w,_;vu(F,r);var E=d.errorOrDestroy,I=["error","close","destroy","pause","resume"];function P(C,k,K){if(typeof C.prependListener=="function")return C.prependListener(k,K);!C._events||!C._events[k]?C.on(k,K):Array.isArray(C._events[k])?C._events[k].unshift(K):C._events[k]=[K,C._events[k]]}function M(C,k,K){e=e||ll(),C=C||{},typeof K!="boolean"&&(K=k instanceof e),this.objectMode=!!C.objectMode,K&&(this.objectMode=this.objectMode||!!C.readableObjectMode),this.highWaterMark=p(this,C,"readableHighWaterMark",K),this.buffer=new u,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=C.emitClose!==!1,this.autoDestroy=!!C.autoDestroy,this.destroyed=!1,this.defaultEncoding=C.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,C.encoding&&(g||(g=qw().StringDecoder),this.decoder=new g(C.encoding),this.encoding=C.encoding)}function F(C){if(e=e||ll(),!(this instanceof F))return new F(C);var k=this instanceof e;this._readableState=new M(C,this,k),this.readable=!0,C&&(typeof C.read=="function"&&(this._read=C.read),typeof C.destroy=="function"&&(this._destroy=C.destroy)),r.call(this)}Object.defineProperty(F.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(k){this._readableState&&(this._readableState.destroyed=k)}}),F.prototype.destroy=d.destroy,F.prototype._undestroy=d.undestroy,F.prototype._destroy=function(C,k){k(C)},F.prototype.push=function(C,k){var K=this._readableState,ie;return K.objectMode?ie=!0:typeof C=="string"&&(k=k||K.defaultEncoding,k!==K.encoding&&(C=n.from(C,k),k=""),ie=!0),W(this,C,k,!1,ie)},F.prototype.unshift=function(C){return W(this,C,null,!0,!1)};function W(C,k,K,ie,De){c("readableAddChunk",k);var Pe=C._readableState;if(k===null)Pe.reading=!1,Z(C,Pe);else{var Me;if(De||(Me=q(Pe,k)),Me)E(C,Me);else if(Pe.objectMode||k&&k.length>0)if(typeof k!="string"&&!Pe.objectMode&&Object.getPrototypeOf(k)!==n.prototype&&(k=o(k)),ie)Pe.endEmitted?E(C,new h):re(C,Pe,k,!0);else if(Pe.ended)E(C,new y);else{if(Pe.destroyed)return!1;Pe.reading=!1,Pe.decoder&&!K?(k=Pe.decoder.write(k),Pe.objectMode||k.length!==0?re(C,Pe,k,!1):z(C,Pe)):re(C,Pe,k,!1)}else ie||(Pe.reading=!1,z(C,Pe))}return!Pe.ended&&(Pe.length<Pe.highWaterMark||Pe.length===0)}function re(C,k,K,ie){k.flowing&&k.length===0&&!k.sync?(k.awaitDrain=0,C.emit("data",K)):(k.length+=k.objectMode?1:K.length,ie?k.buffer.unshift(K):k.buffer.push(K),k.needReadable&&fe(C)),z(C,k)}function q(C,k){var K;return!a(k)&&typeof k!="string"&&k!==void 0&&!C.objectMode&&(K=new j("chunk",["string","Buffer","Uint8Array"],k)),K}F.prototype.isPaused=function(){return this._readableState.flowing===!1},F.prototype.setEncoding=function(C){g||(g=qw().StringDecoder);var k=new g(C);this._readableState.decoder=k,this._readableState.encoding=this._readableState.decoder.encoding;for(var K=this._readableState.buffer.head,ie="";K!==null;)ie+=k.write(K.data),K=K.next;return this._readableState.buffer.clear(),ie!==""&&this._readableState.buffer.push(ie),this._readableState.length=ie.length,this};var Y=1073741824;function G(C){return C>=Y?C=Y:(C--,C|=C>>>1,C|=C>>>2,C|=C>>>4,C|=C>>>8,C|=C>>>16,C++),C}function ne(C,k){return C<=0||k.length===0&&k.ended?0:k.objectMode?1:C!==C?k.flowing&&k.length?k.buffer.head.data.length:k.length:(C>k.highWaterMark&&(k.highWaterMark=G(C)),C<=k.length?C:k.ended?k.length:(k.needReadable=!0,0))}F.prototype.read=function(C){c("read",C),C=parseInt(C,10);var k=this._readableState,K=C;if(C!==0&&(k.emittedReadable=!1),C===0&&k.needReadable&&((k.highWaterMark!==0?k.length>=k.highWaterMark:k.length>0)||k.ended))return c("read: emitReadable",k.length,k.ended),k.length===0&&k.ended?Q(this):fe(this),null;if(C=ne(C,k),C===0&&k.ended)return k.length===0&&Q(this),null;var ie=k.needReadable;c("need readable",ie),(k.length===0||k.length-C<k.highWaterMark)&&(ie=!0,c("length less than watermark",ie)),k.ended||k.reading?(ie=!1,c("reading or ended",ie)):ie&&(c("do read"),k.reading=!0,k.sync=!0,k.length===0&&(k.needReadable=!0),this._read(k.highWaterMark),k.sync=!1,k.reading||(C=ne(K,k)));var De;return C>0?De=R(C,k):De=null,De===null?(k.needReadable=k.length<=k.highWaterMark,C=0):(k.length-=C,k.awaitDrain=0),k.length===0&&(k.ended||(k.needReadable=!0),K!==C&&k.ended&&Q(this)),De!==null&&this.emit("data",De),De};function Z(C,k){if(c("onEofChunk"),!k.ended){if(k.decoder){var K=k.decoder.end();K&&K.length&&(k.buffer.push(K),k.length+=k.objectMode?1:K.length)}k.ended=!0,k.sync?fe(C):(k.needReadable=!1,k.emittedReadable||(k.emittedReadable=!0,B(C)))}}function fe(C){var k=C._readableState;c("emitReadable",k.needReadable,k.emittedReadable),k.needReadable=!1,k.emittedReadable||(c("emitReadable",k.flowing),k.emittedReadable=!0,process.nextTick(B,C))}function B(C){var k=C._readableState;c("emitReadable_",k.destroyed,k.length,k.ended),!k.destroyed&&(k.length||k.ended)&&(C.emit("readable"),k.emittedReadable=!1),k.needReadable=!k.flowing&&!k.ended&&k.length<=k.highWaterMark,D(C)}function z(C,k){k.readingMore||(k.readingMore=!0,process.nextTick(ue,C,k))}function ue(C,k){for(;!k.reading&&!k.ended&&(k.length<k.highWaterMark||k.flowing&&k.length===0);){var K=k.length;if(c("maybeReadMore read 0"),C.read(0),K===k.length)break}k.readingMore=!1}F.prototype._read=function(C){E(this,new S("_read()"))},F.prototype.pipe=function(C,k){var K=this,ie=this._readableState;switch(ie.pipesCount){case 0:ie.pipes=C;break;case 1:ie.pipes=[ie.pipes,C];break;default:ie.pipes.push(C);break}ie.pipesCount+=1,c("pipe count=%d opts=%j",ie.pipesCount,k);var De=(!k||k.end!==!1)&&C!==process.stdout&&C!==process.stderr,Pe=De?se:ye;ie.endEmitted?process.nextTick(Pe):K.once("end",Pe),C.on("unpipe",Me);function Me(N,x){c("onunpipe"),N===K&&x&&x.hasUnpiped===!1&&(x.hasUnpiped=!0,gt())}function se(){c("onend"),C.end()}var ve=ae(K);C.on("drain",ve);var Fe=!1;function gt(){c("cleanup"),C.removeListener("close",V),C.removeListener("finish",pe),C.removeListener("drain",ve),C.removeListener("error",U),C.removeListener("unpipe",Me),K.removeListener("end",se),K.removeListener("end",ye),K.removeListener("data",A),Fe=!0,ie.awaitDrain&&(!C._writableState||C._writableState.needDrain)&&ve()}K.on("data",A);function A(N){c("ondata");var x=C.write(N);c("dest.write",x),x===!1&&((ie.pipesCount===1&&ie.pipes===C||ie.pipesCount>1&&le(ie.pipes,C)!==-1)&&!Fe&&(c("false write response, pause",ie.awaitDrain),ie.awaitDrain++),K.pause())}function U(N){c("onerror",N),ye(),C.removeListener("error",U),t(C,"error")===0&&E(C,N)}P(C,"error",U);function V(){C.removeListener("finish",pe),ye()}C.once("close",V);function pe(){c("onfinish"),C.removeListener("close",V),ye()}C.once("finish",pe);function ye(){c("unpipe"),K.unpipe(C)}return C.emit("pipe",K),ie.flowing||(c("pipe resume"),K.resume()),C};function ae(C){return function(){var K=C._readableState;c("pipeOnDrain",K.awaitDrain),K.awaitDrain&&K.awaitDrain--,K.awaitDrain===0&&t(C,"data")&&(K.flowing=!0,D(C))}}F.prototype.unpipe=function(C){var k=this._readableState,K={hasUnpiped:!1};if(k.pipesCount===0)return this;if(k.pipesCount===1)return C&&C!==k.pipes?this:(C||(C=k.pipes),k.pipes=null,k.pipesCount=0,k.flowing=!1,C&&C.emit("unpipe",this,K),this);if(!C){var ie=k.pipes,De=k.pipesCount;k.pipes=null,k.pipesCount=0,k.flowing=!1;for(var Pe=0;Pe<De;Pe++)ie[Pe].emit("unpipe",this,{hasUnpiped:!1});return this}var Me=le(k.pipes,C);return Me===-1?this:(k.pipes.splice(Me,1),k.pipesCount-=1,k.pipesCount===1&&(k.pipes=k.pipes[0]),C.emit("unpipe",this,K),this)},F.prototype.on=function(C,k){var K=r.prototype.on.call(this,C,k),ie=this._readableState;return C==="data"?(ie.readableListening=this.listenerCount("readable")>0,ie.flowing!==!1&&this.resume()):C==="readable"&&!ie.endEmitted&&!ie.readableListening&&(ie.readableListening=ie.needReadable=!0,ie.flowing=!1,ie.emittedReadable=!1,c("on readable",ie.length,ie.reading),ie.length?fe(this):ie.reading||process.nextTick(ee,this)),K},F.prototype.addListener=F.prototype.on,F.prototype.removeListener=function(C,k){var K=r.prototype.removeListener.call(this,C,k);return C==="readable"&&process.nextTick(X,this),K},F.prototype.removeAllListeners=function(C){var k=r.prototype.removeAllListeners.apply(this,arguments);return(C==="readable"||C===void 0)&&process.nextTick(X,this),k};function X(C){var k=C._readableState;k.readableListening=C.listenerCount("readable")>0,k.resumeScheduled&&!k.paused?k.flowing=!0:C.listenerCount("data")>0&&C.resume()}function ee(C){c("readable nexttick read 0"),C.read(0)}F.prototype.resume=function(){var C=this._readableState;return C.flowing||(c("resume"),C.flowing=!C.readableListening,je(this,C)),C.paused=!1,this};function je(C,k){k.resumeScheduled||(k.resumeScheduled=!0,process.nextTick(Ce,C,k))}function Ce(C,k){c("resume",k.reading),k.reading||C.read(0),k.resumeScheduled=!1,C.emit("resume"),D(C),k.flowing&&!k.reading&&C.read(0)}F.prototype.pause=function(){return c("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(c("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function D(C){var k=C._readableState;for(c("flow",k.flowing);k.flowing&&C.read()!==null;);}F.prototype.wrap=function(C){var k=this,K=this._readableState,ie=!1;C.on("end",function(){if(c("wrapped end"),K.decoder&&!K.ended){var Me=K.decoder.end();Me&&Me.length&&k.push(Me)}k.push(null)}),C.on("data",function(Me){if(c("wrapped data"),K.decoder&&(Me=K.decoder.write(Me)),!(K.objectMode&&Me==null)&&!(!K.objectMode&&(!Me||!Me.length))){var se=k.push(Me);se||(ie=!0,C.pause())}});for(var De in C)this[De]===void 0&&typeof C[De]=="function"&&(this[De]=function(se){return function(){return C[se].apply(C,arguments)}}(De));for(var Pe=0;Pe<I.length;Pe++)C.on(I[Pe],this.emit.bind(this,I[Pe]));return this._read=function(Me){c("wrapped _read",Me),ie&&(ie=!1,C.resume())},this},typeof Symbol=="function"&&(F.prototype[Symbol.asyncIterator]=function(){return w===void 0&&(w=U9()),w(this)}),Object.defineProperty(F.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(F.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(F.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(k){this._readableState&&(this._readableState.flowing=k)}}),F._fromList=R,Object.defineProperty(F.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function R(C,k){if(k.length===0)return null;var K;return k.objectMode?K=k.buffer.shift():!C||C>=k.length?(k.decoder?K=k.buffer.join(""):k.buffer.length===1?K=k.buffer.first():K=k.buffer.concat(k.length),k.buffer.clear()):K=k.buffer.consume(C,k.decoder),K}function Q(C){var k=C._readableState;c("endReadable",k.endEmitted),k.endEmitted||(k.ended=!0,process.nextTick(de,k,C))}function de(C,k){if(c("endReadableNT",C.endEmitted,C.length),!C.endEmitted&&C.length===0&&(C.endEmitted=!0,k.readable=!1,k.emit("end"),C.autoDestroy)){var K=k._writableState;(!K||K.autoDestroy&&K.finished)&&k.destroy()}}typeof Symbol=="function"&&(F.from=function(C,k){return _===void 0&&(_=$9()),_(F,C,k)});function le(C,k){for(var K=0,ie=C.length;K<ie;K++)if(C[K]===k)return K;return-1}return Om}var YP=Ks,jh=ea.codes,B9=jh.ERR_METHOD_NOT_IMPLEMENTED,z9=jh.ERR_MULTIPLE_CALLBACK,V9=jh.ERR_TRANSFORM_ALREADY_TRANSFORMING,W9=jh.ERR_TRANSFORM_WITH_LENGTH_0,Nh=ll();vu(Ks,Nh);function q9(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(n===null)return this.emit("error",new z9);r.writechunk=null,r.writecb=null,t!=null&&this.push(t),n(e);var s=this._readableState;s.reading=!1,(s.needReadable||s.length<s.highWaterMark)&&this._read(s.highWaterMark)}function Ks(e){if(!(this instanceof Ks))return new Ks(e);Nh.call(this,e),this._transformState={afterTransform:q9.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&(typeof e.transform=="function"&&(this._transform=e.transform),typeof e.flush=="function"&&(this._flush=e.flush)),this.on("prefinish",H9)}function H9(){var e=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(t,r){Yw(e,t,r)}):Yw(this,null,null)}Ks.prototype.push=function(e,t){return this._transformState.needTransform=!1,Nh.prototype.push.call(this,e,t)};Ks.prototype._transform=function(e,t,r){r(new B9("_transform()"))};Ks.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var s=this._readableState;(n.needTransform||s.needReadable||s.length<s.highWaterMark)&&this._read(s.highWaterMark)}};Ks.prototype._read=function(e){var t=this._transformState;t.writechunk!==null&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0};Ks.prototype._destroy=function(e,t){Nh.prototype._destroy.call(this,e,function(r){t(r)})};function Yw(e,t,r){if(t)return e.emit("error",t);if(r!=null&&e.push(r),e._writableState.length)throw new W9;if(e._transformState.transforming)throw new V9;return e.push(null)}var K9=Lc,ZP=YP;vu(Lc,ZP);function Lc(e){if(!(this instanceof Lc))return new Lc(e);ZP.call(this,e)}Lc.prototype._transform=function(e,t,r){r(null,e)};var Lm;function G9(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}var XP=ea.codes,Q9=XP.ERR_MISSING_ARGS,Y9=XP.ERR_STREAM_DESTROYED;function Zw(e){if(e)throw e}function Z9(e){return e.setHeader&&typeof e.abort=="function"}function X9(e,t,r,n){n=G9(n);var s=!1;e.on("close",function(){s=!0}),Lm===void 0&&(Lm=nv),Lm(e,{readable:t,writable:r},function(a){if(a)return n(a);s=!0,n()});var o=!1;return function(a){if(!s&&!o){if(o=!0,Z9(e))return e.abort();if(typeof e.destroy=="function")return e.destroy();n(a||new Y9("pipe"))}}}function Xw(e){e()}function J9(e,t){return e.pipe(t)}function ez(e){return!e.length||typeof e[e.length-1]!="function"?Zw:e.pop()}function tz(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=ez(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new Q9("streams");var s,o=t.map(function(a,l){var c=l<t.length-1,u=l>0;return X9(a,c,u,function(d){s||(s=d),d&&o.forEach(Xw),!c&&(o.forEach(Xw),n(s))})});return t.reduce(J9)}var rz=tz;(function(e,t){t=e.exports=QP(),t.Stream=t,t.Readable=t,t.Writable=KP(),t.Duplex=ll(),t.Transform=YP,t.PassThrough=K9,t.finished=nv,t.pipeline=rz})(kg,kg.exports);var nz=kg.exports;/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */let Jw;var sz=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:Us):e=>(Jw||(Jw=Promise.resolve())).then(e).catch(t=>setTimeout(()=>{throw t},0));function eb(e,t){for(const r in t)Object.defineProperty(e,r,{value:t[r],enumerable:!0,configurable:!0});return e}function iz(e,t,r){if(!e||typeof e=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof t=="object"&&(r=t,t=""),t&&(r.code=t);try{return eb(e,r)}catch{r.message=e.message,r.stack=e.stack;const s=function(){};return s.prototype=Object.create(Object.getPrototypeOf(e)),eb(new s,r)}}var oz=iz;/*! simple-peer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */const az=s9("simple-peer"),JP=i9,tb=v9,lz=nz,Fm=sz,ot=oz,{Buffer:cz}=Jo,Um=64*1024,uz=5*1e3,dz=5*1e3;function rb(e){return e.replace(/a=ice-options:trickle\s\n/g,"")}function fz(e){console.warn(e)}class Fo extends lz.Duplex{constructor(t){if(t=Object.assign({allowHalfOpen:!1},t),super(t),this._id=tb(4).toString("hex").slice(0,7),this._debug("new peer %o",t),this.channelName=t.initiator?t.channelName||tb(20).toString("hex"):null,this.initiator=t.initiator||!1,this.channelConfig=t.channelConfig||Fo.channelConfig,this.channelNegotiated=this.channelConfig.negotiated,this.config=Object.assign({},Fo.config,t.config),this.offerOptions=t.offerOptions||{},this.answerOptions=t.answerOptions||{},this.sdpTransform=t.sdpTransform||(r=>r),this.streams=t.streams||(t.stream?[t.stream]:[]),this.trickle=t.trickle!==void 0?t.trickle:!0,this.allowHalfTrickle=t.allowHalfTrickle!==void 0?t.allowHalfTrickle:!1,this.iceCompleteTimeout=t.iceCompleteTimeout||uz,this.destroyed=!1,this.destroying=!1,this._connected=!1,this.remoteAddress=void 0,this.remoteFamily=void 0,this.remotePort=void 0,this.localAddress=void 0,this.localFamily=void 0,this.localPort=void 0,this._wrtc=t.wrtc&&typeof t.wrtc=="object"?t.wrtc:JP(),!this._wrtc)throw ot(typeof window>"u"?new Error("No WebRTC support: Specify `opts.wrtc` option in this environment"):new Error("No WebRTC support: Not a supported browser"),"ERR_WEBRTC_SUPPORT");this._pcReady=!1,this._channelReady=!1,this._iceComplete=!1,this._iceCompleteTimer=null,this._channel=null,this._pendingCandidates=[],this._isNegotiating=!1,this._firstNegotiation=!0,this._batchedNegotiation=!1,this._queuedNegotiation=!1,this._sendersAwaitingStable=[],this._senderMap=new Map,this._closingInterval=null,this._remoteTracks=[],this._remoteStreams=[],this._chunk=null,this._cb=null,this._interval=null;try{this._pc=new this._wrtc.RTCPeerConnection(this.config)}catch(r){this.destroy(ot(r,"ERR_PC_CONSTRUCTOR"));return}this._isReactNativeWebrtc=typeof this._pc._peerConnectionId=="number",this._pc.oniceconnectionstatechange=()=>{this._onIceStateChange()},this._pc.onicegatheringstatechange=()=>{this._onIceStateChange()},this._pc.onconnectionstatechange=()=>{this._onConnectionStateChange()},this._pc.onsignalingstatechange=()=>{this._onSignalingStateChange()},this._pc.onicecandidate=r=>{this._onIceCandidate(r)},typeof this._pc.peerIdentity=="object"&&this._pc.peerIdentity.catch(r=>{this.destroy(ot(r,"ERR_PC_PEER_IDENTITY"))}),this.initiator||this.channelNegotiated?this._setupData({channel:this._pc.createDataChannel(this.channelName,this.channelConfig)}):this._pc.ondatachannel=r=>{this._setupData(r)},this.streams&&this.streams.forEach(r=>{this.addStream(r)}),this._pc.ontrack=r=>{this._onTrack(r)},this._debug("initial negotiation"),this._needsNegotiation(),this._onFinishBound=()=>{this._onFinish()},this.once("finish",this._onFinishBound)}get bufferSize(){return this._channel&&this._channel.bufferedAmount||0}get connected(){return this._connected&&this._channel.readyState==="open"}address(){return{port:this.localPort,family:this.localFamily,address:this.localAddress}}signal(t){if(!this.destroying){if(this.destroyed)throw ot(new Error("cannot signal after peer is destroyed"),"ERR_DESTROYED");if(typeof t=="string")try{t=JSON.parse(t)}catch{t={}}this._debug("signal()"),t.renegotiate&&this.initiator&&(this._debug("got request to renegotiate"),this._needsNegotiation()),t.transceiverRequest&&this.initiator&&(this._debug("got request for transceiver"),this.addTransceiver(t.transceiverRequest.kind,t.transceiverRequest.init)),t.candidate&&(this._pc.remoteDescription&&this._pc.remoteDescription.type?this._addIceCandidate(t.candidate):this._pendingCandidates.push(t.candidate)),t.sdp&&this._pc.setRemoteDescription(new this._wrtc.RTCSessionDescription(t)).then(()=>{this.destroyed||(this._pendingCandidates.forEach(r=>{this._addIceCandidate(r)}),this._pendingCandidates=[],this._pc.remoteDescription.type==="offer"&&this._createAnswer())}).catch(r=>{this.destroy(ot(r,"ERR_SET_REMOTE_DESCRIPTION"))}),!t.sdp&&!t.candidate&&!t.renegotiate&&!t.transceiverRequest&&this.destroy(ot(new Error("signal() called with invalid signal data"),"ERR_SIGNALING"))}}_addIceCandidate(t){const r=new this._wrtc.RTCIceCandidate(t);this._pc.addIceCandidate(r).catch(n=>{!r.address||r.address.endsWith(".local")?fz("Ignoring unsupported ICE candidate."):this.destroy(ot(n,"ERR_ADD_ICE_CANDIDATE"))})}send(t){if(!this.destroying){if(this.destroyed)throw ot(new Error("cannot send after peer is destroyed"),"ERR_DESTROYED");this._channel.send(t)}}addTransceiver(t,r){if(!this.destroying){if(this.destroyed)throw ot(new Error("cannot addTransceiver after peer is destroyed"),"ERR_DESTROYED");if(this._debug("addTransceiver()"),this.initiator)try{this._pc.addTransceiver(t,r),this._needsNegotiation()}catch(n){this.destroy(ot(n,"ERR_ADD_TRANSCEIVER"))}else this.emit("signal",{type:"transceiverRequest",transceiverRequest:{kind:t,init:r}})}}addStream(t){if(!this.destroying){if(this.destroyed)throw ot(new Error("cannot addStream after peer is destroyed"),"ERR_DESTROYED");this._debug("addStream()"),t.getTracks().forEach(r=>{this.addTrack(r,t)})}}addTrack(t,r){if(this.destroying)return;if(this.destroyed)throw ot(new Error("cannot addTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("addTrack()");const n=this._senderMap.get(t)||new Map;let s=n.get(r);if(!s)s=this._pc.addTrack(t,r),n.set(r,s),this._senderMap.set(t,n),this._needsNegotiation();else throw s.removed?ot(new Error("Track has been removed. You should enable/disable tracks that you want to re-add."),"ERR_SENDER_REMOVED"):ot(new Error("Track has already been added to that stream."),"ERR_SENDER_ALREADY_ADDED")}replaceTrack(t,r,n){if(this.destroying)return;if(this.destroyed)throw ot(new Error("cannot replaceTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("replaceTrack()");const s=this._senderMap.get(t),o=s?s.get(n):null;if(!o)throw ot(new Error("Cannot replace track that was never added."),"ERR_TRACK_NOT_ADDED");r&&this._senderMap.set(r,s),o.replaceTrack!=null?o.replaceTrack(r):this.destroy(ot(new Error("replaceTrack is not supported in this browser"),"ERR_UNSUPPORTED_REPLACETRACK"))}removeTrack(t,r){if(this.destroying)return;if(this.destroyed)throw ot(new Error("cannot removeTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSender()");const n=this._senderMap.get(t),s=n?n.get(r):null;if(!s)throw ot(new Error("Cannot remove track that was never added."),"ERR_TRACK_NOT_ADDED");try{s.removed=!0,this._pc.removeTrack(s)}catch(o){o.name==="NS_ERROR_UNEXPECTED"?this._sendersAwaitingStable.push(s):this.destroy(ot(o,"ERR_REMOVE_TRACK"))}this._needsNegotiation()}removeStream(t){if(!this.destroying){if(this.destroyed)throw ot(new Error("cannot removeStream after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSenders()"),t.getTracks().forEach(r=>{this.removeTrack(r,t)})}}_needsNegotiation(){this._debug("_needsNegotiation"),!this._batchedNegotiation&&(this._batchedNegotiation=!0,Fm(()=>{this._batchedNegotiation=!1,this.initiator||!this._firstNegotiation?(this._debug("starting batched negotiation"),this.negotiate()):this._debug("non-initiator initial negotiation request discarded"),this._firstNegotiation=!1}))}negotiate(){if(!this.destroying){if(this.destroyed)throw ot(new Error("cannot negotiate after peer is destroyed"),"ERR_DESTROYED");this.initiator?this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("start negotiation"),setTimeout(()=>{this._createOffer()},0)):this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("requesting negotiation from initiator"),this.emit("signal",{type:"renegotiate",renegotiate:!0})),this._isNegotiating=!0}}destroy(t){this._destroy(t,()=>{})}_destroy(t,r){this.destroyed||this.destroying||(this.destroying=!0,this._debug("destroying (error: %s)",t&&(t.message||t)),Fm(()=>{if(this.destroyed=!0,this.destroying=!1,this._debug("destroy (error: %s)",t&&(t.message||t)),this.readable=this.writable=!1,this._readableState.ended||this.push(null),this._writableState.finished||this.end(),this._connected=!1,this._pcReady=!1,this._channelReady=!1,this._remoteTracks=null,this._remoteStreams=null,this._senderMap=null,clearInterval(this._closingInterval),this._closingInterval=null,clearInterval(this._interval),this._interval=null,this._chunk=null,this._cb=null,this._onFinishBound&&this.removeListener("finish",this._onFinishBound),this._onFinishBound=null,this._channel){try{this._channel.close()}catch{}this._channel.onmessage=null,this._channel.onopen=null,this._channel.onclose=null,this._channel.onerror=null}if(this._pc){try{this._pc.close()}catch{}this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ontrack=null,this._pc.ondatachannel=null}this._pc=null,this._channel=null,t&&this.emit("error",t),this.emit("close"),r()}))}_setupData(t){if(!t.channel)return this.destroy(ot(new Error("Data channel event is missing `channel` property"),"ERR_DATA_CHANNEL"));this._channel=t.channel,this._channel.binaryType="arraybuffer",typeof this._channel.bufferedAmountLowThreshold=="number"&&(this._channel.bufferedAmountLowThreshold=Um),this.channelName=this._channel.label,this._channel.onmessage=n=>{this._onChannelMessage(n)},this._channel.onbufferedamountlow=()=>{this._onChannelBufferedAmountLow()},this._channel.onopen=()=>{this._onChannelOpen()},this._channel.onclose=()=>{this._onChannelClose()},this._channel.onerror=n=>{const s=n.error instanceof Error?n.error:new Error(`Datachannel error: ${n.message} ${n.filename}:${n.lineno}:${n.colno}`);this.destroy(ot(s,"ERR_DATA_CHANNEL"))};let r=!1;this._closingInterval=setInterval(()=>{this._channel&&this._channel.readyState==="closing"?(r&&this._onChannelClose(),r=!0):r=!1},dz)}_read(){}_write(t,r,n){if(this.destroyed)return n(ot(new Error("cannot write after peer is destroyed"),"ERR_DATA_CHANNEL"));if(this._connected){try{this.send(t)}catch(s){return this.destroy(ot(s,"ERR_DATA_CHANNEL"))}this._channel.bufferedAmount>Um?(this._debug("start backpressure: bufferedAmount %d",this._channel.bufferedAmount),this._cb=n):n(null)}else this._debug("write before connect"),this._chunk=t,this._cb=n}_onFinish(){if(this.destroyed)return;const t=()=>{setTimeout(()=>this.destroy(),1e3)};this._connected?t():this.once("connect",t)}_startIceCompleteTimeout(){this.destroyed||this._iceCompleteTimer||(this._debug("started iceComplete timeout"),this._iceCompleteTimer=setTimeout(()=>{this._iceComplete||(this._iceComplete=!0,this._debug("iceComplete timeout completed"),this.emit("iceTimeout"),this.emit("_iceComplete"))},this.iceCompleteTimeout))}_createOffer(){this.destroyed||this._pc.createOffer(this.offerOptions).then(t=>{if(this.destroyed)return;!this.trickle&&!this.allowHalfTrickle&&(t.sdp=rb(t.sdp)),t.sdp=this.sdpTransform(t.sdp);const r=()=>{if(this.destroyed)return;const o=this._pc.localDescription||t;this._debug("signal"),this.emit("signal",{type:o.type,sdp:o.sdp})},n=()=>{this._debug("createOffer success"),!this.destroyed&&(this.trickle||this._iceComplete?r():this.once("_iceComplete",r))},s=o=>{this.destroy(ot(o,"ERR_SET_LOCAL_DESCRIPTION"))};this._pc.setLocalDescription(t).then(n).catch(s)}).catch(t=>{this.destroy(ot(t,"ERR_CREATE_OFFER"))})}_requestMissingTransceivers(){this._pc.getTransceivers&&this._pc.getTransceivers().forEach(t=>{!t.mid&&t.sender.track&&!t.requested&&(t.requested=!0,this.addTransceiver(t.sender.track.kind))})}_createAnswer(){this.destroyed||this._pc.createAnswer(this.answerOptions).then(t=>{if(this.destroyed)return;!this.trickle&&!this.allowHalfTrickle&&(t.sdp=rb(t.sdp)),t.sdp=this.sdpTransform(t.sdp);const r=()=>{if(this.destroyed)return;const o=this._pc.localDescription||t;this._debug("signal"),this.emit("signal",{type:o.type,sdp:o.sdp}),this.initiator||this._requestMissingTransceivers()},n=()=>{this.destroyed||(this.trickle||this._iceComplete?r():this.once("_iceComplete",r))},s=o=>{this.destroy(ot(o,"ERR_SET_LOCAL_DESCRIPTION"))};this._pc.setLocalDescription(t).then(n).catch(s)}).catch(t=>{this.destroy(ot(t,"ERR_CREATE_ANSWER"))})}_onConnectionStateChange(){this.destroyed||this._pc.connectionState==="failed"&&this.destroy(ot(new Error("Connection failed."),"ERR_CONNECTION_FAILURE"))}_onIceStateChange(){if(this.destroyed)return;const t=this._pc.iceConnectionState,r=this._pc.iceGatheringState;this._debug("iceStateChange (connection: %s) (gathering: %s)",t,r),this.emit("iceStateChange",t,r),(t==="connected"||t==="completed")&&(this._pcReady=!0,this._maybeReady()),t==="failed"&&this.destroy(ot(new Error("Ice connection failed."),"ERR_ICE_CONNECTION_FAILURE")),t==="closed"&&this.destroy(ot(new Error("Ice connection closed."),"ERR_ICE_CONNECTION_CLOSED"))}getStats(t){const r=n=>(Object.prototype.toString.call(n.values)==="[object Array]"&&n.values.forEach(s=>{Object.assign(n,s)}),n);this._pc.getStats.length===0||this._isReactNativeWebrtc?this._pc.getStats().then(n=>{const s=[];n.forEach(o=>{s.push(r(o))}),t(null,s)},n=>t(n)):this._pc.getStats.length>0?this._pc.getStats(n=>{if(this.destroyed)return;const s=[];n.result().forEach(o=>{const a={};o.names().forEach(l=>{a[l]=o.stat(l)}),a.id=o.id,a.type=o.type,a.timestamp=o.timestamp,s.push(r(a))}),t(null,s)},n=>t(n)):t(null,[])}_maybeReady(){if(this._debug("maybeReady pc %s channel %s",this._pcReady,this._channelReady),this._connected||this._connecting||!this._pcReady||!this._channelReady)return;this._connecting=!0;const t=()=>{this.destroyed||this.getStats((r,n)=>{if(this.destroyed)return;r&&(n=[]);const s={},o={},a={};let l=!1;n.forEach(u=>{(u.type==="remotecandidate"||u.type==="remote-candidate")&&(s[u.id]=u),(u.type==="localcandidate"||u.type==="local-candidate")&&(o[u.id]=u),(u.type==="candidatepair"||u.type==="candidate-pair")&&(a[u.id]=u)});const c=u=>{l=!0;let d=o[u.localCandidateId];d&&(d.ip||d.address)?(this.localAddress=d.ip||d.address,this.localPort=Number(d.port)):d&&d.ipAddress?(this.localAddress=d.ipAddress,this.localPort=Number(d.portNumber)):typeof u.googLocalAddress=="string"&&(d=u.googLocalAddress.split(":"),this.localAddress=d[0],this.localPort=Number(d[1])),this.localAddress&&(this.localFamily=this.localAddress.includes(":")?"IPv6":"IPv4");let f=s[u.remoteCandidateId];f&&(f.ip||f.address)?(this.remoteAddress=f.ip||f.address,this.remotePort=Number(f.port)):f&&f.ipAddress?(this.remoteAddress=f.ipAddress,this.remotePort=Number(f.portNumber)):typeof u.googRemoteAddress=="string"&&(f=u.googRemoteAddress.split(":"),this.remoteAddress=f[0],this.remotePort=Number(f[1])),this.remoteAddress&&(this.remoteFamily=this.remoteAddress.includes(":")?"IPv6":"IPv4"),this._debug("connect local: %s:%s remote: %s:%s",this.localAddress,this.localPort,this.remoteAddress,this.remotePort)};if(n.forEach(u=>{u.type==="transport"&&u.selectedCandidatePairId&&c(a[u.selectedCandidatePairId]),(u.type==="googCandidatePair"&&u.googActiveConnection==="true"||(u.type==="candidatepair"||u.type==="candidate-pair")&&u.selected)&&c(u)}),!l&&(!Object.keys(a).length||Object.keys(o).length)){setTimeout(t,100);return}else this._connecting=!1,this._connected=!0;if(this._chunk){try{this.send(this._chunk)}catch(d){return this.destroy(ot(d,"ERR_DATA_CHANNEL"))}this._chunk=null,this._debug('sent chunk from "write before connect"');const u=this._cb;this._cb=null,u(null)}typeof this._channel.bufferedAmountLowThreshold!="number"&&(this._interval=setInterval(()=>this._onInterval(),150),this._interval.unref&&this._interval.unref()),this._debug("connect"),this.emit("connect")})};t()}_onInterval(){!this._cb||!this._channel||this._channel.bufferedAmount>Um||this._onChannelBufferedAmountLow()}_onSignalingStateChange(){this.destroyed||(this._pc.signalingState==="stable"&&(this._isNegotiating=!1,this._debug("flushing sender queue",this._sendersAwaitingStable),this._sendersAwaitingStable.forEach(t=>{this._pc.removeTrack(t),this._queuedNegotiation=!0}),this._sendersAwaitingStable=[],this._queuedNegotiation?(this._debug("flushing negotiation queue"),this._queuedNegotiation=!1,this._needsNegotiation()):(this._debug("negotiated"),this.emit("negotiated"))),this._debug("signalingStateChange %s",this._pc.signalingState),this.emit("signalingStateChange",this._pc.signalingState))}_onIceCandidate(t){this.destroyed||(t.candidate&&this.trickle?this.emit("signal",{type:"candidate",candidate:{candidate:t.candidate.candidate,sdpMLineIndex:t.candidate.sdpMLineIndex,sdpMid:t.candidate.sdpMid}}):!t.candidate&&!this._iceComplete&&(this._iceComplete=!0,this.emit("_iceComplete")),t.candidate&&this._startIceCompleteTimeout())}_onChannelMessage(t){if(this.destroyed)return;let r=t.data;r instanceof ArrayBuffer&&(r=cz.from(r)),this.push(r)}_onChannelBufferedAmountLow(){if(this.destroyed||!this._cb)return;this._debug("ending backpressure: bufferedAmount %d",this._channel.bufferedAmount);const t=this._cb;this._cb=null,t(null)}_onChannelOpen(){this._connected||this.destroyed||(this._debug("on channel open"),this._channelReady=!0,this._maybeReady())}_onChannelClose(){this.destroyed||(this._debug("on channel close"),this.destroy())}_onTrack(t){this.destroyed||t.streams.forEach(r=>{this._debug("on track"),this.emit("track",t.track,r),this._remoteTracks.push({track:t.track,stream:r}),!this._remoteStreams.some(n=>n.id===r.id)&&(this._remoteStreams.push(r),Fm(()=>{this._debug("on stream"),this.emit("stream",r)}))})}_debug(){const t=[].slice.call(arguments);t[0]="["+this._id+"] "+t[0],az.apply(null,t)}}Fo.WEBRTC_SUPPORT=!!JP();Fo.config={iceServers:[{urls:["stun:stun.l.google.com:19302","stun:global.stun.twilio.com:3478"]}],sdpSemantics:"unified-plan"};Fo.channelConfig={};var hz=Fo;const nb=Xg(hz);var sv="Tabs",[mz,SH]=Fr(sv,[dh]),eR=dh(),[pz,iv]=mz(sv),tR=m.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,onValueChange:s,defaultValue:o,orientation:a="horizontal",dir:l,activationMode:c="automatic",...u}=e,d=du(l),[f,p]=Hn({prop:n,onChange:s,defaultProp:o});return i.jsx(pz,{scope:r,baseId:wn(),value:f,onValueChange:p,orientation:a,dir:d,activationMode:c,children:i.jsx(Le.div,{dir:d,"data-orientation":a,...u,ref:t})})});tR.displayName=sv;var rR="TabsList",nR=m.forwardRef((e,t)=>{const{__scopeTabs:r,loop:n=!0,...s}=e,o=iv(rR,r),a=eR(r);return i.jsx(QE,{asChild:!0,...a,orientation:o.orientation,dir:o.dir,loop:n,children:i.jsx(Le.div,{role:"tablist","aria-orientation":o.orientation,...s,ref:t})})});nR.displayName=rR;var sR="TabsTrigger",iR=m.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,disabled:s=!1,...o}=e,a=iv(sR,r),l=eR(r),c=lR(a.baseId,n),u=cR(a.baseId,n),d=n===a.value;return i.jsx(YE,{asChild:!0,...l,focusable:!s,active:d,children:i.jsx(Le.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":u,"data-state":d?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:c,...o,ref:t,onMouseDown:xe(e.onMouseDown,f=>{!s&&f.button===0&&f.ctrlKey===!1?a.onValueChange(n):f.preventDefault()}),onKeyDown:xe(e.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&a.onValueChange(n)}),onFocus:xe(e.onFocus,()=>{const f=a.activationMode!=="manual";!d&&!s&&f&&a.onValueChange(n)})})})});iR.displayName=sR;var oR="TabsContent",aR=m.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,forceMount:s,children:o,...a}=e,l=iv(oR,r),c=lR(l.baseId,n),u=cR(l.baseId,n),d=n===l.value,f=m.useRef(d);return m.useEffect(()=>{const p=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(p)},[]),i.jsx(ln,{present:s||d,children:({present:p})=>i.jsx(Le.div,{"data-state":d?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!p,id:u,tabIndex:0,...a,ref:t,style:{...e.style,animationDuration:f.current?"0s":void 0},children:p&&o})})});aR.displayName=oR;function lR(e,t){return`${e}-trigger-${t}`}function cR(e,t){return`${e}-content-${t}`}var gz=tR,uR=nR,dR=iR,fR=aR;const Cn=gz,cn=m.forwardRef(({className:e,...t},r)=>i.jsx(uR,{ref:r,className:we("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));cn.displayName=uR.displayName;const rt=m.forwardRef(({className:e,...t},r)=>i.jsx(dR,{ref:r,className:we("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));rt.displayName=dR.displayName;const nt=m.forwardRef(({className:e,...t},r)=>i.jsx(fR,{ref:r,className:we("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));nt.displayName=fR.displayName;var yz="Label",hR=m.forwardRef((e,t)=>i.jsx(Le.label,{...e,ref:t,onMouseDown:r=>{var s;r.target.closest("button, input, select, textarea")||((s=e.onMouseDown)==null||s.call(e,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));hR.displayName=yz;var mR=hR;const xz=cu("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Nt=m.forwardRef(({className:e,...t},r)=>i.jsx(mR,{ref:r,className:we(xz(),e),...t}));Nt.displayName=mR.displayName;var vz=[" ","Enter","ArrowUp","ArrowDown"],wz=[" ","Enter"],wu="Select",[_h,Ch,bz]=au(wu),[jl,jH]=Fr(wu,[bz,Zi]),Eh=Zi(),[Sz,Ji]=jl(wu),[jz,Nz]=jl(wu),pR=e=>{const{__scopeSelect:t,children:r,open:n,defaultOpen:s,onOpenChange:o,value:a,defaultValue:l,onValueChange:c,dir:u,name:d,autoComplete:f,disabled:p,required:v,form:j}=e,y=Eh(t),[S,h]=m.useState(null),[g,w]=m.useState(null),[_,E]=m.useState(!1),I=du(u),[P=!1,M]=Hn({prop:n,defaultProp:s,onChange:o}),[F,W]=Hn({prop:a,defaultProp:l,onChange:c}),re=m.useRef(null),q=S?j||!!S.closest("form"):!0,[Y,G]=m.useState(new Set),ne=Array.from(Y).map(Z=>Z.props.value).join(";");return i.jsx(ah,{...y,children:i.jsxs(Sz,{required:v,scope:t,trigger:S,onTriggerChange:h,valueNode:g,onValueNodeChange:w,valueNodeHasChildren:_,onValueNodeHasChildrenChange:E,contentId:wn(),value:F,onValueChange:W,open:P,onOpenChange:M,dir:I,triggerPointerDownPosRef:re,disabled:p,children:[i.jsx(_h.Provider,{scope:t,children:i.jsx(jz,{scope:e.__scopeSelect,onNativeOptionAdd:m.useCallback(Z=>{G(fe=>new Set(fe).add(Z))},[]),onNativeOptionRemove:m.useCallback(Z=>{G(fe=>{const B=new Set(fe);return B.delete(Z),B})},[]),children:r})}),q?i.jsxs($R,{"aria-hidden":!0,required:v,tabIndex:-1,name:d,autoComplete:f,value:F,onChange:Z=>W(Z.target.value),disabled:p,form:j,children:[F===void 0?i.jsx("option",{value:""}):null,Array.from(Y)]},ne):null]})})};pR.displayName=wu;var gR="SelectTrigger",yR=m.forwardRef((e,t)=>{const{__scopeSelect:r,disabled:n=!1,...s}=e,o=Eh(r),a=Ji(gR,r),l=a.disabled||n,c=Ze(t,a.onTriggerChange),u=Ch(r),d=m.useRef("touch"),[f,p,v]=BR(y=>{const S=u().filter(w=>!w.disabled),h=S.find(w=>w.value===a.value),g=zR(S,y,h);g!==void 0&&a.onValueChange(g.value)}),j=y=>{l||(a.onOpenChange(!0),v()),y&&(a.triggerPointerDownPosRef.current={x:Math.round(y.pageX),y:Math.round(y.pageY)})};return i.jsx(mu,{asChild:!0,...o,children:i.jsx(Le.button,{type:"button",role:"combobox","aria-controls":a.contentId,"aria-expanded":a.open,"aria-required":a.required,"aria-autocomplete":"none",dir:a.dir,"data-state":a.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":UR(a.value)?"":void 0,...s,ref:c,onClick:xe(s.onClick,y=>{y.currentTarget.focus(),d.current!=="mouse"&&j(y)}),onPointerDown:xe(s.onPointerDown,y=>{d.current=y.pointerType;const S=y.target;S.hasPointerCapture(y.pointerId)&&S.releasePointerCapture(y.pointerId),y.button===0&&y.ctrlKey===!1&&y.pointerType==="mouse"&&(j(y),y.preventDefault())}),onKeyDown:xe(s.onKeyDown,y=>{const S=f.current!=="";!(y.ctrlKey||y.altKey||y.metaKey)&&y.key.length===1&&p(y.key),!(S&&y.key===" ")&&vz.includes(y.key)&&(j(),y.preventDefault())})})})});yR.displayName=gR;var xR="SelectValue",vR=m.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:s,children:o,placeholder:a="",...l}=e,c=Ji(xR,r),{onValueNodeHasChildrenChange:u}=c,d=o!==void 0,f=Ze(t,c.onValueNodeChange);return ir(()=>{u(d)},[u,d]),i.jsx(Le.span,{...l,ref:f,style:{pointerEvents:"none"},children:UR(c.value)?i.jsx(i.Fragment,{children:a}):o})});vR.displayName=xR;var _z="SelectIcon",wR=m.forwardRef((e,t)=>{const{__scopeSelect:r,children:n,...s}=e;return i.jsx(Le.span,{"aria-hidden":!0,...s,ref:t,children:n||""})});wR.displayName=_z;var Cz="SelectPortal",bR=e=>i.jsx(yl,{asChild:!0,...e});bR.displayName=Cz;var Uo="SelectContent",SR=m.forwardRef((e,t)=>{const r=Ji(Uo,e.__scopeSelect),[n,s]=m.useState();if(ir(()=>{s(new DocumentFragment)},[]),!r.open){const o=n;return o?qo.createPortal(i.jsx(jR,{scope:e.__scopeSelect,children:i.jsx(_h.Slot,{scope:e.__scopeSelect,children:i.jsx("div",{children:e.children})})}),o):null}return i.jsx(NR,{...e,ref:t})});SR.displayName=Uo;var Tn=10,[jR,eo]=jl(Uo),Ez="SelectContentImpl",NR=m.forwardRef((e,t)=>{const{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:o,onPointerDownOutside:a,side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:f,collisionBoundary:p,collisionPadding:v,sticky:j,hideWhenDetached:y,avoidCollisions:S,...h}=e,g=Ji(Uo,r),[w,_]=m.useState(null),[E,I]=m.useState(null),P=Ze(t,R=>_(R)),[M,F]=m.useState(null),[W,re]=m.useState(null),q=Ch(r),[Y,G]=m.useState(!1),ne=m.useRef(!1);m.useEffect(()=>{if(w)return fh(w)},[w]),nh();const Z=m.useCallback(R=>{const[Q,...de]=q().map(k=>k.ref.current),[le]=de.slice(-1),C=document.activeElement;for(const k of R)if(k===C||(k==null||k.scrollIntoView({block:"nearest"}),k===Q&&E&&(E.scrollTop=0),k===le&&E&&(E.scrollTop=E.scrollHeight),k==null||k.focus(),document.activeElement!==C))return},[q,E]),fe=m.useCallback(()=>Z([M,w]),[Z,M,w]);m.useEffect(()=>{Y&&fe()},[Y,fe]);const{onOpenChange:B,triggerPointerDownPosRef:z}=g;m.useEffect(()=>{if(w){let R={x:0,y:0};const Q=le=>{var C,k;R={x:Math.abs(Math.round(le.pageX)-(((C=z.current)==null?void 0:C.x)??0)),y:Math.abs(Math.round(le.pageY)-(((k=z.current)==null?void 0:k.y)??0))}},de=le=>{R.x<=10&&R.y<=10?le.preventDefault():w.contains(le.target)||B(!1),document.removeEventListener("pointermove",Q),z.current=null};return z.current!==null&&(document.addEventListener("pointermove",Q),document.addEventListener("pointerup",de,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Q),document.removeEventListener("pointerup",de,{capture:!0})}}},[w,B,z]),m.useEffect(()=>{const R=()=>B(!1);return window.addEventListener("blur",R),window.addEventListener("resize",R),()=>{window.removeEventListener("blur",R),window.removeEventListener("resize",R)}},[B]);const[ue,ae]=BR(R=>{const Q=q().filter(C=>!C.disabled),de=Q.find(C=>C.ref.current===document.activeElement),le=zR(Q,R,de);le&&setTimeout(()=>le.ref.current.focus())}),X=m.useCallback((R,Q,de)=>{const le=!ne.current&&!de;(g.value!==void 0&&g.value===Q||le)&&(F(R),le&&(ne.current=!0))},[g.value]),ee=m.useCallback(()=>w==null?void 0:w.focus(),[w]),je=m.useCallback((R,Q,de)=>{const le=!ne.current&&!de;(g.value!==void 0&&g.value===Q||le)&&re(R)},[g.value]),Ce=n==="popper"?Rg:_R,D=Ce===Rg?{side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:f,collisionBoundary:p,collisionPadding:v,sticky:j,hideWhenDetached:y,avoidCollisions:S}:{};return i.jsx(jR,{scope:r,content:w,viewport:E,onViewportChange:I,itemRefCallback:X,selectedItem:M,onItemLeave:ee,itemTextRefCallback:je,focusSelectedItem:fe,selectedItemText:W,position:n,isPositioned:Y,searchRef:ue,children:i.jsx(pu,{as:ps,allowPinchZoom:!0,children:i.jsx(fu,{asChild:!0,trapped:g.open,onMountAutoFocus:R=>{R.preventDefault()},onUnmountAutoFocus:xe(s,R=>{var Q;(Q=g.trigger)==null||Q.focus({preventScroll:!0}),R.preventDefault()}),children:i.jsx(Ko,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:o,onPointerDownOutside:a,onFocusOutside:R=>R.preventDefault(),onDismiss:()=>g.onOpenChange(!1),children:i.jsx(Ce,{role:"listbox",id:g.contentId,"data-state":g.open?"open":"closed",dir:g.dir,onContextMenu:R=>R.preventDefault(),...h,...D,onPlaced:()=>G(!0),ref:P,style:{display:"flex",flexDirection:"column",outline:"none",...h.style},onKeyDown:xe(h.onKeyDown,R=>{const Q=R.ctrlKey||R.altKey||R.metaKey;if(R.key==="Tab"&&R.preventDefault(),!Q&&R.key.length===1&&ae(R.key),["ArrowUp","ArrowDown","Home","End"].includes(R.key)){let le=q().filter(C=>!C.disabled).map(C=>C.ref.current);if(["ArrowUp","End"].includes(R.key)&&(le=le.slice().reverse()),["ArrowUp","ArrowDown"].includes(R.key)){const C=R.target,k=le.indexOf(C);le=le.slice(k+1)}setTimeout(()=>Z(le)),R.preventDefault()}})})})})})})});NR.displayName=Ez;var kz="SelectItemAlignedPosition",_R=m.forwardRef((e,t)=>{const{__scopeSelect:r,onPlaced:n,...s}=e,o=Ji(Uo,r),a=eo(Uo,r),[l,c]=m.useState(null),[u,d]=m.useState(null),f=Ze(t,P=>d(P)),p=Ch(r),v=m.useRef(!1),j=m.useRef(!0),{viewport:y,selectedItem:S,selectedItemText:h,focusSelectedItem:g}=a,w=m.useCallback(()=>{if(o.trigger&&o.valueNode&&l&&u&&y&&S&&h){const P=o.trigger.getBoundingClientRect(),M=u.getBoundingClientRect(),F=o.valueNode.getBoundingClientRect(),W=h.getBoundingClientRect();if(o.dir!=="rtl"){const C=W.left-M.left,k=F.left-C,K=P.left-k,ie=P.width+K,De=Math.max(ie,M.width),Pe=window.innerWidth-Tn,Me=af(k,[Tn,Math.max(Tn,Pe-De)]);l.style.minWidth=ie+"px",l.style.left=Me+"px"}else{const C=M.right-W.right,k=window.innerWidth-F.right-C,K=window.innerWidth-P.right-k,ie=P.width+K,De=Math.max(ie,M.width),Pe=window.innerWidth-Tn,Me=af(k,[Tn,Math.max(Tn,Pe-De)]);l.style.minWidth=ie+"px",l.style.right=Me+"px"}const re=p(),q=window.innerHeight-Tn*2,Y=y.scrollHeight,G=window.getComputedStyle(u),ne=parseInt(G.borderTopWidth,10),Z=parseInt(G.paddingTop,10),fe=parseInt(G.borderBottomWidth,10),B=parseInt(G.paddingBottom,10),z=ne+Z+Y+B+fe,ue=Math.min(S.offsetHeight*5,z),ae=window.getComputedStyle(y),X=parseInt(ae.paddingTop,10),ee=parseInt(ae.paddingBottom,10),je=P.top+P.height/2-Tn,Ce=q-je,D=S.offsetHeight/2,R=S.offsetTop+D,Q=ne+Z+R,de=z-Q;if(Q<=je){const C=re.length>0&&S===re[re.length-1].ref.current;l.style.bottom="0px";const k=u.clientHeight-y.offsetTop-y.offsetHeight,K=Math.max(Ce,D+(C?ee:0)+k+fe),ie=Q+K;l.style.height=ie+"px"}else{const C=re.length>0&&S===re[0].ref.current;l.style.top="0px";const K=Math.max(je,ne+y.offsetTop+(C?X:0)+D)+de;l.style.height=K+"px",y.scrollTop=Q-je+y.offsetTop}l.style.margin=`${Tn}px 0`,l.style.minHeight=ue+"px",l.style.maxHeight=q+"px",n==null||n(),requestAnimationFrame(()=>v.current=!0)}},[p,o.trigger,o.valueNode,l,u,y,S,h,o.dir,n]);ir(()=>w(),[w]);const[_,E]=m.useState();ir(()=>{u&&E(window.getComputedStyle(u).zIndex)},[u]);const I=m.useCallback(P=>{P&&j.current===!0&&(w(),g==null||g(),j.current=!1)},[w,g]);return i.jsx(Pz,{scope:r,contentWrapper:l,shouldExpandOnScrollRef:v,onScrollButtonChange:I,children:i.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:_},children:i.jsx(Le.div,{...s,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});_R.displayName=kz;var Tz="SelectPopperPosition",Rg=m.forwardRef((e,t)=>{const{__scopeSelect:r,align:n="start",collisionPadding:s=Tn,...o}=e,a=Eh(r);return i.jsx(lh,{...a,...o,ref:t,align:n,collisionPadding:s,style:{boxSizing:"border-box",...o.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Rg.displayName=Tz;var[Pz,ov]=jl(Uo,{}),Ag="SelectViewport",CR=m.forwardRef((e,t)=>{const{__scopeSelect:r,nonce:n,...s}=e,o=eo(Ag,r),a=ov(Ag,r),l=Ze(t,o.onViewportChange),c=m.useRef(0);return i.jsxs(i.Fragment,{children:[i.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),i.jsx(_h.Slot,{scope:r,children:i.jsx(Le.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:xe(s.onScroll,u=>{const d=u.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:p}=a;if(p!=null&&p.current&&f){const v=Math.abs(c.current-d.scrollTop);if(v>0){const j=window.innerHeight-Tn*2,y=parseFloat(f.style.minHeight),S=parseFloat(f.style.height),h=Math.max(y,S);if(h<j){const g=h+v,w=Math.min(j,g),_=g-w;f.style.height=w+"px",f.style.bottom==="0px"&&(d.scrollTop=_>0?_:0,f.style.justifyContent="flex-end")}}}c.current=d.scrollTop})})})]})});CR.displayName=Ag;var ER="SelectGroup",[Rz,Az]=jl(ER),Iz=m.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,s=wn();return i.jsx(Rz,{scope:r,id:s,children:i.jsx(Le.div,{role:"group","aria-labelledby":s,...n,ref:t})})});Iz.displayName=ER;var kR="SelectLabel",TR=m.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,s=Az(kR,r);return i.jsx(Le.div,{id:s.id,...n,ref:t})});TR.displayName=kR;var mf="SelectItem",[Dz,PR]=jl(mf),RR=m.forwardRef((e,t)=>{const{__scopeSelect:r,value:n,disabled:s=!1,textValue:o,...a}=e,l=Ji(mf,r),c=eo(mf,r),u=l.value===n,[d,f]=m.useState(o??""),[p,v]=m.useState(!1),j=Ze(t,g=>{var w;return(w=c.itemRefCallback)==null?void 0:w.call(c,g,n,s)}),y=wn(),S=m.useRef("touch"),h=()=>{s||(l.onValueChange(n),l.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return i.jsx(Dz,{scope:r,value:n,disabled:s,textId:y,isSelected:u,onItemTextChange:m.useCallback(g=>{f(w=>w||((g==null?void 0:g.textContent)??"").trim())},[]),children:i.jsx(_h.ItemSlot,{scope:r,value:n,disabled:s,textValue:d,children:i.jsx(Le.div,{role:"option","aria-labelledby":y,"data-highlighted":p?"":void 0,"aria-selected":u&&p,"data-state":u?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...a,ref:j,onFocus:xe(a.onFocus,()=>v(!0)),onBlur:xe(a.onBlur,()=>v(!1)),onClick:xe(a.onClick,()=>{S.current!=="mouse"&&h()}),onPointerUp:xe(a.onPointerUp,()=>{S.current==="mouse"&&h()}),onPointerDown:xe(a.onPointerDown,g=>{S.current=g.pointerType}),onPointerMove:xe(a.onPointerMove,g=>{var w;S.current=g.pointerType,s?(w=c.onItemLeave)==null||w.call(c):S.current==="mouse"&&g.currentTarget.focus({preventScroll:!0})}),onPointerLeave:xe(a.onPointerLeave,g=>{var w;g.currentTarget===document.activeElement&&((w=c.onItemLeave)==null||w.call(c))}),onKeyDown:xe(a.onKeyDown,g=>{var _;((_=c.searchRef)==null?void 0:_.current)!==""&&g.key===" "||(wz.includes(g.key)&&h(),g.key===" "&&g.preventDefault())})})})})});RR.displayName=mf;var Kl="SelectItemText",AR=m.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:s,...o}=e,a=Ji(Kl,r),l=eo(Kl,r),c=PR(Kl,r),u=Nz(Kl,r),[d,f]=m.useState(null),p=Ze(t,h=>f(h),c.onItemTextChange,h=>{var g;return(g=l.itemTextRefCallback)==null?void 0:g.call(l,h,c.value,c.disabled)}),v=d==null?void 0:d.textContent,j=m.useMemo(()=>i.jsx("option",{value:c.value,disabled:c.disabled,children:v},c.value),[c.disabled,c.value,v]),{onNativeOptionAdd:y,onNativeOptionRemove:S}=u;return ir(()=>(y(j),()=>S(j)),[y,S,j]),i.jsxs(i.Fragment,{children:[i.jsx(Le.span,{id:c.textId,...o,ref:p}),c.isSelected&&a.valueNode&&!a.valueNodeHasChildren?qo.createPortal(o.children,a.valueNode):null]})});AR.displayName=Kl;var IR="SelectItemIndicator",DR=m.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return PR(IR,r).isSelected?i.jsx(Le.span,{"aria-hidden":!0,...n,ref:t}):null});DR.displayName=IR;var Ig="SelectScrollUpButton",MR=m.forwardRef((e,t)=>{const r=eo(Ig,e.__scopeSelect),n=ov(Ig,e.__scopeSelect),[s,o]=m.useState(!1),a=Ze(t,n.onScrollButtonChange);return ir(()=>{if(r.viewport&&r.isPositioned){let l=function(){const u=c.scrollTop>0;o(u)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),s?i.jsx(LR,{...e,ref:a,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});MR.displayName=Ig;var Dg="SelectScrollDownButton",OR=m.forwardRef((e,t)=>{const r=eo(Dg,e.__scopeSelect),n=ov(Dg,e.__scopeSelect),[s,o]=m.useState(!1),a=Ze(t,n.onScrollButtonChange);return ir(()=>{if(r.viewport&&r.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,d=Math.ceil(c.scrollTop)<u;o(d)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),s?i.jsx(LR,{...e,ref:a,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});OR.displayName=Dg;var LR=m.forwardRef((e,t)=>{const{__scopeSelect:r,onAutoScroll:n,...s}=e,o=eo("SelectScrollButton",r),a=m.useRef(null),l=Ch(r),c=m.useCallback(()=>{a.current!==null&&(window.clearInterval(a.current),a.current=null)},[]);return m.useEffect(()=>()=>c(),[c]),ir(()=>{var d;const u=l().find(f=>f.ref.current===document.activeElement);(d=u==null?void 0:u.ref.current)==null||d.scrollIntoView({block:"nearest"})},[l]),i.jsx(Le.div,{"aria-hidden":!0,...s,ref:t,style:{flexShrink:0,...s.style},onPointerDown:xe(s.onPointerDown,()=>{a.current===null&&(a.current=window.setInterval(n,50))}),onPointerMove:xe(s.onPointerMove,()=>{var u;(u=o.onItemLeave)==null||u.call(o),a.current===null&&(a.current=window.setInterval(n,50))}),onPointerLeave:xe(s.onPointerLeave,()=>{c()})})}),Mz="SelectSeparator",FR=m.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return i.jsx(Le.div,{"aria-hidden":!0,...n,ref:t})});FR.displayName=Mz;var Mg="SelectArrow",Oz=m.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,s=Eh(r),o=Ji(Mg,r),a=eo(Mg,r);return o.open&&a.position==="popper"?i.jsx(ch,{...s,...n,ref:t}):null});Oz.displayName=Mg;function UR(e){return e===""||e===void 0}var $R=m.forwardRef((e,t)=>{const{value:r,...n}=e,s=m.useRef(null),o=Ze(t,s),a=Bx(r);return m.useEffect(()=>{const l=s.current,c=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(c,"value").set;if(a!==r&&d){const f=new Event("change",{bubbles:!0});d.call(l,r),l.dispatchEvent(f)}},[a,r]),i.jsx(lu,{asChild:!0,children:i.jsx("select",{...n,ref:o,defaultValue:r})})});$R.displayName="BubbleSelect";function BR(e){const t=mr(e),r=m.useRef(""),n=m.useRef(0),s=m.useCallback(a=>{const l=r.current+a;t(l),function c(u){r.current=u,window.clearTimeout(n.current),u!==""&&(n.current=window.setTimeout(()=>c(""),1e3))}(l)},[t]),o=m.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return m.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,s,o]}function zR(e,t,r){const s=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,o=r?e.indexOf(r):-1;let a=Lz(e,Math.max(o,0));s.length===1&&(a=a.filter(u=>u!==r));const c=a.find(u=>u.textValue.toLowerCase().startsWith(s.toLowerCase()));return c!==r?c:void 0}function Lz(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var Fz=pR,VR=yR,Uz=vR,$z=wR,Bz=bR,WR=SR,zz=CR,qR=TR,HR=RR,Vz=AR,Wz=DR,KR=MR,GR=OR,QR=FR;const uo=Fz,fo=Uz,Ni=m.forwardRef(({className:e,children:t,...r},n)=>i.jsxs(VR,{ref:n,className:we("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...r,children:[t,i.jsx($z,{asChild:!0,children:i.jsx(ox,{className:"h-4 w-4 opacity-50"})})]}));Ni.displayName=VR.displayName;const YR=m.forwardRef(({className:e,...t},r)=>i.jsx(KR,{ref:r,className:we("flex cursor-default items-center justify-center py-1",e),...t,children:i.jsx(jL,{className:"h-4 w-4"})}));YR.displayName=KR.displayName;const ZR=m.forwardRef(({className:e,...t},r)=>i.jsx(GR,{ref:r,className:we("flex cursor-default items-center justify-center py-1",e),...t,children:i.jsx(ox,{className:"h-4 w-4"})}));ZR.displayName=GR.displayName;const _i=m.forwardRef(({className:e,children:t,position:r="popper",...n},s)=>i.jsx(Bz,{children:i.jsxs(WR,{ref:s,className:we("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...n,children:[i.jsx(YR,{}),i.jsx(zz,{className:we("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),i.jsx(ZR,{})]})}));_i.displayName=WR.displayName;const qz=m.forwardRef(({className:e,...t},r)=>i.jsx(qR,{ref:r,className:we("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));qz.displayName=qR.displayName;const tr=m.forwardRef(({className:e,children:t,...r},n)=>i.jsxs(HR,{ref:n,className:we("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[i.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(Wz,{children:i.jsx(un,{className:"h-4 w-4"})})}),i.jsx(Vz,{children:t})]}));tr.displayName=HR.displayName;const Hz=m.forwardRef(({className:e,...t},r)=>i.jsx(QR,{ref:r,className:we("-mx-1 my-1 h-px bg-muted",e),...t}));Hz.displayName=QR.displayName;class Kz{constructor(t={}){this.streamData=null,this.mediaRecorder=null,this.streamActive=!1,this.segmentInterval=null,this.recordedChunks=[],this.segmentDuration=3e3,this.options=t}async startStream(t){try{console.log("HLS: Starting stream with options:",this.options);const r=await aE({title:this.options.title,description:this.options.description,category:this.options.category||"Music",tags:this.options.tags||["live","hls"],createShareableUrl:this.options.createShareableUrl});return console.log("HLS: Stream created:",r),this.streamData={streamId:r.streamId,streamKey:r.streamKey,hlsPlaylistUrl:r.hlsPlaylistUrl,hlsSegmentUrl:r.hlsSegmentUrl,shareUrl:r.shareUrl},this.startRecording(t),this.options.onStreamCreated&&this.options.onStreamCreated(this.streamData),this.streamData}catch(r){throw console.error("HLS: Failed to start stream:",r),this.options.onError&&this.options.onError(r),r}}async initializeExistingStream(t){try{console.log(`HLS: Initializing existing stream ${t}`);const r=await lE(t);return console.log("HLS: Stream initialized:",r),this.streamData={streamId:r.streamId,streamKey:"",hlsPlaylistUrl:r.hlsPlaylistUrl,hlsSegmentUrl:r.hlsSegmentUrl,shareUrl:`${window.location.origin}/stream/${r.streamId}`},this.streamData}catch(r){throw console.error("HLS: Failed to initialize existing stream:",r),this.options.onError&&this.options.onError(r),r}}startRecording(t){if(!this.streamData)throw new Error("Stream data not available. Create a stream first.");console.log("HLS: Starting media recorder");const n={mimeType:"video/webm;codecs=vp8,opus"};try{this.mediaRecorder=new MediaRecorder(t,n),this.mediaRecorder.ondataavailable=async s=>{s.data&&s.data.size>0&&(this.recordedChunks.push(s.data),await this.processAndUploadSegment())},this.mediaRecorder.onstart=()=>{console.log("HLS: MediaRecorder started"),this.streamActive=!0},this.mediaRecorder.onstop=()=>{console.log("HLS: MediaRecorder stopped"),this.streamActive=!1},this.mediaRecorder.onerror=s=>{console.error("HLS: MediaRecorder error:",s),this.streamActive=!1,this.options.onError&&this.options.onError(new Error("Media recording error"))},this.mediaRecorder.start(this.segmentDuration),this.segmentInterval=window.setInterval(()=>{this.mediaRecorder&&this.streamActive&&this.mediaRecorder.state==="recording"&&this.mediaRecorder.requestData()},this.segmentDuration)}catch(s){throw console.error("HLS: Media recorder setup failed:",s),this.options.onError&&this.options.onError(s),s}}async processAndUploadSegment(){if(!(!this.streamData||this.recordedChunks.length===0))try{const t=new Blob(this.recordedChunks,{type:"video/webm"});this.recordedChunks=[],console.log(`HLS: Uploading segment, size: ${t.size} bytes`);const r=await uE(this.streamData.streamId,t);console.log("HLS: Segment uploaded:",r),this.options.onSegmentUploaded&&this.options.onSegmentUploaded(r)}catch(t){console.error("HLS: Segment upload failed:",t),this.options.onError&&this.options.onError(t)}}async stopStream(){if(!this.streamData)return{success:!1,message:"No active stream"};console.log(`HLS: Stopping stream ${this.streamData.streamId}`),this.segmentInterval&&(clearInterval(this.segmentInterval),this.segmentInterval=null),this.mediaRecorder&&this.mediaRecorder.state!=="inactive"&&this.mediaRecorder.stop(),this.recordedChunks.length>0&&await this.processAndUploadSegment();try{const t=await cE(this.streamData.streamId);return console.log("HLS: Stream ended:",t),this.options.onStreamEnded&&this.options.onStreamEnded(t),this.streamActive=!1,{success:!0,showSavePrompt:t.showSavePrompt||!1,temporaryUrl:t.temporaryUrl,message:t.message}}catch(t){return console.error("HLS: Failed to end stream:",t),this.options.onError&&this.options.onError(t),{success:!1,message:t.message||"Failed to end stream"}}}getStreamData(){return this.streamData}isStreamActive(){return this.streamActive}setSegmentDuration(t){this.segmentDuration=t}}const Gz=lP,Qz=cP,XR=m.forwardRef(({className:e,...t},r)=>i.jsx(Zx,{ref:r,className:we("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));XR.displayName=Zx.displayName;const JR=m.forwardRef(({className:e,children:t,...r},n)=>i.jsxs(Qz,{children:[i.jsx(XR,{}),i.jsxs(Xx,{ref:n,className:we("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...r,children:[t,i.jsxs(tv,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[i.jsx(th,{className:"h-4 w-4"}),i.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));JR.displayName=Xx.displayName;const eA=({className:e,...t})=>i.jsx("div",{className:we("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});eA.displayName="DialogHeader";const tA=({className:e,...t})=>i.jsx("div",{className:we("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});tA.displayName="DialogFooter";const rA=m.forwardRef(({className:e,...t},r)=>i.jsx(Jx,{ref:r,className:we("text-lg font-semibold leading-none tracking-tight",e),...t}));rA.displayName=Jx.displayName;const nA=m.forwardRef(({className:e,...t},r)=>i.jsx(ev,{ref:r,className:we("text-sm text-muted-foreground",e),...t}));nA.displayName=ev.displayName;function Yz({isOpen:e,onClose:t,streamId:r,temporaryUrl:n}){const[s,o]=$e.useState(!1),{toast:a}=pr(),l=async()=>{o(!0);try{const u=await fg(r,!0);a({title:"Stream recording saved",description:"Your stream recording has been saved permanently."}),t()}catch(u){console.error("Error saving stream recording:",u),a({title:"Error",description:"Failed to save stream recording.",variant:"destructive"})}finally{o(!1)}},c=async()=>{o(!0);try{const u=await fg(r,!1);a({title:"Stream recording deleted",description:"Your stream recording has been deleted."}),t()}catch(u){console.error("Error deleting stream recording:",u),a({title:"Error",description:"Failed to delete stream recording.",variant:"destructive"})}finally{o(!1)}};return i.jsx(Gz,{open:e,onOpenChange:u=>!u&&t(),children:i.jsxs(JR,{className:"sm:max-w-md",children:[i.jsxs(eA,{children:[i.jsx(rA,{children:"Save Stream Recording?"}),i.jsxs(nA,{children:["Your stream has ended. Would you like to save the recording or delete it?",i.jsx("br",{}),n&&i.jsx("span",{className:"text-sm text-muted-foreground mt-2 block",children:"The recording is temporarily available for the next 24 hours."})]})]}),n&&i.jsx("div",{className:"mt-4 rounded-md overflow-hidden bg-black",children:i.jsx("video",{className:"w-full",controls:!0,src:n,preload:"metadata"})}),i.jsxs(tA,{className:"flex flex-row justify-between sm:justify-between gap-2 mt-4",children:[i.jsxs(te,{variant:"outline",onClick:c,disabled:s,className:"flex-1",children:[s?i.jsx(gs,{className:"mr-2 h-4 w-4 animate-spin"}):i.jsx(ux,{className:"mr-2 h-4 w-4"}),"Delete Recording"]}),i.jsxs(te,{onClick:l,disabled:s,className:"flex-1",children:[s?i.jsx(gs,{className:"mr-2 h-4 w-4 animate-spin"}):i.jsx(VL,{className:"mr-2 h-4 w-4"}),"Save Recording"]})]})]})})}const Zz=({initialStreamId:e,userId:t,userName:r})=>{const[n,s]=m.useState(e?"viewer":"host"),[o,a]=m.useState(e||""),[l,c]=m.useState(""),[u,d]=m.useState(!1),[f,p]=m.useState(0),[v,j]=m.useState("webrtc"),[y,S]=m.useState({}),[h,g]=m.useState(!1),[w,_]=m.useState(0),[E,I]=m.useState(),[P,M]=m.useState(!0),[F,W]=m.useState(!0),[re,q]=m.useState(!1),[Y,G]=m.useState(!1),[ne,Z]=m.useState(""),[fe,B]=m.useState("microphone"),[z,ue]=m.useState({videoDevices:[],audioDevices:[]}),[ae,X]=m.useState(""),[ee,je]=m.useState(""),Ce=m.useRef(null),D=m.useRef({connection:null,stream:null,publishEndpoint:"https://customer-t2aair0gpwhh9qzs.cloudflarestream.com/2d1e4393576e30df428f1b48724df1e5k8926835a1f3442efddd27bf44a470b84/webRTC/publish"}),[R,Q]=m.useState([]),[de,le]=m.useState(""),C=m.useRef(null),k=m.useRef(null),K=m.useRef(null),ie=m.useRef(null),De=m.useRef({}),Pe=m.useRef(null),Me=m.useRef(()=>{}),{toast:se}=pr(),ve=()=>{if(C.current&&C.current.readyState!==WebSocket.CLOSED)try{C.current.close()}catch(J){console.warn("Error closing existing WebSocket:",J)}Me.current&&Me.current(),BP(async()=>{const{createWebSocket:J}=await Promise.resolve().then(()=>eH);return{createWebSocket:J}},void 0).then(({createWebSocket:J})=>{try{console.log("Setting up WebSocket connection with enhanced Replit compatibility");const{socket:he,cleanup:Ne}=J({endpoint:"/ws",timeout:5e3});if(!he){console.error("Failed to create WebSocket");return}C.current=he,Me.current=Ne,he.onopen=()=>{if(console.log("WebSocket connection established"),e&&n==="viewer"){const We=!isNaN(Number(e)),Be={type:"join-stream",data:{streamId:e,isExternalId:!We}};console.log(`Sending join message for ${We?"numeric":"external"} stream ID:`,e),he.send(JSON.stringify(Be)),d(!0)}u&&n==="host"&&o&&(console.log("Reconnecting as host for stream:",o),he.send(JSON.stringify({type:"host-stream",data:{streamId:o}})))},he.onmessage=We=>{try{const Be=JSON.parse(We.data);switch(console.log("WebSocket message received:",Be.type),Be.type){case"viewer-joined":Fe(Be.data);break;case"viewer-left":gt(Be.data);break;case"stream-offer":A(Be.data);break;case"stream-answer":U(Be.data);break;case"ice-candidate":V(Be.data);break;case"viewer-count":p(Be.data.count);break;case"chat-message":pe(Be.data);break;case"stream-ended":ye();break;case"stream-not-found":N();break;default:console.warn("Unknown message type:",Be.type)}}catch(Be){console.error("Error processing WebSocket message:",Be)}},he.onerror=We=>{console.error("WebSocket error:",We),se({title:"Connection Error",description:"Failed to establish connection to the signaling server. Will try to reconnect...",variant:"destructive"}),setTimeout(()=>{C.current&&(C.current.readyState===WebSocket.CLOSED||C.current.readyState===WebSocket.CLOSING)&&(console.log("Attempting to reconnect WebSocket..."),ve())},3e3)},he.onclose=()=>{console.log("WebSocket connection closed"),u&&setTimeout(()=>{console.log("Attempting to reconnect WebSocket after close..."),ve()},3e3)}}catch(he){console.error("Error in WebSocket setup:",he),setTimeout(()=>{console.log("Attempting to reconnect after WebSocket setup error..."),ve()},5e3)}}).catch(J=>{console.error("Error loading WebSocket utilities:",J),se({title:"Connection Error",description:"Failed to load connection utilities. Please refresh the page.",variant:"destructive"})})};m.useEffect(()=>(ve(),()=>{if(n==="host"&&o){if(v==="webrtc")C.current&&C.current.readyState===WebSocket.OPEN&&C.current.send(JSON.stringify({type:"end-stream",data:{streamId:o}}));else if(v==="hls"){if(Ce.current&&Ce.current.isStreamActive())try{fetch(`/api/streams/${o}/end`,{method:"POST",headers:{"Content-Type":"application/json"},keepalive:!0})}catch(J){console.error("Error ending HLS stream during page unload:",J)}}else if(v==="cloudflare")try{D.current.connection&&(D.current.connection.close(),D.current.connection=null),fetch(`/api/streams/${o}/end`,{method:"POST",headers:{"Content-Type":"application/json"},keepalive:!0})}catch(J){console.error("Error ending Cloudflare stream during page unload:",J)}}ie.current&&ie.current.getTracks().forEach(J=>J.stop()),D.current.stream&&(D.current.stream.getTracks().forEach(J=>J.stop()),D.current.stream=null),Object.values(De.current).forEach(J=>{J.destroy()}),C.current&&C.current.readyState===WebSocket.OPEN&&C.current.close()}),[e,n,o,v,se]);const Fe=({viewerId:J})=>{if(console.log("New viewer joined:",J),n==="host"&&ie.current)try{const he=new nb({initiator:!0,trickle:!0,stream:ie.current,config:{iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:global.stun.twilio.com:3478"}]}});De.current[J]=he,he.on("signal",Ne=>{var We;console.log("Host signaling data generated for viewer:",J),(We=C.current)==null||We.send(JSON.stringify({type:"stream-offer",data:{streamId:o,description:Ne,viewerId:J}}))}),he.on("close",()=>{console.log("Peer connection closed with viewer:",J),delete De.current[J]}),he.on("error",Ne=>{console.error("WebRTC error with viewer:",J,Ne),se({title:"Connection Error",description:"Failed to establish connection with viewer. Please try again.",variant:"destructive"}),delete De.current[J]})}catch(he){console.error("Error creating host peer connection:",he),se({title:"Connection Error",description:"Failed to establish streaming connection. Please try again.",variant:"destructive"})}},gt=({viewerId:J})=>{console.log("Viewer left:",J),De.current[J]&&(De.current[J].destroy(),delete De.current[J])},A=({hostId:J,description:he})=>{if(console.log("Received stream offer from host:",J),n==="viewer")try{const Ne=new nb({initiator:!1,trickle:!0,config:{iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:global.stun.twilio.com:3478"}]}});De.current[J]=Ne,Ne.signal(he),Ne.on("signal",We=>{var Be;console.log("Viewer signaling data generated for host:",J),(Be=C.current)==null||Be.send(JSON.stringify({type:"stream-answer",data:{hostId:J,description:We}}))}),Ne.on("stream",We=>{console.log("Received remote stream from host"),K.current&&(K.current.srcObject=We)}),Ne.on("error",We=>{console.error("WebRTC error with host:",J,We),se({title:"Connection Error",description:"Failed to connect to stream. The host may have poor connectivity.",variant:"destructive"}),K.current&&(K.current.srcObject=null),Ne.destroy(),delete De.current[J]}),Ne.on("close",()=>{console.log("Peer connection closed with host:",J),K.current&&(K.current.srcObject=null),delete De.current[J]})}catch(Ne){console.error("Error creating viewer peer connection:",Ne),se({title:"Connection Error",description:"Failed to establish connection to stream. Please try again.",variant:"destructive"})}},U=({viewerId:J,description:he})=>{console.log("Received stream answer from viewer:",J),n==="host"&&De.current[J]&&De.current[J].signal(he)},V=({from:J,candidate:he})=>{console.log("Received ICE candidate from:",J),De.current[J]&&De.current[J].signal({type:"candidate",candidate:he})},pe=({senderId:J,message:he,timestamp:Ne})=>{var Be;const We=J===((Be=C.current)==null?void 0:Be.url);Q(mt=>[...mt,{senderId:J,message:he,timestamp:Ne,isCurrentUser:We}]),Pe.current&&setTimeout(()=>{Pe.current&&(Pe.current.scrollTop=Pe.current.scrollHeight)},100)},ye=()=>{n==="viewer"&&(se({title:"Stream ended",description:"The host has ended the stream.",variant:"destructive"}),K.current&&(K.current.srcObject=null),d(!1),setTimeout(()=>{window.location.href="/"},3e3))},N=()=>{n==="viewer"&&(se({title:"Stream not found",description:"The stream ID you entered does not exist.",variant:"destructive"}),d(!1))},[x,b]=m.useState(!1);m.useEffect(()=>{e&&n==="viewer"&&!u&&(async()=>{var he;try{console.log("Fetching stream details for ID:",e),b(!0);const Ne=new Promise((En,ta)=>setTimeout(()=>ta(new Error("Request timeout")),1e4)),We=!isNaN(Number(e)),Be=We?`/api/streams/${e}`:`/api/streams/public/${e}`;console.log(`Using endpoint ${Be} for stream ID type: ${We?"numeric":"external"}`);const mt=fetch(`${window.location.origin}${Be}`),$r=await Promise.race([mt,Ne]);if(!$r.ok)throw new Error(`Server returned ${$r.status}: ${$r.statusText}`);const yt=await $r.json();if(console.log("Stream details response:",yt),b(!1),yt.success&&yt.stream){if(!yt.stream.isLive){console.log("Stream exists but is not live"),se({title:"Stream Not Live",description:"This stream exists but is not currently broadcasting",variant:"default"});return}if(S({streamType:yt.stream.streamType,hasVisualElement:!!yt.stream.visualElementUrl,visualElementUrl:yt.stream.visualElementUrl,visualElementType:yt.stream.visualElementType||"image"}),console.log("Stream details set:",{streamType:yt.stream.streamType,hasVisualElement:!!yt.stream.visualElementUrl,protocol:yt.stream.protocol||"webrtc"}),yt.stream.protocol&&j(yt.stream.protocol),C.current&&C.current.readyState===WebSocket.OPEN){console.log("WebSocket is open, joining stream:",e);const En=!isNaN(Number(e));C.current.send(JSON.stringify({type:"join-stream",data:{streamId:e,protocol:yt.stream.protocol||v,isExternalId:!En}})),d(!0),se({title:"Joining Stream",description:"Connecting to the stream..."})}else console.log("WebSocket not ready, current state:",(he=C.current)==null?void 0:he.readyState),ve(),setTimeout(()=>{if(C.current&&C.current.readyState===WebSocket.OPEN){console.log("Retrying join after WebSocket connection");const En=!isNaN(Number(e));C.current.send(JSON.stringify({type:"join-stream",data:{streamId:e,protocol:yt.stream.protocol||v,isExternalId:!En}})),d(!0)}},1e3)}else console.log("Stream not found or not returned in response"),b(!1),se({title:"Stream Not Found",description:"The stream you're trying to join doesn't exist or has ended",variant:"destructive"})}catch(Ne){console.error("Error fetching stream details:",Ne),b(!1),se({title:"Stream Unavailable",description:"This stream cannot be accessed. It may not exist or has ended.",variant:"destructive"})}})()},[e,n,u,se,ve,v]),m.useEffect(()=>{async function J(){try{let he=null;try{he=await navigator.mediaDevices.getUserMedia({video:!0,audio:!0})}catch(yt){console.warn("Could not access both camera and microphone:",yt);try{he=await navigator.mediaDevices.getUserMedia({video:!0,audio:!1}),se({title:"Limited Access",description:"Camera access granted, but microphone access was denied."})}catch(En){console.warn("Could not access camera:",En);try{he=await navigator.mediaDevices.getUserMedia({video:!1,audio:!0}),se({title:"Limited Access",description:"Microphone access granted, but camera access was denied."})}catch(ta){throw console.error("Could not access any media devices:",ta),new Error("No media devices could be accessed")}}}he&&he.getTracks().forEach(yt=>yt.stop());const Ne=await navigator.mediaDevices.enumerateDevices(),We=Ne.filter(yt=>yt.kind==="videoinput"),Be=Ne.filter(yt=>yt.kind==="audioinput"),mt=We.some(yt=>!!yt.label),$r=Be.some(yt=>!!yt.label);!mt&&!$r&&(We.length>0||Be.length>0)&&console.warn("Device information available but without labels - permissions may be limited"),ue({videoDevices:We,audioDevices:Be}),We.length>0&&!ae&&X(We[0].deviceId),Be.length>0&&!ee&&je(Be[0].deviceId)}catch(he){console.error("Error getting media devices:",he);let Ne="Unable to access your camera or microphone.";he.message.includes("Permission denied")?Ne="Permission denied. Please allow camera and microphone access in your browser settings.":he.message.includes("No media devices")&&(Ne="No camera or microphone detected. Please connect a device and try again."),se({title:"Device Access Error",description:Ne,variant:"destructive"})}}J()},[se,ae,ee]);const T=async()=>{var J;try{let he;if(fe==="system"&&F)try{console.log("Attempting to capture system audio...");const We=await navigator.mediaDevices.getDisplayMedia({video:P,audio:!0});P?he=We:(he=new MediaStream,We.getAudioTracks().forEach(Be=>{he.addTrack(Be)}),We.getVideoTracks().forEach(Be=>Be.stop())),se({title:"System Audio",description:"Capturing system audio. Ensure you've selected 'Share audio' in the browser dialog."})}catch(We){console.error("Error capturing system audio:",We),se({title:"System Audio Error",description:"Failed to capture system audio. Falling back to microphone.",variant:"destructive"}),he=await navigator.mediaDevices.getUserMedia({video:P?{deviceId:ae?{exact:ae}:void 0}:!1,audio:F?{deviceId:ee?{exact:ee}:void 0}:!1})}else he=await navigator.mediaDevices.getUserMedia({video:P?{deviceId:ae?{exact:ae}:void 0}:!1,audio:F?{deviceId:ee?{exact:ee}:void 0}:!1});ie.current=he,k.current&&(P?k.current.srcObject=he:k.current.srcObject=null);let Ne;if(v==="webrtc"){if(console.log("Creating WebRTC stream"),Ne=await(await fetch(`${window.location.origin}/api/streams/webrtc`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:t,userName:r||"Anonymous",title:`${r||"Anonymous"}'s Stream`,description:`Live stream by ${r||"Anonymous"}`,createShareableUrl:!0})})).json(),!Ne.success)throw new Error(Ne.message||"Failed to create WebRTC stream");const Be=`${window.location.origin}/stream/${Ne.streamId}`;Ne.shareUrl=Be,C.current&&C.current.readyState===WebSocket.OPEN&&C.current.send(JSON.stringify({type:"host-stream",data:{streamId:Ne.streamId}}))}else if(v==="cloudflare"){if(console.log("Creating Cloudflare Stream"),Ne=await(await fetch(`${window.location.origin}/api/streams/cloudflare`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:t,userName:r||"Anonymous",title:`${r||"Anonymous"}'s Stream`,description:`Live stream by ${r||"Anonymous"}`,createShareableUrl:!0})})).json(),!Ne.success)throw new Error(Ne.message||"Failed to create Cloudflare stream");const Be=`${window.location.origin}/stream/${Ne.streamId}`;Ne.shareUrl=Be;try{const mt=new RTCPeerConnection({iceServers:[{urls:"stun:stun.cloudflare.com:3478"},{urls:"stun:stun.l.google.com:19302"}]});D.current.connection=mt,D.current.stream=he,he.getTracks().forEach(Nu=>{mt.addTrack(Nu,he)});const $r=await mt.createOffer();await mt.setLocalDescription($r),await new Promise(Nu=>{const bv=()=>{mt.iceGatheringState==="complete"?Nu():setTimeout(bv,100)};setTimeout(Nu,5e3),bv()});const yt=D.current.publishEndpoint;if(!yt)throw new Error("Cloudflare Stream publishing endpoint not configured");const En=await fetch(yt,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sdp:(J=mt.localDescription)==null?void 0:J.sdp,clientId:Ne.streamId.toString()})});if(!En.ok)throw new Error(`Cloudflare Stream error: ${En.status} ${En.statusText}`);const ta=await En.json(),FI=new RTCSessionDescription({type:"answer",sdp:ta.sdp});await mt.setRemoteDescription(FI),console.log("Cloudflare Stream WebRTC connection established"),await fetch(`${window.location.origin}/api/streams/${Ne.streamId}/started`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({cloudflareStreamId:ta.streamId||"unknown"})})}catch(mt){throw console.error("Error setting up Cloudflare Stream:",mt),new Error(`Failed to connect to Cloudflare Stream: ${mt.message}`)}}else if(v==="hls"){console.log("Creating HLS stream"),Ce.current=new Kz({title:`${r||"Anonymous"}'s Stream`,description:`Live stream by ${r||"Anonymous"}`,category:"Music",tags:["live","hls"],createShareableUrl:!0,onStreamCreated:mt=>{console.log("HLS stream created:",mt)},onSegmentUploaded:mt=>{console.log("HLS segment uploaded:",mt)},onStreamEnded:mt=>{console.log("HLS stream ended:",mt),d(!1)},onError:mt=>{console.error("HLS streaming error:",mt),se({title:"Streaming Error",description:mt.message||"An error occurred during HLS streaming",variant:"destructive"})}});const We=await Ce.current.startStream(he),Be=`${window.location.origin}/stream/${We.streamId}`;Ne={success:!0,streamId:We.streamId.toString(),shareUrl:Be||We.shareUrl}}else throw new Error("Invalid streaming protocol selected");return a(Ne.streamId),c(Ne.shareUrl||`${window.location.origin}/stream/${Ne.streamId}`),d(!0),se({title:"Stream Created",description:`Your ${v.toUpperCase()} stream has been created successfully.`}),Ne.streamId}catch(he){return console.error("Error creating stream:",he),se({title:"Stream Creation Failed",description:he.message||"Could not create stream",variant:"destructive"}),null}},L=async()=>{if(!o){se({title:"Stream ID Required",description:"Please enter a valid stream ID to join",variant:"destructive"});return}try{const he=await(await fetch(`${window.location.origin}/api/streams/${o}`)).json();if(!he.success){se({title:"Stream Not Found",description:"The stream ID you entered does not exist",variant:"destructive"});return}if(he.stream&&(S({streamType:he.stream.streamType,hasVisualElement:!!he.stream.visualElementUrl,visualElementUrl:he.stream.visualElementUrl,visualElementType:he.stream.visualElementType}),he.stream.protocol&&j(he.stream.protocol)),C.current&&C.current.readyState===WebSocket.OPEN){const Ne=!isNaN(Number(o));C.current.send(JSON.stringify({type:"join-stream",data:{streamId:o,isExternalId:!Ne}}))}d(!0),se({title:"Joining Stream",description:"Connected to stream successfully"})}catch(J){console.error("Error joining stream:",J),se({title:"Connection Error",description:"Failed to join the stream. Please try again.",variant:"destructive"})}},H=async()=>{try{if(n==="host"){if(v==="webrtc")C.current&&C.current.readyState===WebSocket.OPEN&&o&&C.current.send(JSON.stringify({type:"end-stream",data:{streamId:o}}));else if(v==="hls"){if(Ce.current&&Ce.current.isStreamActive()){console.log("Ending HLS stream");try{const J=await Ce.current.stopStream();J.showSavePrompt&&parseInt(o)&&(_(parseInt(o)),I(J.temporaryUrl),g(!0))}catch(J){console.error("Error ending HLS stream:",J),se({title:"Error",description:"Failed to properly end the stream",variant:"destructive"})}Ce.current=null}}else if(v==="cloudflare"){console.log("Ending Cloudflare stream");try{if(D.current.connection&&(D.current.connection.close(),D.current.connection=null),o){const he=await(await fetch(`${window.location.origin}/api/streams/${o}/end`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({protocol:"cloudflare"})})).json();he.showSavePrompt&&parseInt(o)&&(_(parseInt(o)),I(he.temporaryUrl),g(!0))}}catch(J){console.error("Error ending Cloudflare stream:",J),se({title:"Error",description:"Failed to properly end the Cloudflare stream",variant:"destructive"})}}}else n==="viewer"&&o&&C.current&&C.current.readyState===WebSocket.OPEN&&C.current.send(JSON.stringify({type:"leave-stream",data:{streamId:o}}));ie.current&&(ie.current.getTracks().forEach(J=>J.stop()),ie.current=null),k.current&&(k.current.srcObject=null),K.current&&(K.current.srcObject=null),Object.values(De.current).forEach(J=>{J.destroy()}),De.current={},d(!1),Q([]),p(0),se({title:n==="host"?"Stream Ended":"Left Stream",description:n==="host"?"Your live stream has ended":"You have left the stream"})}catch(J){console.error("Error ending stream:",J),se({title:"Error",description:"Failed to properly end the stream. Some resources may not have been cleaned up.",variant:"destructive"}),d(!1)}},oe=async()=>{if(ie.current){const J=ie.current.getVideoTracks();if(J.length>0){const he=!J[0].enabled;J.forEach(Ne=>{Ne.enabled=he}),M(he)}else if(!P)try{const Ne=(await navigator.mediaDevices.getUserMedia({video:{deviceId:ae?{exact:ae}:void 0}})).getVideoTracks()[0];Ne&&(ie.current.addTrack(Ne),M(!0))}catch(he){console.error("Error adding video track:",he),se({title:"Camera Error",description:"Could not enable camera",variant:"destructive"})}}},qe=async()=>{if(ie.current){const J=ie.current.getAudioTracks();if(J.length>0){const he=!J[0].enabled;J.forEach(Ne=>{Ne.enabled=he}),W(he)}else if(!F)try{const Ne=(await navigator.mediaDevices.getUserMedia({audio:{deviceId:ee?{exact:ee}:void 0}})).getAudioTracks()[0];Ne&&(ie.current.addTrack(Ne),W(!0))}catch(he){console.error("Error adding audio track:",he),se({title:"Microphone Error",description:"Could not enable microphone",variant:"destructive"})}}},Et=async()=>{if(ie.current)try{if(!navigator.mediaDevices||typeof navigator.mediaDevices.getDisplayMedia!="function")throw new Error("Screen sharing is not supported in this browser or environment");if(re){if(ie.current.getVideoTracks().forEach(he=>{var Ne;(he.label.includes("screen")||he.label.includes("display"))&&((Ne=ie.current)==null||Ne.removeTrack(he),he.stop())}),P){const Ne=(await navigator.mediaDevices.getUserMedia({video:{deviceId:ae?{exact:ae}:void 0}})).getVideoTracks()[0];Ne&&ie.current.addTrack(Ne)}q(!1),se({title:"Screen Sharing Stopped",description:"Your screen is no longer being shared"})}else try{const J=await navigator.mediaDevices.getDisplayMedia({video:!0,audio:!0});ie.current.getVideoTracks().forEach(Be=>{var mt;(mt=ie.current)==null||mt.removeTrack(Be),Be.stop()});const Ne=J.getVideoTracks()[0];Ne&&(ie.current.addTrack(Ne),Ne.onended=()=>{Et()});const We=J.getAudioTracks();We.length>0&&(ie.current.getAudioTracks().forEach(mt=>{var $r;($r=ie.current)==null||$r.removeTrack(mt)}),We.forEach(mt=>{var $r;($r=ie.current)==null||$r.addTrack(mt)})),q(!0),M(!0),se({title:"Screen Sharing Started",description:"Your screen is now being shared with viewers"})}catch(J){throw J.name==="NotAllowedError"?new Error("Screen sharing permission denied. Please allow access to share your screen."):J}Object.values(De.current).forEach(J=>{try{J._senderMap&&J._senderMap.forEach(he=>{var Ne,We;if(he.track.kind==="video"){const Be=(Ne=ie.current)==null?void 0:Ne.getVideoTracks()[0];Be&&he.replaceTrack(Be)}if(he.track.kind==="audio"){const Be=(We=ie.current)==null?void 0:We.getAudioTracks()[0];Be&&he.replaceTrack(Be)}})}catch(he){console.warn("Error updating peer connection:",he)}})}catch(J){console.error("Error toggling screen share:",J),se({title:"Screen Sharing Error",description:J.message||"Could not share your screen",variant:"destructive"})}},bt=()=>{const J=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15);Z(J),se({title:"Stream Key Generated",description:"Use this key in OBS or other streaming software"})},St=()=>{!de.trim()||!o||!C.current||C.current.readyState!==WebSocket.OPEN||(C.current.send(JSON.stringify({type:"chat-message",data:{streamId:o,message:de.trim()}})),le(""))},ht=()=>{navigator.clipboard.writeText(l).then(()=>{se({title:"Copied!",description:"Stream URL copied to clipboard"})}).catch(J=>{console.error("Failed to copy:",J)})},OI=()=>i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsx("div",{className:"col-span-1 md:col-span-2",children:i.jsxs(Re,{className:"overflow-hidden",children:[i.jsx(Ye,{className:"bg-zinc-950/40 pb-2 pt-4",children:i.jsxs(He,{className:"flex justify-between items-center text-lg",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("span",{children:"Live Stream"}),u&&i.jsx(Ct,{variant:"destructive",className:"animate-pulse",children:"LIVE"})]}),u&&i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(ds,{className:"h-4 w-4 text-white/70"}),i.jsxs("span",{className:"text-white/70 text-sm",children:[f," viewers"]})]})]})}),i.jsxs(Ae,{className:"p-0",children:[i.jsxs("div",{className:"relative aspect-video bg-black",children:[i.jsx("video",{ref:k,autoPlay:!0,muted:!0,playsInline:!0,className:"w-full h-full object-cover"}),i.jsxs("div",{className:"absolute bottom-3 left-0 right-0 flex justify-center space-x-3",children:[i.jsxs(te,{variant:P?"default":"destructive",size:"sm",onClick:oe,className:"rounded-full",children:[P?i.jsx(Ls,{className:"h-4 w-4 mr-1"}):i.jsx(QL,{className:"h-4 w-4 mr-1"}),P?"Camera On":"Camera Off"]}),i.jsxs(te,{variant:F?"default":"destructive",size:"sm",onClick:qe,className:"rounded-full",children:[F?i.jsx(lg,{className:"h-4 w-4 mr-1"}):i.jsx(LL,{className:"h-4 w-4 mr-1"}),F?"Mic On":"Mic Off"]}),u&&navigator.mediaDevices&&typeof navigator.mediaDevices.getDisplayMedia=="function"&&i.jsxs(te,{variant:re?"destructive":"default",size:"sm",onClick:Et,className:"rounded-full",children:[i.jsx(tw,{className:"h-4 w-4 mr-1"}),re?"Stop Sharing":"Share Screen"]}),i.jsxs(te,{variant:"outline",size:"sm",onClick:()=>G(!Y),className:"rounded-full",children:[i.jsx(WL,{className:"h-4 w-4 mr-1"}),"Settings"]})]})]}),Y&&i.jsxs("div",{className:"p-4 bg-zinc-900/80 border-t border-zinc-800",children:[i.jsx("h3",{className:"text-sm font-medium mb-2",children:"Stream Settings"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(Nt,{htmlFor:"camera-select",className:"text-xs",children:"Camera"}),i.jsxs(uo,{value:ae,onValueChange:X,disabled:u,children:[i.jsx(Ni,{id:"camera-select",className:"w-full",children:i.jsx(fo,{placeholder:"Select camera"})}),i.jsxs(_i,{children:[z.videoDevices.map(J=>i.jsx(tr,{value:J.deviceId,children:J.label||`Camera ${J.deviceId.slice(0,5)}...`},J.deviceId)),z.videoDevices.length===0&&i.jsx(tr,{value:"none",disabled:!0,children:"No cameras found"})]})]})]}),i.jsxs("div",{children:[i.jsx(Nt,{htmlFor:"mic-select",className:"text-xs",children:"Microphone"}),i.jsxs(uo,{value:ee,onValueChange:je,disabled:u,children:[i.jsx(Ni,{id:"mic-select",className:"w-full",children:i.jsx(fo,{placeholder:"Select microphone"})}),i.jsxs(_i,{children:[z.audioDevices.map(J=>i.jsx(tr,{value:J.deviceId,children:J.label||`Microphone ${J.deviceId.slice(0,5)}...`},J.deviceId)),z.audioDevices.length===0&&i.jsx(tr,{value:"none",disabled:!0,children:"No microphones found"})]})]})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx(Nt,{className:"text-xs mb-2 block",children:"Audio Source"}),i.jsxs("div",{className:"flex items-center justify-start space-x-4 mb-4",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("input",{type:"radio",id:"mic-source",name:"audio-source",checked:fe==="microphone",onChange:()=>B("microphone"),disabled:u}),i.jsxs(Nt,{htmlFor:"mic-source",className:"cursor-pointer",children:[i.jsx(lg,{className:"h-4 w-4 inline mr-1"}),"Microphone"]})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("input",{type:"radio",id:"system-source",name:"audio-source",checked:fe==="system",onChange:()=>B("system"),disabled:u}),i.jsxs(Nt,{htmlFor:"system-source",className:"cursor-pointer",children:[i.jsx(tw,{className:"h-4 w-4 inline mr-1"}),"System Audio"]})]})]})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx(Nt,{className:"text-xs mb-2 block",children:"Streaming Protocol"}),i.jsxs("div",{className:"flex items-center justify-start space-x-4 mb-4",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("input",{type:"radio",id:"webrtc-protocol",name:"stream-protocol",checked:v==="webrtc",onChange:()=>j("webrtc"),disabled:u}),i.jsxs(Nt,{htmlFor:"webrtc-protocol",className:"cursor-pointer",children:[i.jsx(og,{className:"h-4 w-4 inline mr-1"}),"WebRTC (Low Latency)"]})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("input",{type:"radio",id:"hls-protocol",name:"stream-protocol",checked:v==="hls",onChange:()=>j("hls"),disabled:u}),i.jsxs(Nt,{htmlFor:"hls-protocol",className:"cursor-pointer",children:[i.jsx(Ls,{className:"h-4 w-4 inline mr-1"}),"HLS (High Compatibility)"]})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("input",{type:"radio",id:"cloudflare-protocol",name:"stream-protocol",checked:v==="cloudflare",onChange:()=>j("cloudflare"),disabled:u}),i.jsxs(Nt,{htmlFor:"cloudflare-protocol",className:"cursor-pointer",children:[i.jsx(og,{className:"h-4 w-4 inline mr-1"}),"Cloudflare (Global CDN)"]})]})]})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx(Nt,{htmlFor:"stream-key",className:"text-xs",children:"Stream Key (for OBS/External Software)"}),i.jsxs("div",{className:"flex mt-1",children:[i.jsx(vt,{id:"stream-key",type:"text",value:ne,readOnly:!0,className:"font-mono text-sm flex-grow"}),i.jsxs(te,{onClick:bt,variant:"outline",size:"sm",className:"ml-2",children:[i.jsx(F2,{className:"h-4 w-4 mr-1"}),"Generate"]})]}),i.jsx("p",{className:"text-xs text-zinc-400 mt-1",children:"Use this key in OBS Studio or other streaming software to connect."})]}),(!navigator.mediaDevices||typeof navigator.mediaDevices.getDisplayMedia!="function")&&i.jsx("div",{className:"md:col-span-2 mt-2 p-3 bg-amber-900/20 border border-amber-900/30 rounded-md",children:i.jsxs("p",{className:"text-xs text-amber-400",children:[i.jsx("strong",{children:"Note:"})," Screen sharing is not available in this browser or environment. For screen sharing functionality, please try using a modern browser like Chrome, Firefox, or Edge on a desktop computer."]})})]})]})]}),i.jsx(nr,{className:"bg-zinc-950/40 flex justify-between py-3",children:u?i.jsx(te,{onClick:H,variant:"destructive",className:"w-full",children:"End Stream"}):i.jsx(te,{onClick:T,variant:"default",className:"w-full",children:"Start Streaming"})})]})}),u&&i.jsxs(i.Fragment,{children:[i.jsxs(Re,{children:[i.jsxs(Ye,{children:[i.jsx(He,{className:"text-lg",children:"Share your stream"}),i.jsx(kt,{children:"Use this link to share your stream with others"})]}),i.jsxs(Ae,{children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(vt,{value:l,readOnly:!0,className:"font-mono text-sm"}),i.jsx(te,{onClick:ht,size:"icon",variant:"outline",children:i.jsx(yd,{className:"h-4 w-4"})})]}),i.jsxs("div",{className:"mt-2 text-sm text-zinc-500",children:["Stream ID: ",i.jsx("span",{className:"font-mono",children:o})]})]})]}),i.jsxs(Re,{children:[i.jsx(Ye,{children:i.jsx(He,{className:"text-lg",children:"Live Chat"})}),i.jsxs(Ae,{children:[i.jsx("div",{ref:Pe,className:"h-[200px] overflow-y-auto border rounded-md p-2 mb-2 bg-black/20",children:R.length===0?i.jsx("div",{className:"text-center text-zinc-500 pt-8",children:"Chat messages will appear here"}):R.map((J,he)=>i.jsx("div",{className:`mb-2 ${J.isCurrentUser?"text-right":"text-left"}`,children:i.jsxs("div",{className:`inline-block rounded-lg px-3 py-1 text-sm ${J.isCurrentUser?"bg-purple-700 text-white":"bg-zinc-800 text-white"}`,children:[i.jsx("div",{className:"font-bold text-xs opacity-70",children:J.isCurrentUser?"You":`Anonymous (${J.senderId.slice(0,4)})`}),J.message]})},he))}),i.jsxs("div",{className:"flex space-x-2",children:[i.jsx(vt,{placeholder:"Type a message...",value:de,onChange:J=>le(J.target.value),onKeyDown:J=>{J.key==="Enter"&&St()}}),i.jsx(te,{onClick:St,size:"icon",children:i.jsx(Xd,{className:"h-4 w-4"})})]})]})]})]})]}),LI=()=>i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsx("div",{className:"col-span-1 md:col-span-2",children:i.jsxs(Re,{className:"overflow-hidden",children:[i.jsx(Ye,{className:"bg-zinc-950/40 pb-2 pt-4",children:i.jsxs(He,{className:"flex justify-between items-center text-lg",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("span",{children:"Watching Stream"}),u&&i.jsx(Ct,{variant:"destructive",className:"animate-pulse",children:"LIVE"})]}),u&&i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(ds,{className:"h-4 w-4 text-white/70"}),i.jsxs("span",{className:"text-white/70 text-sm",children:[f," viewers"]})]})]})}),i.jsx(Ae,{className:"p-0",children:i.jsx("div",{className:"relative aspect-video bg-black",children:u?y.streamType==="audio"&&y.hasVisualElement?i.jsxs("div",{className:"relative w-full h-full flex items-center justify-center",children:[y.visualElementType==="image"?i.jsx("img",{src:y.visualElementUrl,alt:"Stream visual",className:"max-w-full max-h-full object-contain"}):i.jsx("video",{src:y.visualElementUrl,autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"max-w-full max-h-full object-contain"}),i.jsx("audio",{ref:K,autoPlay:!0,playsInline:!0,className:"hidden"})]}):v==="cloudflare"?i.jsx("div",{style:{position:"relative",paddingTop:"56.25%",width:"100%",height:"100%"},children:i.jsx("iframe",{src:`https://customer-t2aair0gpwhh9qzs.cloudflarestream.com/${o}/iframe`,style:{border:"none",position:"absolute",top:0,left:0,height:"100%",width:"100%"},allow:"accelerometer; gyroscope; autoplay; encrypted-media; picture-in-picture;",allowFullScreen:!0})}):i.jsx("video",{ref:K,autoPlay:!0,playsInline:!0,className:"w-full h-full object-contain"}):i.jsx("div",{className:"flex items-center justify-center h-full flex-col",children:i.jsxs("div",{className:"text-center p-6",children:[i.jsx("h3",{className:"text-lg font-medium",children:"Join a Stream"}),i.jsx("p",{className:"text-zinc-400 text-sm mb-4",children:"Enter a stream ID to join as a viewer"}),i.jsxs("div",{className:"flex space-x-2 mb-4",children:[i.jsx(vt,{placeholder:"Enter stream ID",value:o,onChange:J=>a(J.target.value),className:"max-w-xs"}),i.jsx(te,{onClick:L,children:"Join"})]})]})})})}),i.jsx(nr,{className:"bg-zinc-950/40 flex justify-between py-3",children:u&&i.jsx(te,{onClick:H,variant:"outline",className:"w-full",children:"Leave Stream"})})]})}),u&&i.jsxs(Re,{className:"md:row-span-1",children:[i.jsx(Ye,{children:i.jsx(He,{className:"text-lg",children:"Live Chat"})}),i.jsxs(Ae,{children:[i.jsx("div",{ref:Pe,className:"h-[300px] overflow-y-auto border rounded-md p-2 mb-2 bg-black/20",children:R.length===0?i.jsx("div",{className:"text-center text-zinc-500 pt-8",children:"Chat messages will appear here"}):R.map((J,he)=>i.jsx("div",{className:`mb-2 ${J.isCurrentUser?"text-right":"text-left"}`,children:i.jsxs("div",{className:`inline-block rounded-lg px-3 py-1 text-sm ${J.isCurrentUser?"bg-purple-700 text-white":"bg-zinc-800 text-white"}`,children:[i.jsx("div",{className:"font-bold text-xs opacity-70",children:J.isCurrentUser?"You":`Anonymous (${J.senderId.slice(0,4)})`}),J.message]})},he))}),i.jsxs("div",{className:"flex space-x-2",children:[i.jsx(vt,{placeholder:"Type a message...",value:de,onChange:J=>le(J.target.value),onKeyDown:J=>{J.key==="Enter"&&St()}}),i.jsx(te,{onClick:St,size:"icon",children:i.jsx(Xd,{className:"h-4 w-4"})})]})]})]})]});return i.jsxs("div",{className:"container mx-auto p-4",children:[i.jsxs(Cn,{defaultValue:e?"viewer":"host",onValueChange:J=>s(J),children:[i.jsxs(cn,{className:"mb-4 mx-auto grid w-full max-w-md grid-cols-2",children:[i.jsx(rt,{value:"host",children:"Host Stream"}),i.jsx(rt,{value:"viewer",children:"Join Stream"})]}),i.jsx(nt,{value:"host",children:OI()}),i.jsx(nt,{value:"viewer",children:LI()})]}),i.jsx(Yz,{isOpen:h,onClose:()=>g(!1),streamId:w,temporaryUrl:E})]})},vs=Object.create(null);vs.open="0";vs.close="1";vs.ping="2";vs.pong="3";vs.message="4";vs.upgrade="5";vs.noop="6";const Sd=Object.create(null);Object.keys(vs).forEach(e=>{Sd[vs[e]]=e});const Og={type:"error",data:"parser error"},sA=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",iA=typeof ArrayBuffer=="function",oA=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,av=({type:e,data:t},r,n)=>sA&&t instanceof Blob?r?n(t):sb(t,n):iA&&(t instanceof ArrayBuffer||oA(t))?r?n(t):sb(new Blob([t]),n):n(vs[e]+(t||"")),sb=(e,t)=>{const r=new FileReader;return r.onload=function(){const n=r.result.split(",")[1];t("b"+(n||""))},r.readAsDataURL(e)};function ib(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let $m;function Xz(e,t){if(sA&&e.data instanceof Blob)return e.data.arrayBuffer().then(ib).then(t);if(iA&&(e.data instanceof ArrayBuffer||oA(e.data)))return t(ib(e.data));av(e,!1,r=>{$m||($m=new TextEncoder),t($m.encode(r))})}const ob="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Gl=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let e=0;e<ob.length;e++)Gl[ob.charCodeAt(e)]=e;const Jz=e=>{let t=e.length*.75,r=e.length,n,s=0,o,a,l,c;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);const u=new ArrayBuffer(t),d=new Uint8Array(u);for(n=0;n<r;n+=4)o=Gl[e.charCodeAt(n)],a=Gl[e.charCodeAt(n+1)],l=Gl[e.charCodeAt(n+2)],c=Gl[e.charCodeAt(n+3)],d[s++]=o<<2|a>>4,d[s++]=(a&15)<<4|l>>2,d[s++]=(l&3)<<6|c&63;return u},eV=typeof ArrayBuffer=="function",lv=(e,t)=>{if(typeof e!="string")return{type:"message",data:aA(e,t)};const r=e.charAt(0);return r==="b"?{type:"message",data:tV(e.substring(1),t)}:Sd[r]?e.length>1?{type:Sd[r],data:e.substring(1)}:{type:Sd[r]}:Og},tV=(e,t)=>{if(eV){const r=Jz(e);return aA(r,t)}else return{base64:!0,data:e}},aA=(e,t)=>{switch(t){case"blob":return e instanceof Blob?e:new Blob([e]);case"arraybuffer":default:return e instanceof ArrayBuffer?e:e.buffer}},lA="",rV=(e,t)=>{const r=e.length,n=new Array(r);let s=0;e.forEach((o,a)=>{av(o,!1,l=>{n[a]=l,++s===r&&t(n.join(lA))})})},nV=(e,t)=>{const r=e.split(lA),n=[];for(let s=0;s<r.length;s++){const o=lv(r[s],t);if(n.push(o),o.type==="error")break}return n};function sV(){return new TransformStream({transform(e,t){Xz(e,r=>{const n=r.length;let s;if(n<126)s=new Uint8Array(1),new DataView(s.buffer).setUint8(0,n);else if(n<65536){s=new Uint8Array(3);const o=new DataView(s.buffer);o.setUint8(0,126),o.setUint16(1,n)}else{s=new Uint8Array(9);const o=new DataView(s.buffer);o.setUint8(0,127),o.setBigUint64(1,BigInt(n))}e.data&&typeof e.data!="string"&&(s[0]|=128),t.enqueue(s),t.enqueue(r)})}})}let Bm;function Ju(e){return e.reduce((t,r)=>t+r.length,0)}function ed(e,t){if(e[0].length===t)return e.shift();const r=new Uint8Array(t);let n=0;for(let s=0;s<t;s++)r[s]=e[0][n++],n===e[0].length&&(e.shift(),n=0);return e.length&&n<e[0].length&&(e[0]=e[0].slice(n)),r}function iV(e,t){Bm||(Bm=new TextDecoder);const r=[];let n=0,s=-1,o=!1;return new TransformStream({transform(a,l){for(r.push(a);;){if(n===0){if(Ju(r)<1)break;const c=ed(r,1);o=(c[0]&128)===128,s=c[0]&127,s<126?n=3:s===126?n=1:n=2}else if(n===1){if(Ju(r)<2)break;const c=ed(r,2);s=new DataView(c.buffer,c.byteOffset,c.length).getUint16(0),n=3}else if(n===2){if(Ju(r)<8)break;const c=ed(r,8),u=new DataView(c.buffer,c.byteOffset,c.length),d=u.getUint32(0);if(d>Math.pow(2,21)-1){l.enqueue(Og);break}s=d*Math.pow(2,32)+u.getUint32(4),n=3}else{if(Ju(r)<s)break;const c=ed(r,s);l.enqueue(lv(o?c:Bm.decode(c),t)),n=0}if(s===0||s>e){l.enqueue(Og);break}}}})}const cA=4;function Gt(e){if(e)return oV(e)}function oV(e){for(var t in Gt.prototype)e[t]=Gt.prototype[t];return e}Gt.prototype.on=Gt.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this};Gt.prototype.once=function(e,t){function r(){this.off(e,r),t.apply(this,arguments)}return r.fn=t,this.on(e,r),this};Gt.prototype.off=Gt.prototype.removeListener=Gt.prototype.removeAllListeners=Gt.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var r=this._callbacks["$"+e];if(!r)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var n,s=0;s<r.length;s++)if(n=r[s],n===t||n.fn===t){r.splice(s,1);break}return r.length===0&&delete this._callbacks["$"+e],this};Gt.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),r=this._callbacks["$"+e],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(r){r=r.slice(0);for(var n=0,s=r.length;n<s;++n)r[n].apply(this,t)}return this};Gt.prototype.emitReserved=Gt.prototype.emit;Gt.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]};Gt.prototype.hasListeners=function(e){return!!this.listeners(e).length};const kh=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,r)=>r(t,0),yn=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),aV="arraybuffer";function uA(e,...t){return t.reduce((r,n)=>(e.hasOwnProperty(n)&&(r[n]=e[n]),r),{})}const lV=yn.setTimeout,cV=yn.clearTimeout;function Th(e,t){t.useNativeTimers?(e.setTimeoutFn=lV.bind(yn),e.clearTimeoutFn=cV.bind(yn)):(e.setTimeoutFn=yn.setTimeout.bind(yn),e.clearTimeoutFn=yn.clearTimeout.bind(yn))}const uV=1.33;function dV(e){return typeof e=="string"?fV(e):Math.ceil((e.byteLength||e.size)*uV)}function fV(e){let t=0,r=0;for(let n=0,s=e.length;n<s;n++)t=e.charCodeAt(n),t<128?r+=1:t<2048?r+=2:t<55296||t>=57344?r+=3:(n++,r+=4);return r}function dA(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function hV(e){let t="";for(let r in e)e.hasOwnProperty(r)&&(t.length&&(t+="&"),t+=encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t}function mV(e){let t={},r=e.split("&");for(let n=0,s=r.length;n<s;n++){let o=r[n].split("=");t[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return t}class pV extends Error{constructor(t,r,n){super(t),this.description=r,this.context=n,this.type="TransportError"}}class cv extends Gt{constructor(t){super(),this.writable=!1,Th(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,r,n){return super.emitReserved("error",new pV(t,r,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const r=lv(t,this.socket.binaryType);this.onPacket(r)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,r={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(r)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const r=hV(t);return r.length?"?"+r:""}}class gV extends cv{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const r=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let n=0;this._polling&&(n++,this.once("pollComplete",function(){--n||r()})),this.writable||(n++,this.once("drain",function(){--n||r()}))}else r()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const r=n=>{if(this.readyState==="opening"&&n.type==="open"&&this.onOpen(),n.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(n)};nV(t,this.socket.binaryType).forEach(r),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,rV(t,r=>{this.doWrite(r,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",r=this.query||{};return this.opts.timestampRequests!==!1&&(r[this.opts.timestampParam]=dA()),!this.supportsBinary&&!r.sid&&(r.b64=1),this.createUri(t,r)}}let fA=!1;try{fA=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const yV=fA;function xV(){}class vV extends gV{constructor(t){if(super(t),typeof location<"u"){const r=location.protocol==="https:";let n=location.port;n||(n=r?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||n!==t.port}}doWrite(t,r){const n=this.request({method:"POST",data:t});n.on("success",r),n.on("error",(s,o)=>{this.onError("xhr post error",s,o)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(r,n)=>{this.onError("xhr poll error",r,n)}),this.pollXhr=t}}class hs extends Gt{constructor(t,r,n){super(),this.createRequest=t,Th(this,n),this._opts=n,this._method=n.method||"GET",this._uri=r,this._data=n.data!==void 0?n.data:null,this._create()}_create(){var t;const r=uA(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");r.xdomain=!!this._opts.xd;const n=this._xhr=this.createRequest(r);try{n.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let s in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(s)&&n.setRequestHeader(s,this._opts.extraHeaders[s])}}catch{}if(this._method==="POST")try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{n.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(n),"withCredentials"in n&&(n.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(n.timeout=this._opts.requestTimeout),n.onreadystatechange=()=>{var s;n.readyState===3&&((s=this._opts.cookieJar)===null||s===void 0||s.parseCookies(n.getResponseHeader("set-cookie"))),n.readyState===4&&(n.status===200||n.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof n.status=="number"?n.status:0)},0))},n.send(this._data)}catch(s){this.setTimeoutFn(()=>{this._onError(s)},0);return}typeof document<"u"&&(this._index=hs.requestsCount++,hs.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=xV,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete hs.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}hs.requestsCount=0;hs.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",ab);else if(typeof addEventListener=="function"){const e="onpagehide"in yn?"pagehide":"unload";addEventListener(e,ab,!1)}}function ab(){for(let e in hs.requests)hs.requests.hasOwnProperty(e)&&hs.requests[e].abort()}const wV=function(){const e=hA({xdomain:!1});return e&&e.responseType!==null}();class bV extends vV{constructor(t){super(t);const r=t&&t.forceBase64;this.supportsBinary=wV&&!r}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new hs(hA,this.uri(),t)}}function hA(e){const t=e.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||yV))return new XMLHttpRequest}catch{}if(!t)try{return new yn[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const mA=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class SV extends cv{get name(){return"websocket"}doOpen(){const t=this.uri(),r=this.opts.protocols,n=mA?{}:uA(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,r,n)}catch(s){return this.emitReserved("error",s)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let r=0;r<t.length;r++){const n=t[r],s=r===t.length-1;av(n,this.supportsBinary,o=>{try{this.doWrite(n,o)}catch{}s&&kh(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",r=this.query||{};return this.opts.timestampRequests&&(r[this.opts.timestampParam]=dA()),this.supportsBinary||(r.b64=1),this.createUri(t,r)}}const zm=yn.WebSocket||yn.MozWebSocket;class jV extends SV{createSocket(t,r,n){return mA?new zm(t,r,n):r?new zm(t,r):new zm(t)}doWrite(t,r){this.ws.send(r)}}class NV extends cv{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const r=iV(Number.MAX_SAFE_INTEGER,this.socket.binaryType),n=t.readable.pipeThrough(r).getReader(),s=sV();s.readable.pipeTo(t.writable),this._writer=s.writable.getWriter();const o=()=>{n.read().then(({done:l,value:c})=>{l||(this.onPacket(c),o())}).catch(l=>{})};o();const a={type:"open"};this.query.sid&&(a.data=`{"sid":"${this.query.sid}"}`),this._writer.write(a).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let r=0;r<t.length;r++){const n=t[r],s=r===t.length-1;this._writer.write(n).then(()=>{s&&kh(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const _V={websocket:jV,webtransport:NV,polling:bV},CV=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,EV=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Lg(e){if(e.length>8e3)throw"URI too long";const t=e,r=e.indexOf("["),n=e.indexOf("]");r!=-1&&n!=-1&&(e=e.substring(0,r)+e.substring(r,n).replace(/:/g,";")+e.substring(n,e.length));let s=CV.exec(e||""),o={},a=14;for(;a--;)o[EV[a]]=s[a]||"";return r!=-1&&n!=-1&&(o.source=t,o.host=o.host.substring(1,o.host.length-1).replace(/;/g,":"),o.authority=o.authority.replace("[","").replace("]","").replace(/;/g,":"),o.ipv6uri=!0),o.pathNames=kV(o,o.path),o.queryKey=TV(o,o.query),o}function kV(e,t){const r=/\/{2,9}/g,n=t.replace(r,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&n.splice(0,1),t.slice(-1)=="/"&&n.splice(n.length-1,1),n}function TV(e,t){const r={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(n,s,o){s&&(r[s]=o)}),r}const Fg=typeof addEventListener=="function"&&typeof removeEventListener=="function",jd=[];Fg&&addEventListener("offline",()=>{jd.forEach(e=>e())},!1);class Mi extends Gt{constructor(t,r){if(super(),this.binaryType=aV,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(r=t,t=null),t){const n=Lg(t);r.hostname=n.host,r.secure=n.protocol==="https"||n.protocol==="wss",r.port=n.port,n.query&&(r.query=n.query)}else r.host&&(r.hostname=Lg(r.host).host);Th(this,r),this.secure=r.secure!=null?r.secure:typeof location<"u"&&location.protocol==="https:",r.hostname&&!r.port&&(r.port=this.secure?"443":"80"),this.hostname=r.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=r.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},r.transports.forEach(n=>{const s=n.prototype.name;this.transports.push(s),this._transportsByName[s]=n}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},r),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=mV(this.opts.query)),Fg&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},jd.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const r=Object.assign({},this.opts.query);r.EIO=cA,r.transport=t,this.id&&(r.sid=this.id);const n=Object.assign({},this.opts,{query:r,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](n)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&Mi.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const r=this.createTransport(t);r.open(),this.setTransport(r)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",r=>this._onClose("transport close",r))}onOpen(){this.readyState="open",Mi.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const r=new Error("server error");r.code=t.data,this._onError(r);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let r=1;for(let n=0;n<this.writeBuffer.length;n++){const s=this.writeBuffer[n].data;if(s&&(r+=dV(s)),n>0&&r>this._maxPayload)return this.writeBuffer.slice(0,n);r+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,kh(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,r,n){return this._sendPacket("message",t,r,n),this}send(t,r,n){return this._sendPacket("message",t,r,n),this}_sendPacket(t,r,n,s){if(typeof r=="function"&&(s=r,r=void 0),typeof n=="function"&&(s=n,n=null),this.readyState==="closing"||this.readyState==="closed")return;n=n||{},n.compress=n.compress!==!1;const o={type:t,data:r,options:n};this.emitReserved("packetCreate",o),this.writeBuffer.push(o),s&&this.once("flush",s),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},r=()=>{this.off("upgrade",r),this.off("upgradeError",r),t()},n=()=>{this.once("upgrade",r),this.once("upgradeError",r)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?n():t()}):this.upgrading?n():t()),this}_onError(t){if(Mi.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,r){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Fg&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const n=jd.indexOf(this._offlineEventListener);n!==-1&&jd.splice(n,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,r),this.writeBuffer=[],this._prevBufferLen=0}}}Mi.protocol=cA;class PV extends Mi{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let r=this.createTransport(t),n=!1;Mi.priorWebsocketSuccess=!1;const s=()=>{n||(r.send([{type:"ping",data:"probe"}]),r.once("packet",f=>{if(!n)if(f.type==="pong"&&f.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",r),!r)return;Mi.priorWebsocketSuccess=r.name==="websocket",this.transport.pause(()=>{n||this.readyState!=="closed"&&(d(),this.setTransport(r),r.send([{type:"upgrade"}]),this.emitReserved("upgrade",r),r=null,this.upgrading=!1,this.flush())})}else{const p=new Error("probe error");p.transport=r.name,this.emitReserved("upgradeError",p)}}))};function o(){n||(n=!0,d(),r.close(),r=null)}const a=f=>{const p=new Error("probe error: "+f);p.transport=r.name,o(),this.emitReserved("upgradeError",p)};function l(){a("transport closed")}function c(){a("socket closed")}function u(f){r&&f.name!==r.name&&o()}const d=()=>{r.removeListener("open",s),r.removeListener("error",a),r.removeListener("close",l),this.off("close",c),this.off("upgrading",u)};r.once("open",s),r.once("error",a),r.once("close",l),this.once("close",c),this.once("upgrading",u),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{n||r.open()},200):r.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const r=[];for(let n=0;n<t.length;n++)~this.transports.indexOf(t[n])&&r.push(t[n]);return r}}let RV=class extends PV{constructor(t,r={}){const n=typeof t=="object"?t:r;(!n.transports||n.transports&&typeof n.transports[0]=="string")&&(n.transports=(n.transports||["polling","websocket","webtransport"]).map(s=>_V[s]).filter(s=>!!s)),super(t,n)}};function AV(e,t="",r){let n=e;r=r||typeof location<"u"&&location,e==null&&(e=r.protocol+"//"+r.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=r.protocol+e:e=r.host+e),/^(https?|wss?):\/\//.test(e)||(typeof r<"u"?e=r.protocol+"//"+e:e="https://"+e),n=Lg(e)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";const o=n.host.indexOf(":")!==-1?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+o+":"+n.port+t,n.href=n.protocol+"://"+o+(r&&r.port===n.port?"":":"+n.port),n}const IV=typeof ArrayBuffer=="function",DV=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,pA=Object.prototype.toString,MV=typeof Blob=="function"||typeof Blob<"u"&&pA.call(Blob)==="[object BlobConstructor]",OV=typeof File=="function"||typeof File<"u"&&pA.call(File)==="[object FileConstructor]";function uv(e){return IV&&(e instanceof ArrayBuffer||DV(e))||MV&&e instanceof Blob||OV&&e instanceof File}function Nd(e,t){if(!e||typeof e!="object")return!1;if(Array.isArray(e)){for(let r=0,n=e.length;r<n;r++)if(Nd(e[r]))return!0;return!1}if(uv(e))return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return Nd(e.toJSON(),!0);for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&Nd(e[r]))return!0;return!1}function LV(e){const t=[],r=e.data,n=e;return n.data=Ug(r,t),n.attachments=t.length,{packet:n,buffers:t}}function Ug(e,t){if(!e)return e;if(uv(e)){const r={_placeholder:!0,num:t.length};return t.push(e),r}else if(Array.isArray(e)){const r=new Array(e.length);for(let n=0;n<e.length;n++)r[n]=Ug(e[n],t);return r}else if(typeof e=="object"&&!(e instanceof Date)){const r={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=Ug(e[n],t));return r}return e}function FV(e,t){return e.data=$g(e.data,t),delete e.attachments,e}function $g(e,t){if(!e)return e;if(e&&e._placeholder===!0){if(typeof e.num=="number"&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}else if(Array.isArray(e))for(let r=0;r<e.length;r++)e[r]=$g(e[r],t);else if(typeof e=="object")for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(e[r]=$g(e[r],t));return e}const UV=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],$V=5;var lt;(function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"})(lt||(lt={}));class BV{constructor(t){this.replacer=t}encode(t){return(t.type===lt.EVENT||t.type===lt.ACK)&&Nd(t)?this.encodeAsBinary({type:t.type===lt.EVENT?lt.BINARY_EVENT:lt.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let r=""+t.type;return(t.type===lt.BINARY_EVENT||t.type===lt.BINARY_ACK)&&(r+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(r+=t.nsp+","),t.id!=null&&(r+=t.id),t.data!=null&&(r+=JSON.stringify(t.data,this.replacer)),r}encodeAsBinary(t){const r=LV(t),n=this.encodeAsString(r.packet),s=r.buffers;return s.unshift(n),s}}function lb(e){return Object.prototype.toString.call(e)==="[object Object]"}class dv extends Gt{constructor(t){super(),this.reviver=t}add(t){let r;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");r=this.decodeString(t);const n=r.type===lt.BINARY_EVENT;n||r.type===lt.BINARY_ACK?(r.type=n?lt.EVENT:lt.ACK,this.reconstructor=new zV(r),r.attachments===0&&super.emitReserved("decoded",r)):super.emitReserved("decoded",r)}else if(uv(t)||t.base64)if(this.reconstructor)r=this.reconstructor.takeBinaryData(t),r&&(this.reconstructor=null,super.emitReserved("decoded",r));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let r=0;const n={type:Number(t.charAt(0))};if(lt[n.type]===void 0)throw new Error("unknown packet type "+n.type);if(n.type===lt.BINARY_EVENT||n.type===lt.BINARY_ACK){const o=r+1;for(;t.charAt(++r)!=="-"&&r!=t.length;);const a=t.substring(o,r);if(a!=Number(a)||t.charAt(r)!=="-")throw new Error("Illegal attachments");n.attachments=Number(a)}if(t.charAt(r+1)==="/"){const o=r+1;for(;++r&&!(t.charAt(r)===","||r===t.length););n.nsp=t.substring(o,r)}else n.nsp="/";const s=t.charAt(r+1);if(s!==""&&Number(s)==s){const o=r+1;for(;++r;){const a=t.charAt(r);if(a==null||Number(a)!=a){--r;break}if(r===t.length)break}n.id=Number(t.substring(o,r+1))}if(t.charAt(++r)){const o=this.tryParse(t.substr(r));if(dv.isPayloadValid(n.type,o))n.data=o;else throw new Error("invalid payload")}return n}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,r){switch(t){case lt.CONNECT:return lb(r);case lt.DISCONNECT:return r===void 0;case lt.CONNECT_ERROR:return typeof r=="string"||lb(r);case lt.EVENT:case lt.BINARY_EVENT:return Array.isArray(r)&&(typeof r[0]=="number"||typeof r[0]=="string"&&UV.indexOf(r[0])===-1);case lt.ACK:case lt.BINARY_ACK:return Array.isArray(r)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class zV{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const r=FV(this.reconPack,this.buffers);return this.finishedReconstruction(),r}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const VV=Object.freeze(Object.defineProperty({__proto__:null,Decoder:dv,Encoder:BV,get PacketType(){return lt},protocol:$V},Symbol.toStringTag,{value:"Module"}));function Dn(e,t,r){return e.on(t,r),function(){e.off(t,r)}}const WV=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class gA extends Gt{constructor(t,r,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=r,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[Dn(t,"open",this.onopen.bind(this)),Dn(t,"packet",this.onpacket.bind(this)),Dn(t,"error",this.onerror.bind(this)),Dn(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...r){var n,s,o;if(WV.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(r.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(r),this;const a={type:lt.EVENT,data:r};if(a.options={},a.options.compress=this.flags.compress!==!1,typeof r[r.length-1]=="function"){const d=this.ids++,f=r.pop();this._registerAckCallback(d,f),a.id=d}const l=(s=(n=this.io.engine)===null||n===void 0?void 0:n.transport)===null||s===void 0?void 0:s.writable,c=this.connected&&!(!((o=this.io.engine)===null||o===void 0)&&o._hasPingExpired());return this.flags.volatile&&!l||(c?(this.notifyOutgoingListeners(a),this.packet(a)):this.sendBuffer.push(a)),this.flags={},this}_registerAckCallback(t,r){var n;const s=(n=this.flags.timeout)!==null&&n!==void 0?n:this._opts.ackTimeout;if(s===void 0){this.acks[t]=r;return}const o=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let l=0;l<this.sendBuffer.length;l++)this.sendBuffer[l].id===t&&this.sendBuffer.splice(l,1);r.call(this,new Error("operation has timed out"))},s),a=(...l)=>{this.io.clearTimeoutFn(o),r.apply(this,l)};a.withError=!0,this.acks[t]=a}emitWithAck(t,...r){return new Promise((n,s)=>{const o=(a,l)=>a?s(a):n(l);o.withError=!0,r.push(o),this.emit(t,...r)})}_addToQueue(t){let r;typeof t[t.length-1]=="function"&&(r=t.pop());const n={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((s,...o)=>n!==this._queue[0]?void 0:(s!==null?n.tryCount>this._opts.retries&&(this._queue.shift(),r&&r(s)):(this._queue.shift(),r&&r(null,...o)),n.pending=!1,this._drainQueue())),this._queue.push(n),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const r=this._queue[0];r.pending&&!t||(r.pending=!0,r.tryCount++,this.flags=r.flags,this.emit.apply(this,r.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:lt.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,r){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,r),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(n=>String(n.id)===t)){const n=this.acks[t];delete this.acks[t],n.withError&&n.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case lt.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case lt.EVENT:case lt.BINARY_EVENT:this.onevent(t);break;case lt.ACK:case lt.BINARY_ACK:this.onack(t);break;case lt.DISCONNECT:this.ondisconnect();break;case lt.CONNECT_ERROR:this.destroy();const n=new Error(t.data.message);n.data=t.data.data,this.emitReserved("connect_error",n);break}}onevent(t){const r=t.data||[];t.id!=null&&r.push(this.ack(t.id)),this.connected?this.emitEvent(r):this.receiveBuffer.push(Object.freeze(r))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const r=this._anyListeners.slice();for(const n of r)n.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const r=this;let n=!1;return function(...s){n||(n=!0,r.packet({type:lt.ACK,id:t,data:s}))}}onack(t){const r=this.acks[t.id];typeof r=="function"&&(delete this.acks[t.id],r.withError&&t.data.unshift(null),r.apply(this,t.data))}onconnect(t,r){this.id=t,this.recovered=r&&this._pid===r,this._pid=r,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:lt.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const r=this._anyListeners;for(let n=0;n<r.length;n++)if(t===r[n])return r.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const r=this._anyOutgoingListeners;for(let n=0;n<r.length;n++)if(t===r[n])return r.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const r=this._anyOutgoingListeners.slice();for(const n of r)n.apply(this,t.data)}}}function Nl(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}Nl.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),r=Math.floor(t*this.jitter*e);e=Math.floor(t*10)&1?e+r:e-r}return Math.min(e,this.max)|0};Nl.prototype.reset=function(){this.attempts=0};Nl.prototype.setMin=function(e){this.ms=e};Nl.prototype.setMax=function(e){this.max=e};Nl.prototype.setJitter=function(e){this.jitter=e};class Bg extends Gt{constructor(t,r){var n;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(r=t,t=void 0),r=r||{},r.path=r.path||"/socket.io",this.opts=r,Th(this,r),this.reconnection(r.reconnection!==!1),this.reconnectionAttempts(r.reconnectionAttempts||1/0),this.reconnectionDelay(r.reconnectionDelay||1e3),this.reconnectionDelayMax(r.reconnectionDelayMax||5e3),this.randomizationFactor((n=r.randomizationFactor)!==null&&n!==void 0?n:.5),this.backoff=new Nl({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(r.timeout==null?2e4:r.timeout),this._readyState="closed",this.uri=t;const s=r.parser||VV;this.encoder=new s.Encoder,this.decoder=new s.Decoder,this._autoConnect=r.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var r;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(r=this.backoff)===null||r===void 0||r.setMin(t),this)}randomizationFactor(t){var r;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(r=this.backoff)===null||r===void 0||r.setJitter(t),this)}reconnectionDelayMax(t){var r;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(r=this.backoff)===null||r===void 0||r.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new RV(this.uri,this.opts);const r=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const s=Dn(r,"open",function(){n.onopen(),t&&t()}),o=l=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",l),t?t(l):this.maybeReconnectOnOpen()},a=Dn(r,"error",o);if(this._timeout!==!1){const l=this._timeout,c=this.setTimeoutFn(()=>{s(),o(new Error("timeout")),r.close()},l);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}return this.subs.push(s),this.subs.push(a),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(Dn(t,"ping",this.onping.bind(this)),Dn(t,"data",this.ondata.bind(this)),Dn(t,"error",this.onerror.bind(this)),Dn(t,"close",this.onclose.bind(this)),Dn(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(r){this.onclose("parse error",r)}}ondecoded(t){kh(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,r){let n=this.nsps[t];return n?this._autoConnect&&!n.active&&n.connect():(n=new gA(this,t,r),this.nsps[t]=n),n}_destroy(t){const r=Object.keys(this.nsps);for(const n of r)if(this.nsps[n].active)return;this._close()}_packet(t){const r=this.encoder.encode(t);for(let n=0;n<r.length;n++)this.engine.write(r[n],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,r){var n;this.cleanup(),(n=this.engine)===null||n===void 0||n.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,r),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const r=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(s=>{s?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",s)):t.onreconnect()}))},r);this.opts.autoUnref&&n.unref(),this.subs.push(()=>{this.clearTimeoutFn(n)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const Fl={};function cc(e,t){typeof e=="object"&&(t=e,e=void 0),t=t||{};const r=AV(e,t.path||"/socket.io"),n=r.source,s=r.id,o=r.path,a=Fl[s]&&o in Fl[s].nsps,l=t.forceNew||t["force new connection"]||t.multiplex===!1||a;let c;return l?c=new Bg(n,t):(Fl[s]||(Fl[s]=new Bg(n,t)),c=Fl[s]),r.query&&!t.query&&(t.query=r.queryKey),c.socket(r.path,t)}Object.assign(cc,{Manager:Bg,Socket:gA,io:cc,connect:cc});function qV(){var de;const[e,t]=GC("/stream/:id"),r=(t==null?void 0:t.id)&&/^\d+$/.test(t.id),n=r?parseInt(t.id):void 0,s=r||t==null?void 0:t.id;console.log("Stream page parameters:",{streamId:n,externalStreamId:s});const o=m.useRef(null),a=m.useRef(null),l=m.useRef(null),c=m.useRef(null),[u,d]=m.useState(!1),[f,p]=m.useState(""),[v,j]=m.useState([]),[y,S]=m.useState(0),[h,g]=m.useState(!1),[w,_]=m.useState(!1),[E,I]=m.useState(.8),[P,M]=m.useState(!1),[F,W]=m.useState(null),[re,q]=m.useState({isLive:!1,viewerCount:0,peakViewerCount:0,audioLevel:-60});m.useRef(null);const Y=m.useRef(null),{toast:G}=pr(),{user:ne}=or(),{data:Z,isLoading:fe,isError:B}=pt({queryKey:n?["/api/streams",n]:["/api/streams/public",s],enabled:!!n||!!s,queryFn:async({queryKey:le})=>{if(n){const C=await fetch(`/api/streams/${n}`);if(!C.ok)throw new Error("Stream not found");return await C.json()}else if(s){const C=await fetch(`/api/streams/public/${s}`);if(!C.ok)throw new Error("Stream not found");return await C.json()}throw new Error("Invalid stream ID")}}),{data:z,isLoading:ue}=pt({queryKey:["/api/users",Z==null?void 0:Z.userId],enabled:!!(Z!=null&&Z.userId)});m.useEffect(()=>{B?G({title:"Stream not found",description:"The stream you're looking for doesn't exist or has ended.",variant:"default"}):Z&&!Z.isLive&&G({title:"Stream not active",description:"This stream is currently offline. Please check back later.",variant:"default"})},[B,Z,G]);const ae=le=>{if(!l.current)return;const C=l.current,k=C.getContext("2d");if(!k)return;k.clearRect(0,0,C.width,C.height);const K=C.width/le.length*2.5,ie=1,De=C.height/255;k.fillStyle="rgba(138, 43, 226, 0.8)";for(let Pe=0;Pe<le.length;Pe++){const Me=le[Pe]*De,se=Pe*(K+ie),ve=C.height-Me,Fe=k.createLinearGradient(se,ve,se,C.height);Fe.addColorStop(0,"rgba(138, 43, 226, 0.8)"),Fe.addColorStop(1,"rgba(185, 103, 255, 0.5)"),k.fillStyle=Fe,k.fillRect(se,ve,K,Me)}};m.useEffect(()=>{if(!n&&!s&&!(Z!=null&&Z.id))return;const le=(Z==null?void 0:Z.id)||n;if(!le)return;console.log("Connecting to chat with Socket.IO for stream:",le);const C=cc(`${window.location.origin}/stream`,{query:{streamId:String(le),userId:ne?String(ne.id):"0",username:ne?ne.displayName||ne.username:"Guest",role:"viewer"},transports:["websocket","polling"]});return Y.current=C,C.on("connect",()=>{console.log("Socket.IO connection established"),g(!0),C.emit("request-chat-history",{streamId:le})}),C.on("chat-message",k=>{j(K=>[...K,{id:Date.now(),userId:parseInt(k.senderId)||0,username:k.username||"Anonymous",message:k.message,timestamp:new Date(k.timestamp)}])}),C.on("chat-history",k=>{Array.isArray(k.messages)&&j(k.messages.map(K=>({...K,timestamp:new Date(K.timestamp)})))}),C.on("viewer-count",k=>{S(k.viewerCount||0)}),C.on("stream-status",k=>{q({isLive:k.isLive||!1,viewerCount:k.viewerCount||0,peakViewerCount:k.peakViewerCount||0,streamId:k.streamId,startTime:k.startTime?new Date(k.startTime):void 0})}),C.on("stream-ended",()=>{G({title:"Stream Ended",description:"The broadcaster has ended the stream.",variant:"default"}),q(k=>({...k,isLive:!1}))}),C.on("disconnect",k=>{console.log(`Socket.IO disconnected: ${k}`),g(!1)}),C.on("connect_error",k=>{console.error("Socket.IO connection error:",k),g(!1)}),()=>{Y.current&&(Y.current.disconnect(),Y.current=null)}},[n,s,Z==null?void 0:Z.id,ne,G]),m.useEffect(()=>{if(!n)return;const le=(Z==null?void 0:Z.isLive)||re.isLive;if(Z&&!le){console.log("Stream exists but isn't live - not connecting to WebSocket");return}return console.log("Stream status check:",{streamId:n,isLive:Z==null?void 0:Z.isLive,statusIsLive:re.isLive,isStreamActive:le}),(async()=>{if(!le&&Z){console.log("Stream not active, aborting audio connection");return}try{_(!1);const k=window.location.protocol==="https:"?"wss:":"ws:",K=window.location.hostname.endsWith(".replit.app")||window.location.hostname.includes("replit")||window.location.hostname==="localhost";let ie=window.location.host;K&&window.location.hostname!=="localhost"&&ie.includes(":")&&(ie=window.location.hostname);const De=(Z==null?void 0:Z.streamKey)||"",Pe=`${k}//${ie}/audio?streamId=${n}&role=listener&streamKey=${De}`;console.log("Environment info:",{isReplit:K,hostname:window.location.hostname,protocol:k,host:ie}),console.log(`Connecting to audio streaming WebSocket as listener: ${Pe}`);const Me=new WebSocket(Pe),se=new AudioContext,ve=se.createGain();ve.gain.value=E;const Fe=se.createAnalyser();Fe.fftSize=256;const gt=new Uint8Array(Fe.frequencyBinCount);ve.connect(Fe),Fe.connect(se.destination),Me.onopen=()=>{_(!0),G({title:"Audio stream connected",description:"You are now listening to the live audio stream.",variant:"default"})},Me.onmessage=async U=>{try{if(U.data instanceof Blob||U.data instanceof ArrayBuffer){let V;U.data instanceof Blob?V=await U.data.arrayBuffer():V=U.data,se.decodeAudioData(V,pe=>{const ye=se.createBufferSource();ye.buffer=pe,ye.connect(ve),ye.start(0),Fe.getByteFrequencyData(gt),W(new Uint8Array(gt)),ae(gt)},pe=>{console.error("Error decoding audio data:",pe)})}else if(typeof U.data=="string")try{const V=JSON.parse(U.data);V.type==="stream_status"?q({isLive:V.isLive||!1,viewerCount:V.viewerCount||0,peakViewerCount:V.peakViewerCount||0,streamId:V.streamId,startTime:V.startTime?new Date(V.startTime):void 0,audioLevel:V.audioLevel!==void 0?V.audioLevel:re.audioLevel}):V.type==="audio_level"&&q(pe=>({...pe,audioLevel:V.level||pe.audioLevel}))}catch(V){console.error("Error parsing control message:",V)}}catch(V){console.error("Error processing audio data:",V)}},Me.onclose=()=>{_(!1),w&&G({title:"Audio stream ended",description:"The broadcaster has ended the stream."})},Me.onerror=U=>{_(!1),console.error("Audio WebSocket error:",U),console.log("Connection details:",{url:Pe.replace(/streamKey=([^&]+)/,"streamKey=****"),readyState:Me?Me.readyState:"socket_not_initialized",streamId:n,role:"listener",hasStreamKey:!!De}),G({title:"Audio stream offline",description:"The stream is currently offline or unavailable.",variant:"default"})};const A=()=>{w&&l.current&&(Fe.getByteFrequencyData(gt),W(new Uint8Array(gt)),ae(gt)),requestAnimationFrame(A)};return A(),()=>{Me&&Me.readyState===WebSocket.OPEN&&Me.close(),se&&se.state!=="closed"&&se.close()}}catch(k){return console.error("Error setting up audio stream:",k),G({title:"Connection error",description:"Failed to connect to audio stream.",variant:"destructive"}),()=>{}}})(),()=>{a.current&&(a.current.pause(),a.current.src="")}},[n,E,G,ae]),m.useEffect(()=>{v.length||j([]),o.current&&R.thumbnailUrl&&(o.current.poster=R.thumbnailUrl),c.current&&(c.current.scrollTop=c.current.scrollHeight)},[]),m.useEffect(()=>{c.current&&(c.current.scrollTop=c.current.scrollHeight)},[v]);const X=le=>{if(le.preventDefault(),!f.trim())return;const C=(Z==null?void 0:Z.id)||n;if(Y.current&&Y.current.connected&&C)Y.current.emit("chat-message",{streamId:C,message:f,username:(ne==null?void 0:ne.displayName)||(ne==null?void 0:ne.username)||"Guest"}),p("");else{G({title:"Connection issue",description:"Cannot send message, trying to reconnect...",variant:"destructive"});const k={id:Date.now(),userId:(ne==null?void 0:ne.id)||0,username:(ne==null?void 0:ne.displayName)||(ne==null?void 0:ne.username)||"Guest",message:f,timestamp:new Date};j([...v,k]),p("")}},ee=()=>{d(!u)},je=le=>le.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),Ce={title:"Loading stream...",description:"Stream information is loading",viewerCount:0,tags:[]},D={displayName:"Loading...",followerCount:0},R=Z||Ce,Q=z||D;return i.jsxs("div",{className:"flex flex-col min-h-screen bg-dark-300 text-white",children:[i.jsx(Yo,{}),i.jsxs("main",{className:"flex flex-1 pt-14 md:pt-16",children:[i.jsx(Sl,{}),i.jsx("div",{className:"flex-1 md:ml-60 pb-20 md:pb-24",children:i.jsx("div",{className:"max-w-7xl mx-auto px-4 py-5",children:i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[i.jsxs("div",{className:"lg:col-span-2",children:[i.jsx("div",{className:"bg-black rounded-lg overflow-hidden aspect-video",children:fe?i.jsx(tt,{className:"w-full h-full"}):Z!=null&&Z.isLive||re.isLive?i.jsx(Zz,{initialStreamId:n==null?void 0:n.toString(),userId:ne==null?void 0:ne.id,userName:ne==null?void 0:ne.displayName}):i.jsxs("div",{className:"flex flex-col items-center justify-center h-full bg-black/80 p-4 text-center",children:[i.jsx("h3",{className:"text-xl font-bold mb-2",children:"Stream Offline"}),i.jsx("p",{className:"text-gray-300 mb-4",children:"This stream is currently not broadcasting."}),R.thumbnailUrl?i.jsxs("div",{className:"relative w-full max-w-md overflow-hidden rounded shadow-lg",children:[i.jsx("img",{src:R.thumbnailUrl,alt:"Stream thumbnail",className:"w-full opacity-70"}),i.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:i.jsx("div",{className:"bg-black/60 px-4 py-2 rounded",children:"OFFLINE"})})]}):i.jsxs("video",{ref:o,className:"w-full max-w-md object-contain opacity-50",controls:!1,playsInline:!0,poster:R.thumbnailUrl||void 0,children:[i.jsx("source",{src:"",type:"video/mp4"}),"Your browser does not support the video tag."]})]})}),i.jsx("div",{className:"mt-4",children:fe||ue?i.jsxs("div",{className:"space-y-2",children:[i.jsx(tt,{className:"h-6 w-3/4"}),i.jsxs("div",{className:"flex space-x-2",children:[i.jsx(tt,{className:"h-10 w-10 rounded-full"}),i.jsxs("div",{className:"space-y-1",children:[i.jsx(tt,{className:"h-4 w-32"}),i.jsx(tt,{className:"h-3 w-24"})]})]})]}):i.jsxs(i.Fragment,{children:[i.jsx("h1",{className:"text-xl font-bold",children:R.title}),i.jsxs("div",{className:"flex items-center justify-between mt-2",children:[i.jsxs("div",{className:"flex items-start space-x-2",children:[i.jsxs(ys,{className:"w-10 h-10",children:[i.jsx(Yi,{src:Q.profileImageUrl||void 0}),i.jsx(Ws,{children:Q.displayName.charAt(0)})]}),i.jsxs("div",{children:[i.jsx("h2",{className:"font-medium",children:Q.displayName}),i.jsxs("p",{className:"text-sm text-gray-400",children:[Q.followerCount?Q.followerCount.toLocaleString():"0"," followers"]})]})]}),i.jsx(te,{onClick:ee,variant:u?"outline":"default",className:`${u?"bg-dark-100 hover:bg-dark-300":"bg-primary hover:bg-primary/80"}`,children:u?"Following":"Follow"})]}),i.jsx(Bi,{className:"my-4 bg-dark-100"}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[Z!=null&&Z.isLive||re.isLive?i.jsxs(Ct,{className:"bg-[#00b074] hover:bg-[#00b074]/80",children:[i.jsx("span",{className:"inline-block w-2 h-2 bg-white rounded-full animate-pulse mr-1.5"}),"LIVE"]}):i.jsxs(Ct,{className:"bg-gray-600 hover:bg-gray-500",children:[i.jsx("span",{className:"inline-block w-2 h-2 bg-gray-400 mr-1.5"}),"OFFLINE"]}),i.jsxs(Ct,{variant:"outline",className:"bg-dark-100 hover:bg-dark-100",children:[i.jsx(ds,{size:14,className:"mr-1"}),(y||R.viewerCount||0).toLocaleString()," viewers"]}),(de=R.tags)==null?void 0:de.map((le,C)=>i.jsx(Ct,{variant:"outline",className:"bg-dark-100 hover:bg-dark-100",children:le},C))]}),i.jsx("p",{className:"text-gray-300",children:R.description})]}),i.jsxs("div",{className:"mt-4 space-y-3",children:[re.audioLevel!==void 0&&i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsxs("span",{className:"text-xs min-w-[50px] text-gray-400",children:[Math.round(re.audioLevel)," dB"]}),i.jsx("div",{className:"flex-1 h-1.5 bg-gray-700 rounded-full overflow-hidden",children:i.jsx("div",{className:`h-full transition-all duration-100 ${re.audioLevel>-12?re.audioLevel>-6?"bg-red-500":"bg-yellow-500":"bg-emerald-500"}`,style:{width:`${Math.min(100,Math.max(0,(re.audioLevel+60)/60*100))}%`}})})]}),i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(te,{variant:"ghost",size:"icon",className:"h-10 w-10 rounded-full",onClick:()=>M(!P),children:P?i.jsx(dx,{className:"h-5 w-5 text-gray-400"}):i.jsx(eh,{className:"h-5 w-5 text-gray-200"})}),i.jsx(_o,{className:"w-32",value:[P?0:E*100],min:0,max:100,step:1,onValueChange:le=>{const C=le[0]/100;I(C),M(C===0),a.current&&(a.current.volume=C)}})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(bL,{className:"h-5 w-5 text-gray-400"}),i.jsx("span",{className:"text-sm text-gray-400",children:"Audio Visualization"})]}),i.jsx("div",{className:"flex ml-auto space-x-2",children:i.jsx(Ct,{variant:w?"default":"outline",className:w?"bg-green-600":"bg-transparent",children:w?"Audio Connected":"No Audio"})})]}),i.jsx("div",{className:"bg-dark-100 rounded-md overflow-hidden aspect-[4/1]",children:i.jsx("canvas",{ref:l,className:"w-full h-full",width:600,height:150})}),i.jsx("audio",{ref:a,className:"hidden",autoPlay:!0,muted:P})]})]})})]}),i.jsxs("div",{className:"bg-dark-200 rounded-lg overflow-hidden flex flex-col h-[600px]",children:[i.jsxs("div",{className:"p-3 border-b border-dark-100 flex justify-between items-center",children:[i.jsx("h3",{className:"font-medium",children:"Live Chat"}),i.jsx("div",{className:"flex items-center text-xs",children:h?i.jsxs("span",{className:"flex items-center text-green-500",children:[i.jsx("span",{className:"inline-block w-2 h-2 bg-green-500 rounded-full animate-pulse mr-1.5"}),"Connected"]}):i.jsxs("span",{className:"flex items-center text-red-500",children:[i.jsx("span",{className:"inline-block w-2 h-2 bg-red-500 rounded-full mr-1.5"}),"Disconnected"]})})]}),i.jsx("div",{ref:c,className:"flex-1 overflow-y-auto p-3 space-y-3",children:v.length>0?v.map(le=>i.jsxs("div",{className:"flex space-x-2",children:[i.jsx("div",{className:"shrink-0",children:i.jsx(ys,{className:"w-6 h-6",children:i.jsx(Ws,{className:"text-xs",children:le.username[0]})})}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("span",{className:`text-sm font-medium ${le.username===(ne==null?void 0:ne.displayName)?"text-primary":"text-gray-300"}`,children:le.username}),i.jsx("span",{className:"text-xs text-gray-500",children:je(le.timestamp)})]}),i.jsx("p",{className:"text-sm text-gray-200 break-words",children:le.message})]})]},le.id)):i.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-400 text-sm",children:[i.jsx("p",{children:"No messages yet"}),i.jsx("p",{className:"mt-2",children:"Be the first to chat!"})]})}),i.jsxs("form",{onSubmit:X,className:"p-3 border-t border-dark-100 flex",children:[i.jsx(vt,{type:"text",value:f,onChange:le=>p(le.target.value),placeholder:"Send a message",className:"bg-dark-100 border-dark-100 focus-visible:ring-primary"}),i.jsx(te,{type:"submit",size:"icon",className:"ml-2 bg-primary hover:bg-primary/80",children:i.jsx(Xd,{size:16})})]})]})]})})})]}),i.jsxs("div",{className:"fixed bottom-16 left-0 right-0 bg-dark-200 border-t border-dark-100",children:[i.jsx("div",{className:"h-12 px-4",children:i.jsx(XB,{audioLevel:typeof re.audioLevel=="number"?re.audioLevel:-60})}),i.jsx(Xo,{})]}),i.jsx(Zo,{})]})}function Kt({size:e="md",className:t}){const r={sm:"h-4 w-4",md:"h-6 w-6",lg:"h-8 w-8"};return i.jsxs("div",{role:"status",className:we("animate-spin",r[e],t),children:[i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",className:"w-full h-full",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),i.jsx("span",{className:"sr-only",children:"Loading..."})]})}function HV({recording:e}){return i.jsxs(Re,{className:"overflow-hidden hover:shadow-md transition-shadow",children:[i.jsx("div",{className:"p-0",children:i.jsxs("div",{className:"aspect-video relative bg-primary/10",children:[i.jsx("img",{src:e.coverUrl||`https://source.unsplash.com/random/600x340?music=${e.id}`,alt:e.title,className:"w-full h-full object-cover"}),i.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/40 opacity-0 hover:opacity-100 transition-opacity",children:i.jsx(te,{variant:"ghost",size:"icon",className:"h-12 w-12 rounded-full bg-white/20 hover:bg-white/30 text-white",children:i.jsx(HL,{className:"h-6 w-6"})})})]})}),i.jsxs(Ae,{className:"p-4",children:[i.jsx(Oe,{href:`/track/${e.id}`,children:i.jsx("h3",{className:"font-medium text-lg hover:text-primary truncate",children:e.title})}),i.jsxs("div",{className:"flex justify-between mt-2 items-center",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"h-6 w-6 rounded-full overflow-hidden bg-primary/10",children:i.jsx("img",{src:`https://source.unsplash.com/random/50x50?portrait=${e.userId}`,alt:"User",className:"h-full w-full object-cover"})}),i.jsx("span",{className:"text-sm",children:e.artistName||`Creator ${e.userId}`})]}),i.jsxs("div",{className:"flex items-center text-xs text-muted-foreground",children:[i.jsx(Nr,{className:"h-3 w-3 mr-1"}),e.playCount||0," plays"]})]})]})]})}function KV(){Nn();const[e,t]=m.useState("live"),{user:r}=or(),{data:n,isLoading:s}=pt({queryKey:["/api/streams/featured"],queryFn:rh}),{data:o,isLoading:a}=pt({queryKey:["/api/tracks/recent"],queryFn:uu}),{data:l,isLoading:c}=pt({queryKey:["/api/streams/user",r==null?void 0:r.id],queryFn:()=>r?gx(r.id):Promise.resolve([]),enabled:!!r});return i.jsxs("div",{className:"min-h-screen bg-background",children:[i.jsx(Yo,{}),i.jsxs("div",{className:"flex",children:[i.jsx(Sl,{}),i.jsx("main",{className:"flex-1 px-4 pt-16 pb-20 md:pb-10 lg:pl-72",children:i.jsxs("div",{className:"container max-w-6xl mx-auto pt-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h1",{className:"text-3xl font-bold",children:"Streams"}),i.jsx(te,{asChild:!0,children:i.jsxs(Oe,{href:"/go-live",children:[i.jsx(us,{className:"mr-2 h-4 w-4"}),"Go Live"]})})]}),i.jsxs(Cn,{defaultValue:e,onValueChange:t,className:"w-full",children:[i.jsxs(cn,{className:"w-full grid grid-cols-3 mb-6",children:[i.jsx(rt,{value:"live",children:"Live Streams"}),i.jsx(rt,{value:"recordings",children:"Recordings"}),r&&i.jsx(rt,{value:"my-streams",children:"My Streams"})]}),i.jsx(nt,{value:"live",className:"mt-4",children:s?i.jsx("div",{className:"flex justify-center py-12",children:i.jsx(Kt,{size:"lg"})}):n&&n.length>0?i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:n.map(u=>i.jsx(Di,{stream:u},u.id))}):i.jsx(Re,{className:"border-dashed",children:i.jsxs(Ae,{className:"py-12 text-center",children:[i.jsx("p",{className:"text-muted-foreground mb-4",children:"No live streams available right now."}),i.jsx(te,{asChild:!0,children:i.jsx(Oe,{href:"/go-live",children:"Start Streaming"})})]})})}),i.jsx(nt,{value:"recordings",className:"mt-4",children:a?i.jsx("div",{className:"flex justify-center py-12",children:i.jsx(Kt,{size:"lg"})}):o&&o.length>0?i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:o.map(u=>i.jsx(HV,{recording:u},u.id))}):i.jsx(Re,{className:"border-dashed",children:i.jsx(Ae,{className:"py-12 text-center",children:i.jsx("p",{className:"text-muted-foreground mb-4",children:"No recordings available yet."})})})}),r&&i.jsx(nt,{value:"my-streams",className:"mt-4",children:c?i.jsx("div",{className:"flex justify-center py-12",children:i.jsx(Kt,{size:"lg"})}):l&&l.length>0?i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:l.map(u=>i.jsx(Di,{stream:u,isOwner:!0},u.id))}):i.jsx(Re,{className:"border-dashed",children:i.jsxs(Ae,{className:"py-12 text-center",children:[i.jsx("p",{className:"text-muted-foreground mb-4",children:"You haven't created any streams yet."}),i.jsx(te,{asChild:!0,children:i.jsx(Oe,{href:"/go-live",children:"Start Your First Stream"})})]})})})]})]})})]}),i.jsx(Zo,{}),i.jsx(Xo,{})]})}function GV(){const[,e]=GC("/profile/:username"),t=e==null?void 0:e.username,[r,n]=m.useState(!1),{user:s}=or(),{data:o,isLoading:a}=pt({queryKey:[`/api/users/by-username/${t}`],enabled:!!t}),{data:l,isLoading:c}=pt({queryKey:[`/api/streams/user/${o==null?void 0:o.id}`],enabled:!!o}),{data:u,isLoading:d}=pt({queryKey:[`/api/tracks/user/${o==null?void 0:o.id}`],enabled:!!o}),f=o||{username:"",displayName:"Loading...",bio:"Loading profile information...",profileImageUrl:"",isStreaming:!1,followerCount:0,createdAt:new Date},p=l||[],v=u||[],j=(s==null?void 0:s.id)===(o==null?void 0:o.id),y=()=>{n(!r)};return i.jsxs("div",{className:"flex flex-col min-h-screen bg-dark-300 text-white",children:[i.jsx(Yo,{}),i.jsxs("main",{className:"flex flex-1 pt-14 md:pt-16",children:[i.jsx(Sl,{}),i.jsx("div",{className:"flex-1 md:ml-60 pb-20 md:pb-24",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-5",children:[i.jsx("div",{className:"mb-8",children:a?i.jsxs("div",{className:"flex flex-col sm:flex-row items-center sm:items-start space-y-4 sm:space-y-0 sm:space-x-6",children:[i.jsx(tt,{className:"w-32 h-32 rounded-full"}),i.jsxs("div",{className:"space-y-2 text-center sm:text-left",children:[i.jsx(tt,{className:"h-8 w-48"}),i.jsx(tt,{className:"h-4 w-32"}),i.jsx(tt,{className:"h-16 w-full max-w-md"})]})]}):i.jsxs("div",{className:"flex flex-col sm:flex-row items-center sm:items-start space-y-4 sm:space-y-0 sm:space-x-6",children:[i.jsxs(ys,{className:"w-32 h-32 border-2 border-primary",children:[i.jsx(Yi,{src:f.profileImageUrl}),i.jsx(Ws,{children:f.displayName.charAt(0)})]}),i.jsxs("div",{className:"text-center sm:text-left",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:space-x-4",children:[i.jsx("h1",{className:"text-2xl font-bold",children:f.displayName}),f.isStreaming&&i.jsxs(Ct,{className:"bg-[#00b074] hover:bg-[#00b074]/80 mt-1 sm:mt-0 self-center",children:[i.jsx("span",{className:"inline-block w-2 h-2 bg-white rounded-full animate-pulse mr-1.5"}),"LIVE NOW"]})]}),i.jsxs("p",{className:"text-gray-400 mt-1",children:["@",f.username,"  ",f.followerCount.toLocaleString()," followers"]}),i.jsx("p",{className:"text-gray-300 mt-2 max-w-md",children:f.bio}),i.jsx(te,{onClick:y,variant:r?"outline":"default",className:`mt-4 ${r?"bg-dark-100 hover:bg-dark-300":"bg-primary hover:bg-primary/80"}`,children:r?"Following":"Follow"})]})]})}),i.jsxs(Cn,{defaultValue:"streams",className:"w-full",children:[i.jsxs(cn,{className:"w-full bg-dark-200 mb-4",children:[i.jsx(rt,{value:"streams",className:"flex-1",children:"Streams"}),i.jsx(rt,{value:"tracks",className:"flex-1",children:"Music"}),i.jsx(rt,{value:"about",className:"flex-1",children:"About"})]}),i.jsx(nt,{value:"streams",children:i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:c?Array(3).fill(0).map((S,h)=>i.jsxs("div",{className:"bg-dark-200 rounded-lg overflow-hidden",children:[i.jsx(tt,{className:"w-full h-40"}),i.jsxs("div",{className:"p-3",children:[i.jsx(tt,{className:"h-5 w-3/4 mb-2"}),i.jsxs("div",{className:"flex space-x-2",children:[i.jsx(tt,{className:"h-5 w-12"}),i.jsx(tt,{className:"h-5 w-16"})]})]})]},h)):p.length>0?p.map(S=>i.jsx(Di,{stream:S,isOwner:j},S.id)):i.jsx("div",{className:"col-span-full py-20 text-center",children:i.jsx("p",{className:"text-gray-400",children:"No streams yet"})})})}),i.jsx(nt,{value:"tracks",children:i.jsx("div",{className:"space-y-3",children:d?Array(3).fill(0).map((S,h)=>i.jsx("div",{className:"bg-dark-200 p-3 rounded-lg",children:i.jsxs("div",{className:"flex space-x-3",children:[i.jsx(tt,{className:"w-16 h-16 rounded"}),i.jsxs("div",{className:"flex-1 space-y-2",children:[i.jsx(tt,{className:"h-5 w-3/4"}),i.jsx(tt,{className:"h-3 w-1/2"}),i.jsx(tt,{className:"h-1.5 w-full rounded-full"})]})]})},h)):v.length>0?v.map(S=>i.jsx(zi,{track:S},S.id)):i.jsx("div",{className:"py-20 text-center",children:i.jsx("p",{className:"text-gray-400",children:"No tracks yet"})})})}),i.jsx(nt,{value:"about",children:i.jsxs("div",{className:"bg-dark-200 rounded-lg p-6",children:[i.jsxs("h3",{className:"text-lg font-medium mb-3",children:["About ",f.displayName]}),i.jsx("p",{className:"text-gray-300 mb-6",children:f.bio}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"text-sm font-medium text-gray-400 mb-2",children:"Account Info"}),i.jsxs("p",{className:"text-sm mb-1",children:[i.jsx("span",{className:"text-gray-400",children:"Member since:"})," ",new Date(f.createdAt).toLocaleDateString()]}),i.jsxs("p",{className:"text-sm",children:[i.jsx("span",{className:"text-gray-400",children:"Username:"})," @",f.username]})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-sm font-medium text-gray-400 mb-2",children:"Stats"}),i.jsxs("p",{className:"text-sm mb-1",children:[i.jsx("span",{className:"text-gray-400",children:"Followers:"})," ",f.followerCount.toLocaleString()]}),i.jsxs("p",{className:"text-sm mb-1",children:[i.jsx("span",{className:"text-gray-400",children:"Tracks:"})," ",v.length]}),i.jsxs("p",{className:"text-sm",children:[i.jsx("span",{className:"text-gray-400",children:"Streams:"})," ",p.length]})]})]})]})})]})]})})]}),i.jsx(Xo,{}),i.jsx(Zo,{})]})}function QV(){const{toast:e}=pr(),{data:t,isLoading:r,error:n}=pt({queryKey:["/api/posts/recent"],queryFn:()=>eE()});return r?i.jsx("div",{className:"flex items-center justify-center h-96",children:i.jsx(Kt,{size:"lg"})}):n?(e({title:"Error",description:"Failed to load posts",variant:"destructive"}),i.jsx("div",{className:"flex flex-col items-center justify-center h-96",children:i.jsx("p",{className:"text-destructive",children:"Failed to load posts"})})):i.jsxs("div",{className:"container mx-auto py-4 md:py-6 px-4 md:px-6",children:[i.jsx("h1",{className:"text-2xl md:text-3xl font-bold mb-4 md:mb-6 bg-gradient-to-r from-purple-400 to-pink-600 text-transparent bg-clip-text",children:"Community Posts"}),i.jsxs(Cn,{defaultValue:"all",className:"mb-8",children:[i.jsxs(cn,{children:[i.jsx(rt,{value:"all",children:"All Posts"}),i.jsx(rt,{value:"image",children:"Images"}),i.jsx(rt,{value:"text",children:"Text"})]}),i.jsx(nt,{value:"all",className:"mt-4",children:i.jsx("div",{className:"grid grid-cols-1 gap-6",children:t==null?void 0:t.map(s=>i.jsx(lc,{post:s},s.id))})}),i.jsx(nt,{value:"image",className:"mt-4",children:i.jsx("div",{className:"grid grid-cols-1 gap-6",children:t==null?void 0:t.filter(s=>s.postType==="image").map(s=>i.jsx(lc,{post:s},s.id))})}),i.jsx(nt,{value:"text",className:"mt-4",children:i.jsx("div",{className:"grid grid-cols-1 gap-6",children:t==null?void 0:t.filter(s=>s.postType==="text").map(s=>i.jsx(lc,{post:s},s.id))})})]})]})}var bu=e=>e.type==="checkbox",ho=e=>e instanceof Date,Rr=e=>e==null;const yA=e=>typeof e=="object";var qt=e=>!Rr(e)&&!Array.isArray(e)&&yA(e)&&!ho(e),xA=e=>qt(e)&&e.target?bu(e.target)?e.target.checked:e.target.value:e,YV=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,vA=(e,t)=>e.has(YV(t)),ZV=e=>{const t=e.constructor&&e.constructor.prototype;return qt(t)&&t.hasOwnProperty("isPrototypeOf")},fv=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function lr(e){let t;const r=Array.isArray(e),n=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else if(!(fv&&(e instanceof Blob||n))&&(r||qt(e)))if(t=r?[]:{},!r&&!ZV(e))t=e;else for(const s in e)e.hasOwnProperty(s)&&(t[s]=lr(e[s]));else return e;return t}var Ph=e=>Array.isArray(e)?e.filter(Boolean):[],zt=e=>e===void 0,be=(e,t,r)=>{if(!t||!qt(e))return r;const n=Ph(t.split(/[,[\].]+?/)).reduce((s,o)=>Rr(s)?s:s[o],e);return zt(n)||n===e?zt(e[t])?r:e[t]:n},Zr=e=>typeof e=="boolean",hv=e=>/^\w*$/.test(e),wA=e=>Ph(e.replace(/["|']|\]/g,"").split(/\.|\[/)),xt=(e,t,r)=>{let n=-1;const s=hv(t)?[t]:wA(t),o=s.length,a=o-1;for(;++n<o;){const l=s[n];let c=r;if(n!==a){const u=e[l];c=qt(u)||Array.isArray(u)?u:isNaN(+s[n+1])?{}:[]}if(l==="__proto__"||l==="constructor"||l==="prototype")return;e[l]=c,e=e[l]}};const pf={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Un={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},_s={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},bA=$e.createContext(null),Rh=()=>$e.useContext(bA),XV=e=>{const{children:t,...r}=e;return $e.createElement(bA.Provider,{value:r},t)};var SA=(e,t,r,n=!0)=>{const s={defaultValues:t._defaultValues};for(const o in e)Object.defineProperty(s,o,{get:()=>{const a=o;return t._proxyFormState[a]!==Un.all&&(t._proxyFormState[a]=!n||Un.all),r&&(r[a]=!0),e[a]}});return s};function JV(e){const t=Rh(),{control:r=t.control,disabled:n,name:s,exact:o}=e||{},[a,l]=$e.useState(r._formState),c=$e.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1}),u=$e.useRef(s);return u.current=s,$e.useEffect(()=>r._subscribe({name:u.current,formState:c.current,exact:o,callback:d=>{!n&&l({...r._formState,...d})}}),[r,n,o]),$e.useEffect(()=>{c.current.isValid&&r._setValid(!0)},[r]),$e.useMemo(()=>SA(a,r,c.current,!1),[a,r])}var as=e=>typeof e=="string",jA=(e,t,r,n,s)=>as(e)?(n&&t.watch.add(e),be(r,e,s)):Array.isArray(e)?e.map(o=>(n&&t.watch.add(o),be(r,o))):(n&&(t.watchAll=!0),r);function e7(e){const t=Rh(),{control:r=t.control,name:n,defaultValue:s,disabled:o,exact:a}=e||{},l=$e.useRef(n),c=$e.useRef(s);l.current=n,$e.useEffect(()=>r._subscribe({name:l.current,formState:{values:!0},exact:a,callback:f=>!o&&d(jA(l.current,r._names,f.values||r._formValues,!1,c.current))}),[r,o,a]);const[u,d]=$e.useState(r._getWatch(n,s));return $e.useEffect(()=>r._removeUnmounted()),u}function t7(e){const t=Rh(),{name:r,disabled:n,control:s=t.control,shouldUnregister:o}=e,a=vA(s._names.array,r),l=e7({control:s,name:r,defaultValue:be(s._formValues,r,be(s._defaultValues,r,e.defaultValue)),exact:!0}),c=JV({control:s,name:r,exact:!0}),u=$e.useRef(e),d=$e.useRef(s.register(r,{...e.rules,value:l,...Zr(e.disabled)?{disabled:e.disabled}:{}})),f=$e.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!be(c.errors,r)},isDirty:{enumerable:!0,get:()=>!!be(c.dirtyFields,r)},isTouched:{enumerable:!0,get:()=>!!be(c.touchedFields,r)},isValidating:{enumerable:!0,get:()=>!!be(c.validatingFields,r)},error:{enumerable:!0,get:()=>be(c.errors,r)}}),[c,r]),p=$e.useCallback(S=>d.current.onChange({target:{value:xA(S),name:r},type:pf.CHANGE}),[r]),v=$e.useCallback(()=>d.current.onBlur({target:{value:be(s._formValues,r),name:r},type:pf.BLUR}),[r,s._formValues]),j=$e.useCallback(S=>{const h=be(s._fields,r);h&&S&&(h._f.ref={focus:()=>S.focus(),select:()=>S.select(),setCustomValidity:g=>S.setCustomValidity(g),reportValidity:()=>S.reportValidity()})},[s._fields,r]),y=$e.useMemo(()=>({name:r,value:l,...Zr(n)||c.disabled?{disabled:c.disabled||n}:{},onChange:p,onBlur:v,ref:j}),[r,n,c.disabled,p,v,j,l]);return $e.useEffect(()=>{const S=s._options.shouldUnregister||o;s.register(r,{...u.current.rules,...Zr(u.current.disabled)?{disabled:u.current.disabled}:{}});const h=(g,w)=>{const _=be(s._fields,g);_&&_._f&&(_._f.mount=w)};if(h(r,!0),S){const g=lr(be(s._options.defaultValues,r));xt(s._defaultValues,r,g),zt(be(s._formValues,r))&&xt(s._formValues,r,g)}return!a&&s.register(r),()=>{(a?S&&!s._state.action:S)?s.unregister(r):h(r,!1)}},[r,s,a,o]),$e.useEffect(()=>{s._setDisabledField({disabled:n,name:r})},[n,r,s]),$e.useMemo(()=>({field:y,formState:c,fieldState:f}),[y,c,f])}const r7=e=>e.render(t7(e));var NA=(e,t,r,n,s)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[n]:s||!0}}:{},uc=e=>Array.isArray(e)?e:[e],cb=()=>{let e=[];return{get observers(){return e},next:s=>{for(const o of e)o.next&&o.next(s)},subscribe:s=>(e.push(s),{unsubscribe:()=>{e=e.filter(o=>o!==s)}}),unsubscribe:()=>{e=[]}}},zg=e=>Rr(e)||!yA(e);function fi(e,t){if(zg(e)||zg(t))return e===t;if(ho(e)&&ho(t))return e.getTime()===t.getTime();const r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(const s of r){const o=e[s];if(!n.includes(s))return!1;if(s!=="ref"){const a=t[s];if(ho(o)&&ho(a)||qt(o)&&qt(a)||Array.isArray(o)&&Array.isArray(a)?!fi(o,a):o!==a)return!1}}return!0}var Tr=e=>qt(e)&&!Object.keys(e).length,mv=e=>e.type==="file",$n=e=>typeof e=="function",gf=e=>{if(!fv)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},_A=e=>e.type==="select-multiple",pv=e=>e.type==="radio",n7=e=>pv(e)||bu(e),Vm=e=>gf(e)&&e.isConnected;function s7(e,t){const r=t.slice(0,-1).length;let n=0;for(;n<r;)e=zt(e)?n++:e[t[n++]];return e}function i7(e){for(const t in e)if(e.hasOwnProperty(t)&&!zt(e[t]))return!1;return!0}function Qt(e,t){const r=Array.isArray(t)?t:hv(t)?[t]:wA(t),n=r.length===1?e:s7(e,r),s=r.length-1,o=r[s];return n&&delete n[o],s!==0&&(qt(n)&&Tr(n)||Array.isArray(n)&&i7(n))&&Qt(e,r.slice(0,-1)),e}var CA=e=>{for(const t in e)if($n(e[t]))return!0;return!1};function yf(e,t={}){const r=Array.isArray(e);if(qt(e)||r)for(const n in e)Array.isArray(e[n])||qt(e[n])&&!CA(e[n])?(t[n]=Array.isArray(e[n])?[]:{},yf(e[n],t[n])):Rr(e[n])||(t[n]=!0);return t}function EA(e,t,r){const n=Array.isArray(e);if(qt(e)||n)for(const s in e)Array.isArray(e[s])||qt(e[s])&&!CA(e[s])?zt(t)||zg(r[s])?r[s]=Array.isArray(e[s])?yf(e[s],[]):{...yf(e[s])}:EA(e[s],Rr(t)?{}:t[s],r[s]):r[s]=!fi(e[s],t[s]);return r}var Ul=(e,t)=>EA(e,t,yf(t));const ub={value:!1,isValid:!1},db={value:!0,isValid:!0};var kA=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!zt(e[0].attributes.value)?zt(e[0].value)||e[0].value===""?db:{value:e[0].value,isValid:!0}:db:ub}return ub},TA=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:n})=>zt(e)?e:t?e===""?NaN:e&&+e:r&&as(e)?new Date(e):n?n(e):e;const fb={isValid:!1,value:null};var PA=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,fb):fb;function hb(e){const t=e.ref;return mv(t)?t.files:pv(t)?PA(e.refs).value:_A(t)?[...t.selectedOptions].map(({value:r})=>r):bu(t)?kA(e.refs).value:TA(zt(t.value)?e.ref.value:t.value,e)}var o7=(e,t,r,n)=>{const s={};for(const o of e){const a=be(t,o);a&&xt(s,o,a._f)}return{criteriaMode:r,names:[...e],fields:s,shouldUseNativeValidation:n}},xf=e=>e instanceof RegExp,$l=e=>zt(e)?e:xf(e)?e.source:qt(e)?xf(e.value)?e.value.source:e.value:e,mb=e=>({isOnSubmit:!e||e===Un.onSubmit,isOnBlur:e===Un.onBlur,isOnChange:e===Un.onChange,isOnAll:e===Un.all,isOnTouch:e===Un.onTouched});const pb="AsyncFunction";var a7=e=>!!e&&!!e.validate&&!!($n(e.validate)&&e.validate.constructor.name===pb||qt(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===pb)),l7=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),gb=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(n=>e.startsWith(n)&&/^\.\w+/.test(e.slice(n.length))));const dc=(e,t,r,n)=>{for(const s of r||Object.keys(e)){const o=be(e,s);if(o){const{_f:a,...l}=o;if(a){if(a.refs&&a.refs[0]&&t(a.refs[0],s)&&!n)return!0;if(a.ref&&t(a.ref,a.name)&&!n)return!0;if(dc(l,t))break}else if(qt(l)&&dc(l,t))break}}};function yb(e,t,r){const n=be(e,r);if(n||hv(r))return{error:n,name:r};const s=r.split(".");for(;s.length;){const o=s.join("."),a=be(t,o),l=be(e,o);if(a&&!Array.isArray(a)&&r!==o)return{name:r};if(l&&l.type)return{name:o,error:l};s.pop()}return{name:r}}var c7=(e,t,r,n)=>{r(e);const{name:s,...o}=e;return Tr(o)||Object.keys(o).length>=Object.keys(t).length||Object.keys(o).find(a=>t[a]===(!n||Un.all))},u7=(e,t,r)=>!e||!t||e===t||uc(e).some(n=>n&&(r?n===t:n.startsWith(t)||t.startsWith(n))),d7=(e,t,r,n,s)=>s.isOnAll?!1:!r&&s.isOnTouch?!(t||e):(r?n.isOnBlur:s.isOnBlur)?!e:(r?n.isOnChange:s.isOnChange)?e:!0,f7=(e,t)=>!Ph(be(e,t)).length&&Qt(e,t),h7=(e,t,r)=>{const n=uc(be(e,r));return xt(n,"root",t[r]),xt(e,r,n),e},_d=e=>as(e);function xb(e,t,r="validate"){if(_d(e)||Array.isArray(e)&&e.every(_d)||Zr(e)&&!e)return{type:r,message:_d(e)?e:"",ref:t}}var la=e=>qt(e)&&!xf(e)?e:{value:e,message:""},vb=async(e,t,r,n,s,o)=>{const{ref:a,refs:l,required:c,maxLength:u,minLength:d,min:f,max:p,pattern:v,validate:j,name:y,valueAsNumber:S,mount:h}=e._f,g=be(r,y);if(!h||t.has(y))return{};const w=l?l[0]:a,_=q=>{s&&w.reportValidity&&(w.setCustomValidity(Zr(q)?"":q||""),w.reportValidity())},E={},I=pv(a),P=bu(a),M=I||P,F=(S||mv(a))&&zt(a.value)&&zt(g)||gf(a)&&a.value===""||g===""||Array.isArray(g)&&!g.length,W=NA.bind(null,y,n,E),re=(q,Y,G,ne=_s.maxLength,Z=_s.minLength)=>{const fe=q?Y:G;E[y]={type:q?ne:Z,message:fe,ref:a,...W(q?ne:Z,fe)}};if(o?!Array.isArray(g)||!g.length:c&&(!M&&(F||Rr(g))||Zr(g)&&!g||P&&!kA(l).isValid||I&&!PA(l).isValid)){const{value:q,message:Y}=_d(c)?{value:!!c,message:c}:la(c);if(q&&(E[y]={type:_s.required,message:Y,ref:w,...W(_s.required,Y)},!n))return _(Y),E}if(!F&&(!Rr(f)||!Rr(p))){let q,Y;const G=la(p),ne=la(f);if(!Rr(g)&&!isNaN(g)){const Z=a.valueAsNumber||g&&+g;Rr(G.value)||(q=Z>G.value),Rr(ne.value)||(Y=Z<ne.value)}else{const Z=a.valueAsDate||new Date(g),fe=ue=>new Date(new Date().toDateString()+" "+ue),B=a.type=="time",z=a.type=="week";as(G.value)&&g&&(q=B?fe(g)>fe(G.value):z?g>G.value:Z>new Date(G.value)),as(ne.value)&&g&&(Y=B?fe(g)<fe(ne.value):z?g<ne.value:Z<new Date(ne.value))}if((q||Y)&&(re(!!q,G.message,ne.message,_s.max,_s.min),!n))return _(E[y].message),E}if((u||d)&&!F&&(as(g)||o&&Array.isArray(g))){const q=la(u),Y=la(d),G=!Rr(q.value)&&g.length>+q.value,ne=!Rr(Y.value)&&g.length<+Y.value;if((G||ne)&&(re(G,q.message,Y.message),!n))return _(E[y].message),E}if(v&&!F&&as(g)){const{value:q,message:Y}=la(v);if(xf(q)&&!g.match(q)&&(E[y]={type:_s.pattern,message:Y,ref:a,...W(_s.pattern,Y)},!n))return _(Y),E}if(j){if($n(j)){const q=await j(g,r),Y=xb(q,w);if(Y&&(E[y]={...Y,...W(_s.validate,Y.message)},!n))return _(Y.message),E}else if(qt(j)){let q={};for(const Y in j){if(!Tr(q)&&!n)break;const G=xb(await j[Y](g,r),w,Y);G&&(q={...G,...W(Y,G.message)},_(G.message),n&&(E[y]=q))}if(!Tr(q)&&(E[y]={ref:w,...q},!n))return E}}return _(!0),E};const m7={mode:Un.onSubmit,reValidateMode:Un.onChange,shouldFocusError:!0};function p7(e={}){let t={...m7,...e},r={submitCount:0,isDirty:!1,isLoading:$n(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1};const n={};let s=qt(t.defaultValues)||qt(t.values)?lr(t.values||t.defaultValues)||{}:{},o=t.shouldUnregister?{}:lr(s),a={action:!1,mount:!1,watch:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,u=0;const d={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let f={...d};const p={array:cb(),state:cb()},v=mb(t.mode),j=mb(t.reValidateMode),y=t.criteriaMode===Un.all,S=A=>U=>{clearTimeout(u),u=setTimeout(A,U)},h=async A=>{if(!t.disabled&&(d.isValid||f.isValid||A)){const U=t.resolver?Tr((await F()).errors):await re(n,!0);U!==r.isValid&&p.state.next({isValid:U})}},g=(A,U)=>{!t.disabled&&(d.isValidating||d.validatingFields||f.isValidating||f.validatingFields)&&((A||Array.from(l.mount)).forEach(V=>{V&&(U?xt(r.validatingFields,V,U):Qt(r.validatingFields,V))}),p.state.next({validatingFields:r.validatingFields,isValidating:!Tr(r.validatingFields)}))},w=(A,U=[],V,pe,ye=!0,N=!0)=>{if(pe&&V&&!t.disabled){if(a.action=!0,N&&Array.isArray(be(n,A))){const x=V(be(n,A),pe.argA,pe.argB);ye&&xt(n,A,x)}if(N&&Array.isArray(be(r.errors,A))){const x=V(be(r.errors,A),pe.argA,pe.argB);ye&&xt(r.errors,A,x),f7(r.errors,A)}if((d.touchedFields||f.touchedFields)&&N&&Array.isArray(be(r.touchedFields,A))){const x=V(be(r.touchedFields,A),pe.argA,pe.argB);ye&&xt(r.touchedFields,A,x)}(d.dirtyFields||f.dirtyFields)&&(r.dirtyFields=Ul(s,o)),p.state.next({name:A,isDirty:Y(A,U),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else xt(o,A,U)},_=(A,U)=>{xt(r.errors,A,U),p.state.next({errors:r.errors})},E=A=>{r.errors=A,p.state.next({errors:r.errors,isValid:!1})},I=(A,U,V,pe)=>{const ye=be(n,A);if(ye){const N=be(o,A,zt(V)?be(s,A):V);zt(N)||pe&&pe.defaultChecked||U?xt(o,A,U?N:hb(ye._f)):Z(A,N),a.mount&&h()}},P=(A,U,V,pe,ye)=>{let N=!1,x=!1;const b={name:A};if(!t.disabled){if(!V||pe){(d.isDirty||f.isDirty)&&(x=r.isDirty,r.isDirty=b.isDirty=Y(),N=x!==b.isDirty);const T=fi(be(s,A),U);x=!!be(r.dirtyFields,A),T?Qt(r.dirtyFields,A):xt(r.dirtyFields,A,!0),b.dirtyFields=r.dirtyFields,N=N||(d.dirtyFields||f.dirtyFields)&&x!==!T}if(V){const T=be(r.touchedFields,A);T||(xt(r.touchedFields,A,V),b.touchedFields=r.touchedFields,N=N||(d.touchedFields||f.touchedFields)&&T!==V)}N&&ye&&p.state.next(b)}return N?b:{}},M=(A,U,V,pe)=>{const ye=be(r.errors,A),N=(d.isValid||f.isValid)&&Zr(U)&&r.isValid!==U;if(t.delayError&&V?(c=S(()=>_(A,V)),c(t.delayError)):(clearTimeout(u),c=null,V?xt(r.errors,A,V):Qt(r.errors,A)),(V?!fi(ye,V):ye)||!Tr(pe)||N){const x={...pe,...N&&Zr(U)?{isValid:U}:{},errors:r.errors,name:A};r={...r,...x},p.state.next(x)}},F=async A=>{g(A,!0);const U=await t.resolver(o,t.context,o7(A||l.mount,n,t.criteriaMode,t.shouldUseNativeValidation));return g(A),U},W=async A=>{const{errors:U}=await F(A);if(A)for(const V of A){const pe=be(U,V);pe?xt(r.errors,V,pe):Qt(r.errors,V)}else r.errors=U;return U},re=async(A,U,V={valid:!0})=>{for(const pe in A){const ye=A[pe];if(ye){const{_f:N,...x}=ye;if(N){const b=l.array.has(N.name),T=ye._f&&a7(ye._f);T&&d.validatingFields&&g([pe],!0);const L=await vb(ye,l.disabled,o,y,t.shouldUseNativeValidation&&!U,b);if(T&&d.validatingFields&&g([pe]),L[N.name]&&(V.valid=!1,U))break;!U&&(be(L,N.name)?b?h7(r.errors,L,N.name):xt(r.errors,N.name,L[N.name]):Qt(r.errors,N.name))}!Tr(x)&&await re(x,U,V)}}return V.valid},q=()=>{for(const A of l.unMount){const U=be(n,A);U&&(U._f.refs?U._f.refs.every(V=>!Vm(V)):!Vm(U._f.ref))&&de(A)}l.unMount=new Set},Y=(A,U)=>!t.disabled&&(A&&U&&xt(o,A,U),!fi(X(),s)),G=(A,U,V)=>jA(A,l,{...a.mount?o:zt(U)?s:as(A)?{[A]:U}:U},V,U),ne=A=>Ph(be(a.mount?o:s,A,t.shouldUnregister?be(s,A,[]):[])),Z=(A,U,V={})=>{const pe=be(n,A);let ye=U;if(pe){const N=pe._f;N&&(!N.disabled&&xt(o,A,TA(U,N)),ye=gf(N.ref)&&Rr(U)?"":U,_A(N.ref)?[...N.ref.options].forEach(x=>x.selected=ye.includes(x.value)):N.refs?bu(N.ref)?N.refs.length>1?N.refs.forEach(x=>(!x.defaultChecked||!x.disabled)&&(x.checked=Array.isArray(ye)?!!ye.find(b=>b===x.value):ye===x.value)):N.refs[0]&&(N.refs[0].checked=!!ye):N.refs.forEach(x=>x.checked=x.value===ye):mv(N.ref)?N.ref.value="":(N.ref.value=ye,N.ref.type||p.state.next({name:A,values:lr(o)})))}(V.shouldDirty||V.shouldTouch)&&P(A,ye,V.shouldTouch,V.shouldDirty,!0),V.shouldValidate&&ae(A)},fe=(A,U,V)=>{for(const pe in U){const ye=U[pe],N=`${A}.${pe}`,x=be(n,N);(l.array.has(A)||qt(ye)||x&&!x._f)&&!ho(ye)?fe(N,ye,V):Z(N,ye,V)}},B=(A,U,V={})=>{const pe=be(n,A),ye=l.array.has(A),N=lr(U);xt(o,A,N),ye?(p.array.next({name:A,values:lr(o)}),(d.isDirty||d.dirtyFields||f.isDirty||f.dirtyFields)&&V.shouldDirty&&p.state.next({name:A,dirtyFields:Ul(s,o),isDirty:Y(A,N)})):pe&&!pe._f&&!Rr(N)?fe(A,N,V):Z(A,N,V),gb(A,l)&&p.state.next({...r}),p.state.next({name:a.mount?A:void 0,values:lr(o)})},z=async A=>{a.mount=!0;const U=A.target;let V=U.name,pe=!0;const ye=be(n,V),N=x=>{pe=Number.isNaN(x)||ho(x)&&isNaN(x.getTime())||fi(x,be(o,V,x))};if(ye){let x,b;const T=U.type?hb(ye._f):xA(A),L=A.type===pf.BLUR||A.type===pf.FOCUS_OUT,H=!l7(ye._f)&&!t.resolver&&!be(r.errors,V)&&!ye._f.deps||d7(L,be(r.touchedFields,V),r.isSubmitted,j,v),oe=gb(V,l,L);xt(o,V,T),L?(ye._f.onBlur&&ye._f.onBlur(A),c&&c(0)):ye._f.onChange&&ye._f.onChange(A);const qe=P(V,T,L),Et=!Tr(qe)||oe;if(!L&&p.state.next({name:V,type:A.type,values:lr(o)}),H)return(d.isValid||f.isValid)&&(t.mode==="onBlur"?L&&h():L||h()),Et&&p.state.next({name:V,...oe?{}:qe});if(!L&&oe&&p.state.next({...r}),t.resolver){const{errors:bt}=await F([V]);if(N(T),pe){const St=yb(r.errors,n,V),ht=yb(bt,n,St.name||V);x=ht.error,V=ht.name,b=Tr(bt)}}else g([V],!0),x=(await vb(ye,l.disabled,o,y,t.shouldUseNativeValidation))[V],g([V]),N(T),pe&&(x?b=!1:(d.isValid||f.isValid)&&(b=await re(n,!0)));pe&&(ye._f.deps&&ae(ye._f.deps),M(V,b,x,qe))}},ue=(A,U)=>{if(be(r.errors,U)&&A.focus)return A.focus(),1},ae=async(A,U={})=>{let V,pe;const ye=uc(A);if(t.resolver){const N=await W(zt(A)?A:ye);V=Tr(N),pe=A?!ye.some(x=>be(N,x)):V}else A?(pe=(await Promise.all(ye.map(async N=>{const x=be(n,N);return await re(x&&x._f?{[N]:x}:x)}))).every(Boolean),!(!pe&&!r.isValid)&&h()):pe=V=await re(n);return p.state.next({...!as(A)||(d.isValid||f.isValid)&&V!==r.isValid?{}:{name:A},...t.resolver||!A?{isValid:V}:{},errors:r.errors}),U.shouldFocus&&!pe&&dc(n,ue,A?ye:l.mount),pe},X=A=>{const U={...a.mount?o:s};return zt(A)?U:as(A)?be(U,A):A.map(V=>be(U,V))},ee=(A,U)=>({invalid:!!be((U||r).errors,A),isDirty:!!be((U||r).dirtyFields,A),error:be((U||r).errors,A),isValidating:!!be(r.validatingFields,A),isTouched:!!be((U||r).touchedFields,A)}),je=A=>{A&&uc(A).forEach(U=>Qt(r.errors,U)),p.state.next({errors:A?r.errors:{}})},Ce=(A,U,V)=>{const pe=(be(n,A,{_f:{}})._f||{}).ref,ye=be(r.errors,A)||{},{ref:N,message:x,type:b,...T}=ye;xt(r.errors,A,{...T,...U,ref:pe}),p.state.next({name:A,errors:r.errors,isValid:!1}),V&&V.shouldFocus&&pe&&pe.focus&&pe.focus()},D=(A,U)=>$n(A)?p.state.subscribe({next:V=>A(G(void 0,U),V)}):G(A,U,!0),R=A=>p.state.subscribe({next:U=>{u7(A.name,U.name,A.exact)&&c7(U,A.formState||d,ve,A.reRenderRoot)&&A.callback({values:{...o},...r,...U})}}).unsubscribe,Q=A=>(a.mount=!0,f={...f,...A.formState},R({...A,formState:f})),de=(A,U={})=>{for(const V of A?uc(A):l.mount)l.mount.delete(V),l.array.delete(V),U.keepValue||(Qt(n,V),Qt(o,V)),!U.keepError&&Qt(r.errors,V),!U.keepDirty&&Qt(r.dirtyFields,V),!U.keepTouched&&Qt(r.touchedFields,V),!U.keepIsValidating&&Qt(r.validatingFields,V),!t.shouldUnregister&&!U.keepDefaultValue&&Qt(s,V);p.state.next({values:lr(o)}),p.state.next({...r,...U.keepDirty?{isDirty:Y()}:{}}),!U.keepIsValid&&h()},le=({disabled:A,name:U})=>{(Zr(A)&&a.mount||A||l.disabled.has(U))&&(A?l.disabled.add(U):l.disabled.delete(U))},C=(A,U={})=>{let V=be(n,A);const pe=Zr(U.disabled)||Zr(t.disabled);return xt(n,A,{...V||{},_f:{...V&&V._f?V._f:{ref:{name:A}},name:A,mount:!0,...U}}),l.mount.add(A),V?le({disabled:Zr(U.disabled)?U.disabled:t.disabled,name:A}):I(A,!0,U.value),{...pe?{disabled:U.disabled||t.disabled}:{},...t.progressive?{required:!!U.required,min:$l(U.min),max:$l(U.max),minLength:$l(U.minLength),maxLength:$l(U.maxLength),pattern:$l(U.pattern)}:{},name:A,onChange:z,onBlur:z,ref:ye=>{if(ye){C(A,U),V=be(n,A);const N=zt(ye.value)&&ye.querySelectorAll&&ye.querySelectorAll("input,select,textarea")[0]||ye,x=n7(N),b=V._f.refs||[];if(x?b.find(T=>T===N):N===V._f.ref)return;xt(n,A,{_f:{...V._f,...x?{refs:[...b.filter(Vm),N,...Array.isArray(be(s,A))?[{}]:[]],ref:{type:N.type,name:A}}:{ref:N}}}),I(A,!1,void 0,N)}else V=be(n,A,{}),V._f&&(V._f.mount=!1),(t.shouldUnregister||U.shouldUnregister)&&!(vA(l.array,A)&&a.action)&&l.unMount.add(A)}}},k=()=>t.shouldFocusError&&dc(n,ue,l.mount),K=A=>{Zr(A)&&(p.state.next({disabled:A}),dc(n,(U,V)=>{const pe=be(n,V);pe&&(U.disabled=pe._f.disabled||A,Array.isArray(pe._f.refs)&&pe._f.refs.forEach(ye=>{ye.disabled=pe._f.disabled||A}))},0,!1))},ie=(A,U)=>async V=>{let pe;V&&(V.preventDefault&&V.preventDefault(),V.persist&&V.persist());let ye=lr(o);if(p.state.next({isSubmitting:!0}),t.resolver){const{errors:N,values:x}=await F();r.errors=N,ye=x}else await re(n);if(l.disabled.size)for(const N of l.disabled)xt(ye,N,void 0);if(Qt(r.errors,"root"),Tr(r.errors)){p.state.next({errors:{}});try{await A(ye,V)}catch(N){pe=N}}else U&&await U({...r.errors},V),k(),setTimeout(k);if(p.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Tr(r.errors)&&!pe,submitCount:r.submitCount+1,errors:r.errors}),pe)throw pe},De=(A,U={})=>{be(n,A)&&(zt(U.defaultValue)?B(A,lr(be(s,A))):(B(A,U.defaultValue),xt(s,A,lr(U.defaultValue))),U.keepTouched||Qt(r.touchedFields,A),U.keepDirty||(Qt(r.dirtyFields,A),r.isDirty=U.defaultValue?Y(A,lr(be(s,A))):Y()),U.keepError||(Qt(r.errors,A),d.isValid&&h()),p.state.next({...r}))},Pe=(A,U={})=>{const V=A?lr(A):s,pe=lr(V),ye=Tr(A),N=ye?s:pe;if(U.keepDefaultValues||(s=V),!U.keepValues){if(U.keepDirtyValues){const x=new Set([...l.mount,...Object.keys(Ul(s,o))]);for(const b of Array.from(x))be(r.dirtyFields,b)?xt(N,b,be(o,b)):B(b,be(N,b))}else{if(fv&&zt(A))for(const x of l.mount){const b=be(n,x);if(b&&b._f){const T=Array.isArray(b._f.refs)?b._f.refs[0]:b._f.ref;if(gf(T)){const L=T.closest("form");if(L){L.reset();break}}}}for(const x of l.mount)B(x,be(N,x))}o=lr(N),p.array.next({values:{...N}}),p.state.next({values:{...N}})}l={mount:U.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},a.mount=!d.isValid||!!U.keepIsValid||!!U.keepDirtyValues,a.watch=!!t.shouldUnregister,p.state.next({submitCount:U.keepSubmitCount?r.submitCount:0,isDirty:ye?!1:U.keepDirty?r.isDirty:!!(U.keepDefaultValues&&!fi(A,s)),isSubmitted:U.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:ye?{}:U.keepDirtyValues?U.keepDefaultValues&&o?Ul(s,o):r.dirtyFields:U.keepDefaultValues&&A?Ul(s,A):U.keepDirty?r.dirtyFields:{},touchedFields:U.keepTouched?r.touchedFields:{},errors:U.keepErrors?r.errors:{},isSubmitSuccessful:U.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1})},Me=(A,U)=>Pe($n(A)?A(o):A,U),se=(A,U={})=>{const V=be(n,A),pe=V&&V._f;if(pe){const ye=pe.refs?pe.refs[0]:pe.ref;ye.focus&&(ye.focus(),U.shouldSelect&&$n(ye.select)&&ye.select())}},ve=A=>{r={...r,...A}},gt={control:{register:C,unregister:de,getFieldState:ee,handleSubmit:ie,setError:Ce,_subscribe:R,_runSchema:F,_getWatch:G,_getDirty:Y,_setValid:h,_setFieldArray:w,_setDisabledField:le,_setErrors:E,_getFieldArray:ne,_reset:Pe,_resetDefaultValues:()=>$n(t.defaultValues)&&t.defaultValues().then(A=>{Me(A,t.resetOptions),p.state.next({isLoading:!1})}),_removeUnmounted:q,_disableForm:K,_subjects:p,_proxyFormState:d,get _fields(){return n},get _formValues(){return o},get _state(){return a},set _state(A){a=A},get _defaultValues(){return s},get _names(){return l},set _names(A){l=A},get _formState(){return r},get _options(){return t},set _options(A){t={...t,...A}}},subscribe:Q,trigger:ae,register:C,handleSubmit:ie,watch:D,setValue:B,getValues:X,reset:Me,resetField:De,clearErrors:je,unregister:de,setError:Ce,setFocus:se,getFieldState:ee};return{...gt,formControl:gt}}function vf(e={}){const t=$e.useRef(void 0),r=$e.useRef(void 0),[n,s]=$e.useState({isDirty:!1,isValidating:!1,isLoading:$n(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,defaultValues:$n(e.defaultValues)?void 0:e.defaultValues});t.current||(t.current={...e.formControl?e.formControl:p7(e),formState:n},e.formControl&&e.defaultValues&&!$n(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions));const o=t.current.control;return o._options=e,$e.useLayoutEffect(()=>o._subscribe({formState:o._proxyFormState,callback:()=>s({...o._formState}),reRenderRoot:!0}),[o]),$e.useEffect(()=>o._disableForm(e.disabled),[o,e.disabled]),$e.useEffect(()=>{if(o._proxyFormState.isDirty){const a=o._getDirty();a!==n.isDirty&&o._subjects.state.next({isDirty:a})}},[o,n.isDirty]),$e.useEffect(()=>{e.values&&!fi(e.values,r.current)?(o._reset(e.values,o._options.resetOptions),r.current=e.values,s(a=>({...a}))):o._resetDefaultValues()},[e.values,o]),$e.useEffect(()=>{e.errors&&!Tr(e.errors)&&o._setErrors(e.errors)},[e.errors,o]),$e.useEffect(()=>{o._state.mount||(o._setValid(),o._state.mount=!0),o._state.watch&&(o._state.watch=!1,o._subjects.state.next({...o._formState})),o._removeUnmounted()}),$e.useEffect(()=>{e.shouldUnregister&&o._subjects.state.next({values:o._getWatch()})},[e.shouldUnregister,o]),t.current.formState=SA(n,o),t.current}const wf=XV,RA=m.createContext({}),Ar=({...e})=>i.jsx(RA.Provider,{value:{name:e.name},children:i.jsx(r7,{...e})}),Ah=()=>{const e=m.useContext(RA),t=m.useContext(AA),{getFieldState:r,formState:n}=Rh(),s=r(e.name,n);if(!e)throw new Error("useFormField should be used within <FormField>");const{id:o}=t;return{id:o,name:e.name,formItemId:`${o}-form-item`,formDescriptionId:`${o}-form-item-description`,formMessageId:`${o}-form-item-message`,...s}},AA=m.createContext({}),wr=m.forwardRef(({className:e,...t},r)=>{const n=m.useId();return i.jsx(AA.Provider,{value:{id:n},children:i.jsx("div",{ref:r,className:we("space-y-2",e),...t})})});wr.displayName="FormItem";const br=m.forwardRef(({className:e,...t},r)=>{const{error:n,formItemId:s}=Ah();return i.jsx(Nt,{ref:r,className:we(n&&"text-destructive",e),htmlFor:s,...t})});br.displayName="FormLabel";const Sr=m.forwardRef(({...e},t)=>{const{error:r,formItemId:n,formDescriptionId:s,formMessageId:o}=Ah();return i.jsx(ps,{ref:t,id:n,"aria-describedby":r?`${s} ${o}`:`${s}`,"aria-invalid":!!r,...e})});Sr.displayName="FormControl";const g7=m.forwardRef(({className:e,...t},r)=>{const{formDescriptionId:n}=Ah();return i.jsx("p",{ref:r,id:n,className:we("text-sm text-muted-foreground",e),...t})});g7.displayName="FormDescription";const jr=m.forwardRef(({className:e,children:t,...r},n)=>{const{error:s,formMessageId:o}=Ah(),a=s?String(s==null?void 0:s.message):t;return a?i.jsx("p",{ref:n,id:o,className:we("text-sm font-medium text-destructive",e),...r,children:a}):null});jr.displayName="FormMessage";const ce=Symbol.for("drizzle:entityKind");function ur(e,t){if(!e||typeof e!="object")return!1;if(e instanceof t)return!0;if(!Object.prototype.hasOwnProperty.call(t,ce))throw new Error(`Class "${t.name??"<unknown>"}" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`);let r=Object.getPrototypeOf(e).constructor;if(r)for(;r;){if(ce in r&&r[ce]===t[ce])return!0;r=Object.getPrototypeOf(r)}return!1}var Vb;Vb=ce;class cl{constructor(t,r){$(this,"name");$(this,"keyAsName");$(this,"primary");$(this,"notNull");$(this,"default");$(this,"defaultFn");$(this,"onUpdateFn");$(this,"hasDefault");$(this,"isUnique");$(this,"uniqueName");$(this,"uniqueType");$(this,"dataType");$(this,"columnType");$(this,"enumValues");$(this,"generated");$(this,"generatedIdentity");$(this,"config");this.table=t,this.config=r,this.name=r.name,this.keyAsName=r.keyAsName,this.notNull=r.notNull,this.default=r.default,this.defaultFn=r.defaultFn,this.onUpdateFn=r.onUpdateFn,this.hasDefault=r.hasDefault,this.primary=r.primaryKey,this.isUnique=r.isUnique,this.uniqueName=r.uniqueName,this.uniqueType=r.uniqueType,this.dataType=r.dataType,this.columnType=r.columnType,this.generated=r.generated,this.generatedIdentity=r.generatedIdentity}mapFromDriverValue(t){return t}mapToDriverValue(t){return t}shouldDisableInsert(){return this.config.generated!==void 0&&this.config.generated.type!=="byDefault"}}$(cl,Vb,"Column");var Wb;Wb=ce;class IA{constructor(t,r,n){$(this,"config");$(this,"$default",this.$defaultFn);$(this,"$onUpdate",this.$onUpdateFn);this.config={name:t,keyAsName:t==="",notNull:!1,default:void 0,hasDefault:!1,primaryKey:!1,isUnique:!1,uniqueName:void 0,uniqueType:void 0,dataType:r,columnType:n,generated:void 0}}$type(){return this}notNull(){return this.config.notNull=!0,this}default(t){return this.config.default=t,this.config.hasDefault=!0,this}$defaultFn(t){return this.config.defaultFn=t,this.config.hasDefault=!0,this}$onUpdateFn(t){return this.config.onUpdateFn=t,this.config.hasDefault=!0,this}primaryKey(){return this.config.primaryKey=!0,this.config.notNull=!0,this}setName(t){this.config.name===""&&(this.config.name=t)}}$(IA,Wb,"ColumnBuilder");const Ma=Symbol.for("drizzle:Name");var qb;qb=ce;class DA{constructor(t,r){$(this,"reference");$(this,"_onUpdate","no action");$(this,"_onDelete","no action");this.reference=()=>{const{name:n,columns:s,foreignColumns:o}=t();return{name:n,columns:s,foreignTable:o[0].table,foreignColumns:o}},r&&(this._onUpdate=r.onUpdate,this._onDelete=r.onDelete)}onUpdate(t){return this._onUpdate=t===void 0?"no action":t,this}onDelete(t){return this._onDelete=t===void 0?"no action":t,this}build(t){return new MA(t,this)}}$(DA,qb,"PgForeignKeyBuilder");var Hb;Hb=ce;class MA{constructor(t,r){$(this,"reference");$(this,"onUpdate");$(this,"onDelete");this.table=t,this.reference=r.reference,this.onUpdate=r._onUpdate,this.onDelete=r._onDelete}getName(){const{name:t,columns:r,foreignColumns:n}=this.reference(),s=r.map(l=>l.name),o=n.map(l=>l.name),a=[this.table[Ma],...s,n[0].table[Ma],...o];return t??`${a.join("_")}_fk`}}$(MA,Hb,"PgForeignKey");function y7(e,...t){return e(...t)}function x7(e,t){return`${e[Ma]}_${t.join("_")}_unique`}function wb(e,t,r){for(let n=t;n<e.length;n++){const s=e[n];if(s==="\\"){n++;continue}if(s==='"')return[e.slice(t,n).replace(/\\/g,""),n+1];if(!r&&(s===","||s==="}"))return[e.slice(t,n).replace(/\\/g,""),n]}return[e.slice(t).replace(/\\/g,""),e.length]}function OA(e,t=0){const r=[];let n=t,s=!1;for(;n<e.length;){const o=e[n];if(o===","){(s||n===t)&&r.push(""),s=!0,n++;continue}if(s=!1,o==="\\"){n+=2;continue}if(o==='"'){const[c,u]=wb(e,n+1,!0);r.push(c),n=u;continue}if(o==="}")return[r,n+1];if(o==="{"){const[c,u]=OA(e,n+1);r.push(c),n=u;continue}const[a,l]=wb(e,n,!1);r.push(a),n=l}return[r,n]}function v7(e){const[t]=OA(e,1);return t}function LA(e){return`{${e.map(t=>Array.isArray(t)?LA(t):typeof t=="string"?`"${t.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`:`${t}`).join(",")}}`}var Kb,Gb;class ut extends(Gb=IA,Kb=ce,Gb){constructor(){super(...arguments);$(this,"foreignKeyConfigs",[])}array(r){return new UA(this.config.name,this,r)}references(r,n={}){return this.foreignKeyConfigs.push({ref:r,actions:n}),this}unique(r,n){return this.config.isUnique=!0,this.config.uniqueName=r,this.config.uniqueType=n==null?void 0:n.nulls,this}generatedAlwaysAs(r){return this.config.generated={as:r,type:"always",mode:"stored"},this}buildForeignKeys(r,n){return this.foreignKeyConfigs.map(({ref:s,actions:o})=>y7((a,l)=>{const c=new DA(()=>{const u=a();return{columns:[r],foreignColumns:[u]}});return l.onUpdate&&c.onUpdate(l.onUpdate),l.onDelete&&c.onDelete(l.onDelete),c.build(n)},s,o))}buildExtraConfigColumn(r){return new FA(r,this.config)}}$(ut,Kb,"PgColumnBuilder");var Qb,Yb;class Ge extends(Yb=cl,Qb=ce,Yb){constructor(t,r){r.uniqueName||(r.uniqueName=x7(t,[r.name])),super(t,r),this.table=t}}$(Ge,Qb,"PgColumn");var Zb,Xb;class FA extends(Xb=Ge,Zb=ce,Xb){constructor(){super(...arguments);$(this,"indexConfig",{order:this.config.order??"asc",nulls:this.config.nulls??"last",opClass:this.config.opClass});$(this,"defaultConfig",{order:"asc",nulls:"last",opClass:void 0})}getSQLType(){return this.getSQLType()}asc(){return this.indexConfig.order="asc",this}desc(){return this.indexConfig.order="desc",this}nullsFirst(){return this.indexConfig.nulls="first",this}nullsLast(){return this.indexConfig.nulls="last",this}op(r){return this.indexConfig.opClass=r,this}}$(FA,Zb,"ExtraConfigColumn");var Jb,e1;class UA extends(e1=ut,Jb=ce,e1){constructor(t,r,n){super(t,"array","PgArray"),this.config.baseBuilder=r,this.config.size=n}build(t){const r=this.config.baseBuilder.build(t);return new Vg(t,this.config,r)}}$(UA,Jb,"PgArrayBuilder");var t1,r1;const Df=class Df extends(r1=Ge,t1=ce,r1){constructor(r,n,s,o){super(r,n);$(this,"size");this.baseColumn=s,this.range=o,this.size=n.size}getSQLType(){return`${this.baseColumn.getSQLType()}[${typeof this.size=="number"?this.size:""}]`}mapFromDriverValue(r){return typeof r=="string"&&(r=v7(r)),r.map(n=>this.baseColumn.mapFromDriverValue(n))}mapToDriverValue(r,n=!1){const s=r.map(o=>o===null?null:ur(this.baseColumn,Df)?this.baseColumn.mapToDriverValue(o,!0):this.baseColumn.mapToDriverValue(o));return n?s:LA(s)}};$(Df,t1,"PgArray");let Vg=Df;const bb=Symbol.for("drizzle:isPgEnum");function w7(e){return!!e&&typeof e=="function"&&bb in e&&e[bb]===!0}var n1;n1=ce;class gv{constructor(t,r,n,s=!1){this._={brand:"Subquery",sql:t,selectedFields:r,alias:n,isWith:s}}}$(gv,n1,"Subquery");const b7={startActiveSpan(e,t){return t()}},Oa=Symbol.for("drizzle:ViewBaseConfig"),Wm=Symbol.for("drizzle:Schema"),Sb=Symbol.for("drizzle:Columns"),jb=Symbol.for("drizzle:ExtraConfigColumns"),qm=Symbol.for("drizzle:OriginalName"),Hm=Symbol.for("drizzle:BaseName"),bf=Symbol.for("drizzle:IsAlias"),Nb=Symbol.for("drizzle:ExtraConfigBuilder"),$A=Symbol.for("drizzle:IsDrizzleTable");var s1,i1,o1,a1,l1,c1,u1,d1,f1,h1;h1=ce,f1=Ma,d1=qm,u1=Wm,c1=Sb,l1=jb,a1=Hm,o1=bf,i1=$A,s1=Nb;class Ir{constructor(t,r,n){$(this,f1);$(this,d1);$(this,u1);$(this,c1);$(this,l1);$(this,a1);$(this,o1,!1);$(this,i1,!0);$(this,s1);this[Ma]=this[qm]=t,this[Wm]=r,this[Hm]=n}}$(Ir,h1,"Table"),$(Ir,"Symbol",{Name:Ma,Schema:Wm,OriginalName:qm,Columns:Sb,ExtraConfigColumns:jb,BaseName:Hm,IsAlias:bf,ExtraConfigBuilder:Nb});function BA(e){return typeof e=="object"&&e!==null&&$A in e}function S7(e){return e!=null&&typeof e.getSQL=="function"}function j7(e){var r;const t={sql:"",params:[]};for(const n of e)t.sql+=n.sql,t.params.push(...n.params),(r=n.typings)!=null&&r.length&&(t.typings||(t.typings=[]),t.typings.push(...n.typings));return t}var m1;m1=ce;class mn{constructor(t){$(this,"value");this.value=Array.isArray(t)?t:[t]}getSQL(){return new Jt([this])}}$(mn,m1,"StringChunk");var p1;p1=ce;const oo=class oo{constructor(t){$(this,"decoder",zA);$(this,"shouldInlineParams",!1);this.queryChunks=t}append(t){return this.queryChunks.push(...t.queryChunks),this}toQuery(t){return b7.startActiveSpan("drizzle.buildSQL",r=>{const n=this.buildQueryFromSourceParams(this.queryChunks,t);return r==null||r.setAttributes({"drizzle.query.text":n.sql,"drizzle.query.params":JSON.stringify(n.params)}),n})}buildQueryFromSourceParams(t,r){const n=Object.assign({},r,{inlineParams:r.inlineParams||this.shouldInlineParams,paramStartIndex:r.paramStartIndex||{value:0}}),{casing:s,escapeName:o,escapeParam:a,prepareTyping:l,inlineParams:c,paramStartIndex:u}=n;return j7(t.map(d=>{var f;if(ur(d,mn))return{sql:d.value.join(""),params:[]};if(ur(d,Sf))return{sql:o(d.value),params:[]};if(d===void 0)return{sql:"",params:[]};if(Array.isArray(d)){const p=[new mn("(")];for(const[v,j]of d.entries())p.push(j),v<d.length-1&&p.push(new mn(", "));return p.push(new mn(")")),this.buildQueryFromSourceParams(p,n)}if(ur(d,oo))return this.buildQueryFromSourceParams(d.queryChunks,{...n,inlineParams:c||d.shouldInlineParams});if(ur(d,Ir)){const p=d[Ir.Symbol.Schema],v=d[Ir.Symbol.Name];return{sql:p===void 0||d[bf]?o(v):o(p)+"."+o(v),params:[]}}if(ur(d,cl)){const p=s.getColumnCasing(d);if(r.invokeSource==="indexes")return{sql:o(p),params:[]};const v=d.table[Ir.Symbol.Schema];return{sql:d.table[bf]||v===void 0?o(d.table[Ir.Symbol.Name])+"."+o(p):o(v)+"."+o(d.table[Ir.Symbol.Name])+"."+o(p),params:[]}}if(ur(d,qA)){const p=d[Oa].schema,v=d[Oa].name;return{sql:p===void 0||d[Oa].isAlias?o(v):o(p)+"."+o(v),params:[]}}if(ur(d,yv)){if(ur(d.value,Nf))return{sql:a(u.value++,d),params:[d],typings:["none"]};const p=d.value===null?null:d.encoder.mapToDriverValue(d.value);if(ur(p,oo))return this.buildQueryFromSourceParams([p],n);if(c)return{sql:this.mapInlineParam(p,n),params:[]};let v=["none"];return l&&(v=[l(d.encoder)]),{sql:a(u.value++,p),params:[p],typings:v}}return ur(d,Nf)?{sql:a(u.value++,d),params:[d],typings:["none"]}:ur(d,oo.Aliased)&&d.fieldAlias!==void 0?{sql:o(d.fieldAlias),params:[]}:ur(d,gv)?d._.isWith?{sql:o(d._.alias),params:[]}:this.buildQueryFromSourceParams([new mn("("),d._.sql,new mn(") "),new Sf(d._.alias)],n):w7(d)?d.schema?{sql:o(d.schema)+"."+o(d.enumName),params:[]}:{sql:o(d.enumName),params:[]}:S7(d)?(f=d.shouldOmitSQLParens)!=null&&f.call(d)?this.buildQueryFromSourceParams([d.getSQL()],n):this.buildQueryFromSourceParams([new mn("("),d.getSQL(),new mn(")")],n):c?{sql:this.mapInlineParam(d,n),params:[]}:{sql:a(u.value++,d),params:[d],typings:["none"]}}))}mapInlineParam(t,{escapeString:r}){if(t===null)return"null";if(typeof t=="number"||typeof t=="boolean")return t.toString();if(typeof t=="string")return r(t);if(typeof t=="object"){const n=t.toString();return r(n==="[object Object]"?JSON.stringify(t):n)}throw new Error("Unexpected param value: "+t)}getSQL(){return this}as(t){return t===void 0?this:new oo.Aliased(this,t)}mapWith(t){return this.decoder=typeof t=="function"?{mapFromDriverValue:t}:t,this}inlineParams(){return this.shouldInlineParams=!0,this}if(t){return t?this:void 0}};$(oo,p1,"SQL");let Jt=oo;var g1;g1=ce;class Sf{constructor(t){$(this,"brand");this.value=t}getSQL(){return new Jt([this])}}$(Sf,g1,"Name");const zA={mapFromDriverValue:e=>e},VA={mapToDriverValue:e=>e};({...zA,...VA});var y1;y1=ce;class yv{constructor(t,r=VA){$(this,"brand");this.value=t,this.encoder=r}getSQL(){return new Jt([this])}}$(yv,y1,"Param");function jf(e,...t){const r=[];(t.length>0||e.length>0&&e[0]!=="")&&r.push(new mn(e[0]));for(const[n,s]of t.entries())r.push(s,new mn(e[n+1]));return new Jt(r)}(e=>{function t(){return new Jt([])}e.empty=t;function r(c){return new Jt(c)}e.fromList=r;function n(c){return new Jt([new mn(c)])}e.raw=n;function s(c,u){const d=[];for(const[f,p]of c.entries())f>0&&u!==void 0&&d.push(u),d.push(p);return new Jt(d)}e.join=s;function o(c){return new Sf(c)}e.identifier=o;function a(c){return new Nf(c)}e.placeholder=a;function l(c,u){return new yv(c,u)}e.param=l})(jf||(jf={}));(e=>{var r;r=ce;const n=class n{constructor(o,a){$(this,"isSelectionField",!1);this.sql=o,this.fieldAlias=a}getSQL(){return this.sql}clone(){return new n(this.sql,this.fieldAlias)}};$(n,r,"SQL.Aliased");let t=n;e.Aliased=t})(Jt||(Jt={}));var x1;x1=ce;class Nf{constructor(t){this.name=t}getSQL(){return new Jt([this])}}$(Nf,x1,"Placeholder");const WA=Symbol.for("drizzle:IsDrizzleView");var v1,w1,b1;b1=ce,w1=Oa,v1=WA;class qA{constructor({name:t,schema:r,selectedFields:n,query:s}){$(this,w1);$(this,v1,!0);this[Oa]={name:t,originalName:t,schema:r,selectedFields:n,query:s,isExisting:!s,isAlias:!1}}getSQL(){return new Jt([this])}}$(qA,b1,"View");function N7(e){return typeof e=="object"&&e!==null&&WA in e}cl.prototype.getSQL=function(){return new Jt([this])};Ir.prototype.getSQL=function(){return new Jt([this])};gv.prototype.getSQL=function(){return new Jt([this])};function _7(e){return e[Ir.Symbol.Columns]}function C7(e){return e[Oa].selectedFields}function ar(e,t){return{name:typeof e=="string"&&e.length>0?e:"",config:typeof e=="object"?e:t}}var S1,j1;class Su extends(j1=ut,S1=ce,j1){generatedAlwaysAsIdentity(t){if(t){const{name:r,...n}=t;this.config.generatedIdentity={type:"always",sequenceName:r,sequenceOptions:n}}else this.config.generatedIdentity={type:"always"};return this.config.hasDefault=!0,this.config.notNull=!0,this}generatedByDefaultAsIdentity(t){if(t){const{name:r,...n}=t;this.config.generatedIdentity={type:"byDefault",sequenceName:r,sequenceOptions:n}}else this.config.generatedIdentity={type:"byDefault"};return this.config.hasDefault=!0,this.config.notNull=!0,this}}$(Su,S1,"PgIntColumnBaseBuilder");var N1,_1;class HA extends(_1=Su,N1=ce,_1){constructor(t){super(t,"number","PgBigInt53")}build(t){return new KA(t,this.config)}}$(HA,N1,"PgBigInt53Builder");var C1,E1;class KA extends(E1=Ge,C1=ce,E1){getSQLType(){return"bigint"}mapFromDriverValue(t){return typeof t=="number"?t:Number(t)}}$(KA,C1,"PgBigInt53");var k1,T1;class GA extends(T1=Su,k1=ce,T1){constructor(t){super(t,"bigint","PgBigInt64")}build(t){return new QA(t,this.config)}}$(GA,k1,"PgBigInt64Builder");var P1,R1;class QA extends(R1=Ge,P1=ce,R1){getSQLType(){return"bigint"}mapFromDriverValue(t){return BigInt(t)}}$(QA,P1,"PgBigInt64");function E7(e,t){const{name:r,config:n}=ar(e,t);return n.mode==="number"?new HA(r):new GA(r)}var A1,I1;class YA extends(I1=ut,A1=ce,I1){constructor(t){super(t,"number","PgBigSerial53"),this.config.hasDefault=!0,this.config.notNull=!0}build(t){return new ZA(t,this.config)}}$(YA,A1,"PgBigSerial53Builder");var D1,M1;class ZA extends(M1=Ge,D1=ce,M1){getSQLType(){return"bigserial"}mapFromDriverValue(t){return typeof t=="number"?t:Number(t)}}$(ZA,D1,"PgBigSerial53");var O1,L1;class XA extends(L1=ut,O1=ce,L1){constructor(t){super(t,"bigint","PgBigSerial64"),this.config.hasDefault=!0}build(t){return new JA(t,this.config)}}$(XA,O1,"PgBigSerial64Builder");var F1,U1;class JA extends(U1=Ge,F1=ce,U1){getSQLType(){return"bigserial"}mapFromDriverValue(t){return BigInt(t)}}$(JA,F1,"PgBigSerial64");function k7(e,t){const{name:r,config:n}=ar(e,t);return n.mode==="number"?new YA(r):new XA(r)}var $1,B1;class e4 extends(B1=ut,$1=ce,B1){constructor(t){super(t,"boolean","PgBoolean")}build(t){return new t4(t,this.config)}}$(e4,$1,"PgBooleanBuilder");var z1,V1;class t4 extends(V1=Ge,z1=ce,V1){getSQLType(){return"boolean"}}$(t4,z1,"PgBoolean");function Ln(e){return new e4(e??"")}var W1,q1;class r4 extends(q1=ut,W1=ce,q1){constructor(t,r){super(t,"string","PgChar"),this.config.length=r.length,this.config.enumValues=r.enum}build(t){return new n4(t,this.config)}}$(r4,W1,"PgCharBuilder");var H1,K1;class n4 extends(K1=Ge,H1=ce,K1){constructor(){super(...arguments);$(this,"length",this.config.length);$(this,"enumValues",this.config.enumValues)}getSQLType(){return this.length===void 0?"char":`char(${this.length})`}}$(n4,H1,"PgChar");function T7(e,t={}){const{name:r,config:n}=ar(e,t);return new r4(r,n)}var G1,Q1;class s4 extends(Q1=ut,G1=ce,Q1){constructor(t){super(t,"string","PgCidr")}build(t){return new i4(t,this.config)}}$(s4,G1,"PgCidrBuilder");var Y1,Z1;class i4 extends(Z1=Ge,Y1=ce,Z1){getSQLType(){return"cidr"}}$(i4,Y1,"PgCidr");function P7(e){return new s4(e??"")}var X1,J1;class o4 extends(J1=ut,X1=ce,J1){constructor(t,r,n){super(t,"custom","PgCustomColumn"),this.config.fieldConfig=r,this.config.customTypeParams=n}build(t){return new a4(t,this.config)}}$(o4,X1,"PgCustomColumnBuilder");var eS,tS;class a4 extends(tS=Ge,eS=ce,tS){constructor(r,n){super(r,n);$(this,"sqlName");$(this,"mapTo");$(this,"mapFrom");this.sqlName=n.customTypeParams.dataType(n.fieldConfig),this.mapTo=n.customTypeParams.toDriver,this.mapFrom=n.customTypeParams.fromDriver}getSQLType(){return this.sqlName}mapFromDriverValue(r){return typeof this.mapFrom=="function"?this.mapFrom(r):r}mapToDriverValue(r){return typeof this.mapTo=="function"?this.mapTo(r):r}}$(a4,eS,"PgCustomColumn");function R7(e){return(t,r)=>{const{name:n,config:s}=ar(t,r);return new o4(n,s,e)}}var rS,nS;class _l extends(nS=ut,rS=ce,nS){defaultNow(){return this.default(jf`now()`)}}$(_l,rS,"PgDateColumnBaseBuilder");var sS,iS;class l4 extends(iS=_l,sS=ce,iS){constructor(t){super(t,"date","PgDate")}build(t){return new c4(t,this.config)}}$(l4,sS,"PgDateBuilder");var oS,aS;class c4 extends(aS=Ge,oS=ce,aS){getSQLType(){return"date"}mapFromDriverValue(t){return new Date(t)}mapToDriverValue(t){return t.toISOString()}}$(c4,oS,"PgDate");var lS,cS;class u4 extends(cS=_l,lS=ce,cS){constructor(t){super(t,"string","PgDateString")}build(t){return new d4(t,this.config)}}$(u4,lS,"PgDateStringBuilder");var uS,dS;class d4 extends(dS=Ge,uS=ce,dS){getSQLType(){return"date"}}$(d4,uS,"PgDateString");function A7(e,t){const{name:r,config:n}=ar(e,t);return(n==null?void 0:n.mode)==="date"?new l4(r):new u4(r)}var fS,hS;class f4 extends(hS=ut,fS=ce,hS){constructor(t){super(t,"number","PgDoublePrecision")}build(t){return new h4(t,this.config)}}$(f4,fS,"PgDoublePrecisionBuilder");var mS,pS;class h4 extends(pS=Ge,mS=ce,pS){getSQLType(){return"double precision"}mapFromDriverValue(t){return typeof t=="string"?Number.parseFloat(t):t}}$(h4,mS,"PgDoublePrecision");function I7(e){return new f4(e??"")}var gS,yS;class m4 extends(yS=ut,gS=ce,yS){constructor(t){super(t,"string","PgInet")}build(t){return new p4(t,this.config)}}$(m4,gS,"PgInetBuilder");var xS,vS;class p4 extends(vS=Ge,xS=ce,vS){getSQLType(){return"inet"}}$(p4,xS,"PgInet");function D7(e){return new m4(e??"")}var wS,bS;class g4 extends(bS=Su,wS=ce,bS){constructor(t){super(t,"number","PgInteger")}build(t){return new y4(t,this.config)}}$(g4,wS,"PgIntegerBuilder");var SS,jS;class y4 extends(jS=Ge,SS=ce,jS){getSQLType(){return"integer"}mapFromDriverValue(t){return typeof t=="string"?Number.parseInt(t):t}}$(y4,SS,"PgInteger");function Wt(e){return new g4(e??"")}var NS,_S;class x4 extends(_S=ut,NS=ce,_S){constructor(t,r){super(t,"string","PgInterval"),this.config.intervalConfig=r}build(t){return new v4(t,this.config)}}$(x4,NS,"PgIntervalBuilder");var CS,ES;class v4 extends(ES=Ge,CS=ce,ES){constructor(){super(...arguments);$(this,"fields",this.config.intervalConfig.fields);$(this,"precision",this.config.intervalConfig.precision)}getSQLType(){const r=this.fields?` ${this.fields}`:"",n=this.precision?`(${this.precision})`:"";return`interval${r}${n}`}}$(v4,CS,"PgInterval");function M7(e,t={}){const{name:r,config:n}=ar(e,t);return new x4(r,n)}var kS,TS;class w4 extends(TS=ut,kS=ce,TS){constructor(t){super(t,"json","PgJson")}build(t){return new b4(t,this.config)}}$(w4,kS,"PgJsonBuilder");var PS,RS;class b4 extends(RS=Ge,PS=ce,RS){constructor(t,r){super(t,r)}getSQLType(){return"json"}mapToDriverValue(t){return JSON.stringify(t)}mapFromDriverValue(t){if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t}}$(b4,PS,"PgJson");function O7(e){return new w4(e??"")}var AS,IS;class S4 extends(IS=ut,AS=ce,IS){constructor(t){super(t,"json","PgJsonb")}build(t){return new j4(t,this.config)}}$(S4,AS,"PgJsonbBuilder");var DS,MS;class j4 extends(MS=Ge,DS=ce,MS){constructor(t,r){super(t,r)}getSQLType(){return"jsonb"}mapToDriverValue(t){return JSON.stringify(t)}mapFromDriverValue(t){if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t}}$(j4,DS,"PgJsonb");function L7(e){return new S4(e??"")}var OS,LS;class N4 extends(LS=ut,OS=ce,LS){constructor(t){super(t,"array","PgLine")}build(t){return new _4(t,this.config)}}$(N4,OS,"PgLineBuilder");var FS,US;class _4 extends(US=Ge,FS=ce,US){getSQLType(){return"line"}mapFromDriverValue(t){const[r,n,s]=t.slice(1,-1).split(",");return[Number.parseFloat(r),Number.parseFloat(n),Number.parseFloat(s)]}mapToDriverValue(t){return`{${t[0]},${t[1]},${t[2]}}`}}$(_4,FS,"PgLine");var $S,BS;class C4 extends(BS=ut,$S=ce,BS){constructor(t){super(t,"json","PgLineABC")}build(t){return new E4(t,this.config)}}$(C4,$S,"PgLineABCBuilder");var zS,VS;class E4 extends(VS=Ge,zS=ce,VS){getSQLType(){return"line"}mapFromDriverValue(t){const[r,n,s]=t.slice(1,-1).split(",");return{a:Number.parseFloat(r),b:Number.parseFloat(n),c:Number.parseFloat(s)}}mapToDriverValue(t){return`{${t.a},${t.b},${t.c}}`}}$(E4,zS,"PgLineABC");function F7(e,t){const{name:r,config:n}=ar(e,t);return!(n!=null&&n.mode)||n.mode==="tuple"?new N4(r):new C4(r)}var WS,qS;class k4 extends(qS=ut,WS=ce,qS){constructor(t){super(t,"string","PgMacaddr")}build(t){return new T4(t,this.config)}}$(k4,WS,"PgMacaddrBuilder");var HS,KS;class T4 extends(KS=Ge,HS=ce,KS){getSQLType(){return"macaddr"}}$(T4,HS,"PgMacaddr");function U7(e){return new k4(e??"")}var GS,QS;class P4 extends(QS=ut,GS=ce,QS){constructor(t){super(t,"string","PgMacaddr8")}build(t){return new R4(t,this.config)}}$(P4,GS,"PgMacaddr8Builder");var YS,ZS;class R4 extends(ZS=Ge,YS=ce,ZS){getSQLType(){return"macaddr8"}}$(R4,YS,"PgMacaddr8");function $7(e){return new P4(e??"")}var XS,JS;class A4 extends(JS=ut,XS=ce,JS){constructor(t,r,n){super(t,"string","PgNumeric"),this.config.precision=r,this.config.scale=n}build(t){return new I4(t,this.config)}}$(A4,XS,"PgNumericBuilder");var ej,tj;class I4 extends(tj=Ge,ej=ce,tj){constructor(r,n){super(r,n);$(this,"precision");$(this,"scale");this.precision=n.precision,this.scale=n.scale}getSQLType(){return this.precision!==void 0&&this.scale!==void 0?`numeric(${this.precision}, ${this.scale})`:this.precision===void 0?"numeric":`numeric(${this.precision})`}}$(I4,ej,"PgNumeric");function B7(e,t){const{name:r,config:n}=ar(e,t);return new A4(r,n==null?void 0:n.precision,n==null?void 0:n.scale)}var rj,nj;class D4 extends(nj=ut,rj=ce,nj){constructor(t){super(t,"array","PgPointTuple")}build(t){return new M4(t,this.config)}}$(D4,rj,"PgPointTupleBuilder");var sj,ij;class M4 extends(ij=Ge,sj=ce,ij){getSQLType(){return"point"}mapFromDriverValue(t){if(typeof t=="string"){const[r,n]=t.slice(1,-1).split(",");return[Number.parseFloat(r),Number.parseFloat(n)]}return[t.x,t.y]}mapToDriverValue(t){return`(${t[0]},${t[1]})`}}$(M4,sj,"PgPointTuple");var oj,aj;class O4 extends(aj=ut,oj=ce,aj){constructor(t){super(t,"json","PgPointObject")}build(t){return new L4(t,this.config)}}$(O4,oj,"PgPointObjectBuilder");var lj,cj;class L4 extends(cj=Ge,lj=ce,cj){getSQLType(){return"point"}mapFromDriverValue(t){if(typeof t=="string"){const[r,n]=t.slice(1,-1).split(",");return{x:Number.parseFloat(r),y:Number.parseFloat(n)}}return t}mapToDriverValue(t){return`(${t.x},${t.y})`}}$(L4,lj,"PgPointObject");function z7(e,t){const{name:r,config:n}=ar(e,t);return!(n!=null&&n.mode)||n.mode==="tuple"?new D4(r):new O4(r)}function V7(e){const t=[];for(let r=0;r<e.length;r+=2)t.push(Number.parseInt(e.slice(r,r+2),16));return new Uint8Array(t)}function _b(e,t){const r=new ArrayBuffer(8),n=new DataView(r);for(let s=0;s<8;s++)n.setUint8(s,e[t+s]);return n.getFloat64(0,!0)}function F4(e){const t=V7(e);let r=0;const n=t[r];r+=1;const s=new DataView(t.buffer),o=s.getUint32(r,n===1);if(r+=4,o&536870912&&(s.getUint32(r,n===1),r+=4),(o&65535)===1){const a=_b(t,r);r+=8;const l=_b(t,r);return r+=8,[a,l]}throw new Error("Unsupported geometry type")}var uj,dj;class U4 extends(dj=ut,uj=ce,dj){constructor(t){super(t,"array","PgGeometry")}build(t){return new $4(t,this.config)}}$(U4,uj,"PgGeometryBuilder");var fj,hj;class $4 extends(hj=Ge,fj=ce,hj){getSQLType(){return"geometry(point)"}mapFromDriverValue(t){return F4(t)}mapToDriverValue(t){return`point(${t[0]} ${t[1]})`}}$($4,fj,"PgGeometry");var mj,pj;class B4 extends(pj=ut,mj=ce,pj){constructor(t){super(t,"json","PgGeometryObject")}build(t){return new z4(t,this.config)}}$(B4,mj,"PgGeometryObjectBuilder");var gj,yj;class z4 extends(yj=Ge,gj=ce,yj){getSQLType(){return"geometry(point)"}mapFromDriverValue(t){const r=F4(t);return{x:r[0],y:r[1]}}mapToDriverValue(t){return`point(${t.x} ${t.y})`}}$(z4,gj,"PgGeometryObject");function W7(e,t){const{name:r,config:n}=ar(e,t);return!(n!=null&&n.mode)||n.mode==="tuple"?new U4(r):new B4(r)}var xj,vj;class V4 extends(vj=ut,xj=ce,vj){constructor(t,r){super(t,"number","PgReal"),this.config.length=r}build(t){return new W4(t,this.config)}}$(V4,xj,"PgRealBuilder");var wj,bj;class W4 extends(bj=Ge,wj=ce,bj){constructor(r,n){super(r,n);$(this,"mapFromDriverValue",r=>typeof r=="string"?Number.parseFloat(r):r)}getSQLType(){return"real"}}$(W4,wj,"PgReal");function q7(e){return new V4(e??"")}var Sj,jj;class q4 extends(jj=ut,Sj=ce,jj){constructor(t){super(t,"number","PgSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(t){return new H4(t,this.config)}}$(q4,Sj,"PgSerialBuilder");var Nj,_j;class H4 extends(_j=Ge,Nj=ce,_j){getSQLType(){return"serial"}}$(H4,Nj,"PgSerial");function js(e){return new q4(e??"")}var Cj,Ej;class K4 extends(Ej=Su,Cj=ce,Ej){constructor(t){super(t,"number","PgSmallInt")}build(t){return new G4(t,this.config)}}$(K4,Cj,"PgSmallIntBuilder");var kj,Tj;class G4 extends(Tj=Ge,kj=ce,Tj){constructor(){super(...arguments);$(this,"mapFromDriverValue",r=>typeof r=="string"?Number(r):r)}getSQLType(){return"smallint"}}$(G4,kj,"PgSmallInt");function H7(e){return new K4(e??"")}var Pj,Rj;class Q4 extends(Rj=ut,Pj=ce,Rj){constructor(t){super(t,"number","PgSmallSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(t){return new Y4(t,this.config)}}$(Q4,Pj,"PgSmallSerialBuilder");var Aj,Ij;class Y4 extends(Ij=Ge,Aj=ce,Ij){getSQLType(){return"smallserial"}}$(Y4,Aj,"PgSmallSerial");function K7(e){return new Q4(e??"")}var Dj,Mj;class Z4 extends(Mj=ut,Dj=ce,Mj){constructor(t,r){super(t,"string","PgText"),this.config.enumValues=r.enum}build(t){return new X4(t,this.config)}}$(Z4,Dj,"PgTextBuilder");var Oj,Lj;class X4 extends(Lj=Ge,Oj=ce,Lj){constructor(){super(...arguments);$(this,"enumValues",this.config.enumValues)}getSQLType(){return"text"}}$(X4,Oj,"PgText");function et(e,t={}){const{name:r,config:n}=ar(e,t);return new Z4(r,n)}var Fj,Uj;class J4 extends(Uj=_l,Fj=ce,Uj){constructor(t,r,n){super(t,"string","PgTime"),this.withTimezone=r,this.precision=n,this.config.withTimezone=r,this.config.precision=n}build(t){return new eI(t,this.config)}}$(J4,Fj,"PgTimeBuilder");var $j,Bj;class eI extends(Bj=Ge,$j=ce,Bj){constructor(r,n){super(r,n);$(this,"withTimezone");$(this,"precision");this.withTimezone=n.withTimezone,this.precision=n.precision}getSQLType(){return`time${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}$(eI,$j,"PgTime");function G7(e,t={}){const{name:r,config:n}=ar(e,t);return new J4(r,n.withTimezone??!1,n.precision)}var zj,Vj;class tI extends(Vj=_l,zj=ce,Vj){constructor(t,r,n){super(t,"date","PgTimestamp"),this.config.withTimezone=r,this.config.precision=n}build(t){return new rI(t,this.config)}}$(tI,zj,"PgTimestampBuilder");var Wj,qj;class rI extends(qj=Ge,Wj=ce,qj){constructor(r,n){super(r,n);$(this,"withTimezone");$(this,"precision");$(this,"mapFromDriverValue",r=>new Date(this.withTimezone?r:r+"+0000"));$(this,"mapToDriverValue",r=>r.toISOString());this.withTimezone=n.withTimezone,this.precision=n.precision}getSQLType(){return`timestamp${this.precision===void 0?"":` (${this.precision})`}${this.withTimezone?" with time zone":""}`}}$(rI,Wj,"PgTimestamp");var Hj,Kj;class nI extends(Kj=_l,Hj=ce,Kj){constructor(t,r,n){super(t,"string","PgTimestampString"),this.config.withTimezone=r,this.config.precision=n}build(t){return new sI(t,this.config)}}$(nI,Hj,"PgTimestampStringBuilder");var Gj,Qj;class sI extends(Qj=Ge,Gj=ce,Qj){constructor(r,n){super(r,n);$(this,"withTimezone");$(this,"precision");this.withTimezone=n.withTimezone,this.precision=n.precision}getSQLType(){return`timestamp${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}$(sI,Gj,"PgTimestampString");function sn(e,t={}){const{name:r,config:n}=ar(e,t);return(n==null?void 0:n.mode)==="string"?new nI(r,n.withTimezone??!1,n.precision):new tI(r,(n==null?void 0:n.withTimezone)??!1,n==null?void 0:n.precision)}var Yj,Zj;class iI extends(Zj=ut,Yj=ce,Zj){constructor(t){super(t,"string","PgUUID")}defaultRandom(){return this.default(jf`gen_random_uuid()`)}build(t){return new oI(t,this.config)}}$(iI,Yj,"PgUUIDBuilder");var Xj,Jj;class oI extends(Jj=Ge,Xj=ce,Jj){getSQLType(){return"uuid"}}$(oI,Xj,"PgUUID");function Q7(e){return new iI(e??"")}var eN,tN;class aI extends(tN=ut,eN=ce,tN){constructor(t,r){super(t,"string","PgVarchar"),this.config.length=r.length,this.config.enumValues=r.enum}build(t){return new lI(t,this.config)}}$(aI,eN,"PgVarcharBuilder");var rN,nN;class lI extends(nN=Ge,rN=ce,nN){constructor(){super(...arguments);$(this,"length",this.config.length);$(this,"enumValues",this.config.enumValues)}getSQLType(){return this.length===void 0?"varchar":`varchar(${this.length})`}}$(lI,rN,"PgVarchar");function Y7(e,t={}){const{name:r,config:n}=ar(e,t);return new aI(r,n)}var sN,iN;class cI extends(iN=ut,sN=ce,iN){constructor(t,r){super(t,"string","PgBinaryVector"),this.config.dimensions=r.dimensions}build(t){return new uI(t,this.config)}}$(cI,sN,"PgBinaryVectorBuilder");var oN,aN;class uI extends(aN=Ge,oN=ce,aN){constructor(){super(...arguments);$(this,"dimensions",this.config.dimensions)}getSQLType(){return`bit(${this.dimensions})`}}$(uI,oN,"PgBinaryVector");function Z7(e,t){const{name:r,config:n}=ar(e,t);return new cI(r,n)}var lN,cN;class dI extends(cN=ut,lN=ce,cN){constructor(t,r){super(t,"array","PgHalfVector"),this.config.dimensions=r.dimensions}build(t){return new fI(t,this.config)}}$(dI,lN,"PgHalfVectorBuilder");var uN,dN;class fI extends(dN=Ge,uN=ce,dN){constructor(){super(...arguments);$(this,"dimensions",this.config.dimensions)}getSQLType(){return`halfvec(${this.dimensions})`}mapToDriverValue(r){return JSON.stringify(r)}mapFromDriverValue(r){return r.slice(1,-1).split(",").map(n=>Number.parseFloat(n))}}$(fI,uN,"PgHalfVector");function X7(e,t){const{name:r,config:n}=ar(e,t);return new dI(r,n)}var fN,hN;class hI extends(hN=ut,fN=ce,hN){constructor(t,r){super(t,"string","PgSparseVector"),this.config.dimensions=r.dimensions}build(t){return new mI(t,this.config)}}$(hI,fN,"PgSparseVectorBuilder");var mN,pN;class mI extends(pN=Ge,mN=ce,pN){constructor(){super(...arguments);$(this,"dimensions",this.config.dimensions)}getSQLType(){return`sparsevec(${this.dimensions})`}}$(mI,mN,"PgSparseVector");function J7(e,t){const{name:r,config:n}=ar(e,t);return new hI(r,n)}var gN,yN;class pI extends(yN=ut,gN=ce,yN){constructor(t,r){super(t,"array","PgVector"),this.config.dimensions=r.dimensions}build(t){return new gI(t,this.config)}}$(pI,gN,"PgVectorBuilder");var xN,vN;class gI extends(vN=Ge,xN=ce,vN){constructor(){super(...arguments);$(this,"dimensions",this.config.dimensions)}getSQLType(){return`vector(${this.dimensions})`}mapToDriverValue(r){return JSON.stringify(r)}mapFromDriverValue(r){return r.slice(1,-1).split(",").map(n=>Number.parseFloat(n))}}$(gI,xN,"PgVector");function eW(e,t){const{name:r,config:n}=ar(e,t);return new pI(r,n)}function tW(){return{bigint:E7,bigserial:k7,boolean:Ln,char:T7,cidr:P7,customType:R7,date:A7,doublePrecision:I7,inet:D7,integer:Wt,interval:M7,json:O7,jsonb:L7,line:F7,macaddr:U7,macaddr8:$7,numeric:B7,point:z7,geometry:W7,real:q7,serial:js,smallint:H7,smallserial:K7,text:et,time:G7,timestamp:sn,uuid:Q7,varchar:Y7,bit:Z7,halfvec:X7,sparsevec:J7,vector:eW}}const Wg=Symbol.for("drizzle:PgInlineForeignKeys"),Cb=Symbol.for("drizzle:EnableRLS");var wN,bN,SN,jN,NN;class _f extends(NN=Ir,jN=ce,SN=Wg,bN=Cb,wN=Ir.Symbol.ExtraConfigBuilder,NN){constructor(){super(...arguments);$(this,SN,[]);$(this,bN,!1);$(this,wN)}}$(_f,jN,"PgTable"),$(_f,"Symbol",Object.assign({},Ir.Symbol,{InlineForeignKeys:Wg,EnableRLS:Cb}));function rW(e,t,r,n,s=e){const o=new _f(e,n,s),a=typeof t=="function"?t(tW()):t,l=Object.fromEntries(Object.entries(a).map(([d,f])=>{const p=f;p.setName(d);const v=p.build(o);return o[Wg].push(...p.buildForeignKeys(v,o)),[d,v]})),c=Object.fromEntries(Object.entries(a).map(([d,f])=>{const p=f;p.setName(d);const v=p.buildExtraConfigColumn(o);return[d,v]})),u=Object.assign(o,l);return u[Ir.Symbol.Columns]=l,u[Ir.Symbol.ExtraConfigColumns]=c,Object.assign(u,{enableRLS:()=>(u[_f.Symbol.EnableRLS]=!0,u)})}const Js=(e,t,r)=>rW(e,t,r,void 0);var ct;(function(e){e.assertEqual=s=>s;function t(s){}e.assertIs=t;function r(s){throw new Error}e.assertNever=r,e.arrayToEnum=s=>{const o={};for(const a of s)o[a]=a;return o},e.getValidEnumValues=s=>{const o=e.objectKeys(s).filter(l=>typeof s[s[l]]!="number"),a={};for(const l of o)a[l]=s[l];return e.objectValues(a)},e.objectValues=s=>e.objectKeys(s).map(function(o){return s[o]}),e.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const o=[];for(const a in s)Object.prototype.hasOwnProperty.call(s,a)&&o.push(a);return o},e.find=(s,o)=>{for(const a of s)if(o(a))return a},e.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function n(s,o=" | "){return s.map(a=>typeof a=="string"?`'${a}'`:a).join(o)}e.joinValues=n,e.jsonStringifyReplacer=(s,o)=>typeof o=="bigint"?o.toString():o})(ct||(ct={}));var qg;(function(e){e.mergeShapes=(t,r)=>({...t,...r})})(qg||(qg={}));const Ee=ct.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Rs=e=>{switch(typeof e){case"undefined":return Ee.undefined;case"string":return Ee.string;case"number":return isNaN(e)?Ee.nan:Ee.number;case"boolean":return Ee.boolean;case"function":return Ee.function;case"bigint":return Ee.bigint;case"symbol":return Ee.symbol;case"object":return Array.isArray(e)?Ee.array:e===null?Ee.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?Ee.promise:typeof Map<"u"&&e instanceof Map?Ee.map:typeof Set<"u"&&e instanceof Set?Ee.set:typeof Date<"u"&&e instanceof Date?Ee.date:Ee.object;default:return Ee.unknown}},me=ct.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),nW=e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:");class rn extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=t}format(t){const r=t||function(o){return o.message},n={_errors:[]},s=o=>{for(const a of o.issues)if(a.code==="invalid_union")a.unionErrors.map(s);else if(a.code==="invalid_return_type")s(a.returnTypeError);else if(a.code==="invalid_arguments")s(a.argumentsError);else if(a.path.length===0)n._errors.push(r(a));else{let l=n,c=0;for(;c<a.path.length;){const u=a.path[c];c===a.path.length-1?(l[u]=l[u]||{_errors:[]},l[u]._errors.push(r(a))):l[u]=l[u]||{_errors:[]},l=l[u],c++}}};return s(this),n}static assert(t){if(!(t instanceof rn))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,ct.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=r=>r.message){const r={},n=[];for(const s of this.issues)s.path.length>0?(r[s.path[0]]=r[s.path[0]]||[],r[s.path[0]].push(t(s))):n.push(t(s));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}}rn.create=e=>new rn(e);const ul=(e,t)=>{let r;switch(e.code){case me.invalid_type:e.received===Ee.undefined?r="Required":r=`Expected ${e.expected}, received ${e.received}`;break;case me.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,ct.jsonStringifyReplacer)}`;break;case me.unrecognized_keys:r=`Unrecognized key(s) in object: ${ct.joinValues(e.keys,", ")}`;break;case me.invalid_union:r="Invalid input";break;case me.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${ct.joinValues(e.options)}`;break;case me.invalid_enum_value:r=`Invalid enum value. Expected ${ct.joinValues(e.options)}, received '${e.received}'`;break;case me.invalid_arguments:r="Invalid function arguments";break;case me.invalid_return_type:r="Invalid function return type";break;case me.invalid_date:r="Invalid date";break;case me.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:ct.assertNever(e.validation):e.validation!=="regex"?r=`Invalid ${e.validation}`:r="Invalid";break;case me.too_small:e.type==="array"?r=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?r=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?r=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?r=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:r="Invalid input";break;case me.too_big:e.type==="array"?r=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?r=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?r=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?r=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?r=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:r="Invalid input";break;case me.custom:r="Invalid input";break;case me.invalid_intersection_types:r="Intersection results could not be merged";break;case me.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case me.not_finite:r="Number must be finite";break;default:r=t.defaultError,ct.assertNever(e)}return{message:r}};let yI=ul;function sW(e){yI=e}function Cf(){return yI}const Ef=e=>{const{data:t,path:r,errorMaps:n,issueData:s}=e,o=[...r,...s.path||[]],a={...s,path:o};if(s.message!==void 0)return{...s,path:o,message:s.message};let l="";const c=n.filter(u=>!!u).slice().reverse();for(const u of c)l=u(a,{data:t,defaultError:l}).message;return{...s,path:o,message:l}},iW=[];function Se(e,t){const r=Cf(),n=Ef({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,r,r===ul?void 0:ul].filter(s=>!!s)});e.common.issues.push(n)}class Cr{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,r){const n=[];for(const s of r){if(s.status==="aborted")return Ve;s.status==="dirty"&&t.dirty(),n.push(s.value)}return{status:t.value,value:n}}static async mergeObjectAsync(t,r){const n=[];for(const s of r){const o=await s.key,a=await s.value;n.push({key:o,value:a})}return Cr.mergeObjectSync(t,n)}static mergeObjectSync(t,r){const n={};for(const s of r){const{key:o,value:a}=s;if(o.status==="aborted"||a.status==="aborted")return Ve;o.status==="dirty"&&t.dirty(),a.status==="dirty"&&t.dirty(),o.value!=="__proto__"&&(typeof a.value<"u"||s.alwaysSet)&&(n[o.value]=a.value)}return{status:t.value,value:n}}}const Ve=Object.freeze({status:"aborted"}),ja=e=>({status:"dirty",value:e}),Mr=e=>({status:"valid",value:e}),Hg=e=>e.status==="aborted",Kg=e=>e.status==="dirty",$o=e=>e.status==="valid",Fc=e=>typeof Promise<"u"&&e instanceof Promise;function kf(e,t,r,n){if(typeof t=="function"?e!==t||!0:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t.get(e)}function xI(e,t,r,n,s){if(typeof t=="function"?e!==t||!0:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return t.set(e,r),r}var Ie;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(Ie||(Ie={}));var Ql,Yl;class ws{constructor(t,r,n,s){this._cachedPath=[],this.parent=t,this.data=r,this._path=n,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Eb=(e,t)=>{if($o(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const r=new rn(e.common.issues);return this._error=r,this._error}}};function Ke(e){if(!e)return{};const{errorMap:t,invalid_type_error:r,required_error:n,description:s}=e;if(t&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:s}:{errorMap:(a,l)=>{var c,u;const{message:d}=e;return a.code==="invalid_enum_value"?{message:d??l.defaultError}:typeof l.data>"u"?{message:(c=d??n)!==null&&c!==void 0?c:l.defaultError}:a.code!=="invalid_type"?{message:l.defaultError}:{message:(u=d??r)!==null&&u!==void 0?u:l.defaultError}},description:s}}class Je{get description(){return this._def.description}_getType(t){return Rs(t.data)}_getOrReturnCtx(t,r){return r||{common:t.parent.common,data:t.data,parsedType:Rs(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new Cr,ctx:{common:t.parent.common,data:t.data,parsedType:Rs(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const r=this._parse(t);if(Fc(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(t){const r=this._parse(t);return Promise.resolve(r)}parse(t,r){const n=this.safeParse(t,r);if(n.success)return n.data;throw n.error}safeParse(t,r){var n;const s={common:{issues:[],async:(n=r==null?void 0:r.async)!==null&&n!==void 0?n:!1,contextualErrorMap:r==null?void 0:r.errorMap},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Rs(t)},o=this._parseSync({data:t,path:s.path,parent:s});return Eb(s,o)}"~validate"(t){var r,n;const s={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Rs(t)};if(!this["~standard"].async)try{const o=this._parseSync({data:t,path:[],parent:s});return $o(o)?{value:o.value}:{issues:s.common.issues}}catch(o){!((n=(r=o==null?void 0:o.message)===null||r===void 0?void 0:r.toLowerCase())===null||n===void 0)&&n.includes("encountered")&&(this["~standard"].async=!0),s.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:s}).then(o=>$o(o)?{value:o.value}:{issues:s.common.issues})}async parseAsync(t,r){const n=await this.safeParseAsync(t,r);if(n.success)return n.data;throw n.error}async safeParseAsync(t,r){const n={common:{issues:[],contextualErrorMap:r==null?void 0:r.errorMap,async:!0},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Rs(t)},s=this._parse({data:t,path:n.path,parent:n}),o=await(Fc(s)?s:Promise.resolve(s));return Eb(n,o)}refine(t,r){const n=s=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(s):r;return this._refinement((s,o)=>{const a=t(s),l=()=>o.addIssue({code:me.custom,...n(s)});return typeof Promise<"u"&&a instanceof Promise?a.then(c=>c?!0:(l(),!1)):a?!0:(l(),!1)})}refinement(t,r){return this._refinement((n,s)=>t(n)?!0:(s.addIssue(typeof r=="function"?r(n,s):r),!1))}_refinement(t){return new Qn({schema:this,typeName:ze.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:r=>this["~validate"](r)}}optional(){return ms.create(this,this._def)}nullable(){return Hi.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Wn.create(this)}promise(){return fl.create(this,this._def)}or(t){return zc.create([this,t],this._def)}and(t){return Vc.create(this,t,this._def)}transform(t){return new Qn({...Ke(this._def),schema:this,typeName:ze.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const r=typeof t=="function"?t:()=>t;return new Gc({...Ke(this._def),innerType:this,defaultValue:r,typeName:ze.ZodDefault})}brand(){return new xv({typeName:ze.ZodBranded,type:this,...Ke(this._def)})}catch(t){const r=typeof t=="function"?t:()=>t;return new Qc({...Ke(this._def),innerType:this,catchValue:r,typeName:ze.ZodCatch})}describe(t){const r=this.constructor;return new r({...this._def,description:t})}pipe(t){return ju.create(this,t)}readonly(){return Yc.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const oW=/^c[^\s-]{8,}$/i,aW=/^[0-9a-z]+$/,lW=/^[0-9A-HJKMNP-TV-Z]{26}$/i,cW=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,uW=/^[a-z0-9_-]{21}$/i,dW=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,fW=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,hW=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,mW="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Km;const pW=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,gW=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,yW=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,xW=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,vW=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,wW=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,vI="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",bW=new RegExp(`^${vI}$`);function wI(e){let t="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`),t}function SW(e){return new RegExp(`^${wI(e)}$`)}function bI(e){let t=`${vI}T${wI(e)}`;const r=[];return r.push(e.local?"Z?":"Z"),e.offset&&r.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${r.join("|")})`,new RegExp(`^${t}$`)}function jW(e,t){return!!((t==="v4"||!t)&&pW.test(e)||(t==="v6"||!t)&&yW.test(e))}function NW(e,t){if(!dW.test(e))return!1;try{const[r]=e.split("."),n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),s=JSON.parse(atob(n));return!(typeof s!="object"||s===null||!s.typ||!s.alg||t&&s.alg!==t)}catch{return!1}}function _W(e,t){return!!((t==="v4"||!t)&&gW.test(e)||(t==="v6"||!t)&&xW.test(e))}class Bn extends Je{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==Ee.string){const o=this._getOrReturnCtx(t);return Se(o,{code:me.invalid_type,expected:Ee.string,received:o.parsedType}),Ve}const n=new Cr;let s;for(const o of this._def.checks)if(o.kind==="min")t.data.length<o.value&&(s=this._getOrReturnCtx(t,s),Se(s,{code:me.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),n.dirty());else if(o.kind==="max")t.data.length>o.value&&(s=this._getOrReturnCtx(t,s),Se(s,{code:me.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),n.dirty());else if(o.kind==="length"){const a=t.data.length>o.value,l=t.data.length<o.value;(a||l)&&(s=this._getOrReturnCtx(t,s),a?Se(s,{code:me.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):l&&Se(s,{code:me.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),n.dirty())}else if(o.kind==="email")hW.test(t.data)||(s=this._getOrReturnCtx(t,s),Se(s,{validation:"email",code:me.invalid_string,message:o.message}),n.dirty());else if(o.kind==="emoji")Km||(Km=new RegExp(mW,"u")),Km.test(t.data)||(s=this._getOrReturnCtx(t,s),Se(s,{validation:"emoji",code:me.invalid_string,message:o.message}),n.dirty());else if(o.kind==="uuid")cW.test(t.data)||(s=this._getOrReturnCtx(t,s),Se(s,{validation:"uuid",code:me.invalid_string,message:o.message}),n.dirty());else if(o.kind==="nanoid")uW.test(t.data)||(s=this._getOrReturnCtx(t,s),Se(s,{validation:"nanoid",code:me.invalid_string,message:o.message}),n.dirty());else if(o.kind==="cuid")oW.test(t.data)||(s=this._getOrReturnCtx(t,s),Se(s,{validation:"cuid",code:me.invalid_string,message:o.message}),n.dirty());else if(o.kind==="cuid2")aW.test(t.data)||(s=this._getOrReturnCtx(t,s),Se(s,{validation:"cuid2",code:me.invalid_string,message:o.message}),n.dirty());else if(o.kind==="ulid")lW.test(t.data)||(s=this._getOrReturnCtx(t,s),Se(s,{validation:"ulid",code:me.invalid_string,message:o.message}),n.dirty());else if(o.kind==="url")try{new URL(t.data)}catch{s=this._getOrReturnCtx(t,s),Se(s,{validation:"url",code:me.invalid_string,message:o.message}),n.dirty()}else o.kind==="regex"?(o.regex.lastIndex=0,o.regex.test(t.data)||(s=this._getOrReturnCtx(t,s),Se(s,{validation:"regex",code:me.invalid_string,message:o.message}),n.dirty())):o.kind==="trim"?t.data=t.data.trim():o.kind==="includes"?t.data.includes(o.value,o.position)||(s=this._getOrReturnCtx(t,s),Se(s,{code:me.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),n.dirty()):o.kind==="toLowerCase"?t.data=t.data.toLowerCase():o.kind==="toUpperCase"?t.data=t.data.toUpperCase():o.kind==="startsWith"?t.data.startsWith(o.value)||(s=this._getOrReturnCtx(t,s),Se(s,{code:me.invalid_string,validation:{startsWith:o.value},message:o.message}),n.dirty()):o.kind==="endsWith"?t.data.endsWith(o.value)||(s=this._getOrReturnCtx(t,s),Se(s,{code:me.invalid_string,validation:{endsWith:o.value},message:o.message}),n.dirty()):o.kind==="datetime"?bI(o).test(t.data)||(s=this._getOrReturnCtx(t,s),Se(s,{code:me.invalid_string,validation:"datetime",message:o.message}),n.dirty()):o.kind==="date"?bW.test(t.data)||(s=this._getOrReturnCtx(t,s),Se(s,{code:me.invalid_string,validation:"date",message:o.message}),n.dirty()):o.kind==="time"?SW(o).test(t.data)||(s=this._getOrReturnCtx(t,s),Se(s,{code:me.invalid_string,validation:"time",message:o.message}),n.dirty()):o.kind==="duration"?fW.test(t.data)||(s=this._getOrReturnCtx(t,s),Se(s,{validation:"duration",code:me.invalid_string,message:o.message}),n.dirty()):o.kind==="ip"?jW(t.data,o.version)||(s=this._getOrReturnCtx(t,s),Se(s,{validation:"ip",code:me.invalid_string,message:o.message}),n.dirty()):o.kind==="jwt"?NW(t.data,o.alg)||(s=this._getOrReturnCtx(t,s),Se(s,{validation:"jwt",code:me.invalid_string,message:o.message}),n.dirty()):o.kind==="cidr"?_W(t.data,o.version)||(s=this._getOrReturnCtx(t,s),Se(s,{validation:"cidr",code:me.invalid_string,message:o.message}),n.dirty()):o.kind==="base64"?vW.test(t.data)||(s=this._getOrReturnCtx(t,s),Se(s,{validation:"base64",code:me.invalid_string,message:o.message}),n.dirty()):o.kind==="base64url"?wW.test(t.data)||(s=this._getOrReturnCtx(t,s),Se(s,{validation:"base64url",code:me.invalid_string,message:o.message}),n.dirty()):ct.assertNever(o);return{status:n.value,value:t.data}}_regex(t,r,n){return this.refinement(s=>t.test(s),{validation:r,code:me.invalid_string,...Ie.errToObj(n)})}_addCheck(t){return new Bn({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...Ie.errToObj(t)})}url(t){return this._addCheck({kind:"url",...Ie.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...Ie.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...Ie.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...Ie.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...Ie.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...Ie.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...Ie.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...Ie.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...Ie.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...Ie.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...Ie.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...Ie.errToObj(t)})}datetime(t){var r,n;return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,offset:(r=t==null?void 0:t.offset)!==null&&r!==void 0?r:!1,local:(n=t==null?void 0:t.local)!==null&&n!==void 0?n:!1,...Ie.errToObj(t==null?void 0:t.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,...Ie.errToObj(t==null?void 0:t.message)})}duration(t){return this._addCheck({kind:"duration",...Ie.errToObj(t)})}regex(t,r){return this._addCheck({kind:"regex",regex:t,...Ie.errToObj(r)})}includes(t,r){return this._addCheck({kind:"includes",value:t,position:r==null?void 0:r.position,...Ie.errToObj(r==null?void 0:r.message)})}startsWith(t,r){return this._addCheck({kind:"startsWith",value:t,...Ie.errToObj(r)})}endsWith(t,r){return this._addCheck({kind:"endsWith",value:t,...Ie.errToObj(r)})}min(t,r){return this._addCheck({kind:"min",value:t,...Ie.errToObj(r)})}max(t,r){return this._addCheck({kind:"max",value:t,...Ie.errToObj(r)})}length(t,r){return this._addCheck({kind:"length",value:t,...Ie.errToObj(r)})}nonempty(t){return this.min(1,Ie.errToObj(t))}trim(){return new Bn({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Bn({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Bn({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxLength(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}}Bn.create=e=>{var t;return new Bn({checks:[],typeName:ze.ZodString,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...Ke(e)})};function CW(e,t){const r=(e.toString().split(".")[1]||"").length,n=(t.toString().split(".")[1]||"").length,s=r>n?r:n,o=parseInt(e.toFixed(s).replace(".","")),a=parseInt(t.toFixed(s).replace(".",""));return o%a/Math.pow(10,s)}class Vi extends Je{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==Ee.number){const o=this._getOrReturnCtx(t);return Se(o,{code:me.invalid_type,expected:Ee.number,received:o.parsedType}),Ve}let n;const s=new Cr;for(const o of this._def.checks)o.kind==="int"?ct.isInteger(t.data)||(n=this._getOrReturnCtx(t,n),Se(n,{code:me.invalid_type,expected:"integer",received:"float",message:o.message}),s.dirty()):o.kind==="min"?(o.inclusive?t.data<o.value:t.data<=o.value)&&(n=this._getOrReturnCtx(t,n),Se(n,{code:me.too_small,minimum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),s.dirty()):o.kind==="max"?(o.inclusive?t.data>o.value:t.data>=o.value)&&(n=this._getOrReturnCtx(t,n),Se(n,{code:me.too_big,maximum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),s.dirty()):o.kind==="multipleOf"?CW(t.data,o.value)!==0&&(n=this._getOrReturnCtx(t,n),Se(n,{code:me.not_multiple_of,multipleOf:o.value,message:o.message}),s.dirty()):o.kind==="finite"?Number.isFinite(t.data)||(n=this._getOrReturnCtx(t,n),Se(n,{code:me.not_finite,message:o.message}),s.dirty()):ct.assertNever(o);return{status:s.value,value:t.data}}gte(t,r){return this.setLimit("min",t,!0,Ie.toString(r))}gt(t,r){return this.setLimit("min",t,!1,Ie.toString(r))}lte(t,r){return this.setLimit("max",t,!0,Ie.toString(r))}lt(t,r){return this.setLimit("max",t,!1,Ie.toString(r))}setLimit(t,r,n,s){return new Vi({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:n,message:Ie.toString(s)}]})}_addCheck(t){return new Vi({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:Ie.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Ie.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Ie.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Ie.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Ie.toString(t)})}multipleOf(t,r){return this._addCheck({kind:"multipleOf",value:t,message:Ie.toString(r)})}finite(t){return this._addCheck({kind:"finite",message:Ie.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Ie.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Ie.toString(t)})}get minValue(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxValue(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&ct.isInteger(t.value))}get isFinite(){let t=null,r=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(t===null||n.value<t)&&(t=n.value)}return Number.isFinite(r)&&Number.isFinite(t)}}Vi.create=e=>new Vi({checks:[],typeName:ze.ZodNumber,coerce:(e==null?void 0:e.coerce)||!1,...Ke(e)});class Wi extends Je{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==Ee.bigint)return this._getInvalidInput(t);let n;const s=new Cr;for(const o of this._def.checks)o.kind==="min"?(o.inclusive?t.data<o.value:t.data<=o.value)&&(n=this._getOrReturnCtx(t,n),Se(n,{code:me.too_small,type:"bigint",minimum:o.value,inclusive:o.inclusive,message:o.message}),s.dirty()):o.kind==="max"?(o.inclusive?t.data>o.value:t.data>=o.value)&&(n=this._getOrReturnCtx(t,n),Se(n,{code:me.too_big,type:"bigint",maximum:o.value,inclusive:o.inclusive,message:o.message}),s.dirty()):o.kind==="multipleOf"?t.data%o.value!==BigInt(0)&&(n=this._getOrReturnCtx(t,n),Se(n,{code:me.not_multiple_of,multipleOf:o.value,message:o.message}),s.dirty()):ct.assertNever(o);return{status:s.value,value:t.data}}_getInvalidInput(t){const r=this._getOrReturnCtx(t);return Se(r,{code:me.invalid_type,expected:Ee.bigint,received:r.parsedType}),Ve}gte(t,r){return this.setLimit("min",t,!0,Ie.toString(r))}gt(t,r){return this.setLimit("min",t,!1,Ie.toString(r))}lte(t,r){return this.setLimit("max",t,!0,Ie.toString(r))}lt(t,r){return this.setLimit("max",t,!1,Ie.toString(r))}setLimit(t,r,n,s){return new Wi({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:n,message:Ie.toString(s)}]})}_addCheck(t){return new Wi({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Ie.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Ie.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Ie.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Ie.toString(t)})}multipleOf(t,r){return this._addCheck({kind:"multipleOf",value:t,message:Ie.toString(r)})}get minValue(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxValue(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}}Wi.create=e=>{var t;return new Wi({checks:[],typeName:ze.ZodBigInt,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...Ke(e)})};class Uc extends Je{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==Ee.boolean){const n=this._getOrReturnCtx(t);return Se(n,{code:me.invalid_type,expected:Ee.boolean,received:n.parsedType}),Ve}return Mr(t.data)}}Uc.create=e=>new Uc({typeName:ze.ZodBoolean,coerce:(e==null?void 0:e.coerce)||!1,...Ke(e)});class Bo extends Je{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==Ee.date){const o=this._getOrReturnCtx(t);return Se(o,{code:me.invalid_type,expected:Ee.date,received:o.parsedType}),Ve}if(isNaN(t.data.getTime())){const o=this._getOrReturnCtx(t);return Se(o,{code:me.invalid_date}),Ve}const n=new Cr;let s;for(const o of this._def.checks)o.kind==="min"?t.data.getTime()<o.value&&(s=this._getOrReturnCtx(t,s),Se(s,{code:me.too_small,message:o.message,inclusive:!0,exact:!1,minimum:o.value,type:"date"}),n.dirty()):o.kind==="max"?t.data.getTime()>o.value&&(s=this._getOrReturnCtx(t,s),Se(s,{code:me.too_big,message:o.message,inclusive:!0,exact:!1,maximum:o.value,type:"date"}),n.dirty()):ct.assertNever(o);return{status:n.value,value:new Date(t.data.getTime())}}_addCheck(t){return new Bo({...this._def,checks:[...this._def.checks,t]})}min(t,r){return this._addCheck({kind:"min",value:t.getTime(),message:Ie.toString(r)})}max(t,r){return this._addCheck({kind:"max",value:t.getTime(),message:Ie.toString(r)})}get minDate(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t!=null?new Date(t):null}}Bo.create=e=>new Bo({checks:[],coerce:(e==null?void 0:e.coerce)||!1,typeName:ze.ZodDate,...Ke(e)});class Tf extends Je{_parse(t){if(this._getType(t)!==Ee.symbol){const n=this._getOrReturnCtx(t);return Se(n,{code:me.invalid_type,expected:Ee.symbol,received:n.parsedType}),Ve}return Mr(t.data)}}Tf.create=e=>new Tf({typeName:ze.ZodSymbol,...Ke(e)});class $c extends Je{_parse(t){if(this._getType(t)!==Ee.undefined){const n=this._getOrReturnCtx(t);return Se(n,{code:me.invalid_type,expected:Ee.undefined,received:n.parsedType}),Ve}return Mr(t.data)}}$c.create=e=>new $c({typeName:ze.ZodUndefined,...Ke(e)});class Bc extends Je{_parse(t){if(this._getType(t)!==Ee.null){const n=this._getOrReturnCtx(t);return Se(n,{code:me.invalid_type,expected:Ee.null,received:n.parsedType}),Ve}return Mr(t.data)}}Bc.create=e=>new Bc({typeName:ze.ZodNull,...Ke(e)});class dl extends Je{constructor(){super(...arguments),this._any=!0}_parse(t){return Mr(t.data)}}dl.create=e=>new dl({typeName:ze.ZodAny,...Ke(e)});class Co extends Je{constructor(){super(...arguments),this._unknown=!0}_parse(t){return Mr(t.data)}}Co.create=e=>new Co({typeName:ze.ZodUnknown,...Ke(e)});class Gs extends Je{_parse(t){const r=this._getOrReturnCtx(t);return Se(r,{code:me.invalid_type,expected:Ee.never,received:r.parsedType}),Ve}}Gs.create=e=>new Gs({typeName:ze.ZodNever,...Ke(e)});class Pf extends Je{_parse(t){if(this._getType(t)!==Ee.undefined){const n=this._getOrReturnCtx(t);return Se(n,{code:me.invalid_type,expected:Ee.void,received:n.parsedType}),Ve}return Mr(t.data)}}Pf.create=e=>new Pf({typeName:ze.ZodVoid,...Ke(e)});class Wn extends Je{_parse(t){const{ctx:r,status:n}=this._processInputParams(t),s=this._def;if(r.parsedType!==Ee.array)return Se(r,{code:me.invalid_type,expected:Ee.array,received:r.parsedType}),Ve;if(s.exactLength!==null){const a=r.data.length>s.exactLength.value,l=r.data.length<s.exactLength.value;(a||l)&&(Se(r,{code:a?me.too_big:me.too_small,minimum:l?s.exactLength.value:void 0,maximum:a?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),n.dirty())}if(s.minLength!==null&&r.data.length<s.minLength.value&&(Se(r,{code:me.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),n.dirty()),s.maxLength!==null&&r.data.length>s.maxLength.value&&(Se(r,{code:me.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((a,l)=>s.type._parseAsync(new ws(r,a,r.path,l)))).then(a=>Cr.mergeArray(n,a));const o=[...r.data].map((a,l)=>s.type._parseSync(new ws(r,a,r.path,l)));return Cr.mergeArray(n,o)}get element(){return this._def.type}min(t,r){return new Wn({...this._def,minLength:{value:t,message:Ie.toString(r)}})}max(t,r){return new Wn({...this._def,maxLength:{value:t,message:Ie.toString(r)}})}length(t,r){return new Wn({...this._def,exactLength:{value:t,message:Ie.toString(r)}})}nonempty(t){return this.min(1,t)}}Wn.create=(e,t)=>new Wn({type:e,minLength:null,maxLength:null,exactLength:null,typeName:ze.ZodArray,...Ke(t)});function ua(e){if(e instanceof Mt){const t={};for(const r in e.shape){const n=e.shape[r];t[r]=ms.create(ua(n))}return new Mt({...e._def,shape:()=>t})}else return e instanceof Wn?new Wn({...e._def,type:ua(e.element)}):e instanceof ms?ms.create(ua(e.unwrap())):e instanceof Hi?Hi.create(ua(e.unwrap())):e instanceof bs?bs.create(e.items.map(t=>ua(t))):e}class Mt extends Je{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),r=ct.objectKeys(t);return this._cached={shape:t,keys:r}}_parse(t){if(this._getType(t)!==Ee.object){const u=this._getOrReturnCtx(t);return Se(u,{code:me.invalid_type,expected:Ee.object,received:u.parsedType}),Ve}const{status:n,ctx:s}=this._processInputParams(t),{shape:o,keys:a}=this._getCached(),l=[];if(!(this._def.catchall instanceof Gs&&this._def.unknownKeys==="strip"))for(const u in s.data)a.includes(u)||l.push(u);const c=[];for(const u of a){const d=o[u],f=s.data[u];c.push({key:{status:"valid",value:u},value:d._parse(new ws(s,f,s.path,u)),alwaysSet:u in s.data})}if(this._def.catchall instanceof Gs){const u=this._def.unknownKeys;if(u==="passthrough")for(const d of l)c.push({key:{status:"valid",value:d},value:{status:"valid",value:s.data[d]}});else if(u==="strict")l.length>0&&(Se(s,{code:me.unrecognized_keys,keys:l}),n.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const d of l){const f=s.data[d];c.push({key:{status:"valid",value:d},value:u._parse(new ws(s,f,s.path,d)),alwaysSet:d in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const u=[];for(const d of c){const f=await d.key,p=await d.value;u.push({key:f,value:p,alwaysSet:d.alwaysSet})}return u}).then(u=>Cr.mergeObjectSync(n,u)):Cr.mergeObjectSync(n,c)}get shape(){return this._def.shape()}strict(t){return Ie.errToObj,new Mt({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(r,n)=>{var s,o,a,l;const c=(a=(o=(s=this._def).errorMap)===null||o===void 0?void 0:o.call(s,r,n).message)!==null&&a!==void 0?a:n.defaultError;return r.code==="unrecognized_keys"?{message:(l=Ie.errToObj(t).message)!==null&&l!==void 0?l:c}:{message:c}}}:{}})}strip(){return new Mt({...this._def,unknownKeys:"strip"})}passthrough(){return new Mt({...this._def,unknownKeys:"passthrough"})}extend(t){return new Mt({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new Mt({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:ze.ZodObject})}setKey(t,r){return this.augment({[t]:r})}catchall(t){return new Mt({...this._def,catchall:t})}pick(t){const r={};return ct.objectKeys(t).forEach(n=>{t[n]&&this.shape[n]&&(r[n]=this.shape[n])}),new Mt({...this._def,shape:()=>r})}omit(t){const r={};return ct.objectKeys(this.shape).forEach(n=>{t[n]||(r[n]=this.shape[n])}),new Mt({...this._def,shape:()=>r})}deepPartial(){return ua(this)}partial(t){const r={};return ct.objectKeys(this.shape).forEach(n=>{const s=this.shape[n];t&&!t[n]?r[n]=s:r[n]=s.optional()}),new Mt({...this._def,shape:()=>r})}required(t){const r={};return ct.objectKeys(this.shape).forEach(n=>{if(t&&!t[n])r[n]=this.shape[n];else{let o=this.shape[n];for(;o instanceof ms;)o=o._def.innerType;r[n]=o}}),new Mt({...this._def,shape:()=>r})}keyof(){return SI(ct.objectKeys(this.shape))}}Mt.create=(e,t)=>new Mt({shape:()=>e,unknownKeys:"strip",catchall:Gs.create(),typeName:ze.ZodObject,...Ke(t)});Mt.strictCreate=(e,t)=>new Mt({shape:()=>e,unknownKeys:"strict",catchall:Gs.create(),typeName:ze.ZodObject,...Ke(t)});Mt.lazycreate=(e,t)=>new Mt({shape:e,unknownKeys:"strip",catchall:Gs.create(),typeName:ze.ZodObject,...Ke(t)});class zc extends Je{_parse(t){const{ctx:r}=this._processInputParams(t),n=this._def.options;function s(o){for(const l of o)if(l.result.status==="valid")return l.result;for(const l of o)if(l.result.status==="dirty")return r.common.issues.push(...l.ctx.common.issues),l.result;const a=o.map(l=>new rn(l.ctx.common.issues));return Se(r,{code:me.invalid_union,unionErrors:a}),Ve}if(r.common.async)return Promise.all(n.map(async o=>{const a={...r,common:{...r.common,issues:[]},parent:null};return{result:await o._parseAsync({data:r.data,path:r.path,parent:a}),ctx:a}})).then(s);{let o;const a=[];for(const c of n){const u={...r,common:{...r.common,issues:[]},parent:null},d=c._parseSync({data:r.data,path:r.path,parent:u});if(d.status==="valid")return d;d.status==="dirty"&&!o&&(o={result:d,ctx:u}),u.common.issues.length&&a.push(u.common.issues)}if(o)return r.common.issues.push(...o.ctx.common.issues),o.result;const l=a.map(c=>new rn(c));return Se(r,{code:me.invalid_union,unionErrors:l}),Ve}}get options(){return this._def.options}}zc.create=(e,t)=>new zc({options:e,typeName:ze.ZodUnion,...Ke(t)});const Es=e=>e instanceof qc?Es(e.schema):e instanceof Qn?Es(e.innerType()):e instanceof Hc?[e.value]:e instanceof qi?e.options:e instanceof Kc?ct.objectValues(e.enum):e instanceof Gc?Es(e._def.innerType):e instanceof $c?[void 0]:e instanceof Bc?[null]:e instanceof ms?[void 0,...Es(e.unwrap())]:e instanceof Hi?[null,...Es(e.unwrap())]:e instanceof xv||e instanceof Yc?Es(e.unwrap()):e instanceof Qc?Es(e._def.innerType):[];class Ih extends Je{_parse(t){const{ctx:r}=this._processInputParams(t);if(r.parsedType!==Ee.object)return Se(r,{code:me.invalid_type,expected:Ee.object,received:r.parsedType}),Ve;const n=this.discriminator,s=r.data[n],o=this.optionsMap.get(s);return o?r.common.async?o._parseAsync({data:r.data,path:r.path,parent:r}):o._parseSync({data:r.data,path:r.path,parent:r}):(Se(r,{code:me.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),Ve)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(t,r,n){const s=new Map;for(const o of r){const a=Es(o.shape[t]);if(!a.length)throw new Error(`A discriminator value for key \`${t}\` could not be extracted from all schema options`);for(const l of a){if(s.has(l))throw new Error(`Discriminator property ${String(t)} has duplicate value ${String(l)}`);s.set(l,o)}}return new Ih({typeName:ze.ZodDiscriminatedUnion,discriminator:t,options:r,optionsMap:s,...Ke(n)})}}function Gg(e,t){const r=Rs(e),n=Rs(t);if(e===t)return{valid:!0,data:e};if(r===Ee.object&&n===Ee.object){const s=ct.objectKeys(t),o=ct.objectKeys(e).filter(l=>s.indexOf(l)!==-1),a={...e,...t};for(const l of o){const c=Gg(e[l],t[l]);if(!c.valid)return{valid:!1};a[l]=c.data}return{valid:!0,data:a}}else if(r===Ee.array&&n===Ee.array){if(e.length!==t.length)return{valid:!1};const s=[];for(let o=0;o<e.length;o++){const a=e[o],l=t[o],c=Gg(a,l);if(!c.valid)return{valid:!1};s.push(c.data)}return{valid:!0,data:s}}else return r===Ee.date&&n===Ee.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class Vc extends Je{_parse(t){const{status:r,ctx:n}=this._processInputParams(t),s=(o,a)=>{if(Hg(o)||Hg(a))return Ve;const l=Gg(o.value,a.value);return l.valid?((Kg(o)||Kg(a))&&r.dirty(),{status:r.value,value:l.data}):(Se(n,{code:me.invalid_intersection_types}),Ve)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([o,a])=>s(o,a)):s(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}Vc.create=(e,t,r)=>new Vc({left:e,right:t,typeName:ze.ZodIntersection,...Ke(r)});class bs extends Je{_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==Ee.array)return Se(n,{code:me.invalid_type,expected:Ee.array,received:n.parsedType}),Ve;if(n.data.length<this._def.items.length)return Se(n,{code:me.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Ve;!this._def.rest&&n.data.length>this._def.items.length&&(Se(n,{code:me.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());const o=[...n.data].map((a,l)=>{const c=this._def.items[l]||this._def.rest;return c?c._parse(new ws(n,a,n.path,l)):null}).filter(a=>!!a);return n.common.async?Promise.all(o).then(a=>Cr.mergeArray(r,a)):Cr.mergeArray(r,o)}get items(){return this._def.items}rest(t){return new bs({...this._def,rest:t})}}bs.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new bs({items:e,typeName:ze.ZodTuple,rest:null,...Ke(t)})};class Wc extends Je{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==Ee.object)return Se(n,{code:me.invalid_type,expected:Ee.object,received:n.parsedType}),Ve;const s=[],o=this._def.keyType,a=this._def.valueType;for(const l in n.data)s.push({key:o._parse(new ws(n,l,n.path,l)),value:a._parse(new ws(n,n.data[l],n.path,l)),alwaysSet:l in n.data});return n.common.async?Cr.mergeObjectAsync(r,s):Cr.mergeObjectSync(r,s)}get element(){return this._def.valueType}static create(t,r,n){return r instanceof Je?new Wc({keyType:t,valueType:r,typeName:ze.ZodRecord,...Ke(n)}):new Wc({keyType:Bn.create(),valueType:t,typeName:ze.ZodRecord,...Ke(r)})}}class Rf extends Je{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==Ee.map)return Se(n,{code:me.invalid_type,expected:Ee.map,received:n.parsedType}),Ve;const s=this._def.keyType,o=this._def.valueType,a=[...n.data.entries()].map(([l,c],u)=>({key:s._parse(new ws(n,l,n.path,[u,"key"])),value:o._parse(new ws(n,c,n.path,[u,"value"]))}));if(n.common.async){const l=new Map;return Promise.resolve().then(async()=>{for(const c of a){const u=await c.key,d=await c.value;if(u.status==="aborted"||d.status==="aborted")return Ve;(u.status==="dirty"||d.status==="dirty")&&r.dirty(),l.set(u.value,d.value)}return{status:r.value,value:l}})}else{const l=new Map;for(const c of a){const u=c.key,d=c.value;if(u.status==="aborted"||d.status==="aborted")return Ve;(u.status==="dirty"||d.status==="dirty")&&r.dirty(),l.set(u.value,d.value)}return{status:r.value,value:l}}}}Rf.create=(e,t,r)=>new Rf({valueType:t,keyType:e,typeName:ze.ZodMap,...Ke(r)});class zo extends Je{_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==Ee.set)return Se(n,{code:me.invalid_type,expected:Ee.set,received:n.parsedType}),Ve;const s=this._def;s.minSize!==null&&n.data.size<s.minSize.value&&(Se(n,{code:me.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),r.dirty()),s.maxSize!==null&&n.data.size>s.maxSize.value&&(Se(n,{code:me.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),r.dirty());const o=this._def.valueType;function a(c){const u=new Set;for(const d of c){if(d.status==="aborted")return Ve;d.status==="dirty"&&r.dirty(),u.add(d.value)}return{status:r.value,value:u}}const l=[...n.data.values()].map((c,u)=>o._parse(new ws(n,c,n.path,u)));return n.common.async?Promise.all(l).then(c=>a(c)):a(l)}min(t,r){return new zo({...this._def,minSize:{value:t,message:Ie.toString(r)}})}max(t,r){return new zo({...this._def,maxSize:{value:t,message:Ie.toString(r)}})}size(t,r){return this.min(t,r).max(t,r)}nonempty(t){return this.min(1,t)}}zo.create=(e,t)=>new zo({valueType:e,minSize:null,maxSize:null,typeName:ze.ZodSet,...Ke(t)});class La extends Je{constructor(){super(...arguments),this.validate=this.implement}_parse(t){const{ctx:r}=this._processInputParams(t);if(r.parsedType!==Ee.function)return Se(r,{code:me.invalid_type,expected:Ee.function,received:r.parsedType}),Ve;function n(l,c){return Ef({data:l,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Cf(),ul].filter(u=>!!u),issueData:{code:me.invalid_arguments,argumentsError:c}})}function s(l,c){return Ef({data:l,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Cf(),ul].filter(u=>!!u),issueData:{code:me.invalid_return_type,returnTypeError:c}})}const o={errorMap:r.common.contextualErrorMap},a=r.data;if(this._def.returns instanceof fl){const l=this;return Mr(async function(...c){const u=new rn([]),d=await l._def.args.parseAsync(c,o).catch(v=>{throw u.addIssue(n(c,v)),u}),f=await Reflect.apply(a,this,d);return await l._def.returns._def.type.parseAsync(f,o).catch(v=>{throw u.addIssue(s(f,v)),u})})}else{const l=this;return Mr(function(...c){const u=l._def.args.safeParse(c,o);if(!u.success)throw new rn([n(c,u.error)]);const d=Reflect.apply(a,this,u.data),f=l._def.returns.safeParse(d,o);if(!f.success)throw new rn([s(d,f.error)]);return f.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...t){return new La({...this._def,args:bs.create(t).rest(Co.create())})}returns(t){return new La({...this._def,returns:t})}implement(t){return this.parse(t)}strictImplement(t){return this.parse(t)}static create(t,r,n){return new La({args:t||bs.create([]).rest(Co.create()),returns:r||Co.create(),typeName:ze.ZodFunction,...Ke(n)})}}class qc extends Je{get schema(){return this._def.getter()}_parse(t){const{ctx:r}=this._processInputParams(t);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}}qc.create=(e,t)=>new qc({getter:e,typeName:ze.ZodLazy,...Ke(t)});class Hc extends Je{_parse(t){if(t.data!==this._def.value){const r=this._getOrReturnCtx(t);return Se(r,{received:r.data,code:me.invalid_literal,expected:this._def.value}),Ve}return{status:"valid",value:t.data}}get value(){return this._def.value}}Hc.create=(e,t)=>new Hc({value:e,typeName:ze.ZodLiteral,...Ke(t)});function SI(e,t){return new qi({values:e,typeName:ze.ZodEnum,...Ke(t)})}class qi extends Je{constructor(){super(...arguments),Ql.set(this,void 0)}_parse(t){if(typeof t.data!="string"){const r=this._getOrReturnCtx(t),n=this._def.values;return Se(r,{expected:ct.joinValues(n),received:r.parsedType,code:me.invalid_type}),Ve}if(kf(this,Ql)||xI(this,Ql,new Set(this._def.values)),!kf(this,Ql).has(t.data)){const r=this._getOrReturnCtx(t),n=this._def.values;return Se(r,{received:r.data,code:me.invalid_enum_value,options:n}),Ve}return Mr(t.data)}get options(){return this._def.values}get enum(){const t={};for(const r of this._def.values)t[r]=r;return t}get Values(){const t={};for(const r of this._def.values)t[r]=r;return t}get Enum(){const t={};for(const r of this._def.values)t[r]=r;return t}extract(t,r=this._def){return qi.create(t,{...this._def,...r})}exclude(t,r=this._def){return qi.create(this.options.filter(n=>!t.includes(n)),{...this._def,...r})}}Ql=new WeakMap;qi.create=SI;class Kc extends Je{constructor(){super(...arguments),Yl.set(this,void 0)}_parse(t){const r=ct.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(t);if(n.parsedType!==Ee.string&&n.parsedType!==Ee.number){const s=ct.objectValues(r);return Se(n,{expected:ct.joinValues(s),received:n.parsedType,code:me.invalid_type}),Ve}if(kf(this,Yl)||xI(this,Yl,new Set(ct.getValidEnumValues(this._def.values))),!kf(this,Yl).has(t.data)){const s=ct.objectValues(r);return Se(n,{received:n.data,code:me.invalid_enum_value,options:s}),Ve}return Mr(t.data)}get enum(){return this._def.values}}Yl=new WeakMap;Kc.create=(e,t)=>new Kc({values:e,typeName:ze.ZodNativeEnum,...Ke(t)});class fl extends Je{unwrap(){return this._def.type}_parse(t){const{ctx:r}=this._processInputParams(t);if(r.parsedType!==Ee.promise&&r.common.async===!1)return Se(r,{code:me.invalid_type,expected:Ee.promise,received:r.parsedType}),Ve;const n=r.parsedType===Ee.promise?r.data:Promise.resolve(r.data);return Mr(n.then(s=>this._def.type.parseAsync(s,{path:r.path,errorMap:r.common.contextualErrorMap})))}}fl.create=(e,t)=>new fl({type:e,typeName:ze.ZodPromise,...Ke(t)});class Qn extends Je{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ze.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:r,ctx:n}=this._processInputParams(t),s=this._def.effect||null,o={addIssue:a=>{Se(n,a),a.fatal?r.abort():r.dirty()},get path(){return n.path}};if(o.addIssue=o.addIssue.bind(o),s.type==="preprocess"){const a=s.transform(n.data,o);if(n.common.async)return Promise.resolve(a).then(async l=>{if(r.value==="aborted")return Ve;const c=await this._def.schema._parseAsync({data:l,path:n.path,parent:n});return c.status==="aborted"?Ve:c.status==="dirty"||r.value==="dirty"?ja(c.value):c});{if(r.value==="aborted")return Ve;const l=this._def.schema._parseSync({data:a,path:n.path,parent:n});return l.status==="aborted"?Ve:l.status==="dirty"||r.value==="dirty"?ja(l.value):l}}if(s.type==="refinement"){const a=l=>{const c=s.refinement(l,o);if(n.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(n.common.async===!1){const l=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return l.status==="aborted"?Ve:(l.status==="dirty"&&r.dirty(),a(l.value),{status:r.value,value:l.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(l=>l.status==="aborted"?Ve:(l.status==="dirty"&&r.dirty(),a(l.value).then(()=>({status:r.value,value:l.value}))))}if(s.type==="transform")if(n.common.async===!1){const a=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!$o(a))return a;const l=s.transform(a.value,o);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:l}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(a=>$o(a)?Promise.resolve(s.transform(a.value,o)).then(l=>({status:r.value,value:l})):a);ct.assertNever(s)}}Qn.create=(e,t,r)=>new Qn({schema:e,typeName:ze.ZodEffects,effect:t,...Ke(r)});Qn.createWithPreprocess=(e,t,r)=>new Qn({schema:t,effect:{type:"preprocess",transform:e},typeName:ze.ZodEffects,...Ke(r)});class ms extends Je{_parse(t){return this._getType(t)===Ee.undefined?Mr(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}ms.create=(e,t)=>new ms({innerType:e,typeName:ze.ZodOptional,...Ke(t)});class Hi extends Je{_parse(t){return this._getType(t)===Ee.null?Mr(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Hi.create=(e,t)=>new Hi({innerType:e,typeName:ze.ZodNullable,...Ke(t)});class Gc extends Je{_parse(t){const{ctx:r}=this._processInputParams(t);let n=r.data;return r.parsedType===Ee.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}}Gc.create=(e,t)=>new Gc({innerType:e,typeName:ze.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...Ke(t)});class Qc extends Je{_parse(t){const{ctx:r}=this._processInputParams(t),n={...r,common:{...r.common,issues:[]}},s=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return Fc(s)?s.then(o=>({status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new rn(n.common.issues)},input:n.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new rn(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}Qc.create=(e,t)=>new Qc({innerType:e,typeName:ze.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...Ke(t)});class Af extends Je{_parse(t){if(this._getType(t)!==Ee.nan){const n=this._getOrReturnCtx(t);return Se(n,{code:me.invalid_type,expected:Ee.nan,received:n.parsedType}),Ve}return{status:"valid",value:t.data}}}Af.create=e=>new Af({typeName:ze.ZodNaN,...Ke(e)});const EW=Symbol("zod_brand");class xv extends Je{_parse(t){const{ctx:r}=this._processInputParams(t),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}}class ju extends Je{_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.common.async)return(async()=>{const o=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return o.status==="aborted"?Ve:o.status==="dirty"?(r.dirty(),ja(o.value)):this._def.out._parseAsync({data:o.value,path:n.path,parent:n})})();{const s=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return s.status==="aborted"?Ve:s.status==="dirty"?(r.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:n.path,parent:n})}}static create(t,r){return new ju({in:t,out:r,typeName:ze.ZodPipeline})}}class Yc extends Je{_parse(t){const r=this._def.innerType._parse(t),n=s=>($o(s)&&(s.value=Object.freeze(s.value)),s);return Fc(r)?r.then(s=>n(s)):n(r)}unwrap(){return this._def.innerType}}Yc.create=(e,t)=>new Yc({innerType:e,typeName:ze.ZodReadonly,...Ke(t)});function kb(e,t){const r=typeof e=="function"?e(t):typeof e=="string"?{message:e}:e;return typeof r=="string"?{message:r}:r}function jI(e,t={},r){return e?dl.create().superRefine((n,s)=>{var o,a;const l=e(n);if(l instanceof Promise)return l.then(c=>{var u,d;if(!c){const f=kb(t,n),p=(d=(u=f.fatal)!==null&&u!==void 0?u:r)!==null&&d!==void 0?d:!0;s.addIssue({code:"custom",...f,fatal:p})}});if(!l){const c=kb(t,n),u=(a=(o=c.fatal)!==null&&o!==void 0?o:r)!==null&&a!==void 0?a:!0;s.addIssue({code:"custom",...c,fatal:u})}}):dl.create()}const kW={object:Mt.lazycreate};var ze;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(ze||(ze={}));const TW=(e,t={message:`Input not instance of ${e.name}`})=>jI(r=>r instanceof e,t),NI=Bn.create,_I=Vi.create,PW=Af.create,RW=Wi.create,CI=Uc.create,AW=Bo.create,IW=Tf.create,DW=$c.create,MW=Bc.create,OW=dl.create,LW=Co.create,FW=Gs.create,UW=Pf.create,$W=Wn.create,BW=Mt.create,zW=Mt.strictCreate,VW=zc.create,WW=Ih.create,qW=Vc.create,HW=bs.create,KW=Wc.create,GW=Rf.create,QW=zo.create,YW=La.create,ZW=qc.create,XW=Hc.create,JW=qi.create,eq=Kc.create,tq=fl.create,Tb=Qn.create,rq=ms.create,nq=Hi.create,sq=Qn.createWithPreprocess,iq=ju.create,oq=()=>NI().optional(),aq=()=>_I().optional(),lq=()=>CI().optional(),cq={string:e=>Bn.create({...e,coerce:!0}),number:e=>Vi.create({...e,coerce:!0}),boolean:e=>Uc.create({...e,coerce:!0}),bigint:e=>Wi.create({...e,coerce:!0}),date:e=>Bo.create({...e,coerce:!0})},uq=Ve;var dt=Object.freeze({__proto__:null,defaultErrorMap:ul,setErrorMap:sW,getErrorMap:Cf,makeIssue:Ef,EMPTY_PATH:iW,addIssueToContext:Se,ParseStatus:Cr,INVALID:Ve,DIRTY:ja,OK:Mr,isAborted:Hg,isDirty:Kg,isValid:$o,isAsync:Fc,get util(){return ct},get objectUtil(){return qg},ZodParsedType:Ee,getParsedType:Rs,ZodType:Je,datetimeRegex:bI,ZodString:Bn,ZodNumber:Vi,ZodBigInt:Wi,ZodBoolean:Uc,ZodDate:Bo,ZodSymbol:Tf,ZodUndefined:$c,ZodNull:Bc,ZodAny:dl,ZodUnknown:Co,ZodNever:Gs,ZodVoid:Pf,ZodArray:Wn,ZodObject:Mt,ZodUnion:zc,ZodDiscriminatedUnion:Ih,ZodIntersection:Vc,ZodTuple:bs,ZodRecord:Wc,ZodMap:Rf,ZodSet:zo,ZodFunction:La,ZodLazy:qc,ZodLiteral:Hc,ZodEnum:qi,ZodNativeEnum:Kc,ZodPromise:fl,ZodEffects:Qn,ZodTransformer:Qn,ZodOptional:ms,ZodNullable:Hi,ZodDefault:Gc,ZodCatch:Qc,ZodNaN:Af,BRAND:EW,ZodBranded:xv,ZodPipeline:ju,ZodReadonly:Yc,custom:jI,Schema:Je,ZodSchema:Je,late:kW,get ZodFirstPartyTypeKind(){return ze},coerce:cq,any:OW,array:$W,bigint:RW,boolean:CI,date:AW,discriminatedUnion:WW,effect:Tb,enum:JW,function:YW,instanceof:TW,intersection:qW,lazy:ZW,literal:XW,map:GW,nan:PW,nativeEnum:eq,never:FW,null:MW,nullable:nq,number:_I,object:BW,oboolean:lq,onumber:aq,optional:rq,ostring:oq,pipeline:iq,preprocess:sq,promise:tq,record:KW,set:QW,strictObject:zW,string:NI,symbol:IW,transformer:Tb,tuple:HW,undefined:DW,union:VW,unknown:LW,void:UW,NEVER:uq,ZodIssueCode:me,quotelessJson:nW,ZodError:rn});const Dt={INT8_MIN:-128,INT8_MAX:127,INT8_UNSIGNED_MAX:255,INT16_MIN:-32768,INT16_MAX:32767,INT16_UNSIGNED_MAX:65535,INT24_MIN:-8388608,INT24_MAX:8388607,INT24_UNSIGNED_MAX:16777215,INT32_MIN:-2147483648,INT32_MAX:2147483647,INT32_UNSIGNED_MAX:4294967295,INT48_MIN:-0x800000000000,INT48_MAX:0x7fffffffffff,INT48_UNSIGNED_MAX:0xffffffffffff,INT64_MIN:-9223372036854775808n,INT64_MAX:9223372036854775807n,INT64_UNSIGNED_MAX:18446744073709551615n};function Bt(e,t){return t.includes(e.columnType)}function dq(e){return"enumValues"in e&&Array.isArray(e.enumValues)&&e.enumValues.length>0}const fq=dt.union([dt.string(),dt.number(),dt.boolean(),dt.null()]),hq=dt.union([fq,dt.record(dt.any()),dt.array(dt.any())]),mq=dt.custom(e=>e instanceof Buffer);function EI(e,t){const r=(t==null?void 0:t.zodInstance)??dt,n=(t==null?void 0:t.coerce)??{};let s;return dq(e)&&(s=e.enumValues.length?r.enum(e.enumValues):r.string()),s||(Bt(e,["PgGeometry","PgPointTuple"])?s=r.tuple([r.number(),r.number()]):Bt(e,["PgGeometryObject","PgPointObject"])?s=r.object({x:r.number(),y:r.number()}):Bt(e,["PgHalfVector","PgVector"])?(s=r.array(r.number()),s=e.dimensions?s.length(e.dimensions):s):Bt(e,["PgLine"])?s=r.tuple([r.number(),r.number(),r.number()]):Bt(e,["PgLineABC"])?s=r.object({a:r.number(),b:r.number(),c:r.number()}):Bt(e,["PgArray"])?(s=r.array(EI(e.baseColumn,r)),s=e.size?s.length(e.size):s):e.dataType==="array"?s=r.array(r.any()):e.dataType==="number"?s=pq(e,r,n):e.dataType==="bigint"?s=gq(e,r,n):e.dataType==="boolean"?s=n===!0||n.boolean?r.coerce.boolean():r.boolean():e.dataType==="date"?s=n===!0||n.date?r.coerce.date():r.date():e.dataType==="string"?s=yq(e,r,n):e.dataType==="json"?s=hq:e.dataType==="custom"?s=r.any():e.dataType==="buffer"&&(s=mq)),s||(s=r.any()),s}function pq(e,t,r){let n=e.getSQLType().includes("unsigned"),s,o,a=!1;Bt(e,["MySqlTinyInt","SingleStoreTinyInt"])?(s=n?0:Dt.INT8_MIN,o=n?Dt.INT8_UNSIGNED_MAX:Dt.INT8_MAX,a=!0):Bt(e,["PgSmallInt","PgSmallSerial","MySqlSmallInt","SingleStoreSmallInt"])?(s=n?0:Dt.INT16_MIN,o=n?Dt.INT16_UNSIGNED_MAX:Dt.INT16_MAX,a=!0):Bt(e,["PgReal","MySqlFloat","MySqlMediumInt","SingleStoreMediumInt","SingleStoreFloat"])?(s=n?0:Dt.INT24_MIN,o=n?Dt.INT24_UNSIGNED_MAX:Dt.INT24_MAX,a=Bt(e,["MySqlMediumInt","SingleStoreMediumInt"])):Bt(e,["PgInteger","PgSerial","MySqlInt","SingleStoreInt"])?(s=n?0:Dt.INT32_MIN,o=n?Dt.INT32_UNSIGNED_MAX:Dt.INT32_MAX,a=!0):Bt(e,["PgDoublePrecision","MySqlReal","MySqlDouble","SingleStoreReal","SingleStoreDouble","SQLiteReal"])?(s=n?0:Dt.INT48_MIN,o=n?Dt.INT48_UNSIGNED_MAX:Dt.INT48_MAX):Bt(e,["PgBigInt53","PgBigSerial53","MySqlBigInt53","MySqlSerial","SingleStoreBigInt53","SingleStoreSerial","SQLiteInteger"])?(n=n||Bt(e,["MySqlSerial","SingleStoreSerial"]),s=n?0:Number.MIN_SAFE_INTEGER,o=Number.MAX_SAFE_INTEGER,a=!0):Bt(e,["MySqlYear","SingleStoreYear"])?(s=1901,o=2155,a=!0):(s=Number.MIN_SAFE_INTEGER,o=Number.MAX_SAFE_INTEGER);let l=r===!0||r!=null&&r.number?t.coerce.number():t.number();return l=l.min(s).max(o),a?l.int():l}function gq(e,t,r){const n=e.getSQLType().includes("unsigned"),s=n?0n:Dt.INT64_MIN,o=n?Dt.INT64_UNSIGNED_MAX:Dt.INT64_MAX;return(r===!0||r!=null&&r.bigint?t.coerce.bigint():t.bigint()).min(s).max(o)}function yq(e,t,r){if(Bt(e,["PgUUID"]))return t.string().uuid();let n,s,o=!1;Bt(e,["PgVarchar","SQLiteText"])?n=e.length:Bt(e,["MySqlVarChar","SingleStoreVarChar"])?n=e.length??Dt.INT16_UNSIGNED_MAX:Bt(e,["MySqlText","SingleStoreText"])&&(e.textType==="longtext"?n=Dt.INT32_UNSIGNED_MAX:e.textType==="mediumtext"?n=Dt.INT24_UNSIGNED_MAX:e.textType==="text"?n=Dt.INT16_UNSIGNED_MAX:n=Dt.INT8_UNSIGNED_MAX),Bt(e,["PgChar","MySqlChar","SingleStoreChar"])&&(n=e.length,o=!0),Bt(e,["PgBinaryVector"])&&(s=/^[01]+$/,n=e.dimensions);let a=r===!0||r!=null&&r.string?t.coerce.string():t.string();return a=s?a.regex(s):a,n&&o?a.length(n):n?a.max(n):a}function kI(e){return BA(e)?_7(e):C7(e)}function TI(e,t,r,n){const s={};for(const[o,a]of Object.entries(e)){if(!ur(a,cl)&&!ur(a,Jt)&&!ur(a,Jt.Aliased)&&typeof a=="object"){const f=BA(a)||N7(a)?kI(a):a;s[o]=TI(f,t[o]??{},r,n);continue}const l=t[o];if(l!==void 0&&typeof l!="function"){s[o]=l;continue}const c=ur(a,cl)?a:void 0,u=c?EI(c,n):dt.any(),d=typeof l=="function"?l(u):u;r.never(c)||(s[o]=d,c&&(r.nullable(c)&&(s[o]=s[o].nullable()),r.optional(c)&&(s[o]=s[o].optional())))}return dt.object(s)}const xq={never:e=>{var t,r;return((t=e==null?void 0:e.generated)==null?void 0:t.type)==="always"||((r=e==null?void 0:e.generatedIdentity)==null?void 0:r.type)==="always"},optional:e=>!e.notNull||e.notNull&&e.hasDefault,nullable:e=>!e.notNull},ei=(e,t)=>{const r=kI(e);return TI(r,{},xq)},vq=Js("users",{id:js("id").primaryKey(),username:et("username").notNull().unique(),password:et("password").notNull(),email:et("email").notNull().unique(),displayName:et("display_name").notNull(),bio:et("bio"),profileImageUrl:et("profile_image_url"),isStreaming:Ln("is_streaming").default(!1),followerCount:Wt("follower_count").default(0),createdAt:sn("created_at").defaultNow(),isVerified:Ln("is_verified").default(!1),verificationToken:et("verification_token"),verificationTokenExpiry:sn("verification_token_expiry")}),wq=ei(vq).pick({username:!0,password:!0,email:!0,displayName:!0,bio:!0,profileImageUrl:!0,isStreaming:!0}),bq=Js("user_settings",{id:js("id").primaryKey(),userId:Wt("user_id").notNull().unique(),uiColor:et("ui_color").default("#8B5CF6"),enableAutoplay:Ln("enable_autoplay").default(!0),defaultSortType:et("default_sort_type").default("recent"),highContrastMode:Ln("high_contrast_mode").default(!1),createdAt:sn("created_at").defaultNow(),updatedAt:sn("updated_at").defaultNow()});ei(bq).pick({userId:!0,uiColor:!0,enableAutoplay:!0,defaultSortType:!0,highContrastMode:!0});const Sq=Js("streams",{id:js("id").primaryKey(),userId:Wt("user_id").notNull(),title:et("title").notNull(),description:et("description"),thumbnailUrl:et("thumbnail_url"),streamKey:et("stream_key"),isLive:Ln("is_live").default(!1),viewerCount:Wt("viewer_count").default(0),startedAt:sn("started_at").defaultNow(),endedAt:sn("ended_at"),category:et("category"),tags:et("tags").array(),streamType:et("stream_type").default("video"),protocol:et("protocol").default("webrtc"),useCamera:Ln("use_camera").default(!0),useMicrophone:Ln("use_microphone").default(!0),useSystemAudio:Ln("use_system_audio").default(!1),hasVisualElement:Ln("has_visual_element").default(!1),visualElementType:et("visual_element_type"),visualElementUrl:et("visual_element_url"),hlsPlaylistUrl:et("hls_playlist_url"),hlsSegmentUrl:et("hls_segment_url"),hlsFolderPath:et("hls_folder_path"),hasRecording:Ln("has_recording").default(!1),recordingUrl:et("recording_url"),peakViewerCount:Wt("peak_viewer_count").default(0),externalStreamId:et("external_stream_id")});ei(Sq);const jq=Js("tracks",{id:js("id").primaryKey(),userId:Wt("user_id").notNull(),title:et("title").notNull(),artistName:et("artist_name").notNull(),coverUrl:et("cover_url"),audioUrl:et("audio_url").notNull(),duration:Wt("duration").notNull(),playCount:Wt("play_count").default(0),likeCount:Wt("like_count").default(0),uploadedAt:sn("uploaded_at").defaultNow(),genre:et("genre")});ei(jq).pick({userId:!0,title:!0,artistName:!0,coverUrl:!0,audioUrl:!0,duration:!0,genre:!0});const Nq=Js("genres",{id:js("id").primaryKey(),name:et("name").notNull().unique()});ei(Nq).pick({name:!0});const _q=Js("follows",{id:js("id").primaryKey(),followerId:Wt("follower_id").notNull(),followedId:Wt("followed_id").notNull()});ei(_q).pick({followerId:!0,followedId:!0});const mo={TEXT:"text",IMAGE:"image"},Cq=Js("posts",{id:js("id").primaryKey(),userId:Wt("user_id").notNull(),title:et("title").notNull(),content:et("content").notNull(),imageUrl:et("image_url"),likeCount:Wt("like_count").default(0),commentCount:Wt("comment_count").default(0),postType:et("post_type").default("text").$type(),createdAt:sn("created_at").defaultNow(),updatedAt:sn("updated_at").defaultNow(),tags:et("tags").array()});ei(Cq).pick({userId:!0,title:!0,content:!0,imageUrl:!0,postType:!0,tags:!0});const Eq=Js("likes",{id:js("id").primaryKey(),userId:Wt("user_id").notNull(),contentId:Wt("content_id").notNull(),contentType:et("content_type").notNull(),createdAt:sn("created_at").defaultNow()});ei(Eq).pick({userId:!0,contentId:!0,contentType:!0});const kq=Js("comments",{id:js("id").primaryKey(),userId:Wt("user_id").notNull(),contentId:Wt("content_id").notNull(),contentType:et("content_type").notNull(),text:et("text").notNull(),createdAt:sn("created_at").defaultNow(),updatedAt:sn("updated_at").defaultNow(),likeCount:Wt("like_count").default(0),parentId:Wt("parent_id")});ei(kq).pick({userId:!0,contentId:!0,contentType:!0,text:!0,parentId:!0});const Dh=m.forwardRef(({className:e,...t},r)=>i.jsx("textarea",{className:we("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...t}));Dh.displayName="Textarea";const Pb=(e,t,r)=>{if(e&&"reportValidity"in e){const n=be(r,t);e.setCustomValidity(n&&n.message||""),e.reportValidity()}},PI=(e,t)=>{for(const r in t.fields){const n=t.fields[r];n&&n.ref&&"reportValidity"in n.ref?Pb(n.ref,r,e):n.refs&&n.refs.forEach(s=>Pb(s,r,e))}},Tq=(e,t)=>{t.shouldUseNativeValidation&&PI(e,t);const r={};for(const n in e){const s=be(t.fields,n),o=Object.assign(e[n]||{},{ref:s&&s.ref});if(Pq(t.names||Object.keys(e),n)){const a=Object.assign({},be(r,n));xt(a,"root",o),xt(r,n,a)}else xt(r,n,o)}return r},Pq=(e,t)=>e.some(r=>r.startsWith(t+"."));var Rq=function(e,t){for(var r={};e.length;){var n=e[0],s=n.code,o=n.message,a=n.path.join(".");if(!r[a])if("unionErrors"in n){var l=n.unionErrors[0].errors[0];r[a]={message:l.message,type:l.code}}else r[a]={message:o,type:s};if("unionErrors"in n&&n.unionErrors.forEach(function(d){return d.errors.forEach(function(f){return e.push(f)})}),t){var c=r[a].types,u=c&&c[n.code];r[a]=NA(a,t,r,s,u?[].concat(u,n.message):n.message)}e.shift()}return r},If=function(e,t,r){return r===void 0&&(r={}),function(n,s,o){try{return Promise.resolve(function(a,l){try{var c=Promise.resolve(e[r.mode==="sync"?"parse":"parseAsync"](n,t)).then(function(u){return o.shouldUseNativeValidation&&PI({},o),{errors:{},values:r.raw?n:u}})}catch(u){return l(u)}return c&&c.then?c.then(void 0,l):c}(0,function(a){if(function(l){return Array.isArray(l==null?void 0:l.errors)}(a))return{values:{},errors:Tq(Rq(a.errors,!o.shouldUseNativeValidation&&o.criteriaMode==="all"),o)};throw a}))}catch(a){return Promise.reject(a)}}};const Aq=dt.object({title:dt.string().min(1,"Title is required"),content:dt.string().min(1,"Content is required"),imageFile:dt.instanceof(File).optional(),tags:dt.string().optional(),postType:dt.enum([mo.TEXT,mo.IMAGE]).default(mo.TEXT)});function Iq(){var p;const{toast:e}=pr(),{user:t}=or(),[,r]=Nn(),n=Ys(),[s,o]=m.useState(null),a=vf({resolver:If(Aq),defaultValues:{title:"",content:"",tags:"",postType:mo.TEXT}}),l=fr({mutationFn:async v=>{const j=new FormData;return j.append("image",v),await st("POST","/api/upload/image",j)}}),c=fr({mutationFn:async v=>(console.log("Creating post with data:",v),await st("POST","/api/posts",v)),onSuccess:()=>{n.invalidateQueries({queryKey:["/api/posts/recent"]}),n.invalidateQueries({queryKey:[`/api/posts/user/${t==null?void 0:t.id}`]}),e({title:"Post created successfully!",description:"Your post is now live for the community."}),r("/posts")},onError:v=>{console.error("Post creation error:",v),e({title:"Failed to create post",description:v instanceof Error?v.message:"Server error occurred",variant:"destructive"})}}),u=async v=>{if(!t){e({title:"Authentication required",description:"Please log in to create a post",variant:"destructive"});return}try{let j=null;if(v.imageFile){const g=await l.mutateAsync(v.imageFile);g&&typeof g=="object"&&"url"in g&&(j=g.url)}const y=v.tags?v.tags.split(",").map(g=>g.trim()).filter(Boolean):[],S=j?mo.IMAGE:v.postType;console.log("Submitting post with data:",{title:v.title,content:v.content,imageUrl:j,tags:y,postType:S});const h={userId:t.id,title:v.title,content:v.content,postType:S,tags:y};j&&(h.imageUrl=j),console.log("Final post data being sent to server:",h),await c.mutateAsync(h),e({title:"Post created successfully!",description:"Your post has been published.",variant:"default"}),a.reset({title:"",content:"",tags:"",postType:mo.TEXT,imageFile:void 0}),o(null)}catch(j){console.error("Error in post creation process:",j),j instanceof Error?(console.error("Error message:",j.message),console.error("Error stack:",j.stack)):(console.error("Unknown error type:",typeof j),console.error("Error serialized:",JSON.stringify(j))),e({title:"Failed to create post",description:j instanceof Error&&j.message?j.message:"Server error - please try again later",variant:"destructive"})}},d=v=>{var y;const j=(y=v.target.files)==null?void 0:y[0];if(j){a.setValue("imageFile",j),a.setValue("postType",mo.IMAGE);const S=URL.createObjectURL(j);return o(S),()=>URL.revokeObjectURL(S)}},f=l.isPending||c.isPending;return i.jsxs("div",{className:"container py-10",children:[i.jsxs("div",{className:"mb-8 space-y-2",children:[i.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Create New Post"}),i.jsx("p",{className:"text-muted-foreground",children:"Share updates, thoughts, or announcements with your followers"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[i.jsx("div",{className:"md:col-span-2",children:i.jsx(wf,{...a,children:i.jsxs("form",{onSubmit:a.handleSubmit(u),className:"space-y-6",children:[i.jsx(Ar,{control:a.control,name:"title",render:({field:v})=>i.jsxs(wr,{children:[i.jsx(br,{children:"Post Title"}),i.jsx(Sr,{children:i.jsx(vt,{placeholder:"Enter a title for your post",...v})}),i.jsx(jr,{})]})}),i.jsx(Ar,{control:a.control,name:"content",render:({field:v})=>i.jsxs(wr,{children:[i.jsx(br,{children:"Content"}),i.jsx(Sr,{children:i.jsx(Dh,{placeholder:"What's on your mind?",className:"min-h-[200px]",...v})}),i.jsx(jr,{})]})}),i.jsx(Ar,{control:a.control,name:"tags",render:({field:v})=>i.jsxs(wr,{children:[i.jsx(br,{children:"Tags"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(KL,{className:"h-4 w-4 text-gray-400"}),i.jsx(Sr,{children:i.jsx(vt,{placeholder:"music, electronic, announcement (comma separated)",...v})})]}),i.jsx(jr,{})]})}),i.jsx(Ar,{control:a.control,name:"imageFile",render:()=>i.jsxs(wr,{children:[i.jsx(br,{children:"Image (Optional)"}),i.jsx(Sr,{children:i.jsx("div",{className:"flex items-center justify-center w-full",children:i.jsxs("label",{htmlFor:"image-upload",className:"flex flex-col items-center justify-center w-full h-32 border-2 border-dashed rounded-lg cursor-pointer bg-gray-50 dark:hover:bg-bray-800 dark:bg-gray-900 hover:bg-gray-100 dark:border-gray-600 dark:hover:border-gray-500 dark:hover:bg-gray-700",children:[i.jsxs("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[i.jsx(lx,{className:"w-8 h-8 mb-3 text-gray-400"}),i.jsxs("p",{className:"mb-2 text-sm text-gray-500 dark:text-gray-400",children:[i.jsx("span",{className:"font-semibold",children:"Click to upload"})," or drag and drop"]}),i.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"JPG, PNG, WebP or GIF (MAX. 5MB)"})]}),i.jsx("input",{id:"image-upload",type:"file",className:"hidden",accept:"image/*",onChange:d})]})})}),i.jsx(jr,{})]})}),i.jsx(te,{type:"submit",className:"w-full",disabled:f,children:f?i.jsxs(i.Fragment,{children:[i.jsx(gs,{className:"mr-2 h-4 w-4 animate-spin"}),"Publishing..."]}):"Publish Post"})]})})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-medium mb-4",children:"Post Preview"}),i.jsxs(Re,{className:"overflow-hidden",children:[s&&i.jsx("div",{className:"aspect-video bg-gray-100 dark:bg-gray-800",children:i.jsx("img",{src:s,alt:"Post preview",className:"w-full h-full object-cover"})}),i.jsxs(Ae,{className:"p-4",children:[i.jsx("h4",{className:"font-semibold text-lg line-clamp-2",children:a.watch("title")||"Post Title"}),i.jsx("div",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400 line-clamp-3",children:a.watch("content")||"Your post content will appear here..."}),a.watch("tags")&&i.jsx("div",{className:"mt-4 flex flex-wrap gap-2",children:(p=a.watch("tags"))==null?void 0:p.split(",").map((v,j)=>v.trim()&&i.jsxs("span",{className:"px-2 py-1 bg-gray-100 dark:bg-gray-800 text-xs rounded-full",children:["#",v.trim()]},j))})]})]})]})]})]})}var vv="Switch",[Dq,_H]=Fr(vv),[Mq,Oq]=Dq(vv),RI=m.forwardRef((e,t)=>{const{__scopeSwitch:r,name:n,checked:s,defaultChecked:o,required:a,disabled:l,value:c="on",onCheckedChange:u,form:d,...f}=e,[p,v]=m.useState(null),j=Ze(t,w=>v(w)),y=m.useRef(!1),S=p?d||!!p.closest("form"):!0,[h=!1,g]=Hn({prop:s,defaultProp:o,onChange:u});return i.jsxs(Mq,{scope:r,checked:h,disabled:l,children:[i.jsx(Le.button,{type:"button",role:"switch","aria-checked":h,"aria-required":a,"data-state":DI(h),"data-disabled":l?"":void 0,disabled:l,value:c,...f,ref:j,onClick:xe(e.onClick,w=>{g(_=>!_),S&&(y.current=w.isPropagationStopped(),y.current||w.stopPropagation())})}),S&&i.jsx(Lq,{control:p,bubbles:!y.current,name:n,value:c,checked:h,required:a,disabled:l,form:d,style:{transform:"translateX(-100%)"}})]})});RI.displayName=vv;var AI="SwitchThumb",II=m.forwardRef((e,t)=>{const{__scopeSwitch:r,...n}=e,s=Oq(AI,r);return i.jsx(Le.span,{"data-state":DI(s.checked),"data-disabled":s.disabled?"":void 0,...n,ref:t})});II.displayName=AI;var Lq=e=>{const{control:t,checked:r,bubbles:n=!0,...s}=e,o=m.useRef(null),a=Bx(r),l=Ex(t);return m.useEffect(()=>{const c=o.current,u=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(u,"checked").set;if(a!==r&&f){const p=new Event("click",{bubbles:n});f.call(c,r),c.dispatchEvent(p)}},[a,r,n]),i.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...s,tabIndex:-1,ref:o,style:{...e.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function DI(e){return e?"checked":"unchecked"}var MI=RI,Fq=II;const Eo=m.forwardRef(({className:e,...t},r)=>i.jsx(MI,{className:we("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:r,children:i.jsx(Fq,{className:we("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Eo.displayName=MI.displayName;const er="#8B5CF6",Rb=[{name:"Purple",value:"#8B5CF6",description:"Creative, imaginative"},{name:"Blue",value:"#3B82F6",description:"Calm, trustworthy"},{name:"Green",value:"#10B981",description:"Fresh, natural"},{name:"Orange",value:"#F59E0B",description:"Energetic, warm"},{name:"Pink",value:"#EC4899",description:"Playful, vibrant"},{name:"Red",value:"#EF4444",description:"Bold, passionate"},{name:"Teal",value:"#14B8A6",description:"Balanced, refreshing"},{name:"Indigo",value:"#6366F1",description:"Mysterious, unique"}],Uq=[{name:"Recent",value:"recent"},{name:"Popular",value:"popular"},{name:"Trending",value:"trending"}];function $q(){var ue,ae;const{toast:e}=pr(),t=Ys(),{primaryColor:r,setPrimaryColor:n,highContrastMode:s,setHighContrastMode:o}=hE(),a=m.useRef(null),{user:l,refetchUser:c}=or(),{data:u,isLoading:d,isError:f}=pt({queryKey:["/api/user-settings",l==null?void 0:l.id],queryFn:()=>l?mx(l.id):Promise.reject("No authenticated user"),enabled:!!l}),[p,v]=m.useState(r),[j,y]=m.useState(s),[S,h]=m.useState(null),[g,w]=m.useState(null),[_,E]=m.useState(""),[I,P]=m.useState(""),[M,F]=m.useState(null),[W,re]=m.useState(!1);m.useEffect(()=>{u&&(v(u.uiColor),h(u.enableAutoplay),w(u.defaultSortType),u.highContrastMode!==void 0&&u.highContrastMode!==null&&(y(u.highContrastMode),o(u.highContrastMode)))},[u,o]),m.useEffect(()=>{l&&(E(l.displayName||""),P(l.bio||""),F(l.profileImageUrl))},[l]);const q=X=>{v(X),n(X);try{const ee=JSON.parse(localStorage.getItem("traxx_theme_cache")||"{}");localStorage.setItem("traxx_theme_cache",JSON.stringify({...ee,uiColor:X})),console.log("Color selection cached:",X)}catch(ee){console.error("Error caching color selection:",ee)}},Y=fr({mutationFn:X=>(console.log("Updating user settings with data:",X),l?px(l.id,X):Promise.reject("No authenticated user")),onSuccess:X=>{console.log("Settings update success, updated settings:",X);try{localStorage.setItem("traxx_theme_cache",JSON.stringify({uiColor:X.uiColor,highContrastMode:X.highContrastMode})),console.log("Settings cache updated from server response:",X)}catch(ee){console.error("Error saving settings to localStorage:",ee)}l&&(t.invalidateQueries({queryKey:["/api/user-settings",l.id]}),e({title:"Settings Updated",description:"Your preferences have been saved successfully."}))},onError:X=>{console.error("Settings update error:",X),e({title:"Error",description:"Failed to update settings. Please try again.",variant:"destructive"})}}),G=fr({mutationFn:X=>l?rE(l.id,X):Promise.reject("No authenticated user"),onSuccess:()=>{l&&(c(),e({title:"Profile Updated",description:"Your profile has been saved successfully."}))},onError:()=>{e({title:"Error",description:"Failed to update profile. Please try again.",variant:"destructive"})}}),ne=fr({mutationFn:async X=>{const ee=new FormData;return ee.append("image",X),st("/api/upload/image",{method:"POST",body:ee})},onSuccess:X=>{F(X.url),e({title:"Image Uploaded",description:"Your profile image has been uploaded successfully."})},onError:()=>{e({title:"Error",description:"Failed to upload image. Please try again.",variant:"destructive"})}}),Z=X=>{var je;const ee=(je=X.target.files)==null?void 0:je[0];if(ee){if(!ee.type.startsWith("image/")){e({title:"Invalid File",description:"Please select an image file.",variant:"destructive"});return}if(ee.size>5*1024*1024){e({title:"File Too Large",description:"Image must be less than 5MB.",variant:"destructive"});return}re(!0),ne.mutate(ee,{onSettled:()=>{re(!1)}})}},fe=()=>{var X;(X=a.current)==null||X.click()},B=()=>{if(!l){e({title:"Error",description:"You must be logged in to save settings",variant:"destructive"});return}const X={uiColor:p||er,enableAutoplay:S===null?!1:S,defaultSortType:g||"recent",highContrastMode:j};console.log("Saving settings:",X),Y.mutate(X)},z=()=>{if(!l){e({title:"Error",description:"You must be logged in to save profile",variant:"destructive"});return}G.mutate({displayName:_,bio:I,profileImageUrl:M})};return d?i.jsx("div",{className:"flex items-center justify-center h-96",children:i.jsx(Kt,{size:"lg"})}):i.jsxs("div",{className:"container mx-auto py-6",children:[i.jsx("h1",{className:"text-3xl font-bold mb-6 bg-gradient-to-r from-purple-400 to-pink-600 text-transparent bg-clip-text",children:"User Settings"}),i.jsxs(Cn,{defaultValue:"profile",className:"w-full",children:[i.jsxs(cn,{className:"mb-6",children:[i.jsx(rt,{value:"profile",children:"Profile"}),i.jsx(rt,{value:"appearance",children:"Appearance"}),i.jsx(rt,{value:"playback",children:"Playback"}),i.jsx(rt,{value:"content",children:"Content"})]}),i.jsx(nt,{value:"profile",children:i.jsxs(Re,{children:[i.jsxs(Ye,{children:[i.jsx(He,{children:"Profile Settings"}),i.jsx(kt,{children:"Update your personal profile information"})]}),i.jsx(Ae,{children:i.jsx("div",{className:"space-y-6",children:i.jsxs("div",{className:"flex flex-col sm:flex-row gap-6 items-start",children:[i.jsxs("div",{className:"relative",children:[i.jsx(ys,{className:"w-24 h-24",children:M?i.jsx(Yi,{src:M,alt:"Profile"}):i.jsx(Ws,{children:((ue=l==null?void 0:l.displayName)==null?void 0:ue.charAt(0))||(l==null?void 0:l.username.charAt(0))})}),i.jsx(te,{size:"sm",variant:"outline",className:"absolute -bottom-2 -right-2 rounded-full p-2 h-auto",onClick:fe,disabled:W,children:W?i.jsx(gs,{className:"h-4 w-4 animate-spin"}):i.jsx(wL,{className:"h-4 w-4"})}),i.jsx("input",{type:"file",ref:a,onChange:Z,className:"hidden",accept:"image/*"})]}),i.jsxs("div",{className:"flex-1 space-y-4",children:[i.jsxs("div",{children:[i.jsx(Nt,{htmlFor:"displayName",className:"text-base mb-2 block",children:"Display Name"}),i.jsx(vt,{id:"displayName",value:_,onChange:X=>E(X.target.value),placeholder:"Your display name",className:"max-w-md"})]}),i.jsxs("div",{children:[i.jsx(Nt,{htmlFor:"bio",className:"text-base mb-2 block",children:"Bio"}),i.jsx(Dh,{id:"bio",value:I||"",onChange:X=>P(X.target.value),placeholder:"Tell others about yourself",className:"max-w-md resize-none h-24"})]})]})]})})}),i.jsx(nr,{children:i.jsx(te,{onClick:z,disabled:G.isPending,children:G.isPending?i.jsxs(i.Fragment,{children:[i.jsx(Kt,{size:"sm",className:"mr-2"}),"Saving Profile..."]}):"Save Profile"})})]})}),i.jsx(nt,{value:"appearance",children:i.jsxs(Re,{children:[i.jsxs(Ye,{children:[i.jsx(He,{children:"Appearance Settings"}),i.jsx(kt,{children:"Customize how Traxx looks for you"})]}),i.jsx(Ae,{children:i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[i.jsx(rw,{className:"h-5 w-5 text-primary"}),i.jsx("h3",{className:"text-lg font-medium",children:"Color Theme"})]}),i.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 mb-6",children:Rb.map(X=>i.jsx("div",{className:`group cursor-pointer rounded-lg transition-all duration-300 ${p===X.value?"ring-2 ring-primary ring-offset-2 bg-muted/40":"hover:bg-muted/20"}`,onClick:()=>q(X.value),children:i.jsxs("div",{className:"p-3 flex flex-col items-center",children:[i.jsx("div",{className:"w-12 h-12 rounded-full mb-2 relative flex items-center justify-center",style:{backgroundColor:X.value},children:p===X.value&&i.jsx(un,{className:"h-5 w-5 text-white"})}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"font-medium",children:X.name}),i.jsx("div",{className:"text-xs text-muted-foreground",children:X.description})]})]})},X.value))}),i.jsx("div",{className:"mt-6 p-4 bg-muted/20 rounded-lg border border-border",children:i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start",children:[i.jsx("div",{className:"w-16 h-16 rounded-lg shadow-md flex-shrink-0",style:{backgroundColor:p||er}}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h4",{className:"font-medium mb-1",children:"Selected Color"}),i.jsxs("p",{className:"text-sm text-muted-foreground mb-2",children:[((ae=Rb.find(X=>X.value===p))==null?void 0:ae.name)||"Custom"," - ",p||er]}),i.jsx("div",{className:"text-xs mb-3",children:"This color will be used throughout the application for buttons, links, and highlights."}),i.jsx("div",{className:"flex gap-2 items-center mt-2",children:i.jsxs("div",{className:"flex-1 max-w-xs",children:[i.jsx(Nt,{htmlFor:"custom-color",className:"text-xs font-medium mb-1 block",children:"Custom Hex Color"}),i.jsxs("div",{className:"flex",children:[i.jsx(vt,{id:"custom-color",type:"text",value:p||"",onChange:X=>{const ee=X.target.value;(/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/.test(ee)||ee==="")&&q(ee||er)},placeholder:"#RRGGBB",className:"flex-1",maxLength:7}),i.jsxs("div",{className:"relative w-12",children:[i.jsx("input",{type:"color",value:p||er,onChange:X=>q(X.target.value),className:"absolute inset-0 opacity-0 cursor-pointer w-full"}),i.jsx(te,{type:"button",variant:"outline",size:"icon",className:"h-full border-l-0 rounded-l-none w-full",children:i.jsx(rw,{className:"h-4 w-4"})})]})]})]})})]})]})})]}),!j&&i.jsxs("div",{className:"mt-6",children:[i.jsxs("h3",{className:"text-lg font-medium mb-3 flex items-center gap-2",children:[i.jsx(TL,{className:"h-5 w-5 text-primary"}),"Preview"]}),i.jsxs("div",{className:"p-4 bg-muted/20 rounded-lg border border-border",children:[i.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"See how your selected color will look in the application:"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs mb-1 font-medium",children:"Buttons"}),i.jsxs("div",{className:"flex flex-wrap gap-2",children:[i.jsx(te,{size:"sm",style:{backgroundColor:p||er},children:"Primary"}),i.jsx(te,{size:"sm",variant:"outline",children:i.jsx("span",{style:{color:p||er},children:"Outline"})}),i.jsx(te,{size:"sm",variant:"ghost",children:i.jsx("span",{style:{color:p||er},children:"Ghost"})})]})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs mb-1 font-medium",children:"Switch"}),i.jsx(Eo,{checked:!0,style:{"--thumb-size":"1rem","--track-padding":"2px",backgroundColor:p||er}})]})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs mb-1 font-medium",children:"Links"}),i.jsxs("div",{className:"space-y-1",children:[i.jsxs("p",{children:["Regular text with a ",i.jsx("a",{href:"#",style:{color:p||er,textDecoration:"underline"},children:"colored link"})," inside."]}),i.jsx("a",{href:"#",style:{color:p||er},children:"Standalone link"})]})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs mb-1 font-medium",children:"Badge"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("span",{className:"px-2 py-1 text-xs rounded-full text-white",style:{backgroundColor:p||er},children:"Badge"}),i.jsx("span",{className:"px-2 py-1 text-xs rounded-full border",style:{color:p||er,borderColor:p||er},children:"Outline"})]})]})]})]})]})]}),i.jsxs("div",{className:"flex flex-col space-y-4 mt-8 pt-6 border-t",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsxs(Nt,{htmlFor:"high-contrast",className:"flex items-center gap-2 text-base",children:[i.jsx(EL,{className:"h-5 w-5 text-primary"}),"High Contrast Mode"]}),i.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Increases contrast for better readability and accessibility"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-sm text-muted-foreground",children:j?"On":"Off"}),i.jsx(Eo,{id:"high-contrast",checked:j,onCheckedChange:X=>{y(X),o(X);try{const ee=JSON.parse(localStorage.getItem("traxx_theme_cache")||"{}");localStorage.setItem("traxx_theme_cache",JSON.stringify({...ee,highContrastMode:X})),console.log("High contrast mode cached:",X)}catch(ee){console.error("Error caching high contrast mode:",ee)}}})]})]}),j&&i.jsxs("div",{className:"p-3 bg-yellow-400 text-black rounded-md text-sm mt-2",children:[i.jsx("div",{className:"font-medium",children:"High Contrast Mode Active"}),i.jsx("p",{className:"text-xs mt-1",children:'This mode overrides your color selection to provide maximum readability. Toggle the switch to "Off" to disable high contrast mode.'})]})]})]})}),i.jsxs(nr,{className:"flex justify-between flex-wrap gap-3",children:[i.jsx(te,{variant:"outline",onClick:()=>{v(er),n(er),y(!1),o(!1);try{localStorage.setItem("traxx_theme_cache",JSON.stringify({uiColor:er,highContrastMode:!1})),console.log("Theme cache reset to defaults")}catch(X){console.error("Error resetting theme cache:",X)}if(l){const X={uiColor:er,enableAutoplay:!0,defaultSortType:"recent",highContrastMode:!1};Y.mutate(X)}e({title:"Settings Reset",description:"Appearance settings have been reset to defaults."})},disabled:Y.isPending,children:"Reset to Defaults"}),i.jsx(te,{onClick:B,disabled:Y.isPending,children:Y.isPending?i.jsxs(i.Fragment,{children:[i.jsx(Kt,{size:"sm",className:"mr-2"}),"Saving..."]}):"Save Settings"})]})]})}),i.jsx(nt,{value:"playback",children:i.jsxs(Re,{children:[i.jsxs(Ye,{children:[i.jsx(He,{children:"Playback Settings"}),i.jsx(kt,{children:"Control how tracks and streams play on BeatStream"})]}),i.jsx(Ae,{children:i.jsx("div",{className:"space-y-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx(Nt,{htmlFor:"autoplay",className:"text-base",children:"Autoplay"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Automatically play tracks and streams when navigating"})]}),i.jsx(Eo,{id:"autoplay",checked:S||!1,onCheckedChange:h})]})})}),i.jsx(nr,{children:i.jsx(te,{onClick:B,disabled:Y.isPending,children:Y.isPending?i.jsxs(i.Fragment,{children:[i.jsx(Kt,{size:"sm",className:"mr-2"}),"Saving..."]}):"Save Settings"})})]})}),i.jsx(nt,{value:"content",children:i.jsxs(Re,{children:[i.jsxs(Ye,{children:[i.jsx(He,{children:"Content Settings"}),i.jsx(kt,{children:"Control how content is displayed to you"})]}),i.jsx(Ae,{children:i.jsx("div",{className:"space-y-6",children:i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-medium mb-3",children:"Default Sort Order"}),i.jsx("div",{className:"flex flex-wrap gap-3",children:Uq.map(X=>i.jsx(te,{variant:g===X.value?"default":"outline",onClick:()=>w(X.value),className:"px-4",children:X.name},X.value))})]})})}),i.jsx(nr,{children:i.jsx(te,{onClick:B,disabled:Y.isPending,children:Y.isPending?i.jsxs(i.Fragment,{children:[i.jsx(Kt,{size:"sm",className:"mr-2"}),"Saving..."]}):"Save Settings"})})]})})]})]})}function Bq(){const{user:e}=or(),t=()=>i.jsx("div",{className:"min-h-[60vh] w-full flex items-center justify-center",children:i.jsx(Re,{className:"w-full max-w-md mx-4",children:i.jsxs(Ae,{className:"pt-6",children:[i.jsxs("div",{className:"flex mb-4 gap-2",children:[i.jsx(ax,{className:"h-8 w-8 text-red-500"}),i.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"404 Page Not Found"})]}),i.jsx("p",{className:"mt-4 text-sm text-gray-600",children:"The page you're looking for doesn't exist or has been moved."})]})})});return e?i.jsx($x,{children:i.jsx(t,{})}):i.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gray-50",children:i.jsx(t,{})})}function zq(){const[e,t]=m.useState(""),[r,n]=m.useState("creators"),{data:s,isLoading:o}=pt({queryKey:["/api/streams/featured"],queryFn:rh}),{data:a,isLoading:l}=pt({queryKey:["/api/tracks/recent"],queryFn:uu}),{data:c,isLoading:u}=pt({queryKey:["/api/creators/recommended"],queryFn:xx});return i.jsxs("div",{className:"min-h-screen bg-background",children:[i.jsx(Yo,{}),i.jsxs("div",{className:"flex",children:[i.jsx(Sl,{}),i.jsx("main",{className:"flex-1 px-4 pt-16 pb-20 md:pb-10 lg:pl-72",children:i.jsxs("div",{className:"container max-w-6xl mx-auto pt-6",children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Discover"}),i.jsxs("div",{className:"relative mb-6",children:[i.jsx(Rc,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),i.jsx(vt,{placeholder:"Search for artists, tracks, or genres",className:"pl-10",value:e,onChange:d=>t(d.target.value)})]}),i.jsxs(Cn,{defaultValue:r,onValueChange:n,className:"w-full",children:[i.jsxs(cn,{className:"w-full grid grid-cols-3",children:[i.jsx(rt,{value:"creators",children:"Creators"}),i.jsx(rt,{value:"streams",children:"Live Streams"}),i.jsx(rt,{value:"tracks",children:"Tracks"})]}),i.jsx(nt,{value:"creators",className:"mt-6",children:u?i.jsx("div",{className:"flex justify-center py-12",children:i.jsx(Kt,{size:"lg"})}):c&&c.length>0?i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:c.map(d=>i.jsx(OP,{creator:d},d.id))}):i.jsx(Re,{children:i.jsx(Ae,{className:"py-10 text-center",children:i.jsx("p",{className:"text-muted-foreground",children:"No creators found."})})})}),i.jsx(nt,{value:"streams",className:"mt-6",children:o?i.jsx("div",{className:"flex justify-center py-12",children:i.jsx(Kt,{size:"lg"})}):s&&s.length>0?i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(d=>i.jsx(Di,{stream:d},d.id))}):i.jsx(Re,{children:i.jsx(Ae,{className:"py-10 text-center",children:i.jsx("p",{className:"text-muted-foreground",children:"No live streams found."})})})}),i.jsx(nt,{value:"tracks",className:"mt-6",children:l?i.jsx("div",{className:"flex justify-center py-12",children:i.jsx(Kt,{size:"lg"})}):a&&a.length>0?i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:a.map(d=>i.jsx(zi,{track:d},d.id))}):i.jsx(Re,{children:i.jsx(Ae,{className:"py-10 text-center",children:i.jsx("p",{className:"text-muted-foreground",children:"No tracks found."})})})})]})]}),i.jsx(Bi,{className:"my-8"}),i.jsxs("section",{className:"mb-8",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Trending Genres"}),i.jsx(Oe,{href:"/genres",className:"text-primary hover:underline",children:"See all"})]}),i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[{name:"Electronic",icon:i.jsx(us,{className:"h-5 w-5 mb-2"})},{name:"Hip-Hop",icon:i.jsx(J0,{className:"h-5 w-5 mb-2"})},{name:"Rock",icon:i.jsx(us,{className:"h-5 w-5 mb-2"})},{name:"Jazz",icon:i.jsx(J0,{className:"h-5 w-5 mb-2"})}].map(d=>i.jsx(Re,{className:"overflow-hidden hover:shadow-md transition-shadow border-primary/10",children:i.jsx(Ae,{className:"p-0",children:i.jsx(Oe,{href:`/genre/${d.name.toLowerCase()}`,className:"block p-6 text-center hover:bg-primary/5 transition-colors",children:i.jsxs("div",{className:"flex flex-col items-center",children:[d.icon,i.jsx("h3",{className:"font-medium text-lg",children:d.name}),i.jsx(Ct,{variant:"outline",className:"mt-2",children:"Trending"})]})})})},d.name))})]}),i.jsxs("section",{className:"mb-8",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Weekly Top Picks"}),i.jsx(Oe,{href:"/top-picks",className:"text-primary hover:underline",children:"See all"})]}),l?i.jsx("div",{className:"flex justify-center py-12",children:i.jsx(Kt,{size:"lg"})}):a&&a.length>0?i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:a.slice(0,2).map(d=>i.jsx(zi,{track:d},d.id))}):i.jsx(Re,{children:i.jsx(Ae,{className:"py-10 text-center",children:i.jsx("p",{className:"text-muted-foreground",children:"No top picks available."})})})]})]})})]}),i.jsx(Zo,{}),i.jsx(Xo,{})]})}function Vq(){const[e,t]=m.useState("tracks"),{data:r,isLoading:n}=pt({queryKey:["/api/tracks/recent"],queryFn:uu});return i.jsxs("div",{className:"min-h-screen bg-background",children:[i.jsx(Yo,{}),i.jsxs("div",{className:"flex",children:[i.jsx(Sl,{}),i.jsx("main",{className:"flex-1 px-4 pt-16 pb-20 md:pb-10 lg:pl-72",children:i.jsxs("div",{className:"container max-w-6xl mx-auto pt-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h1",{className:"text-3xl font-bold",children:"Your Library"}),i.jsx(te,{variant:"outline",children:"Create Playlist"})]}),i.jsxs(Cn,{defaultValue:e,onValueChange:t,className:"w-full",children:[i.jsxs(cn,{className:"w-full grid grid-cols-3",children:[i.jsx(rt,{value:"tracks",children:"Tracks"}),i.jsx(rt,{value:"playlists",children:"Playlists"}),i.jsx(rt,{value:"history",children:"History"})]}),i.jsx(nt,{value:"tracks",className:"mt-6",children:n?i.jsx("div",{className:"flex justify-center py-12",children:i.jsx(Kt,{size:"lg"})}):r&&r.length>0?i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.map(s=>i.jsx(zi,{track:s},s.id))}):i.jsx(Re,{children:i.jsxs(Ae,{className:"py-12 text-center",children:[i.jsx("p",{className:"text-muted-foreground mb-4",children:"You haven't saved any tracks yet."}),i.jsx(te,{asChild:!0,children:i.jsx(Oe,{href:"/discover",children:"Discover Tracks"})})]})})}),i.jsx(nt,{value:"playlists",className:"mt-6",children:i.jsx(Re,{children:i.jsxs(Ae,{className:"py-12 text-center",children:[i.jsx("p",{className:"text-muted-foreground mb-4",children:"Playlist functionality coming soon."}),i.jsx(te,{asChild:!0,children:i.jsx(Oe,{href:"/discover",children:"Browse Tracks"})})]})})}),i.jsx(nt,{value:"history",className:"mt-6",children:i.jsx(Re,{children:i.jsxs(Ae,{className:"py-12 text-center",children:[i.jsx("p",{className:"text-muted-foreground mb-4",children:"Listening history feature coming soon."}),i.jsx(te,{asChild:!0,children:i.jsx(Oe,{href:"/discover",children:"Discover New Music"})})]})})})]}),i.jsx(Bi,{className:"my-8"}),i.jsxs("section",{className:"mb-8",children:[i.jsx("div",{className:"flex items-center justify-between mb-4",children:i.jsx("h2",{className:"text-2xl font-bold",children:"Recently Played"})}),n?i.jsx("div",{className:"flex justify-center py-6",children:i.jsx(Kt,{size:"lg"})}):r&&r.length>0?i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.slice(0,3).map(s=>i.jsx(zi,{track:s},s.id))}):i.jsx(Re,{children:i.jsx(Ae,{className:"py-8 text-center",children:i.jsx("p",{className:"text-muted-foreground",children:"No recent tracks."})})})]})]})})]}),i.jsx(Zo,{}),i.jsx(Xo,{})]})}function Wq({streamId:e,streamKey:t,externalStreamId:r,privateStreamKey:n,publicStreamId:s,title:o,description:a,isLive:l,viewerCount:c,startTime:u,protocol:d="webrtc",streamType:f="video",user:p,onEndStream:v,onStartStream:j}){console.log("StreamDashboard key inputs:",{streamKey:t,privateStreamKey:n}),console.log("StreamDashboard ID inputs:",{externalStreamId:r,publicStreamId:s});const y=(()=>{console.log("Stream key sources:",{streamKey:t||"[empty]",privateStreamKey:n||"[empty]"});const D=n||t||"";return console.log("Selected effective stream key:",D),D})(),S=(()=>{console.log("Stream ID sources:",{externalStreamId:r||"[empty]",publicStreamId:s||"[empty]"});const D=s||r||"";return console.log("Selected effective stream ID:",D),D})(),{toast:h}=pr(),[g,w]=m.useState(!0),[_,E]=m.useState(!1),[I,P]=m.useState(!1),[M,F]=m.useState(!1);m.useEffect(()=>{console.log("StreamDashboard props:",{streamId:e,streamKey:t,privateStreamKey:n,effectiveStreamKey:y,externalStreamId:r,publicStreamId:s,effectiveStreamId:S})},[e,t,n,y,r,s,S]);const[W,re]=m.useState([]),[q,Y]=m.useState(""),G=m.useRef(null),[ne,Z]=m.useState("info"),fe=m.useRef(null);m.useEffect(()=>{if(!e)return;const D=cc(`${window.location.origin}/stream`,{query:{streamId:String(e),userId:p?String(p.id):"0",username:p?p.username:"Guest",role:"host",streamKey:y},transports:["websocket","polling"]});return fe.current=D,D.on("chat-message",R=>{const Q={id:`${R.senderId}-${Date.now()}`,userId:parseInt(R.senderId)||0,username:R.username||"User",message:R.message,timestamp:new Date(R.timestamp)};re(de=>[...de,Q])}),()=>{fe.current&&(fe.current.disconnect(),fe.current=null)}},[e,p,y]),m.useEffect(()=>{},[ne]),m.useEffect(()=>{G.current&&(G.current.scrollTop=G.current.scrollHeight)},[W]);const B=D=>{if(!D)return"00:00:00";const R=Math.floor(D/3600),Q=Math.floor(D%3600/60),de=Math.floor(D%60);return`${R.toString().padStart(2,"0")}:${Q.toString().padStart(2,"0")}:${de.toString().padStart(2,"0")}`},z=()=>{if(!u)return"00:00:00";const D=Math.floor((new Date().getTime()-new Date(u).getTime())/1e3);return B(D)},ue=D=>D.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),ae=()=>{navigator.clipboard.writeText(y).then(()=>{E(!0),setTimeout(()=>E(!1),3e3),h({title:"Stream Key Copied",description:"Keep your stream key private! It gives full broadcasting access to your channel."})}).catch(D=>{console.error("Failed to copy stream key:",D),h({title:"Copy Failed",description:"Could not copy stream key to clipboard.",variant:"destructive"})})},X=()=>{navigator.clipboard.writeText(S).then(()=>{P(!0),setTimeout(()=>P(!1),3e3),h({title:"Stream ID Copied",description:"Share this ID so viewers can join your stream."})}).catch(D=>{console.error("Failed to copy stream ID:",D),h({title:"Copy Failed",description:"Could not copy stream ID to clipboard.",variant:"destructive"})})},ee=()=>{if(!S||S===""){console.warn("No effectiveStreamId available to create shareable link");const R=`${window.location.origin}/stream/`;return console.log("Generated base URL (no ID):",R),R}const D=`${window.location.origin}/stream/${S}`;return console.log("Generated shareable link:",D),D},je=()=>{navigator.clipboard.writeText(ee()).then(()=>{F(!0),setTimeout(()=>F(!1),3e3),h({title:"Link Copied",description:"Share this link so viewers can join your stream."})}).catch(D=>{console.error("Failed to copy link:",D),h({title:"Copy Failed",description:"Could not copy link to clipboard.",variant:"destructive"})})},Ce=D=>{if(D.preventDefault(),!q.trim()||!p||!fe.current)return;const R={id:Date.now().toString(),userId:p.id,username:p.username,message:q,timestamp:new Date};fe.current.emit("chat-message",{streamId:e,message:q,username:p.username,senderId:String(p.id),timestamp:new Date().toISOString()}),re(Q=>[...Q,R]),Y("")};return i.jsxs("div",{className:"grid gap-6 md:grid-cols-3",children:[i.jsx("div",{className:"md:col-span-2",children:i.jsxs(Re,{className:"h-full",children:[i.jsx(Ye,{children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx(He,{children:o}),i.jsx(kt,{children:a})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[l&&i.jsx(Ct,{variant:"destructive",className:"px-2 py-1",children:"LIVE"}),i.jsxs(Ct,{variant:"outline",className:"flex items-center gap-1",children:[i.jsx(ds,{className:"h-3 w-3"})," ",c]}),i.jsxs(Ct,{variant:"outline",className:"flex items-center gap-1",children:[i.jsx(L2,{className:"h-3 w-3"})," ",z()]})]})]})}),i.jsx(Ae,{className:"space-y-6",children:i.jsxs(Cn,{defaultValue:"info",value:ne,onValueChange:Z,children:[i.jsxs(cn,{className:"grid w-full grid-cols-2",children:[i.jsx(rt,{value:"info",children:"Stream Info"}),i.jsx(rt,{value:"chat",children:"Live Chat"})]}),i.jsxs(nt,{value:"info",className:"space-y-4",children:[i.jsxs("div",{children:[i.jsxs("h3",{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[i.jsx(F2,{className:"h-4 w-4"})," Stream Key",i.jsx(Ct,{variant:"outline",className:"ml-auto text-red-500 border-red-500",children:"Private"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(vt,{type:g?"text":"password",value:y||"No stream key available",readOnly:!0,className:"font-mono"}),i.jsx(te,{variant:"outline",size:"icon",onClick:()=>w(!g),children:i.jsx(nw,{className:"h-4 w-4"})}),i.jsx(te,{variant:"outline",size:"icon",onClick:ae,children:_?i.jsx(gd,{className:"h-4 w-4 text-green-500"}):i.jsx(yd,{className:"h-4 w-4"})})]}),i.jsxs("p",{className:"text-xs text-muted-foreground mt-1 flex items-center gap-1",children:[i.jsx(nw,{className:"h-3 w-3 text-red-500"}),"Keep your stream key private! It gives full broadcasting access to your channel."]})]}),i.jsxs("div",{children:[i.jsxs("h3",{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[i.jsx(og,{className:"h-4 w-4"})," Stream ID",i.jsx(Ct,{variant:"outline",className:"ml-auto",children:"Public"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(vt,{value:S||"No stream ID available",readOnly:!0,className:"font-mono"}),i.jsx(te,{variant:"outline",size:"icon",onClick:X,children:I?i.jsx(gd,{className:"h-4 w-4 text-green-500"}):i.jsx(yd,{className:"h-4 w-4"})})]}),i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Share this ID with viewers so they can join your stream."})]}),i.jsxs("div",{children:[i.jsxs("h3",{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[i.jsx(cg,{className:"h-4 w-4"})," Shareable Link"]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(vt,{value:ee(),readOnly:!0}),i.jsx(te,{variant:"outline",size:"icon",onClick:je,children:M?i.jsx(gd,{className:"h-4 w-4 text-green-500"}):i.jsx(yd,{className:"h-4 w-4"})})]}),i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Direct link that viewers can use to join your stream."})]}),i.jsxs("div",{className:"rounded-md bg-muted p-4 mt-6",children:[i.jsx("h3",{className:"font-medium mb-2",children:"Streaming Tips"}),i.jsxs("ul",{className:"space-y-2 text-sm",children:[i.jsx("li",{children:" Make sure you have a stable internet connection"}),i.jsx("li",{children:" Speak clearly and check your audio levels"}),i.jsx("li",{children:" Interact with your audience through chat"}),i.jsx("li",{children:" Remember to save your stream when finished"})]})]})]}),i.jsxs(nt,{value:"chat",className:"h-[500px] flex flex-col",children:[i.jsx("div",{ref:G,className:"flex-1 overflow-y-auto mb-4 space-y-4 p-4 border rounded-md",children:W.length===0?i.jsxs("div",{className:"text-center text-muted-foreground py-8",children:[i.jsx(ew,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),i.jsx("p",{children:"No messages yet"}),i.jsx("p",{className:"text-sm",children:"Chat messages will appear here"})]}):W.map(D=>i.jsxs("div",{className:"flex flex-col",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"font-semibold text-sm",children:D.username}),i.jsx("span",{className:"text-xs text-muted-foreground",children:ue(D.timestamp)})]}),i.jsx("div",{className:"text-sm",children:D.message})]},D.id))}),i.jsxs("form",{onSubmit:Ce,className:"flex gap-2",children:[i.jsx(vt,{placeholder:"Type a message...",value:q,onChange:D=>Y(D.target.value)}),i.jsxs(te,{type:"submit",children:[i.jsx(Xd,{className:"h-4 w-4 mr-2"}),"Send"]})]})]})]})}),i.jsxs(nr,{className:"flex justify-between",children:[i.jsxs("p",{className:"text-sm text-muted-foreground",children:["Stream Protocol: ",i.jsx("span",{className:"font-medium",children:d.toUpperCase()})]}),i.jsxs("div",{className:"flex gap-2",children:[!l&&i.jsxs(te,{variant:"default",className:"bg-green-600 hover:bg-green-700",onClick:j||(()=>console.log("onStartStream not provided")),children:[i.jsx(Pc,{className:"h-4 w-4 mr-2"}),"Start Stream"]}),l&&i.jsx(te,{variant:"destructive",onClick:v,children:"End Stream"})]})]})]})}),i.jsx("div",{children:i.jsxs(Re,{className:"h-full",children:[i.jsxs(Ye,{children:[i.jsx(He,{children:"Stream Status"}),i.jsx(kt,{children:"Monitor your stream's performance"})]}),i.jsxs(Ae,{className:"space-y-6",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm font-medium",children:"Status:"}),i.jsx(Ct,{variant:l?"destructive":"outline",children:l?"LIVE":"OFFLINE"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm font-medium",children:"Viewers:"}),i.jsx("span",{className:"font-mono",children:c})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm font-medium",children:"Duration:"}),i.jsx("span",{className:"font-mono",children:z()})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm font-medium",children:"Stream Type:"}),i.jsx("span",{className:"font-mono uppercase",children:f})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm font-medium",children:"Protocol:"}),i.jsx("span",{className:"font-mono uppercase",children:d})]})]}),i.jsx(Bi,{}),i.jsxs("div",{className:"bg-zinc-900 aspect-video rounded-md flex flex-col items-center justify-center text-center p-4",children:[i.jsx("h3",{className:"text-white mb-2",children:"Stream Preview"}),i.jsx("p",{className:"text-zinc-400 text-sm",children:"Preview of your stream will appear here when you start broadcasting"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("h3",{className:"text-sm font-medium",children:"Quick Actions"}),i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsxs(te,{variant:"outline",onClick:je,className:"text-xs",children:[i.jsx(cg,{className:"h-3 w-3 mr-1"})," Copy Link"]}),i.jsxs(te,{variant:"outline",onClick:()=>Z("chat"),className:"text-xs",children:[i.jsx(ew,{className:"h-3 w-3 mr-1"})," View Chat"]})]})]})]})]})})]})}function qq(){const[,e]=Nn(),{user:t}=or(),{toast:r}=pr(),[n,s]=m.useState("video"),[o,a]=m.useState("choose"),[l,c]=m.useState(""),[u,d]=m.useState(""),[f,p]=m.useState("Music"),[v,j]=m.useState(null),[y,S]=m.useState(""),[h,g]=m.useState({streamKey:"",externalStreamId:"",privateStreamKey:"",publicStreamId:"",title:"",description:"",isLive:!0,viewerCount:0,protocol:"webrtc",streamType:n}),[w,_]=m.useState(null),[E,I]=m.useState({videoDevices:[],audioDevices:[],audioOutputDevices:[]}),[P,M]=m.useState(""),[F,W]=m.useState(""),[re,q]=m.useState(""),[Y,G]=m.useState(!0),[ne,Z]=m.useState(!0),[fe,B]=m.useState(!1),[z,ue]=m.useState(null),[ae,X]=m.useState(""),ee=m.useRef(null),je=m.useRef(null),Ce=()=>new URL(window.location.href).searchParams.get("initialize");m.useEffect(()=>{if(!t){r({title:"Authentication Required",description:"You need to be logged in to start a live stream.",variant:"destructive"}),e("/login");return}c(`${t.username||t.displayName}'s Stream`),d(`Live stream by ${t.username||t.displayName}`);const se=Ce();se&&(a("setup"),(async()=>{try{const Fe=await dg(se);j(Fe.id.toString()),c(Fe.title||""),d(Fe.description||""),p(Fe.category||"Music"),s(Fe.streamType||"video"),g({streamKey:Fe.streamKey||Fe.privateStreamKey||"",externalStreamId:Fe.externalStreamId||Fe.publicStreamId||"",title:Fe.title||"",description:Fe.description||"",isLive:Fe.isLive||!1,viewerCount:Fe.viewerCount||0,startTime:Fe.startedAt?new Date(Fe.startedAt):void 0,protocol:Fe.protocol||"webrtc",streamType:Fe.streamType||"video"}),r({title:"Stream Loaded",description:"Your existing stream has been loaded. Configure your settings and go live!"})}catch(Fe){console.error("Error fetching stream details:",Fe),r({title:"Error Loading Stream",description:"Failed to load the stream. Please try again or create a new one.",variant:"destructive"})}})())},[t,e,r]);const D=se=>{s(se),a("setup"),se==="audio"?(G(!1),Z(!0)):(G(!0),Z(!0)),R()},R=async()=>{try{let se=null;try{se=await navigator.mediaDevices.getUserMedia({video:n==="video",audio:!0})}catch(U){console.warn("Could not get full media access:",U);try{n==="video"?se=await navigator.mediaDevices.getUserMedia({video:!0,audio:!1}):se=await navigator.mediaDevices.getUserMedia({video:!1,audio:!0})}catch(V){console.warn(`Could not get ${n} access:`,V);try{se=await navigator.mediaDevices.getUserMedia({video:!1,audio:!0})}catch(pe){console.error("Could not get any media access:",pe),r({title:"Media Access Required",description:`Please allow access to your ${n==="video"?"camera and/or microphone":"microphone"} to stream.`,variant:"destructive"})}}}const ve=await navigator.mediaDevices.enumerateDevices(),Fe=ve.filter(U=>U.kind==="videoinput"),gt=ve.filter(U=>U.kind==="audioinput"),A=ve.filter(U=>U.kind==="audiooutput");I({videoDevices:Fe,audioDevices:gt,audioOutputDevices:A}),Fe.length>0&&!P&&M(Fe[0].deviceId),gt.length>0&&!F&&W(gt[0].deviceId),A.length>0&&!re&&q(A[0].deviceId),se&&(n==="video"&&ee.current&&(ee.current.srcObject=se),_(se))}catch(se){console.error("Error getting media devices:",se)}};m.useEffect(()=>o!=="setup"?void 0:((async()=>{if(w&&w.getTracks().forEach(ve=>ve.stop()),!(n==="video"&&!P&&!F||n==="audio"&&!F||!Y&&!ne))try{const ve={video:n==="video"&&Y&&P?{deviceId:{exact:P}}:!1,audio:ne&&F?{deviceId:{exact:F},echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0}:!1},Fe=await navigator.mediaDevices.getUserMedia(ve);n==="video"&&ee.current&&(ee.current.srcObject=Fe),_(Fe)}catch(ve){console.error("Error updating preview:",ve),r({title:"Preview Error",description:"Could not access the selected devices. Please check permissions.",variant:"destructive"})}})(),()=>{w&&w.getTracks().forEach(ve=>ve.stop())}),[P,F,Y,ne,n,o,r]);const Q=se=>{var U;const ve=(U=se.target.files)==null?void 0:U[0];if(!ve)return;const Fe=ve.type;if(!Fe.startsWith("image/")&&!Fe.startsWith("video/")){r({title:"Invalid File",description:"Please upload an image (JPEG, PNG, GIF) or video (MP4, WebM) file.",variant:"destructive"});return}const gt=10*1024*1024;if(ve.size>gt){r({title:"File Too Large",description:"Please upload a file smaller than 10MB.",variant:"destructive"});return}ue(ve);const A=URL.createObjectURL(ve);X(A),r({title:"Visual Element Added",description:"Your visual element has been added to the stream."})},de=()=>{ue(null),ae&&URL.revokeObjectURL(ae),X(""),je.current&&(je.current.value="")},le=async()=>{if(t)try{const se={title:l,description:u,category:f,tags:["live",n],streamType:n,useCamera:n==="video"?Y:!1,useMicrophone:ne,useSystemAudio:fe,hasVisualElement:!!z};console.log("Creating stream with request data:",se);const ve=await iE(se);if(console.log("API response for stream creation:",JSON.stringify(ve,null,2)),n==="audio"&&z)try{const{uploadVisualElement:V}=await BP(async()=>{const{uploadVisualElement:pe}=await Promise.resolve().then(()=>MF);return{uploadVisualElement:pe}},void 0);await V(ve.id,z),r({title:"Visual Element Uploaded",description:"Your visual element has been added to the stream."})}catch(V){console.error("Failed to upload visual element:",V),r({title:"Visual Element Upload Failed",description:"The stream was created, but we couldn't upload your visual element.",variant:"default"})}const Fe=ve.id.toString();j(Fe);const gt={streamKey:ve.streamKey||"[not present]",privateStreamKey:ve.privateStreamKey||"[not present]",externalStreamId:ve.externalStreamId||"[not present]",publicStreamId:ve.publicStreamId||"[not present]"};console.log("Stream keys and IDs in API response:",gt);const A=ve.streamKey||ve.privateStreamKey||"",U=ve.externalStreamId||ve.publicStreamId||"";console.log("Using effective stream keys:",{effectiveStreamKey:A,effectiveStreamId:U}),g({streamKey:A,externalStreamId:U,privateStreamKey:A,publicStreamId:U,title:ve.title||l,description:ve.description||u,isLive:!0,viewerCount:0,startTime:new Date,protocol:ve.protocol||"webrtc",streamType:ve.streamType||n}),console.log("Stream created with key details:",{streamKey:A,externalId:U}),a("live"),r({title:"Stream Created",description:"Your stream has been created successfully!"})}catch(se){console.error("Failed to create stream:",se),r({title:"Error",description:"Failed to create stream. Please try again.",variant:"destructive"})}},C=()=>{w&&w.getVideoTracks().forEach(ve=>{ve.enabled=!Y}),G(!Y)},k=()=>{w&&w.getAudioTracks().forEach(ve=>{ve.enabled=!ne}),Z(!ne)},K=()=>{B(!fe)},ie=()=>{if(!y.trim()){r({title:"Stream ID Required",description:"Please enter a valid Stream ID to join.",variant:"destructive"});return}e(`/stream/${y.trim()}`)},De=()=>{a("choose"),w&&(w.getTracks().forEach(se=>se.stop()),_(null)),de()};m.useEffect(()=>{if(!v)return;(async()=>{try{const ve=await dg(v);console.log("Stream details received from API:",{streamKey:ve.streamKey||"[not present]",privateStreamKey:ve.privateStreamKey||"[not present]",externalStreamId:ve.externalStreamId||"[not present]",publicStreamId:ve.publicStreamId||"[not present]"});const Fe=ve.streamKey||ve.privateStreamKey||"",gt=ve.externalStreamId||ve.publicStreamId||"";g({streamKey:Fe,externalStreamId:gt,privateStreamKey:Fe,publicStreamId:gt,title:ve.title||"",description:ve.description||"",isLive:ve.isLive||!1,viewerCount:ve.viewerCount||0,startTime:ve.startedAt?new Date(ve.startedAt):new Date,protocol:ve.protocol||"webrtc",streamType:ve.streamType||n}),console.log("Using effective stream keys:",{effectiveStreamKey:Fe,effectiveStreamId:gt})}catch(ve){console.error("Failed to fetch stream details:",ve)}})()},[v,n]);const Pe=async()=>{if(v)try{g({...h,isLive:!0,startTime:new Date}),a("live"),r({title:"Stream Initialized",description:"Your stream is now initialized. You're ready to go live!"})}catch(se){console.error("Error initializing stream:",se),r({title:"Error",description:"Failed to initialize the stream. Please try again.",variant:"destructive"})}},Me=async()=>{if(v)try{if((await yx(parseInt(v))).success)r({title:"Stream Ended",description:"Your stream has been ended successfully."}),e("/");else throw new Error("Failed to end stream")}catch(se){console.error("Error ending stream:",se),r({title:"Error",description:"Failed to end the stream. Please try again.",variant:"destructive"})}};return v&&o==="live"?i.jsxs("div",{className:"container max-w-6xl mx-auto py-8",children:[i.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Stream Dashboard"}),i.jsx("p",{className:"text-zinc-400 mb-8",children:"Manage your live stream and interact with your audience."}),i.jsx(Wq,{streamId:parseInt(v),streamKey:h.streamKey,externalStreamId:h.externalStreamId,privateStreamKey:h.privateStreamKey,publicStreamId:h.publicStreamId,title:h.title||l,description:h.description||u,isLive:h.isLive,viewerCount:h.viewerCount,startTime:h.startTime,protocol:h.protocol||"webrtc",streamType:h.streamType||"video",user:t,onEndStream:Me,onStartStream:Pe})]}):o==="join"?i.jsxs("div",{className:"container max-w-4xl mx-auto py-8",children:[i.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Join Stream"}),i.jsx("p",{className:"text-zinc-400 mb-8",children:"Enter a Stream ID to join an existing livestream."}),i.jsxs(Re,{children:[i.jsxs(Ye,{children:[i.jsxs(He,{className:"flex items-center gap-2",children:[i.jsx(ds,{className:"h-5 w-5"}),"Join Existing Stream"]}),i.jsx(kt,{children:"Enter the Stream ID shared with you to join a live stream"})]}),i.jsx(Ae,{children:i.jsx("div",{className:"space-y-4",children:i.jsxs("div",{children:[i.jsx(Nt,{htmlFor:"stream-id",children:"Stream ID"}),i.jsxs("div",{className:"flex gap-2 mt-1.5",children:[i.jsx(vt,{id:"stream-id",value:y,onChange:se=>S(se.target.value),placeholder:"Enter the Stream ID",className:"flex-1"}),i.jsx(te,{onClick:ie,children:"Join Stream"})]}),i.jsx("p",{className:"text-xs text-zinc-400 mt-2",children:"The Stream ID is a unique identifier for a live stream and should be shared with you by the streamer."})]})})}),i.jsx(nr,{children:i.jsx(te,{variant:"outline",onClick:De,className:"w-full",children:"Back to Options"})})]})]}):o==="choose"?i.jsxs("div",{className:"container max-w-4xl mx-auto py-8",children:[i.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Go Live"}),i.jsx("p",{className:"text-zinc-400 mb-8",children:"Choose what type of stream you want to create, or join an existing stream."}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsxs(Re,{className:"cursor-pointer transition-all hover:shadow-md",onClick:()=>D("video"),children:[i.jsxs(Ye,{children:[i.jsxs(He,{className:"flex items-center gap-2",children:[i.jsx(Ls,{className:"h-5 w-5"}),"Video Stream"]}),i.jsx(kt,{children:"Stream with video and audio from your camera and microphone"})]}),i.jsxs(Ae,{children:[i.jsx("div",{className:"aspect-video bg-zinc-900 rounded-md flex items-center justify-center mb-4",children:i.jsx(Ls,{className:"h-12 w-12 text-zinc-400"})}),i.jsxs("ul",{className:"space-y-2 text-sm text-zinc-400",children:[i.jsxs("li",{className:"flex items-center gap-2",children:[i.jsx(un,{className:"h-4 w-4 text-green-500"}),"Show your face and surroundings"]}),i.jsxs("li",{className:"flex items-center gap-2",children:[i.jsx(un,{className:"h-4 w-4 text-green-500"}),"Perfect for performances, tutorials, and talk shows"]}),i.jsxs("li",{className:"flex items-center gap-2",children:[i.jsx(un,{className:"h-4 w-4 text-green-500"}),"Support for multiple camera and audio inputs"]})]})]}),i.jsx(nr,{children:i.jsx(te,{className:"w-full",children:"Select Video Stream"})})]}),i.jsxs(Re,{className:"cursor-pointer transition-all hover:shadow-md",onClick:()=>D("audio"),children:[i.jsxs(Ye,{children:[i.jsxs(He,{className:"flex items-center gap-2",children:[i.jsx(Nr,{className:"h-5 w-5"}),"Audio Stream"]}),i.jsx(kt,{children:"Stream audio only with optional visual elements"})]}),i.jsxs(Ae,{children:[i.jsx("div",{className:"aspect-video bg-zinc-900 rounded-md flex items-center justify-center mb-4",children:i.jsx(us,{className:"h-12 w-12 text-zinc-400"})}),i.jsxs("ul",{className:"space-y-2 text-sm text-zinc-400",children:[i.jsxs("li",{className:"flex items-center gap-2",children:[i.jsx(un,{className:"h-4 w-4 text-green-500"}),"Focus on your sound without camera requirements"]}),i.jsxs("li",{className:"flex items-center gap-2",children:[i.jsx(un,{className:"h-4 w-4 text-green-500"}),"Perfect for DJs, podcasts, and music performances"]}),i.jsxs("li",{className:"flex items-center gap-2",children:[i.jsx(un,{className:"h-4 w-4 text-green-500"}),"Add optional static image or video background"]})]})]}),i.jsx(nr,{children:i.jsx(te,{className:"w-full",children:"Select Audio Stream"})})]}),i.jsxs(Re,{className:"cursor-pointer transition-all hover:shadow-md",onClick:()=>a("join"),children:[i.jsxs(Ye,{children:[i.jsxs(He,{className:"flex items-center gap-2",children:[i.jsx(ds,{className:"h-5 w-5"}),"Join Stream"]}),i.jsx(kt,{children:"Join an existing stream with a Stream ID"})]}),i.jsxs(Ae,{children:[i.jsx("div",{className:"aspect-video bg-zinc-900 rounded-md flex items-center justify-center mb-4",children:i.jsx(AL,{className:"h-12 w-12 text-zinc-400"})}),i.jsxs("ul",{className:"space-y-2 text-sm text-zinc-400",children:[i.jsxs("li",{className:"flex items-center gap-2",children:[i.jsx(un,{className:"h-4 w-4 text-green-500"}),"Join a stream being shared by others"]}),i.jsxs("li",{className:"flex items-center gap-2",children:[i.jsx(un,{className:"h-4 w-4 text-green-500"}),"Enter a stream ID to access content"]}),i.jsxs("li",{className:"flex items-center gap-2",children:[i.jsx(un,{className:"h-4 w-4 text-green-500"}),"Connect with your favorite creators"]})]})]}),i.jsx(nr,{children:i.jsx(te,{className:"w-full",children:"Join Existing Stream"})})]})]})]}):i.jsxs("div",{className:"container max-w-6xl mx-auto py-8",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold",children:n==="video"?"Video Stream Setup":"Audio Stream Setup"}),i.jsx("p",{className:"text-zinc-400",children:"Configure your stream settings before going live"})]}),i.jsx(te,{variant:"outline",onClick:De,children:"Change Stream Type"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsx("div",{className:"md:col-span-2",children:i.jsxs(Re,{className:"h-full",children:[i.jsxs(Ye,{children:[i.jsx(He,{children:"Stream Preview"}),i.jsx(kt,{children:"This is how your stream will look to viewers"})]}),i.jsxs(Ae,{className:"flex flex-col items-center justify-center",children:[i.jsx("div",{className:"relative w-full bg-black rounded-md overflow-hidden aspect-video",children:n==="video"&&Y?i.jsx("video",{ref:ee,autoPlay:!0,muted:!0,playsInline:!0,className:"w-full h-full object-cover"}):n==="audio"&&ae?ae.startsWith("blob:")&&(z!=null&&z.type.startsWith("video/"))?i.jsx("video",{src:ae,autoPlay:!0,loop:!0,muted:!0,playsInline:!0,className:"w-full h-full object-cover"}):i.jsx("img",{src:ae,alt:"Stream visual",className:"w-full h-full object-cover"}):i.jsx("div",{className:"w-full h-full flex flex-col items-center justify-center bg-zinc-900",children:n==="video"?i.jsx("p",{className:"text-zinc-400",children:"Camera is disabled"}):i.jsxs(i.Fragment,{children:[i.jsx(Nr,{className:"h-12 w-12 text-zinc-500 mb-2"}),i.jsx("p",{className:"text-zinc-400",children:"Audio-only stream"}),i.jsx("p",{className:"text-zinc-500 text-sm mt-2",children:"You can add a visual element below"})]})})}),i.jsxs("div",{className:"flex gap-3 mt-4 flex-wrap",children:[n==="video"&&i.jsxs(te,{variant:Y?"default":"outline",size:"sm",onClick:C,className:"flex items-center gap-2",children:[i.jsx(Ls,{size:18}),Y?"Camera On":"Camera Off"]}),i.jsxs(te,{variant:ne?"default":"outline",size:"sm",onClick:k,className:"flex items-center gap-2",children:[i.jsx(lg,{size:18}),ne?"Mic On":"Mic Off"]}),i.jsxs(te,{variant:fe?"default":"outline",size:"sm",onClick:K,className:"flex items-center gap-2",children:[i.jsx(eh,{size:18}),fe?"System Audio On":"System Audio Off"]})]}),n==="audio"&&i.jsxs("div",{className:"w-full mt-6 border rounded-md p-4",children:[i.jsxs("h3",{className:"text-sm font-medium mb-2 flex items-center gap-2",children:[i.jsx(lx,{size:16}),"Visual Element (Optional)"]}),z?i.jsxs("div",{className:"flex flex-col",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("span",{className:"text-sm font-medium",children:z.name}),i.jsx(te,{variant:"ghost",size:"sm",onClick:de,className:"h-8 w-8 p-0",children:i.jsx(th,{size:16})})]}),i.jsxs("p",{className:"text-xs text-zinc-400",children:[(z.size/(1024*1024)).toFixed(2),"MB ",z.type.startsWith("image/")?" Image":" Video"]})]}):i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsx("p",{className:"text-sm text-zinc-400 mb-4",children:"Add an image or video to display during your audio stream"}),i.jsx("input",{type:"file",ref:je,onChange:Q,accept:"image/*,video/mp4,video/webm",className:"hidden"}),i.jsx(te,{variant:"outline",onClick:()=>{var se;return(se=je.current)==null?void 0:se.click()},className:"w-full",children:"Upload Image or Video"})]})]})]})]})}),i.jsx("div",{children:i.jsxs(Re,{className:"h-full",children:[i.jsxs(Ye,{children:[i.jsx(He,{children:"Stream Settings"}),i.jsx(kt,{children:"Configure your stream details"})]}),i.jsxs(Ae,{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(Nt,{htmlFor:"stream-title",children:"Stream Title"}),i.jsx(vt,{id:"stream-title",value:l,onChange:se=>c(se.target.value),placeholder:"Enter a stream title"})]}),i.jsxs("div",{children:[i.jsx(Nt,{htmlFor:"stream-description",children:"Description"}),i.jsx(Dh,{id:"stream-description",value:u,onChange:se=>d(se.target.value),placeholder:"Describe your stream",rows:3})]}),i.jsxs("div",{children:[i.jsx(Nt,{htmlFor:"stream-category",children:"Category"}),i.jsxs(uo,{value:f,onValueChange:p,children:[i.jsx(Ni,{id:"stream-category",children:i.jsx(fo,{placeholder:"Select a category"})}),i.jsxs(_i,{children:[i.jsx(tr,{value:"Music",children:"Music"}),i.jsx(tr,{value:"Gaming",children:"Gaming"}),i.jsx(tr,{value:"Talk Show",children:"Talk Show"}),i.jsx(tr,{value:"Tutorial",children:"Tutorial"}),i.jsx(tr,{value:"Podcast",children:"Podcast"}),i.jsx(tr,{value:"DJ Set",children:"DJ Set"}),i.jsx(tr,{value:"Other",children:"Other"})]})]})]}),i.jsxs(Cn,{defaultValue:"devices",className:"w-full",children:[i.jsxs(cn,{className:"w-full",children:[i.jsx(rt,{value:"devices",className:"flex-1",children:"Devices"}),i.jsx(rt,{value:"advanced",className:"flex-1",children:"Advanced"})]}),i.jsxs(nt,{value:"devices",className:"space-y-4 pt-2",children:[n==="video"&&E.videoDevices.length>0&&i.jsxs("div",{children:[i.jsx(Nt,{htmlFor:"video-device",children:"Camera"}),i.jsxs(uo,{value:P,onValueChange:M,disabled:!Y,children:[i.jsx(Ni,{id:"video-device",children:i.jsx(fo,{placeholder:"Select a camera"})}),i.jsx(_i,{children:E.videoDevices.map(se=>i.jsx(tr,{value:se.deviceId,children:se.label||`Camera ${se.deviceId.substring(0,5)}...`},se.deviceId))})]})]}),E.audioDevices.length>0&&i.jsxs("div",{children:[i.jsx(Nt,{htmlFor:"audio-device",children:"Microphone"}),i.jsxs(uo,{value:F,onValueChange:W,disabled:!ne,children:[i.jsx(Ni,{id:"audio-device",children:i.jsx(fo,{placeholder:"Select a microphone"})}),i.jsx(_i,{children:E.audioDevices.map(se=>i.jsx(tr,{value:se.deviceId,children:se.label||`Mic ${se.deviceId.substring(0,5)}...`},se.deviceId))})]})]}),E.audioOutputDevices.length>0&&i.jsxs("div",{children:[i.jsx(Nt,{htmlFor:"audio-output-device",children:"Speaker (for monitoring)"}),i.jsxs(uo,{value:re,onValueChange:q,children:[i.jsx(Ni,{id:"audio-output-device",children:i.jsx(fo,{placeholder:"Select a speaker"})}),i.jsx(_i,{children:E.audioOutputDevices.map(se=>i.jsx(tr,{value:se.deviceId,children:se.label||`Speaker ${se.deviceId.substring(0,5)}...`},se.deviceId))})]})]})]}),i.jsxs(nt,{value:"advanced",className:"space-y-4 pt-2",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(Nt,{htmlFor:"system-audio",children:"Capture System Audio"}),i.jsx(Eo,{id:"system-audio",checked:fe,onCheckedChange:K})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(Nt,{htmlFor:"echo-cancellation",children:"Echo Cancellation"}),i.jsx(Eo,{id:"echo-cancellation",defaultChecked:!0})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx(Nt,{htmlFor:"noise-suppression",children:"Noise Suppression"}),i.jsx(Eo,{id:"noise-suppression",defaultChecked:!0})]})]})]})]}),i.jsx(nr,{children:i.jsx(te,{onClick:le,className:"w-full",disabled:!l||n==="video"&&!Y&&!ne||n==="audio"&&!ne,children:"Go Live"})})]})})]})]})}const Hq=dt.object({username:dt.string().min(3,"Username must be at least 3 characters"),password:dt.string().min(6,"Password must be at least 6 characters")}),Kq=wq.extend({password:dt.string().min(6,"Password must be at least 6 characters"),displayName:dt.string().min(2,"Display name must be at least 2 characters"),bio:dt.string().nullable().optional(),profileImageUrl:dt.string().nullable().optional()});function Gq(){const[e,t]=m.useState("login"),{user:r,loginMutation:n,registerMutation:s}=or(),o=vf({resolver:If(Hq),defaultValues:{username:"",password:""}}),a=vf({resolver:If(Kq),defaultValues:{username:"",password:"",displayName:"",bio:"",profileImageUrl:null}});if(r)return i.jsx(YC,{to:"/"});const l=u=>{n.mutate(u)},c=u=>{const d=Object.fromEntries(Object.entries(u).map(([f,p])=>[f,p===null?"":p]));s.mutate(d)};return i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 min-h-screen",children:[i.jsx("div",{className:"flex items-center justify-center p-8",children:i.jsxs("div",{className:"w-full max-w-md space-y-6",children:[i.jsxs("div",{className:"text-center space-y-2",children:[i.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-purple-500 to-pink-500 bg-clip-text text-transparent",children:"Traxx"}),i.jsx("p",{className:"text-muted-foreground",children:e==="login"?"Sign in to your account to continue":"Create a new account and start streaming"}),e==="login"&&i.jsx("div",{className:"text-xs text-muted-foreground mt-2 p-2 border border-gray-200 rounded-md bg-gray-50 dark:bg-gray-800 dark:border-gray-700",children:i.jsx("p",{children:i.jsx("strong",{children:i.jsx("span",{children:"welcome, login to access the site, otherwise register a free account"})})})})]}),i.jsxs(Cn,{defaultValue:"login",value:e,onValueChange:t,className:"w-full",children:[i.jsxs(cn,{className:"grid grid-cols-2 w-full",children:[i.jsx(rt,{value:"login",children:"Login"}),i.jsx(rt,{value:"register",children:"Register"})]}),i.jsx(nt,{value:"login",className:"space-y-4",children:i.jsx(wf,{...o,children:i.jsxs("form",{onSubmit:o.handleSubmit(l),className:"space-y-4",children:[i.jsx(Ar,{control:o.control,name:"username",render:({field:u})=>i.jsxs(wr,{children:[i.jsx(br,{children:"Username"}),i.jsx(Sr,{children:i.jsx(vt,{placeholder:"username",...u})}),i.jsx(jr,{})]})}),i.jsx(Ar,{control:o.control,name:"password",render:({field:u})=>i.jsxs(wr,{children:[i.jsx(br,{children:"Password"}),i.jsx(Sr,{children:i.jsx(vt,{type:"password",placeholder:"",...u})}),i.jsx(jr,{})]})}),i.jsx(te,{type:"submit",className:"w-full",disabled:n.isPending,children:n.isPending?i.jsxs(i.Fragment,{children:[i.jsx(gs,{className:"mr-2 h-4 w-4 animate-spin"}),"Signing in..."]}):"Sign In"})]})})}),i.jsx(nt,{value:"register",className:"space-y-4",children:i.jsx(wf,{...a,children:i.jsxs("form",{onSubmit:a.handleSubmit(c),className:"space-y-4",children:[i.jsx(Ar,{control:a.control,name:"username",render:({field:u})=>i.jsxs(wr,{children:[i.jsx(br,{children:"Username"}),i.jsx(Sr,{children:i.jsx(vt,{placeholder:"username",...u})}),i.jsx(jr,{})]})}),i.jsx(Ar,{control:a.control,name:"displayName",render:({field:u})=>i.jsxs(wr,{children:[i.jsx(br,{children:"Display Name"}),i.jsx(Sr,{children:i.jsx(vt,{placeholder:"Your display name",...u})}),i.jsx(jr,{})]})}),i.jsx(Ar,{control:a.control,name:"password",render:({field:u})=>i.jsxs(wr,{children:[i.jsx(br,{children:"Password"}),i.jsx(Sr,{children:i.jsx(vt,{type:"password",placeholder:"",...u})}),i.jsx(jr,{})]})}),i.jsx(Ar,{control:a.control,name:"bio",render:({field:u})=>i.jsxs(wr,{children:[i.jsx(br,{children:"Bio (Optional)"}),i.jsx(Sr,{children:i.jsx(vt,{placeholder:"Tell us about yourself",...u,value:u.value||""})}),i.jsx(jr,{})]})}),i.jsx(te,{type:"submit",className:"w-full",disabled:s.isPending,children:s.isPending?i.jsxs(i.Fragment,{children:[i.jsx(gs,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating account..."]}):"Create Account"})]})})})]})]})}),i.jsxs("div",{className:"hidden md:flex flex-col items-center justify-center bg-gradient-to-br from-purple-900 via-indigo-900 to-black p-8 relative overflow-hidden",children:[i.jsxs("div",{className:"absolute inset-0 opacity-20",children:[i.jsx("div",{className:"absolute w-2 h-2 rounded-full bg-white animate-pulse",style:{top:"10%",left:"10%",animationDelay:"0s"}}),i.jsx("div",{className:"absolute w-1 h-1 rounded-full bg-white animate-pulse",style:{top:"20%",left:"30%",animationDelay:"0.5s"}}),i.jsx("div",{className:"absolute w-2 h-2 rounded-full bg-white animate-pulse",style:{top:"45%",left:"15%",animationDelay:"1s"}}),i.jsx("div",{className:"absolute w-1 h-1 rounded-full bg-white animate-pulse",style:{top:"70%",left:"35%",animationDelay:"1.5s"}}),i.jsx("div",{className:"absolute w-2 h-2 rounded-full bg-white animate-pulse",style:{top:"85%",left:"20%",animationDelay:"2s"}}),i.jsx("div",{className:"absolute w-1 h-1 rounded-full bg-white animate-pulse",style:{top:"30%",left:"80%",animationDelay:"2.5s"}}),i.jsx("div",{className:"absolute w-2 h-2 rounded-full bg-white animate-pulse",style:{top:"60%",left:"75%",animationDelay:"3s"}}),i.jsx("div",{className:"absolute w-1 h-1 rounded-full bg-white animate-pulse",style:{top:"15%",left:"60%",animationDelay:"3.5s"}}),i.jsx("div",{className:"absolute w-2 h-2 rounded-full bg-white animate-pulse",style:{top:"80%",left:"60%",animationDelay:"4s"}})]}),i.jsxs("div",{className:"max-w-xl space-y-8 text-white z-10",children:[i.jsx("h2",{className:"text-5xl font-bold bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent",children:"Your music, your audience, all in one place"}),i.jsx("p",{className:"text-xl font-light",children:"Traxx is the ultimate platform for musicians to connect with fans, live stream performances, and share music with the world."}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-start space-x-4 backdrop-blur-sm bg-white/5 rounded-lg p-4 transition-all hover:bg-white/10",children:[i.jsx("div",{className:"h-12 w-12 rounded-full bg-gradient-to-br from-purple-500 to-purple-700 flex items-center justify-center shadow-lg",children:""}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-lg text-purple-300",children:"Live Streaming"}),i.jsx("p",{className:"text-base text-gray-300",children:"Connect with your audience in real-time through high-quality audio streaming."})]})]}),i.jsxs("div",{className:"flex items-start space-x-4 backdrop-blur-sm bg-white/5 rounded-lg p-4 transition-all hover:bg-white/10",children:[i.jsx("div",{className:"h-12 w-12 rounded-full bg-gradient-to-br from-pink-500 to-pink-700 flex items-center justify-center shadow-lg",children:""}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-lg text-pink-300",children:"Track Library"}),i.jsx("p",{className:"text-base text-gray-300",children:"Upload your music and build your discography for fans to explore."})]})]}),i.jsxs("div",{className:"flex items-start space-x-4 backdrop-blur-sm bg-white/5 rounded-lg p-4 transition-all hover:bg-white/10",children:[i.jsx("div",{className:"h-12 w-12 rounded-full bg-gradient-to-br from-blue-500 to-blue-700 flex items-center justify-center shadow-lg",children:""}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-lg text-blue-300",children:"Community"}),i.jsx("p",{className:"text-base text-gray-300",children:"Engage with a vibrant community of musicians and music lovers."})]})]})]})]})]})]})}function Qq(){const{user:e,isLoading:t,loginMutation:r,logoutMutation:n,refetchUser:s}=or(),[o,a]=m.useState("djshadow"),[l,c]=m.useState("password123"),[u,d]=m.useState(null),f=async()=>{try{await r.mutateAsync({username:o,password:l})}catch(S){console.error("Login error:",S)}},p=async()=>{try{await n.mutateAsync()}catch(S){console.error("Logout error:",S)}},v=async()=>{try{const S=await s();eg({title:"User Data Refetched",description:"Refetch operation completed"}),console.log("Refetch result:",S)}catch(S){console.error("Refetch error:",S)}},j=async S=>{try{const h="include",g={"Content-Type":"application/json"};d({loading:!0,data:null,error:null}),console.log(`Testing endpoint ${S} with credentials: ${h}`);const w=await fetch(S,{credentials:h,headers:g});if(console.log("Response status:",w.status),console.log("Response headers:",Object.fromEntries(w.headers.entries())),!w.ok){let E;try{E=(await w.json()).message||`${w.status}: ${w.statusText}`}catch{E=`${w.status}: ${w.statusText}`}d({loading:!1,data:null,error:E,status:w.status,statusText:w.statusText});return}const _=await w.json();d({loading:!1,data:_,error:null,status:w.status,statusText:w.statusText})}catch(h){console.error("API test error:",h),d({loading:!1,data:null,error:h instanceof Error?h.message:String(h),status:"Error",statusText:"Request failed"})}},y=()=>{const S=document.cookie;console.log("Document cookies:",S);const h=S.split(";").find(g=>g.trim().startsWith("connect.sid="));eg({title:"Cookie Check",description:S?`Cookies found: ${S.length} chars. Session cookie: ${h?"Found":"Missing"}`:"No cookies found."})};return i.jsxs("div",{className:"container py-10 max-w-4xl mx-auto",children:[i.jsx("h1",{className:"text-3xl font-bold mb-8",children:"Authentication Test Page"}),i.jsxs("div",{className:"grid gap-6 mb-8 grid-cols-1 md:grid-cols-2",children:[i.jsxs(Re,{children:[i.jsxs(Ye,{children:[i.jsx(He,{children:"Authentication State"}),i.jsx(kt,{children:"Current authentication status"})]}),i.jsx(Ae,{children:t?i.jsx("div",{className:"flex justify-center p-4",children:i.jsx(Kt,{size:"lg"})}):i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold mb-1",children:"Status:"}),i.jsx("div",{className:`px-3 py-1 rounded-full inline-block ${e?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:e?"Authenticated":"Not Authenticated"})]}),e&&i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold",children:"Username:"}),i.jsx("div",{children:e.username})]}),i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold",children:"Display Name:"}),i.jsx("div",{children:e.displayName})]}),i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold",children:"User ID:"}),i.jsx("div",{children:e.id})]})]})]})}),i.jsxs(nr,{className:"flex justify-between",children:[i.jsx(te,{onClick:v,variant:"outline",children:"Refetch User Data"}),i.jsx(te,{onClick:y,variant:"outline",children:"Check Cookies"})]})]}),i.jsxs(Re,{children:[i.jsxs(Ye,{children:[i.jsx(He,{children:"Authentication Actions"}),i.jsx(kt,{children:"Log in or out to test authentication"})]}),i.jsx(Ae,{children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(Nt,{htmlFor:"username",children:"Username"}),i.jsx(vt,{id:"username",value:o,onChange:S=>a(S.target.value)})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Nt,{htmlFor:"password",children:"Password"}),i.jsx(vt,{id:"password",type:"password",value:l,onChange:S=>c(S.target.value)})]})]})}),i.jsxs(nr,{className:"flex justify-between",children:[i.jsxs(te,{onClick:f,disabled:r.isPending,children:[r.isPending?i.jsx(Kt,{size:"sm",className:"mr-2"}):null,"Log In"]}),i.jsxs(te,{onClick:p,variant:"outline",disabled:n.isPending,children:[n.isPending?i.jsx(Kt,{size:"sm",className:"mr-2"}):null,"Log Out"]})]})]})]}),i.jsxs(Re,{className:"mb-8",children:[i.jsxs(Ye,{children:[i.jsx(He,{children:"API Endpoint Tests"}),i.jsx(kt,{children:"Test various API endpoints"})]}),i.jsx(Ae,{children:i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:[i.jsx(te,{onClick:()=>j("/api/user"),variant:"outline",children:"Test /api/user"}),i.jsx(te,{onClick:()=>j("/api/user-settings/1"),variant:"outline",children:"Test /api/user-settings/1"}),i.jsx(te,{onClick:()=>j("/api/posts"),variant:"outline",children:"Test /api/posts"}),i.jsx(te,{onClick:()=>j("/api/streams"),variant:"outline",children:"Test /api/streams"})]})})]}),u&&i.jsxs(Re,{children:[i.jsxs(Ye,{children:[i.jsx(He,{children:"API Response"}),i.jsxs(kt,{children:["Status: ",u.loading?"Loading...":`${u.status} ${u.statusText}`]})]}),i.jsx(Ae,{children:u.loading?i.jsx("div",{className:"flex justify-center p-4",children:i.jsx(Kt,{size:"lg"})}):u.error?i.jsxs("div",{className:"p-4 bg-red-50 text-red-700 rounded-md overflow-auto",children:[i.jsx("h3",{className:"font-bold mb-2",children:"Error:"}),i.jsx("pre",{className:"whitespace-pre-wrap",children:u.error})]}):i.jsx("div",{className:"bg-slate-50 p-4 rounded-md overflow-auto max-h-80",children:i.jsx("pre",{className:"whitespace-pre-wrap",children:JSON.stringify(u.data,null,2)})})})]})]})}const Yq=dt.object({title:dt.string().min(1,"Title is required"),artistName:dt.string().min(1,"Artist name is required"),genre:dt.string().optional(),audioFile:dt.instanceof(File,{message:"Audio file is required"}),coverFile:dt.instanceof(File).optional()});function Ab(){const{toast:e}=pr(),{user:t}=or(),[,r]=Nn(),n=Ys(),[s,o]=m.useState(null),[a,l]=m.useState(null),{data:c=[],isLoading:u}=pt({queryKey:["/api/genres"],refetchOnWindowFocus:!1}),d=vf({resolver:If(Yq),defaultValues:{title:"",artistName:(t==null?void 0:t.displayName)||"",genre:""}}),f=fr({mutationFn:async g=>{const w=new FormData;w.append("audio",g);const _=await fetch("/api/uploads/audio",{method:"POST",body:w});if(!_.ok)throw new Error("Failed to upload audio file");return await _.json()}}),p=fr({mutationFn:async g=>{const w=new FormData;w.append("image",g);const _=await fetch("/api/upload/image",{method:"POST",body:w});if(!_.ok)throw new Error("Failed to upload cover image");return await _.json()}}),v=fr({mutationFn:async g=>await st("POST","/api/tracks",g),onSuccess:()=>{n.invalidateQueries({queryKey:["/api/tracks/recent"]}),n.invalidateQueries({queryKey:[`/api/tracks/user/${t==null?void 0:t.id}`]}),e({title:"Track uploaded successfully!",description:"Your track is now available for listeners."}),r("/library")},onError:g=>{e({title:"Failed to create track",description:g.message,variant:"destructive"})}}),j=async g=>{if(!t){e({title:"Authentication required",description:"Please log in to upload tracks",variant:"destructive"});return}try{const w=await f.mutateAsync(g.audioFile);let _=null;g.coverFile&&(_=(await p.mutateAsync(g.coverFile)).url),await v.mutateAsync({userId:t.id,title:g.title,artistName:g.artistName,genre:g.genre==="none"?null:g.genre,audioUrl:w.url,coverUrl:_,duration:w.duration})}catch(w){console.error("Error in track upload process:",w)}},y=g=>{var _;const w=(_=g.target.files)==null?void 0:_[0];if(w){d.setValue("audioFile",w);const E=URL.createObjectURL(w);return o(E),()=>URL.revokeObjectURL(E)}},S=g=>{var _;const w=(_=g.target.files)==null?void 0:_[0];if(w){d.setValue("coverFile",w);const E=URL.createObjectURL(w);return l(E),()=>URL.revokeObjectURL(E)}},h=f.isPending||p.isPending||v.isPending;return i.jsxs("div",{className:"container py-10",children:[i.jsxs("div",{className:"mb-8 space-y-2",children:[i.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Upload Track"}),i.jsx("p",{className:"text-muted-foreground",children:"Share your music with the BeatStream community"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[i.jsx("div",{className:"md:col-span-2",children:i.jsx(wf,{...d,children:i.jsxs("form",{onSubmit:d.handleSubmit(j),className:"space-y-6",children:[i.jsx(Ar,{control:d.control,name:"title",render:({field:g})=>i.jsxs(wr,{children:[i.jsx(br,{children:"Track Title"}),i.jsx(Sr,{children:i.jsx(vt,{placeholder:"Enter track title",...g})}),i.jsx(jr,{})]})}),i.jsx(Ar,{control:d.control,name:"artistName",render:({field:g})=>i.jsxs(wr,{children:[i.jsx(br,{children:"Artist Name"}),i.jsx(Sr,{children:i.jsx(vt,{placeholder:"Enter artist name",...g})}),i.jsx(jr,{})]})}),i.jsx(Ar,{control:d.control,name:"genre",render:({field:g})=>i.jsxs(wr,{children:[i.jsx(br,{children:"Genre"}),i.jsxs(uo,{value:g.value,onValueChange:g.onChange,children:[i.jsx(Sr,{children:i.jsx(Ni,{children:i.jsx(fo,{placeholder:"Select a genre"})})}),i.jsx(_i,{children:u?i.jsx(tr,{value:"loading",disabled:!0,children:"Loading genres..."}):i.jsxs(i.Fragment,{children:[i.jsx(tr,{value:"none",children:"None"}),c.map(w=>i.jsx(tr,{value:w.name,children:w.name},w.id))]})})]}),i.jsx(jr,{})]})}),i.jsx(Ar,{control:d.control,name:"audioFile",render:()=>i.jsxs(wr,{children:[i.jsx(br,{className:"text-base font-medium",children:"Audio File"}),i.jsx(Sr,{children:i.jsx("div",{className:"flex items-center justify-center w-full",children:i.jsxs("label",{htmlFor:"audio-upload",className:"flex flex-col items-center justify-center w-full h-40 border-2 border-dashed rounded-lg cursor-pointer bg-gray-50/5 hover:bg-gray-100/10 dark:border-gray-600/40 dark:hover:border-purple-500/50 transition-all duration-300 backdrop-blur-sm group",children:[i.jsxs("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[i.jsx("div",{className:"w-16 h-16 mb-3 rounded-full bg-gradient-to-br from-purple-500/20 to-pink-500/20 flex items-center justify-center group-hover:from-purple-500/30 group-hover:to-pink-500/30 transition-all duration-300",children:i.jsx(Nr,{className:"w-8 h-8 text-purple-400 group-hover:text-purple-300 transition-colors"})}),i.jsxs("p",{className:"mb-2 text-base text-gray-400 group-hover:text-gray-300 transition-colors",children:[i.jsx("span",{className:"font-semibold",children:"Click to upload"})," or drag and drop"]}),i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 group-hover:text-gray-300 transition-colors",children:"MP3, WAV, FLAC or OGG (MAX. 50MB)"})]}),i.jsx("input",{id:"audio-upload",type:"file",className:"hidden",accept:".mp3,.wav,.flac,.ogg",onChange:y})]})})}),i.jsx(jr,{})]})}),i.jsx(Ar,{control:d.control,name:"coverFile",render:()=>i.jsxs(wr,{children:[i.jsx(br,{children:"Cover Image (Optional)"}),i.jsx(Sr,{children:i.jsx("div",{className:"flex items-center justify-center w-full",children:i.jsxs("label",{htmlFor:"cover-upload",className:"flex flex-col items-center justify-center w-full h-32 border-2 border-dashed rounded-lg cursor-pointer bg-gray-50 dark:hover:bg-bray-800 dark:bg-gray-900 hover:bg-gray-100 dark:border-gray-600 dark:hover:border-gray-500 dark:hover:bg-gray-700",children:[i.jsxs("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[i.jsx(lx,{className:"w-8 h-8 mb-3 text-gray-400"}),i.jsxs("p",{className:"mb-2 text-sm text-gray-500 dark:text-gray-400",children:[i.jsx("span",{className:"font-semibold",children:"Click to upload"})," or drag and drop"]}),i.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"JPG, PNG, WebP or GIF (MAX. 5MB)"})]}),i.jsx("input",{id:"cover-upload",type:"file",className:"hidden",accept:"image/*",onChange:S})]})})}),i.jsx(jr,{})]})}),i.jsx(te,{type:"submit",className:"w-full",disabled:h,children:h?i.jsxs(i.Fragment,{children:[i.jsx(gs,{className:"mr-2 h-4 w-4 animate-spin"}),"Uploading..."]}):i.jsxs(i.Fragment,{children:[i.jsx(B2,{className:"mr-2 h-4 w-4"}),"Upload Track"]})})]})})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-medium mb-4",children:"Track Preview"}),i.jsxs(Re,{className:"overflow-hidden",children:[i.jsx("div",{className:"aspect-square bg-gray-100 dark:bg-gray-800 flex items-center justify-center",children:a?i.jsx("img",{src:a,alt:"Cover preview",className:"w-full h-full object-cover"}):i.jsx(Nr,{className:"h-20 w-20 text-gray-400"})}),i.jsxs(Ae,{className:"p-4",children:[i.jsx("h4",{className:"font-semibold text-lg truncate",children:d.watch("title")||"Track Title"}),i.jsx("p",{className:"text-sm text-muted-foreground truncate",children:d.watch("artistName")||"Artist Name"}),s&&i.jsx("div",{className:"mt-4",children:i.jsx("audio",{src:s,controls:!0,className:"w-full"})})]})]})]})]})]})}function Zq(){const{user:e}=or(),[t,r]=m.useState("overview"),{data:n=[]}=pt({queryKey:["/api/tracks/user",e==null?void 0:e.id],queryFn:()=>nE(e==null?void 0:e.id),enabled:!!(e!=null&&e.id)}),{data:s=[]}=pt({queryKey:["/api/streams/user",e==null?void 0:e.id],queryFn:()=>gx(e==null?void 0:e.id),enabled:!!(e!=null&&e.id)}),{data:o=[]}=pt({queryKey:["/api/posts/user",e==null?void 0:e.id],queryFn:()=>tE(e==null?void 0:e.id),enabled:!!(e!=null&&e.id)}),a=n.length,l=s.length,c=o.length,u=n.reduce((h,g)=>h+(g.playCount||0),0),d=s.reduce((h,g)=>h+(g.viewerCount||0),0),f=(e==null?void 0:e.followerCount)||0,p=()=>{const h=s.filter(I=>I.startedAt&&I.endedAt&&!I.isLive);if(h.length===0)return"N/A";const w=h.reduce((I,P)=>{const M=new Date(P.startedAt||0).getTime(),F=new Date(P.endedAt||0).getTime();return I+(F-M)},0)/h.length,_=Math.floor(w/(1e3*60*60)),E=Math.floor(w%(1e3*60*60)/(1e3*60));return _>0?`${_}h ${E}m`:`${E}m`},v=s.filter(h=>h.isLive),j=[...n].sort((h,g)=>new Date(g.uploadedAt||0).getTime()-new Date(h.uploadedAt||0).getTime()).slice(0,4),y=[...s].sort((h,g)=>new Date(g.startedAt||0).getTime()-new Date(h.startedAt||0).getTime()).slice(0,3),S=[...o].sort((h,g)=>new Date(g.createdAt||0).getTime()-new Date(h.createdAt||0).getTime()).slice(0,3);return i.jsxs("div",{className:"container mx-auto py-8 px-4",children:[i.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-8",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Creator Dashboard"}),i.jsx("p",{className:"text-muted-foreground",children:"Manage your content, view analytics, and grow your audience"})]}),i.jsxs("div",{className:"flex space-x-3 mt-4 md:mt-0",children:[i.jsx(te,{asChild:!0,variant:"outline",children:i.jsx(Oe,{href:"/upload-track",children:"Upload Track"})}),i.jsx(te,{asChild:!0,children:i.jsx(Oe,{href:"/go-live",children:"Go Live"})})]})]}),i.jsxs(Cn,{value:t,onValueChange:r,className:"w-full",children:[i.jsxs(cn,{className:"grid grid-cols-4 w-full max-w-2xl",children:[i.jsx(rt,{value:"overview",children:"Overview"}),i.jsx(rt,{value:"content",children:"Content"}),i.jsx(rt,{value:"streams",children:"Streams"}),i.jsx(rt,{value:"analytics",children:"Analytics"})]}),i.jsxs(nt,{value:"overview",className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[i.jsxs(Re,{children:[i.jsxs(Ye,{className:"flex flex-row items-center justify-between pb-2",children:[i.jsx(He,{className:"text-sm font-medium",children:"Total Tracks"}),i.jsx(Nr,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsxs(Ae,{children:[i.jsx("div",{className:"text-2xl font-bold",children:a}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:[u.toLocaleString()," total plays"]})]})]}),i.jsxs(Re,{children:[i.jsxs(Ye,{className:"flex flex-row items-center justify-between pb-2",children:[i.jsx(He,{className:"text-sm font-medium",children:"Total Streams"}),i.jsx(us,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsxs(Ae,{children:[i.jsx("div",{className:"text-2xl font-bold",children:l}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:[d.toLocaleString()," total viewers"]})]})]}),i.jsxs(Re,{children:[i.jsxs(Ye,{className:"flex flex-row items-center justify-between pb-2",children:[i.jsx(He,{className:"text-sm font-medium",children:"Total Posts"}),i.jsx(ac,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsxs(Ae,{children:[i.jsx("div",{className:"text-2xl font-bold",children:c}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Content updates & announcements"})]})]}),i.jsxs(Re,{children:[i.jsxs(Ye,{className:"flex flex-row items-center justify-between pb-2",children:[i.jsx(He,{className:"text-sm font-medium",children:"Followers"}),i.jsx(ds,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsxs(Ae,{children:[i.jsx("div",{className:"text-2xl font-bold",children:f.toLocaleString()}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Growing your audience"})]})]})]}),v.length>0&&i.jsxs("div",{className:"mt-8",children:[i.jsxs("div",{className:"flex items-center mb-4",children:[i.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full animate-pulse mr-2"}),i.jsx("h2",{className:"text-xl font-bold",children:"You're Live"})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:v.map(h=>i.jsx(Di,{stream:h},h.id))})]}),i.jsxs("div",{className:"mt-8",children:[i.jsx("h2",{className:"text-xl font-bold mb-4",children:"Recent Activity"}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[i.jsxs(Re,{className:"col-span-1",children:[i.jsx(Ye,{children:i.jsxs(He,{className:"flex items-center",children:[i.jsx(Nr,{className:"h-5 w-5 mr-2"}),"Recent Tracks"]})}),i.jsxs(Ae,{className:"space-y-4",children:[j.length>0?i.jsx("div",{className:"space-y-4",children:j.slice(0,3).map(h=>i.jsxs("div",{className:"flex items-center gap-3",children:[h.coverUrl&&i.jsx("img",{src:h.coverUrl,alt:h.title,className:"h-10 w-10 rounded-md object-cover"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium line-clamp-1",children:h.title}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:[h.playCount," plays"]})]})]},h.id))}):i.jsx("p",{className:"text-muted-foreground text-sm",children:"No tracks uploaded yet"}),i.jsx(te,{variant:"ghost",size:"sm",asChild:!0,className:"w-full",children:i.jsx(Oe,{href:"/upload-track",children:"Upload New Track"})})]})]}),i.jsxs(Re,{className:"col-span-1",children:[i.jsx(Ye,{children:i.jsxs(He,{className:"flex items-center",children:[i.jsx(us,{className:"h-5 w-5 mr-2"}),"Recent Streams"]})}),i.jsxs(Ae,{className:"space-y-4",children:[y.length>0?i.jsx("div",{className:"space-y-4",children:y.map(h=>i.jsxs("div",{className:"flex items-start gap-3",children:[h.thumbnailUrl&&i.jsx("img",{src:h.thumbnailUrl,alt:h.title,className:"h-10 w-16 rounded-md object-cover"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium line-clamp-1",children:h.title}),i.jsx("p",{className:"text-xs text-muted-foreground",children:h.isLive?i.jsxs("span",{className:"text-red-500",children:["Live now  ",h.viewerCount," viewers"]}):i.jsxs("span",{children:["Ended  ",new Date(h.startedAt||0).toLocaleDateString()]})})]})]},h.id))}):i.jsx("p",{className:"text-muted-foreground text-sm",children:"No streams yet"}),i.jsx(te,{variant:"ghost",size:"sm",asChild:!0,className:"w-full",children:i.jsx(Oe,{href:"/go-live",children:"Go Live"})})]})]}),i.jsxs(Re,{className:"col-span-1",children:[i.jsx(Ye,{children:i.jsxs(He,{className:"flex items-center",children:[i.jsx(ac,{className:"h-5 w-5 mr-2"}),"Recent Posts"]})}),i.jsx(Ae,{className:"space-y-4",children:S.length>0?i.jsx("div",{className:"space-y-4",children:S.map(h=>{var g;return i.jsxs("div",{className:"space-y-1",children:[i.jsx("p",{className:"font-medium line-clamp-1",children:h.title}),i.jsx("p",{className:"text-xs text-muted-foreground line-clamp-2",children:h.content}),i.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:(g=h.tags)==null?void 0:g.slice(0,2).map((w,_)=>i.jsx("span",{className:"text-xs bg-muted px-1.5 py-0.5 rounded",children:w},_))})]},h.id)})}):i.jsx("p",{className:"text-muted-foreground text-sm",children:"No posts yet"})})]})]})]})]}),i.jsxs(nt,{value:"content",className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Your Tracks"}),i.jsx(te,{asChild:!0,variant:"outline",children:i.jsx(Oe,{href:"/upload-track",children:"Upload New Track"})})]}),n.length>0?i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:n.map(h=>i.jsx(zi,{track:h,showBadge:!0},h.id))}):i.jsx(Re,{className:"bg-muted/40",children:i.jsxs(Ae,{className:"pt-6 text-center",children:[i.jsx(Nr,{className:"mx-auto h-10 w-10 text-muted-foreground mb-3"}),i.jsx(He,{className:"mb-2",children:"No tracks yet"}),i.jsx(kt,{className:"mb-4",children:"Upload your first track to start building your library"}),i.jsx(te,{asChild:!0,children:i.jsx(Oe,{href:"/upload-track",children:"Upload Track"})})]})}),i.jsxs("div",{className:"mt-12",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Your Posts"}),i.jsx(te,{variant:"outline",children:"Create New Post"})]}),o.length>0?i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:o.map(h=>i.jsx(lc,{post:{...h,user:{displayName:(e==null?void 0:e.displayName)||"",profileImageUrl:e==null?void 0:e.profileImageUrl}}},h.id))}):i.jsx(Re,{className:"bg-muted/40",children:i.jsxs(Ae,{className:"pt-6 text-center",children:[i.jsx(ac,{className:"mx-auto h-10 w-10 text-muted-foreground mb-3"}),i.jsx(He,{className:"mb-2",children:"No posts yet"}),i.jsx(kt,{className:"mb-4",children:"Create your first post to share updates with your fans"}),i.jsx(te,{children:"Create Post"})]})})]})]}),i.jsxs(nt,{value:"streams",className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Your Streams"}),i.jsx(te,{asChild:!0,children:i.jsx(Oe,{href:"/go-live",children:"Go Live Now"})})]}),v.length>0&&i.jsxs("div",{className:"mb-8",children:[i.jsxs("div",{className:"flex items-center mb-4",children:[i.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full animate-pulse mr-2"}),i.jsx("h3",{className:"text-xl font-medium",children:"Live Now"})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:v.map(h=>i.jsx(Di,{stream:h},h.id))})]}),i.jsx("h3",{className:"text-xl font-medium mb-4",children:"Past Streams"}),s.filter(h=>!h.isLive).length>0?i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.filter(h=>!h.isLive).map(h=>i.jsx(Di,{stream:h},h.id))}):i.jsx(Re,{className:"bg-muted/40",children:i.jsxs(Ae,{className:"pt-6 text-center",children:[i.jsx(us,{className:"mx-auto h-10 w-10 text-muted-foreground mb-3"}),i.jsx(He,{className:"mb-2",children:"No previous streams"}),i.jsx(kt,{className:"mb-4",children:"Start your first live stream to connect with your audience"}),i.jsx(te,{asChild:!0,children:i.jsx(Oe,{href:"/go-live",children:"Go Live"})})]})})]}),i.jsxs(nt,{value:"analytics",className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[i.jsxs(Re,{children:[i.jsxs(Ye,{className:"flex flex-row items-center justify-between pb-2",children:[i.jsx(He,{className:"text-sm font-medium",children:"Total Plays"}),i.jsx(GL,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsxs(Ae,{children:[i.jsx("div",{className:"text-2xl font-bold",children:u.toLocaleString()}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Across all tracks"})]})]}),i.jsxs(Re,{children:[i.jsxs(Ye,{className:"flex flex-row items-center justify-between pb-2",children:[i.jsx(He,{className:"text-sm font-medium",children:"Stream Viewers"}),i.jsx(ds,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsxs(Ae,{children:[i.jsx("div",{className:"text-2xl font-bold",children:d.toLocaleString()}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Across all streams"})]})]}),i.jsxs(Re,{children:[i.jsxs(Ye,{className:"flex flex-row items-center justify-between pb-2",children:[i.jsx(He,{className:"text-sm font-medium",children:"Followers"}),i.jsx(ds,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsxs(Ae,{children:[i.jsx("div",{className:"text-2xl font-bold",children:f.toLocaleString()}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Total followers"})]})]}),i.jsxs(Re,{children:[i.jsxs(Ye,{className:"flex flex-row items-center justify-between pb-2",children:[i.jsx(He,{className:"text-sm font-medium",children:"Avg. Stream Length"}),i.jsx(L2,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsxs(Ae,{children:[i.jsx("div",{className:"text-2xl font-bold",children:p()}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Per stream"})]})]})]}),i.jsxs("div",{className:"mt-8 grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs(Re,{children:[i.jsxs(Ye,{children:[i.jsx(He,{children:"Top Performing Tracks"}),i.jsx(kt,{children:"Tracks with the highest play counts"})]}),i.jsx(Ae,{children:n.length>0?i.jsx("div",{className:"space-y-4",children:[...n].sort((h,g)=>(g.playCount||0)-(h.playCount||0)).slice(0,5).map((h,g)=>{var w;return i.jsxs("div",{className:"flex items-center justify-between py-2 border-b last:border-0",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("span",{className:"text-sm font-medium text-muted-foreground w-6",children:g+1}),h.coverUrl&&i.jsx("img",{src:h.coverUrl,alt:h.title,className:"h-10 w-10 rounded-md object-cover"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium line-clamp-1",children:h.title}),i.jsx("p",{className:"text-xs text-muted-foreground",children:h.genre||"Unknown genre"})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"font-medium",children:((w=h.playCount)==null?void 0:w.toLocaleString())||0}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"plays"})]})]},h.id)})}):i.jsx("p",{className:"text-muted-foreground text-sm text-center py-8",children:"Upload tracks to see performance analytics"})})]}),i.jsxs(Re,{children:[i.jsxs(Ye,{children:[i.jsx(He,{children:"Popular Streams"}),i.jsx(kt,{children:"Streams with the highest view counts"})]}),i.jsx(Ae,{children:s.length>0?i.jsx("div",{className:"space-y-4",children:[...s].sort((h,g)=>(g.viewerCount||0)-(h.viewerCount||0)).slice(0,5).map((h,g)=>{var w;return i.jsxs("div",{className:"flex items-center justify-between py-2 border-b last:border-0",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("span",{className:"text-sm font-medium text-muted-foreground w-6",children:g+1}),h.thumbnailUrl&&i.jsx("img",{src:h.thumbnailUrl,alt:h.title,className:"h-10 w-16 rounded-md object-cover"}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium line-clamp-1",children:h.title}),i.jsx("p",{className:"text-xs text-muted-foreground",children:h.isLive?i.jsx("span",{className:"text-red-500",children:"Live now"}):i.jsx("span",{children:new Date(h.startedAt||0).toLocaleDateString()})})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"font-medium",children:((w=h.viewerCount)==null?void 0:w.toLocaleString())||0}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"viewers"})]})]},h.id)})}):i.jsx("p",{className:"text-muted-foreground text-sm text-center py-8",children:"Start streaming to see performance analytics"})})]})]})]})]})]})}const Xq=cu("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Qg=m.forwardRef(({className:e,variant:t,...r},n)=>i.jsx("div",{ref:n,role:"alert",className:we(Xq({variant:t}),e),...r}));Qg.displayName="Alert";const Yg=m.forwardRef(({className:e,...t},r)=>i.jsx("h5",{ref:r,className:we("mb-1 font-medium leading-none tracking-tight",e),...t}));Yg.displayName="AlertTitle";const Zg=m.forwardRef(({className:e,...t},r)=>i.jsx("div",{ref:r,className:we("text-sm [&_p]:leading-relaxed",e),...t}));Zg.displayName="AlertDescription";function wv(e){const{endpoint:t,queryParams:r={}}=e,n=window.location.protocol==="https:"?"wss:":"ws:",s=Object.entries(r).map(([u,d])=>`${u}=${encodeURIComponent(d)}`).join("&");let o=window.location.host;const a=window.location.hostname.includes(".replit.dev")||window.location.hostname.includes(".repl.co")||window.location.hostname.includes(".replit.app")||window.location.hostname.includes(".kirk.replit.dev");if(console.log("WebSocket Environment:",{isReplit:a,hostname:window.location.hostname,protocol:n,host:o}),t==="/__vite_hmr"||t.includes("vite-hmr"))return console.log("Using Vite HMR connection - letting replitHostFixer handle this"),`${n}//${o}${t}${s?`?${s}`:""}`;a&&(o=`${window.location.hostname.split(":")[0]}:5000`,console.log("Using fixed Replit host:",o));const l=`${n}//${o}${t}${s?`?${s}`:""}`,c=l.replace(/streamKey=([^&]+)/,"streamKey=****");return console.log(`WebSocket URL: ${c}`),l}function Jq(e){const{timeout:t=1e4}=e,r=wv(e);let n=null,s=null;try{n=new WebSocket(r),console.log("WebSocket instance created"),s=window.setTimeout(()=>{n&&n.readyState!==WebSocket.OPEN&&(console.error("WebSocket connection timeout"),n.close())},t),n.addEventListener("open",()=>{s!==null&&(window.clearTimeout(s),s=null),console.log("WebSocket connection established")})}catch(o){console.error("Error creating WebSocket:",o)}return{socket:n,cleanup:()=>{s!==null&&window.clearTimeout(s),n&&n.readyState!==WebSocket.CLOSED&&n.close()}}}const eH=Object.freeze(Object.defineProperty({__proto__:null,createWebSocket:Jq,getWebSocketUrl:wv},Symbol.toStringTag,{value:"Module"}));function tH(){const[e,t]=m.useState("disconnected"),[r,n]=m.useState(null),[s,o]=m.useState([]),[a,l]=m.useState(null),c=m.useRef(null),[u,d]=m.useState(0),f=()=>{c.current&&(c.current.close(),c.current=null),t("connecting"),n(null),o([]);try{const y=wv({endpoint:"/ws"});console.log("Attempting WebSocket connection to:",y);const S=new WebSocket(y);c.current=S,l({url:y,readyState:S.readyState}),S.addEventListener("open",()=>{console.log("WebSocket connection established"),t("connected"),o(h=>[...h,"Connection established"]),l(h=>h&&{...h,readyState:S.readyState}),S.send(JSON.stringify({type:"test",message:"Hello from client"}))}),S.addEventListener("message",h=>{console.log("WebSocket message received:",h.data),o(g=>[...g,`Received: ${h.data}`])}),S.addEventListener("error",h=>{console.error("WebSocket error:",h),t("error"),n("WebSocket connection error (see console for details)"),l(g=>g&&{...g,readyState:S.readyState})}),S.addEventListener("close",h=>{console.log("WebSocket connection closed:",h.code,h.reason),t("disconnected"),o(g=>[...g,`Connection closed: ${h.code} ${h.reason||""}`]),l(g=>g&&{...g,readyState:S.readyState})})}catch(y){console.error("Error setting up WebSocket:",y),t("error"),n(`Error setting up WebSocket: ${y instanceof Error?y.message:String(y)}`)}},p=()=>{c.current&&(c.current.close(),c.current=null,t("disconnected"),o(y=>[...y,"Manually disconnected"]))},v=()=>{if(c.current&&c.current.readyState===WebSocket.OPEN){const y=JSON.stringify({type:"ping",timestamp:new Date().toISOString()});c.current.send(y),o(S=>[...S,`Sent: ${y}`])}else n("Cannot send message: Socket not connected")},j=()=>{d(y=>y+1)};return m.useEffect(()=>(f(),()=>{c.current&&(c.current.close(),c.current=null)}),[u]),m.useEffect(()=>{const y=setInterval(()=>{c.current&&l(S=>{var h;return S&&{...S,readyState:((h=c.current)==null?void 0:h.readyState)||-1}})},1e3);return()=>clearInterval(y)},[]),i.jsxs(Re,{className:"w-full mb-6",children:[i.jsxs(Ye,{children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx(He,{children:"WebSocket Connection Test"}),i.jsx(Ct,{variant:e==="connected"?"default":e==="connecting"?"outline":e==="error"?"destructive":"secondary",children:e.toUpperCase()})]}),i.jsx(kt,{children:"Tests WebSocket connectivity between client and server"})]}),i.jsxs(Ae,{children:[i.jsxs("div",{className:"mb-4",children:[i.jsx("h3",{className:"text-sm font-medium mb-2",children:"Connection Details"}),a?i.jsxs("div",{className:"text-sm grid grid-cols-2 gap-2",children:[i.jsx("div",{className:"font-medium",children:"URL:"}),i.jsx("div",{className:"font-mono text-xs break-all",children:a.url}),i.jsx("div",{className:"font-medium",children:"Ready State:"}),i.jsxs("div",{children:[a.readyState===0&&"CONNECTING",a.readyState===1&&"OPEN",a.readyState===2&&"CLOSING",a.readyState===3&&"CLOSED",a.readyState===-1&&"UNKNOWN"," ","(",a.readyState,")"]})]}):i.jsx("p",{className:"text-sm text-gray-500",children:"No connection information available"})]}),r&&i.jsxs(Qg,{variant:"destructive",className:"mb-4",children:[i.jsx(ax,{className:"h-4 w-4"}),i.jsx(Yg,{children:"Error"}),i.jsx(Zg,{children:r})]}),e==="connected"&&i.jsxs(Qg,{variant:"default",className:"mb-4 bg-green-50 text-green-800 border-green-200",children:[i.jsx(gd,{className:"h-4 w-4"}),i.jsx(Yg,{children:"Connected"}),i.jsx(Zg,{children:"WebSocket connection established successfully"})]}),i.jsxs("div",{className:"mt-4",children:[i.jsx("h3",{className:"text-sm font-medium mb-2",children:"Message Log"}),i.jsx("div",{className:"bg-gray-50 dark:bg-gray-800 p-3 rounded-md h-32 overflow-y-auto font-mono text-xs",children:s.length===0?i.jsx("p",{className:"text-gray-500",children:"No messages"}):s.map((y,S)=>i.jsxs("div",{className:"mb-1",children:[i.jsxs("span",{className:"opacity-50",children:["[",new Date().toLocaleTimeString(),"]"]})," ",y]},S))})]})]}),i.jsxs(nr,{className:"flex justify-between gap-2 flex-wrap",children:[i.jsxs("div",{className:"space-x-2",children:[i.jsx(te,{variant:"outline",size:"sm",onClick:f,disabled:e==="connecting"||e==="connected",children:"Connect"}),i.jsx(te,{variant:"outline",size:"sm",onClick:p,disabled:e!=="connected",children:"Disconnect"}),i.jsx(te,{variant:"outline",size:"sm",onClick:v,disabled:e!=="connected",children:"Send Test Message"})]}),i.jsxs(te,{variant:"ghost",size:"sm",onClick:j,className:"flex items-center gap-1",children:[i.jsx(BL,{className:"h-4 w-4"}),"Restart"]})]})]})}function rH(){const[e,t]=m.useState(null),[r,n]=m.useState(null),[s,o]=m.useState(!1),[a,l]=m.useState(!1),[c,u]=m.useState(null),[d,f]=m.useState(!1),[p,v]=m.useState(null),j=async()=>{o(!0),v(null);try{const g=await(await fetch("/api/health")).json();t(g)}catch(h){v(`Error fetching basic health: ${h instanceof Error?h.message:String(h)}`),console.error("Error fetching basic health:",h)}finally{o(!1)}},y=async()=>{l(!0),v(null);try{const g=await(await fetch("/api/health/detailed")).json();n(g)}catch(h){v(`Error fetching detailed health: ${h instanceof Error?h.message:String(h)}`),console.error("Error fetching detailed health:",h)}finally{l(!1)}},S=async()=>{f(!0),v(null);try{const g=await(await fetch("/api/health-check")).json();u(g)}catch(h){v(`Error fetching direct health check: ${h instanceof Error?h.message:String(h)}`),console.error("Error fetching direct health check:",h)}finally{f(!1)}};return m.useEffect(()=>{j(),y(),S()},[]),i.jsx("div",{className:"min-h-screen w-full p-6 bg-gray-50 dark:bg-gray-900",children:i.jsxs(Re,{className:"w-full max-w-4xl mx-auto",children:[i.jsx(Ye,{children:i.jsx(He,{className:"text-2xl font-bold",children:"Traxx Health Status"})}),i.jsxs(Ae,{children:[p&&i.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-md flex items-start gap-3",children:[i.jsx(ax,{className:"h-5 w-5 text-red-500 mt-0.5"}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-medium text-red-800",children:"Error"}),i.jsx("p",{className:"text-sm text-red-600",children:p})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[i.jsxs("div",{className:"col-span-1",children:[i.jsxs("h2",{className:"text-lg font-semibold mb-2 flex items-center gap-2",children:["Basic Health",i.jsx(te,{variant:"outline",size:"sm",onClick:j,disabled:s,className:"ml-auto",children:s?"Loading...":"Refresh"})]}),e?i.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-md",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx("div",{className:`w-3 h-3 rounded-full ${e.status==="ok"?"bg-green-500":"bg-red-500"}`}),i.jsx("span",{className:"font-medium",children:e.status==="ok"?"Healthy":"Unhealthy"})]}),e.timestamp&&i.jsxs("div",{className:"mt-2 text-sm",children:[i.jsx("span",{className:"text-gray-500",children:"Last updated:"}),i.jsx("span",{className:"ml-2",children:new Date(e.timestamp).toLocaleString()})]}),e.version&&i.jsxs("div",{className:"mt-1 text-sm",children:[i.jsx("span",{className:"text-gray-500",children:"Version:"}),i.jsx("span",{className:"ml-2",children:e.version})]}),e.environment&&i.jsxs("div",{className:"mt-1 text-sm",children:[i.jsx("span",{className:"text-gray-500",children:"Environment:"}),i.jsx("span",{className:"ml-2",children:e.environment})]}),e.uptime!==void 0&&i.jsxs("div",{className:"mt-1 text-sm",children:[i.jsx("span",{className:"text-gray-500",children:"Uptime:"}),i.jsxs("span",{className:"ml-2",children:[Math.floor(e.uptime/60)," min ",Math.floor(e.uptime%60)," sec"]})]}),e.database&&i.jsxs("div",{className:"mt-1 text-sm",children:[i.jsx("span",{className:"text-gray-500",children:"Database:"}),i.jsx("span",{className:"ml-2",children:e.database})]})]}):s?i.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-md animate-pulse",children:[i.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded mb-2 w-1/2"}),i.jsx("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded mb-2 w-full"}),i.jsx("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded mb-2 w-3/4"}),i.jsx("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded mb-2 w-1/2"})]}):i.jsx("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-md",children:i.jsx("p",{className:"text-gray-500 italic",children:"No data available"})})]}),i.jsxs("div",{className:"col-span-1",children:[i.jsxs("h2",{className:"text-lg font-semibold mb-2 flex items-center gap-2",children:["Detailed Health",i.jsx(te,{variant:"outline",size:"sm",onClick:y,disabled:a,className:"ml-auto",children:a?"Loading...":"Refresh"})]}),r?i.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-md",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx("div",{className:`w-3 h-3 rounded-full ${r.status==="healthy"?"bg-green-500":r.status==="degraded"?"bg-yellow-500":"bg-red-500"}`}),i.jsx("span",{className:"font-medium capitalize",children:r.status})]}),r.timestamp&&i.jsxs("div",{className:"mt-2 text-sm",children:[i.jsx("span",{className:"text-gray-500",children:"Last updated:"}),i.jsx("span",{className:"ml-2",children:new Date(r.timestamp).toLocaleString()})]}),r.services&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"mt-3 text-sm font-medium",children:"Services:"}),i.jsx("div",{className:"space-y-1 mt-1",children:Object.entries(r.services).map(([h,g])=>i.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[i.jsx("div",{className:`w-2 h-2 rounded-full ${g==="healthy"?"bg-green-500":"bg-red-500"}`}),i.jsxs("span",{className:"text-gray-700 dark:text-gray-300",children:[h,":"]}),i.jsx("span",{className:g==="healthy"?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400",children:g})]},h))})]}),r.memoryUsage&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"mt-3 text-sm font-medium",children:"Memory Usage:"}),i.jsx("div",{className:"space-y-1 mt-1",children:Object.entries(r.memoryUsage).map(([h,g])=>i.jsxs("div",{className:"text-xs flex justify-between",children:[i.jsxs("span",{className:"text-gray-700 dark:text-gray-300",children:[h,":"]}),i.jsx("span",{children:g})]},h))})]})]}):a?i.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-md animate-pulse",children:[i.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded mb-2 w-1/2"}),i.jsx("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded mb-2 w-full"}),i.jsx("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded mb-2 w-3/4"}),i.jsx("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded mb-2 w-1/2"})]}):i.jsx("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-md",children:i.jsx("p",{className:"text-gray-500 italic",children:"No data available"})})]}),i.jsxs("div",{className:"col-span-1",children:[i.jsxs("h2",{className:"text-lg font-semibold mb-2 flex items-center gap-2",children:["Direct Health Check",i.jsx(te,{variant:"outline",size:"sm",onClick:S,disabled:d,className:"ml-auto",children:d?"Loading...":"Refresh"})]}),c?i.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-md",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx("div",{className:`w-3 h-3 rounded-full ${c.status==="ok"?"bg-green-500":"bg-red-500"}`}),i.jsx("span",{className:"font-medium",children:c.status==="ok"?"Healthy":"Unhealthy"})]}),c.timestamp&&i.jsxs("div",{className:"mt-2 text-sm",children:[i.jsx("span",{className:"text-gray-500",children:"Last updated:"}),i.jsx("span",{className:"ml-2",children:new Date(c.timestamp).toLocaleString()})]})]}):d?i.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-md animate-pulse",children:[i.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded mb-2 w-1/2"}),i.jsx("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded mb-2 w-full"})]}):i.jsx("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-md",children:i.jsx("p",{className:"text-gray-500 italic",children:"No data available"})})]})]}),i.jsx(Bi,{className:"my-6"}),i.jsx("h2",{className:"text-xl font-semibold mb-4",children:"WebSocket Connection Test"}),i.jsx(tH,{}),i.jsx(Bi,{className:"my-6"}),i.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[i.jsx("p",{children:"This page directly tests the health endpoints of BeatStream's backend services."}),i.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[i.jsxs("li",{children:["Basic Health: ",i.jsx("code",{children:"/api/health"})," - Shows basic system status"]}),i.jsxs("li",{children:["Detailed Health: ",i.jsx("code",{children:"/api/health/detailed"})," - Shows detailed system status with services"]}),i.jsxs("li",{children:["Direct Health Check: ",i.jsx("code",{children:"/api/health-check"})," - A simple and direct health check endpoint"]}),i.jsxs("li",{children:["WebSocket Test: Tests WebSocket connection to ",i.jsx("code",{children:"/ws"})," endpoint"]})]})]})]})]})})}function nH(){const[,e]=Nn(),{toast:t}=pr(),[r,n]=m.useState(!0),[s,o]=m.useState(null),[a,l]=m.useState(null);m.useEffect(()=>{const f=new URLSearchParams(window.location.search),p=f.get("id"),v=f.get("type");if(!p||!v){o("Missing content information"),n(!1);return}l({title:f.get("title")||"Content on BeatStream",description:f.get("description")||"",url:window.location.origin+f.get("returnUrl")||"/",type:v,imageUrl:f.get("imageUrl")||void 0}),n(!1)},[]);const c=f=>{if(!a)return;const p=`Check out this ${a.type} on BeatStream: ${a.title}`,v=encodeURIComponent(p),j=encodeURIComponent(a.url);let y="";switch(f){case"facebook":y=`https://www.facebook.com/sharer/sharer.php?u=${j}&quote=${v}`;break;case"twitter":y=`https://twitter.com/intent/tweet?text=${v}&url=${j}`;break;case"linkedin":y=`https://www.linkedin.com/sharing/share-offsite/?url=${j}`;break;case"reddit":y=`https://www.reddit.com/submit?url=${j}&title=${v}`;break;case"whatsapp":y=`https://wa.me/?text=${v}%20${j}`;break;case"telegram":y=`https://t.me/share/url?url=${j}&text=${v}`;break;default:return}window.open(y,"_blank","width=600,height=400")},u=async()=>{if(a)try{await navigator.clipboard.writeText(a.url),t({title:"Link copied!",description:"The link has been copied to your clipboard.",duration:3e3})}catch(f){console.error("Failed to copy:",f),t({title:"Failed to copy",description:"Please try again or copy the link manually.",variant:"destructive"})}},d=()=>{if(a!=null&&a.url){const f=new URL(a.url,window.location.origin);e(f.pathname)}else e("/")};return r?i.jsx("div",{className:"flex items-center justify-center min-h-screen",children:i.jsx(Kt,{size:"lg"})}):s?i.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 bg-gradient-to-b from-background to-background/80",children:i.jsxs("div",{className:"w-full max-w-md bg-card rounded-lg shadow-lg p-6 border",children:[i.jsx("h1",{className:"text-2xl font-bold text-destructive mb-4 text-center",children:"Error"}),i.jsx("p",{className:"text-center mb-6",children:s}),i.jsxs(te,{className:"w-full flex items-center justify-center gap-2",onClick:()=>e("/"),children:[i.jsx(y$,{size:16}),"Go Home"]})]})}):i.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 bg-gradient-to-b from-background to-background/80",children:i.jsxs("div",{className:"w-full max-w-md bg-card rounded-lg shadow-lg p-6 border",children:[i.jsxs("h1",{className:"text-2xl font-bold mb-6 text-center",children:["Share ",a==null?void 0:a.type]}),(a==null?void 0:a.imageUrl)&&i.jsx("div",{className:"mb-6 rounded-md overflow-hidden",children:i.jsx("img",{src:a.imageUrl,alt:a.title,className:"w-full h-40 object-cover"})}),i.jsxs("div",{className:"mb-6",children:[i.jsx("h2",{className:"font-semibold text-lg mb-1",children:a==null?void 0:a.title}),(a==null?void 0:a.description)&&i.jsx("p",{className:"text-sm text-muted-foreground",children:a.description})]}),i.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-6",children:[i.jsxs(te,{variant:"outline",className:"flex flex-col items-center justify-center p-4 h-auto gap-2",onClick:()=>c("facebook"),children:[i.jsx($T,{size:24,className:"text-blue-600"}),i.jsx("span",{className:"text-xs",children:"Facebook"})]}),i.jsxs(te,{variant:"outline",className:"flex flex-col items-center justify-center p-4 h-auto gap-2",onClick:()=>c("twitter"),children:[i.jsx(zT,{size:24,className:"text-sky-500"}),i.jsx("span",{className:"text-xs",children:"Twitter"})]}),i.jsxs(te,{variant:"outline",className:"flex flex-col items-center justify-center p-4 h-auto gap-2",onClick:()=>c("whatsapp"),children:[i.jsx(VT,{size:24,className:"text-green-500"}),i.jsx("span",{className:"text-xs",children:"WhatsApp"})]}),i.jsxs(te,{variant:"outline",className:"flex flex-col items-center justify-center p-4 h-auto gap-2",onClick:()=>c("telegram"),children:[i.jsx(BT,{size:24,className:"text-blue-500"}),i.jsx("span",{className:"text-xs",children:"Telegram"})]}),i.jsxs(te,{variant:"outline",className:"flex flex-col items-center justify-center p-4 h-auto gap-2",onClick:()=>c("linkedin"),children:[i.jsx(p$,{size:24,className:"text-blue-700"}),i.jsx("span",{className:"text-xs",children:"LinkedIn"})]}),i.jsxs(te,{variant:"outline",className:"flex flex-col items-center justify-center p-4 h-auto gap-2",onClick:()=>c("reddit"),children:[i.jsx(g$,{size:24,className:"text-orange-600"}),i.jsx("span",{className:"text-xs",children:"Reddit"})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx(te,{className:"w-full",onClick:u,children:"Copy Link"}),i.jsx(te,{variant:"outline",className:"w-full",onClick:d,children:"Return to Content"})]})]})})}async function sH(e){if(!e.trim())return[];try{const r=await(await fetch(`/api/search/tracks?query=${encodeURIComponent(e)}`)).json(),s=await(await fetch(`/api/search/users?query=${encodeURIComponent(e)}`)).json(),a=await(await fetch(`/api/search/streams?query=${encodeURIComponent(e)}`)).json(),c=await(await fetch(`/api/search/posts?query=${encodeURIComponent(e)}`)).json();return[...r.map(d=>({type:"track",id:d.id,title:d.title,artistName:d.artist_name,imageUrl:d.cover_url})),...s.map(d=>({type:"user",id:d.id,username:d.username,displayName:d.display_name,imageUrl:d.profile_image_url})),...a.map(d=>({type:"stream",id:d.id,title:d.title,description:d.description,imageUrl:d.thumbnail_url})),...c.map(d=>({type:"post",id:d.id,title:d.title,imageUrl:d.image_url}))].slice(0,20)}catch(t){return console.error("Error searching content:",t),[]}}function iH(){const[e,t]=Nn(),[r,n]=m.useState([]),[s,o]=m.useState(!0),[a,l]=m.useState("all"),[c,u]=m.useState(""),[d,f]=m.useState(null),p=new URLSearchParams(e.split("?")[1]).get("q")||"";m.useEffect(()=>{p&&u(p)},[p]),m.useEffect(()=>{async function _(){if(o(!0),f(null),p)try{const E=await sH(p);n(E)}catch(E){console.error("Search error:",E),f("An error occurred while searching. Please try again."),n([])}else n([]);o(!1)}_()},[p]);const v=_=>{_.preventDefault(),c.trim()&&t(`/search?q=${encodeURIComponent(c.trim())}`)},j=a==="all"?r:r.filter(_=>_.type===a),y=r.filter(_=>_.type==="track").length,S=r.filter(_=>_.type==="user").length,h=r.filter(_=>_.type==="stream").length,g=r.filter(_=>_.type==="post").length;return i.jsx($x,{children:i.jsxs("div",{className:"container mx-auto px-4 py-8",children:[i.jsxs("div",{className:"flex flex-col md:flex-row items-start justify-between mb-8 gap-4",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl md:text-3xl font-bold",children:"Search Results"}),i.jsx("p",{className:"text-muted-foreground mt-1",children:s?"Searching...":r.length>0?`Found ${r.length} results for "${p}"`:p?`No results found for "${p}"`:"Enter a search term to find content"})]}),i.jsxs("form",{onSubmit:v,className:"w-full md:w-auto flex gap-2",children:[i.jsxs("div",{className:"relative flex-1",children:[i.jsx(Rc,{className:"absolute left-3 top-2.5 h-4 w-4 text-muted-foreground"}),i.jsx(vt,{value:c,onChange:_=>u(_.target.value),placeholder:"Search again...",className:"pl-9 min-w-[260px]"})]}),i.jsx(te,{type:"submit",disabled:s||!c.trim(),children:"Search"})]})]}),d&&i.jsx("div",{className:"bg-destructive/10 border border-destructive text-destructive px-4 py-3 rounded-md mb-6",children:d}),i.jsxs(Cn,{defaultValue:"all",value:a,onValueChange:l,className:"mb-6",children:[i.jsxs(cn,{className:"mb-6 flex overflow-x-auto",children:[i.jsxs(rt,{value:"all",className:"flex items-center gap-2",children:["All Results ",i.jsx(Ct,{variant:"outline",children:r.length})]}),i.jsxs(rt,{value:"track",className:"flex items-center gap-2",children:[i.jsx(Nr,{className:"h-4 w-4"}),"Tracks ",i.jsx(Ct,{variant:"outline",children:y})]}),i.jsxs(rt,{value:"user",className:"flex items-center gap-2",children:[i.jsx(z2,{className:"h-4 w-4"}),"Users ",i.jsx(Ct,{variant:"outline",children:S})]}),i.jsxs(rt,{value:"stream",className:"flex items-center gap-2",children:[i.jsx(Ls,{className:"h-4 w-4"}),"Streams ",i.jsx(Ct,{variant:"outline",children:h})]}),i.jsxs(rt,{value:"post",className:"flex items-center gap-2",children:[i.jsx(ac,{className:"h-4 w-4"}),"Posts ",i.jsx(Ct,{variant:"outline",children:g})]})]}),i.jsx(nt,{value:"all",className:"mt-0",children:w()}),i.jsx(nt,{value:"track",className:"mt-0",children:w()}),i.jsx(nt,{value:"user",className:"mt-0",children:w()}),i.jsx(nt,{value:"stream",className:"mt-0",children:w()}),i.jsx(nt,{value:"post",className:"mt-0",children:w()})]})]})});function w(){return s?i.jsxs("div",{className:"flex flex-col justify-center items-center h-64",children:[i.jsx(gs,{className:"h-10 w-10 animate-spin text-primary mb-4"}),i.jsxs("p",{className:"text-muted-foreground",children:['Searching for "',p,'"...']})]}):j.length===0?i.jsxs("div",{className:"text-center py-12 px-4",children:[i.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-muted mb-4",children:i.jsx(Rc,{className:"h-8 w-8 text-muted-foreground"})}),i.jsx("h3",{className:"text-xl font-medium mb-2",children:"No results found"}),i.jsxs("p",{className:"text-muted-foreground mb-6 max-w-md mx-auto",children:[`We couldn't find any matches for "`,p,'" in this category. Try another search term or browse popular content.']}),i.jsxs("div",{className:"flex flex-wrap gap-3 justify-center",children:[i.jsx(te,{asChild:!0,variant:"outline",children:i.jsx(Oe,{href:"/",children:"Home"})}),i.jsx(te,{asChild:!0,variant:"outline",children:i.jsx(Oe,{href:"/discover",children:"Discover"})}),i.jsx(te,{asChild:!0,children:i.jsx(Oe,{href:"/tracks",children:"Browse Tracks"})})]})]}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:j.map(_=>i.jsx(oH,{result:_},`${_.type}-${_.id}`))})}}function oH({result:e}){const t=()=>{switch(e.type){case"track":return`/tracks/${e.id}`;case"user":return`/profile/${e.id}`;case"stream":return`/stream/${e.id}`;case"post":return`/posts/${e.id}`;default:return"/"}},r=()=>{switch(e.type){case"track":return i.jsx(Nr,{className:"h-5 w-5"});case"user":return i.jsx(z2,{className:"h-5 w-5"});case"stream":return i.jsx(Ls,{className:"h-5 w-5"});case"post":return i.jsx(ac,{className:"h-5 w-5"})}},n=()=>{switch(e.type){case"track":return"Track";case"user":return"User";case"stream":return"Live Stream";case"post":return"Post";default:return e.type}};return i.jsxs(Re,{className:"overflow-hidden hover:shadow-lg transition-all duration-300 group h-full flex flex-col",children:[i.jsxs("div",{className:"relative bg-gradient-to-r from-primary/10 to-primary/5 h-40 flex items-center justify-center overflow-hidden",children:[e.imageUrl?i.jsx("img",{src:e.imageUrl,alt:e.title||e.username||"",className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-105"}):i.jsxs("div",{className:"flex flex-col items-center justify-center",children:[r(),i.jsx("span",{className:"mt-2 uppercase text-xs tracking-wider",children:e.type})]}),i.jsx(Ct,{className:"absolute top-2 right-2",variant:e.type==="track"?"default":e.type==="user"?"secondary":e.type==="stream"?"destructive":"outline",children:n()})]}),i.jsx(Ae,{className:"pt-4 flex-1",children:i.jsxs("div",{className:"flex items-start gap-3",children:[e.type==="user"&&i.jsx(ys,{className:"h-10 w-10 border-2 border-background",children:i.jsx("img",{src:e.imageUrl||"/placeholder-avatar.png",alt:e.username||"User"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h3",{className:"font-medium text-lg truncate",children:e.title||e.displayName||e.username||"Untitled"}),i.jsxs("p",{className:"text-muted-foreground text-sm truncate",children:[e.type==="track"&&e.artistName,e.type==="stream"&&e.description,e.type==="user"&&`@${e.username}`,e.type==="post"&&(e.description||"View post details")]})]})]})}),i.jsx(nr,{className:"pt-0 mt-auto",children:i.jsx(te,{variant:"ghost",size:"sm",className:"ml-auto group-hover:bg-primary/10",asChild:!0,children:i.jsxs(Oe,{href:t(),children:["View details ",i.jsx(xL,{className:"ml-2 h-4 w-4 transition-transform group-hover:translate-x-1"})]})})})]})}function aH(){const{toast:e}=pr(),t=Ys(),[r,n]=m.useState(null),[s,o]=m.useState(null),{data:a,isLoading:l}=pt({queryKey:["/api/tracks"],refetchOnWindowFocus:!1}),{data:c,isLoading:u}=pt({queryKey:["/api/posts"],refetchOnWindowFocus:!1}),d=async p=>{n(p);try{const v=await st(`/api/posts/${p}`,{method:"DELETE"});v.success?(e({title:"Post deleted",description:`Successfully deleted post #${p}`}),t.invalidateQueries({queryKey:["/api/posts"]})):e({title:"Error deleting post",description:v.message||"Unknown error occurred",variant:"destructive"})}catch(v){console.error("Error deleting post:",v),e({title:"Error deleting post",description:"An unexpected error occurred",variant:"destructive"})}finally{n(null)}},f=async p=>{o(p);try{const v=await st(`/api/tracks/${p}`,{method:"DELETE"});v.success?(e({title:"Track deleted",description:`Successfully deleted track #${p}`}),t.invalidateQueries({queryKey:["/api/tracks"]})):e({title:"Error deleting track",description:v.message||"Unknown error occurred",variant:"destructive"})}catch(v){console.error("Error deleting track:",v),e({title:"Error deleting track",description:"An unexpected error occurred",variant:"destructive"})}finally{o(null)}};return i.jsxs("div",{className:"container py-8",children:[i.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Test Delete Endpoints"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs(Re,{children:[i.jsxs(Ye,{children:[i.jsx(He,{children:"Tracks"}),i.jsx(kt,{children:"Delete tracks to test the API endpoint"})]}),i.jsx(Ae,{children:l?i.jsx("p",{children:"Loading tracks..."}):a&&a.length>0?i.jsx("ul",{className:"space-y-2",children:a.map(p=>i.jsxs("li",{className:"flex justify-between items-center p-2 border rounded",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:p.title}),i.jsxs("p",{className:"text-sm text-gray-500",children:["ID: ",p.id]})]}),i.jsx(te,{variant:"destructive",size:"sm",onClick:()=>f(p.id),disabled:s===p.id,children:s===p.id?"Deleting...":"Delete"})]},p.id))}):i.jsx("p",{children:"No tracks available"})})]}),i.jsxs(Re,{children:[i.jsxs(Ye,{children:[i.jsx(He,{children:"Posts"}),i.jsx(kt,{children:"Delete posts to test the API endpoint"})]}),i.jsx(Ae,{children:u?i.jsx("p",{children:"Loading posts..."}):c&&c.length>0?i.jsx("ul",{className:"space-y-2",children:c.map(p=>i.jsxs("li",{className:"flex justify-between items-center p-2 border rounded",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:p.title}),i.jsxs("p",{className:"text-sm text-gray-500",children:["ID: ",p.id]})]}),i.jsx(te,{variant:"destructive",size:"sm",onClick:()=>d(p.id),disabled:r===p.id,children:r===p.id?"Deleting...":"Delete"})]},p.id))}):i.jsx("p",{children:"No posts available"})})]})]})]})}function lH(){return i.jsxs(HO,{children:[i.jsx(Br,{path:"/",component:YB}),i.jsx(Br,{path:"/streams",component:KV}),i.jsx(Br,{path:"/stream/:id",component:qV}),i.jsx(Br,{path:"/profile/:username",component:GV}),i.jsx(Br,{path:"/posts",component:QV}),i.jsx(Br,{path:"/posts/new",component:Iq}),i.jsx(Br,{path:"/settings",component:$q}),i.jsx(Br,{path:"/discover",component:zq}),i.jsx(Br,{path:"/library",component:Vq}),i.jsx(Br,{path:"/go-live",component:qq}),i.jsx(Br,{path:"/upload-track",component:Ab}),i.jsx(Br,{path:"/dashboard",component:Zq}),i.jsx(Br,{path:"/search",component:iH}),i.jsx(Br,{path:"/test-deletes",component:aH}),i.jsx(Ps,{path:"/auth",component:Gq}),i.jsx(Ps,{path:"/auth-test",component:Qq}),i.jsx(Ps,{path:"/health-test",component:rH}),i.jsx(Ps,{path:"/upload-public",component:Ab}),i.jsx(Ps,{path:"/share",component:nH}),i.jsx(Ps,{component:Bq})]})}function cH(){return i.jsx(h3,{client:ca,children:i.jsx(OF,{children:i.jsx(LF,{children:i.jsxs(IF,{children:[i.jsx(lH,{}),i.jsx(Xo,{}),i.jsx(s$,{}),i.jsx(RF,{})]})})})})}fD();FC(document.getElementById("root")).render(i.jsx(cH,{}));
